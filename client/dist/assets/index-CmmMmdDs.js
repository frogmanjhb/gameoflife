function _h(e,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Ch(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pu={exports:{}},ol={},fu={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $n=Symbol.for("react.element"),Eh=Symbol.for("react.portal"),Th=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),Ah=Symbol.for("react.provider"),Lh=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),Mh=Symbol.for("react.suspense"),Dh=Symbol.for("react.memo"),$h=Symbol.for("react.lazy"),Sc=Symbol.iterator;function Oh(e){return e===null||typeof e!="object"?null:(e=Sc&&e[Sc]||e["@@iterator"],typeof e=="function"?e:null)}var gu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yu=Object.assign,ju={};function $r(e,s,r){this.props=e,this.context=s,this.refs=ju,this.updater=r||gu}$r.prototype.isReactComponent={};$r.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};$r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vu(){}vu.prototype=$r.prototype;function go(e,s,r){this.props=e,this.context=s,this.refs=ju,this.updater=r||gu}var yo=go.prototype=new vu;yo.constructor=go;yu(yo,$r.prototype);yo.isPureReactComponent=!0;var kc=Array.isArray,bu=Object.prototype.hasOwnProperty,jo={current:null},Nu={key:!0,ref:!0,__self:!0,__source:!0};function wu(e,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)bu.call(s,n)&&!Nu.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:$n,type:e,key:l,ref:i,props:a,_owner:jo.current}}function zh(e,s){return{$$typeof:$n,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function vo(e){return typeof e=="object"&&e!==null&&e.$$typeof===$n}function Bh(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var _c=/\/+/g;function Rl(e,s){return typeof e=="object"&&e!==null&&e.key!=null?Bh(""+e.key):s.toString(36)}function ha(e,s,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case $n:case Eh:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Rl(i,0):n,kc(a)?(r="",e!=null&&(r=e.replace(_c,"$&/")+"/"),ha(a,s,r,"",function(d){return d})):a!=null&&(vo(a)&&(a=zh(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(_c,"$&/")+"/")+e)),s.push(a)),1;if(i=0,n=n===""?".":n+":",kc(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+Rl(l,o);i+=ha(l,s,r,c,a)}else if(c=Oh(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+Rl(l,o++),i+=ha(l,s,r,c,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Zn(e,s,r){if(e==null)return e;var n=[],a=0;return ha(e,n,"","",function(l){return s.call(r,l,a++)}),n}function Ih(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var Xe={current:null},pa={transition:null},Uh={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:pa,ReactCurrentOwner:jo};function Su(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Zn,forEach:function(e,s,r){Zn(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return Zn(e,function(){s++}),s},toArray:function(e){return Zn(e,function(s){return s})||[]},only:function(e){if(!vo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=$r;de.Fragment=Th;de.Profiler=Rh;de.PureComponent=go;de.StrictMode=Ph;de.Suspense=Mh;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uh;de.act=Su;de.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=yu({},e.props),a=e.key,l=e.ref,i=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=jo.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in s)bu.call(s,c)&&!Nu.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:$n,type:e.type,key:a,ref:l,props:n,_owner:i}};de.createContext=function(e){return e={$$typeof:Lh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ah,_context:e},e.Consumer=e};de.createElement=wu;de.createFactory=function(e){var s=wu.bind(null,e);return s.type=e,s};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Fh,render:e}};de.isValidElement=vo;de.lazy=function(e){return{$$typeof:$h,_payload:{_status:-1,_result:e},_init:Ih}};de.memo=function(e,s){return{$$typeof:Dh,type:e,compare:s===void 0?null:s}};de.startTransition=function(e){var s=pa.transition;pa.transition={};try{e()}finally{pa.transition=s}};de.unstable_act=Su;de.useCallback=function(e,s){return Xe.current.useCallback(e,s)};de.useContext=function(e){return Xe.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Xe.current.useDeferredValue(e)};de.useEffect=function(e,s){return Xe.current.useEffect(e,s)};de.useId=function(){return Xe.current.useId()};de.useImperativeHandle=function(e,s,r){return Xe.current.useImperativeHandle(e,s,r)};de.useInsertionEffect=function(e,s){return Xe.current.useInsertionEffect(e,s)};de.useLayoutEffect=function(e,s){return Xe.current.useLayoutEffect(e,s)};de.useMemo=function(e,s){return Xe.current.useMemo(e,s)};de.useReducer=function(e,s,r){return Xe.current.useReducer(e,s,r)};de.useRef=function(e){return Xe.current.useRef(e)};de.useState=function(e){return Xe.current.useState(e)};de.useSyncExternalStore=function(e,s,r){return Xe.current.useSyncExternalStore(e,s,r)};de.useTransition=function(){return Xe.current.useTransition()};de.version="18.3.1";fu.exports=de;var x=fu.exports;const ku=Ch(x),Hh=_h({__proto__:null,default:ku},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=x,Wh=Symbol.for("react.element"),qh=Symbol.for("react.fragment"),Jh=Object.prototype.hasOwnProperty,Zh=Vh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qh={key:!0,ref:!0,__self:!0,__source:!0};function _u(e,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)Jh.call(s,n)&&!Qh.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Wh,type:e,key:l,ref:i,props:a,_owner:Zh.current}}ol.Fragment=qh;ol.jsx=_u;ol.jsxs=_u;pu.exports=ol;var t=pu.exports,ui={},Cu={exports:{}},jt={},Eu={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(M,T){var U=M.length;M.push(T);e:for(;0<U;){var W=U-1>>>1,G=M[W];if(0<a(G,T))M[W]=T,M[U]=G,U=W;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var T=M[0],U=M.pop();if(U!==T){M[0]=U;e:for(var W=0,G=M.length,J=G>>>1;W<J;){var re=2*(W+1)-1,X=M[re],le=re+1,ne=M[le];if(0>a(X,U))le<G&&0>a(ne,X)?(M[W]=ne,M[le]=U,W=le):(M[W]=X,M[re]=U,W=re);else if(le<G&&0>a(ne,U))M[W]=ne,M[le]=U,W=le;else break e}}return T}function a(M,T){var U=M.sortIndex-T.sortIndex;return U!==0?U:M.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],p=1,u=null,y=3,f=!1,g=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var T=r(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=M)n(d),T.sortIndex=T.expirationTime,s(c,T);else break;T=r(d)}}function N(M){if(j=!1,v(M),!g)if(r(c)!==null)g=!0,q(C);else{var T=r(d);T!==null&&ae(N,T.startTime-M)}}function C(M,T){g=!1,j&&(j=!1,h(D),D=-1),f=!0;var U=y;try{for(v(T),u=r(c);u!==null&&(!(u.expirationTime>T)||M&&!_());){var W=u.callback;if(typeof W=="function"){u.callback=null,y=u.priorityLevel;var G=W(u.expirationTime<=T);T=e.unstable_now(),typeof G=="function"?u.callback=G:u===r(c)&&n(c),v(T)}else n(c);u=r(c)}if(u!==null)var J=!0;else{var re=r(d);re!==null&&ae(N,re.startTime-T),J=!1}return J}finally{u=null,y=U,f=!1}}var R=!1,k=null,D=-1,L=5,S=-1;function _(){return!(e.unstable_now()-S<L)}function b(){if(k!==null){var M=e.unstable_now();S=M;var T=!0;try{T=k(!0,M)}finally{T?A():(R=!1,k=null)}}else R=!1}var A;if(typeof m=="function")A=function(){m(b)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=b,A=function(){H.postMessage(null)}}else A=function(){w(b,0)};function q(M){k=M,R||(R=!0,A())}function ae(M,T){D=w(function(){M(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,q(C))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var T=3;break;default:T=y}var U=y;y=T;try{return M()}finally{y=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,T){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=y;y=M;try{return T()}finally{y=U}},e.unstable_scheduleCallback=function(M,T,U){var W=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,M){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=U+G,M={id:p++,callback:T,priorityLevel:M,startTime:U,expirationTime:G,sortIndex:-1},U>W?(M.sortIndex=U,s(d,M),r(c)===null&&M===r(d)&&(j?(h(D),D=-1):j=!0,ae(N,U-W))):(M.sortIndex=G,s(c,M),g||f||(g=!0,q(C))),M},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(M){var T=y;return function(){var U=y;y=T;try{return M.apply(this,arguments)}finally{y=U}}}})(Tu);Eu.exports=Tu;var Gh=Eu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh=x,yt=Gh;function I(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pu=new Set,fn={};function rr(e,s){Tr(e,s),Tr(e+"Capture",s)}function Tr(e,s){for(fn[e]=s,e=0;e<s.length;e++)Pu.add(s[e])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mi=Object.prototype.hasOwnProperty,Yh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cc={},Ec={};function Xh(e){return mi.call(Ec,e)?!0:mi.call(Cc,e)?!1:Yh.test(e)?Ec[e]=!0:(Cc[e]=!0,!1)}function ep(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tp(e,s,r,n){if(s===null||typeof s>"u"||ep(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function et(e,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];He[s]=new et(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new et(e,5,!1,e.toLowerCase(),null,!1,!1)});var bo=/[\-:]([a-z])/g;function No(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(bo,No);He[s]=new et(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(bo,No);He[s]=new et(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(bo,No);He[s]=new et(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new et(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new et(e,1,!1,e.toLowerCase(),null,!0,!0)});function wo(e,s,r,n){var a=He.hasOwnProperty(s)?He[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(tp(s,r,a,n)&&(r=null),n||a===null?Xh(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var ds=Kh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qn=Symbol.for("react.element"),ir=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),So=Symbol.for("react.strict_mode"),xi=Symbol.for("react.profiler"),Ru=Symbol.for("react.provider"),Au=Symbol.for("react.context"),ko=Symbol.for("react.forward_ref"),hi=Symbol.for("react.suspense"),pi=Symbol.for("react.suspense_list"),_o=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),Lu=Symbol.for("react.offscreen"),Tc=Symbol.iterator;function Wr(e){return e===null||typeof e!="object"?null:(e=Tc&&e[Tc]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,Al;function en(e){if(Al===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Al=s&&s[1]||""}return`
`+Al+e}var Ll=!1;function Fl(e,s){if(!e||Ll)return"";Ll=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(e,[],s)}else{try{s.call()}catch(d){n=d}e.call(s.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Ll=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?en(e):""}function sp(e){switch(e.tag){case 5:return en(e.type);case 16:return en("Lazy");case 13:return en("Suspense");case 19:return en("SuspenseList");case 0:case 2:case 15:return e=Fl(e.type,!1),e;case 11:return e=Fl(e.type.render,!1),e;case 1:return e=Fl(e.type,!0),e;default:return""}}function fi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case or:return"Fragment";case ir:return"Portal";case xi:return"Profiler";case So:return"StrictMode";case hi:return"Suspense";case pi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Au:return(e.displayName||"Context")+".Consumer";case Ru:return(e._context.displayName||"Context")+".Provider";case ko:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _o:return s=e.displayName||null,s!==null?s:fi(e.type)||"Memo";case ps:s=e._payload,e=e._init;try{return fi(e(s))}catch{}}return null}function rp(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fi(s);case 8:return s===So?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function As(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fu(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function np(e){var s=Fu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Gn(e){e._valueTracker||(e._valueTracker=np(e))}function Mu(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=Fu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function Ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gi(e,s){var r=s.checked;return ke({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pc(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=As(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Du(e,s){s=s.checked,s!=null&&wo(e,"checked",s,!1)}function yi(e,s){Du(e,s);var r=As(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?ji(e,s.type,r):s.hasOwnProperty("defaultValue")&&ji(e,s.type,As(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Rc(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ji(e,s,r){(s!=="number"||Ra(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var tn=Array.isArray;function vr(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+As(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function vi(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(I(91));return ke({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ac(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(I(92));if(tn(r)){if(1<r.length)throw Error(I(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:As(r)}}function $u(e,s){var r=As(s.value),n=As(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Lc(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function Ou(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bi(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?Ou(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kn,zu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Kn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function gn(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ap=["Webkit","ms","Moz","O"];Object.keys(nn).forEach(function(e){ap.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),nn[s]=nn[e]})});function Bu(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||nn.hasOwnProperty(e)&&nn[e]?(""+s).trim():s+"px"}function Iu(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Bu(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var lp=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(e,s){if(s){if(lp[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(I(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(I(61))}if(s.style!=null&&typeof s.style!="object")throw Error(I(62))}}function wi(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Si=null;function Co(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ki=null,br=null,Nr=null;function Fc(e){if(e=Bn(e)){if(typeof ki!="function")throw Error(I(280));var s=e.stateNode;s&&(s=xl(s),ki(e.stateNode,e.type,s))}}function Uu(e){br?Nr?Nr.push(e):Nr=[e]:br=e}function Hu(){if(br){var e=br,s=Nr;if(Nr=br=null,Fc(e),s)for(e=0;e<s.length;e++)Fc(s[e])}}function Vu(e,s){return e(s)}function Wu(){}var Ml=!1;function qu(e,s,r){if(Ml)return e(s,r);Ml=!0;try{return Vu(e,s,r)}finally{Ml=!1,(br!==null||Nr!==null)&&(Wu(),Hu())}}function yn(e,s){var r=e.stateNode;if(r===null)return null;var n=xl(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(I(231,s,typeof r));return r}var _i=!1;if(as)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){_i=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{_i=!1}function ip(e,s,r,n,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(p){this.onError(p)}}var an=!1,Aa=null,La=!1,Ci=null,op={onError:function(e){an=!0,Aa=e}};function cp(e,s,r,n,a,l,i,o,c){an=!1,Aa=null,ip.apply(op,arguments)}function dp(e,s,r,n,a,l,i,o,c){if(cp.apply(this,arguments),an){if(an){var d=Aa;an=!1,Aa=null}else throw Error(I(198));La||(La=!0,Ci=d)}}function nr(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function Ju(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Mc(e){if(nr(e)!==e)throw Error(I(188))}function up(e){var s=e.alternate;if(!s){if(s=nr(e),s===null)throw Error(I(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return Mc(a),e;if(l===n)return Mc(a),s;l=l.sibling}throw Error(I(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?e:s}function Zu(e){return e=up(e),e!==null?Qu(e):null}function Qu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=Qu(e);if(s!==null)return s;e=e.sibling}return null}var Gu=yt.unstable_scheduleCallback,Dc=yt.unstable_cancelCallback,mp=yt.unstable_shouldYield,xp=yt.unstable_requestPaint,Ee=yt.unstable_now,hp=yt.unstable_getCurrentPriorityLevel,Eo=yt.unstable_ImmediatePriority,Ku=yt.unstable_UserBlockingPriority,Fa=yt.unstable_NormalPriority,pp=yt.unstable_LowPriority,Yu=yt.unstable_IdlePriority,cl=null,qt=null;function fp(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(cl,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:jp,gp=Math.log,yp=Math.LN2;function jp(e){return e>>>=0,e===0?32:31-(gp(e)/yp|0)|0}var Yn=64,Xn=4194304;function sn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ma(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=sn(o):(l&=i,l!==0&&(n=sn(l)))}else i=r&~a,i!==0?n=sn(i):l!==0&&(n=sn(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-Mt(s),a=1<<r,n|=e[r],s&=~a;return n}function vp(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bp(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Mt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=vp(o,s)):c<=s&&(e.expiredLanes|=o),l&=~o}}function Ei(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xu(){var e=Yn;return Yn<<=1,!(Yn&4194240)&&(Yn=64),e}function Dl(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function On(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-Mt(s),e[s]=r}function Np(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Mt(r),l=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function To(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-Mt(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var fe=0;function em(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tm,Po,sm,rm,nm,Ti=!1,ea=[],Ns=null,ws=null,Ss=null,jn=new Map,vn=new Map,gs=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(e,s){switch(e){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":jn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(s.pointerId)}}function Jr(e,s,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Bn(s),s!==null&&Po(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Sp(e,s,r,n,a){switch(s){case"focusin":return Ns=Jr(Ns,e,s,r,n,a),!0;case"dragenter":return ws=Jr(ws,e,s,r,n,a),!0;case"mouseover":return Ss=Jr(Ss,e,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return jn.set(l,Jr(jn.get(l)||null,e,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,vn.set(l,Jr(vn.get(l)||null,e,s,r,n,a)),!0}return!1}function am(e){var s=Vs(e.target);if(s!==null){var r=nr(s);if(r!==null){if(s=r.tag,s===13){if(s=Ju(r),s!==null){e.blockedOn=s,nm(e.priority,function(){sm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fa(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Pi(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Si=n,r.target.dispatchEvent(n),Si=null}else return s=Bn(r),s!==null&&Po(s),e.blockedOn=r,!1;s.shift()}return!0}function Oc(e,s,r){fa(e)&&r.delete(s)}function kp(){Ti=!1,Ns!==null&&fa(Ns)&&(Ns=null),ws!==null&&fa(ws)&&(ws=null),Ss!==null&&fa(Ss)&&(Ss=null),jn.forEach(Oc),vn.forEach(Oc)}function Zr(e,s){e.blockedOn===s&&(e.blockedOn=null,Ti||(Ti=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,kp)))}function bn(e){function s(a){return Zr(a,e)}if(0<ea.length){Zr(ea[0],e);for(var r=1;r<ea.length;r++){var n=ea[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ns!==null&&Zr(Ns,e),ws!==null&&Zr(ws,e),Ss!==null&&Zr(Ss,e),jn.forEach(s),vn.forEach(s),r=0;r<gs.length;r++)n=gs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<gs.length&&(r=gs[0],r.blockedOn===null);)am(r),r.blockedOn===null&&gs.shift()}var wr=ds.ReactCurrentBatchConfig,Da=!0;function _p(e,s,r,n){var a=fe,l=wr.transition;wr.transition=null;try{fe=1,Ro(e,s,r,n)}finally{fe=a,wr.transition=l}}function Cp(e,s,r,n){var a=fe,l=wr.transition;wr.transition=null;try{fe=4,Ro(e,s,r,n)}finally{fe=a,wr.transition=l}}function Ro(e,s,r,n){if(Da){var a=Pi(e,s,r,n);if(a===null)ql(e,s,n,$a,r),$c(e,n);else if(Sp(a,e,s,r,n))n.stopPropagation();else if($c(e,n),s&4&&-1<wp.indexOf(e)){for(;a!==null;){var l=Bn(a);if(l!==null&&tm(l),l=Pi(e,s,r,n),l===null&&ql(e,s,n,$a,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else ql(e,s,n,null,r)}}var $a=null;function Pi(e,s,r,n){if($a=null,e=Co(n),e=Vs(e),e!==null)if(s=nr(e),s===null)e=null;else if(r=s.tag,r===13){if(e=Ju(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return $a=e,null}function lm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hp()){case Eo:return 1;case Ku:return 4;case Fa:case pp:return 16;case Yu:return 536870912;default:return 16}default:return 16}}var js=null,Ao=null,ga=null;function im(){if(ga)return ga;var e,s=Ao,r=s.length,n,a="value"in js?js.value:js.textContent,l=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return ga=a.slice(e,1<n?1-n:void 0)}function ya(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ta(){return!0}function zc(){return!1}function vt(e){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ta:zc,this.isPropagationStopped=zc,this}return ke(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),s}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=vt(Or),zn=ke({},Or,{view:0,detail:0}),Ep=vt(zn),$l,Ol,Qr,dl=ke({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?($l=e.screenX-Qr.screenX,Ol=e.screenY-Qr.screenY):Ol=$l=0,Qr=e),$l)},movementY:function(e){return"movementY"in e?e.movementY:Ol}}),Bc=vt(dl),Tp=ke({},dl,{dataTransfer:0}),Pp=vt(Tp),Rp=ke({},zn,{relatedTarget:0}),zl=vt(Rp),Ap=ke({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),Lp=vt(Ap),Fp=ke({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mp=vt(Fp),Dp=ke({},Or,{data:0}),Ic=vt(Dp),$p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bp(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=zp[e])?!!s[e]:!1}function Fo(){return Bp}var Ip=ke({},zn,{key:function(e){if(e.key){var s=$p[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Op[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(e){return e.type==="keypress"?ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Up=vt(Ip),Hp=ke({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=vt(Hp),Vp=ke({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),Wp=vt(Vp),qp=ke({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jp=vt(qp),Zp=ke({},dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qp=vt(Zp),Gp=[9,13,27,32],Mo=as&&"CompositionEvent"in window,ln=null;as&&"documentMode"in document&&(ln=document.documentMode);var Kp=as&&"TextEvent"in window&&!ln,om=as&&(!Mo||ln&&8<ln&&11>=ln),Hc=" ",Vc=!1;function cm(e,s){switch(e){case"keyup":return Gp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cr=!1;function Yp(e,s){switch(e){case"compositionend":return dm(s);case"keypress":return s.which!==32?null:(Vc=!0,Hc);case"textInput":return e=s.data,e===Hc&&Vc?null:e;default:return null}}function Xp(e,s){if(cr)return e==="compositionend"||!Mo&&cm(e,s)?(e=im(),ga=Ao=js=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return om&&s.locale!=="ko"?null:s.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!e0[e.type]:s==="textarea"}function um(e,s,r,n){Uu(n),s=Oa(s,"onChange"),0<s.length&&(r=new Lo("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var on=null,Nn=null;function t0(e){Nm(e,0)}function ul(e){var s=mr(e);if(Mu(s))return e}function s0(e,s){if(e==="change")return s}var mm=!1;if(as){var Bl;if(as){var Il="oninput"in document;if(!Il){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),Il=typeof qc.oninput=="function"}Bl=Il}else Bl=!1;mm=Bl&&(!document.documentMode||9<document.documentMode)}function Jc(){on&&(on.detachEvent("onpropertychange",xm),Nn=on=null)}function xm(e){if(e.propertyName==="value"&&ul(Nn)){var s=[];um(s,Nn,e,Co(e)),qu(t0,s)}}function r0(e,s,r){e==="focusin"?(Jc(),on=s,Nn=r,on.attachEvent("onpropertychange",xm)):e==="focusout"&&Jc()}function n0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(Nn)}function a0(e,s){if(e==="click")return ul(s)}function l0(e,s){if(e==="input"||e==="change")return ul(s)}function i0(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ot=typeof Object.is=="function"?Object.is:i0;function wn(e,s){if(Ot(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!mi.call(s,a)||!Ot(e[a],s[a]))return!1}return!0}function Zc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,s){var r=Zc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zc(r)}}function hm(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?hm(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function pm(){for(var e=window,s=Ra();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Ra(e.document)}return s}function Do(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function o0(e){var s=pm(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&hm(r.ownerDocument.documentElement,r)){if(n!==null&&Do(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Qc(r,l);var i=Qc(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c0=as&&"documentMode"in document&&11>=document.documentMode,dr=null,Ri=null,cn=null,Ai=!1;function Gc(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ai||dr==null||dr!==Ra(n)||(n=dr,"selectionStart"in n&&Do(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),cn&&wn(cn,n)||(cn=n,n=Oa(Ri,"onSelect"),0<n.length&&(s=new Lo("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=dr)))}function sa(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var ur={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Ul={},fm={};as&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function ml(e){if(Ul[e])return Ul[e];if(!ur[e])return e;var s=ur[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in fm)return Ul[e]=s[r];return e}var gm=ml("animationend"),ym=ml("animationiteration"),jm=ml("animationstart"),vm=ml("transitionend"),bm=new Map,Kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(e,s){bm.set(e,s),rr(s,[e])}for(var Hl=0;Hl<Kc.length;Hl++){var Vl=Kc[Hl],d0=Vl.toLowerCase(),u0=Vl[0].toUpperCase()+Vl.slice(1);Fs(d0,"on"+u0)}Fs(gm,"onAnimationEnd");Fs(ym,"onAnimationIteration");Fs(jm,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(vm,"onTransitionEnd");Tr("onMouseEnter",["mouseout","mouseover"]);Tr("onMouseLeave",["mouseout","mouseover"]);Tr("onPointerEnter",["pointerout","pointerover"]);Tr("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("cancel close invalid load scroll toggle".split(" ").concat(rn));function Yc(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,dp(n,s,void 0,e),e.currentTarget=null}function Nm(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;Yc(a,o,d),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;Yc(a,o,d),l=c}}}if(La)throw e=Ci,La=!1,Ci=null,e}function ve(e,s){var r=s[$i];r===void 0&&(r=s[$i]=new Set);var n=e+"__bubble";r.has(n)||(wm(s,e,2,!1),r.add(n))}function Wl(e,s,r){var n=0;s&&(n|=4),wm(r,e,n,s)}var ra="_reactListening"+Math.random().toString(36).slice(2);function Sn(e){if(!e[ra]){e[ra]=!0,Pu.forEach(function(r){r!=="selectionchange"&&(m0.has(r)||Wl(r,!1,e),Wl(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[ra]||(s[ra]=!0,Wl("selectionchange",!1,s))}}function wm(e,s,r,n){switch(lm(s)){case 1:var a=_p;break;case 4:a=Cp;break;default:a=Ro}r=a.bind(null,s,r,e),a=void 0,!_i||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function ql(e,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Vs(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}qu(function(){var d=l,p=Co(r),u=[];e:{var y=bm.get(e);if(y!==void 0){var f=Lo,g=e;switch(e){case"keypress":if(ya(r)===0)break e;case"keydown":case"keyup":f=Up;break;case"focusin":g="focus",f=zl;break;case"focusout":g="blur",f=zl;break;case"beforeblur":case"afterblur":f=zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Pp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Wp;break;case gm:case ym:case jm:f=Lp;break;case vm:f=Jp;break;case"scroll":f=Ep;break;case"wheel":f=Qp;break;case"copy":case"cut":case"paste":f=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Uc}var j=(s&4)!==0,w=!j&&e==="scroll",h=j?y!==null?y+"Capture":null:y;j=[];for(var m=d,v;m!==null;){v=m;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,h!==null&&(N=yn(m,h),N!=null&&j.push(kn(m,N,v)))),w)break;m=m.return}0<j.length&&(y=new f(y,g,null,r,p),u.push({event:y,listeners:j}))}}if(!(s&7)){e:{if(y=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",y&&r!==Si&&(g=r.relatedTarget||r.fromElement)&&(Vs(g)||g[ls]))break e;if((f||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=d,g=g?Vs(g):null,g!==null&&(w=nr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=d),f!==g)){if(j=Bc,N="onMouseLeave",h="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(j=Uc,N="onPointerLeave",h="onPointerEnter",m="pointer"),w=f==null?y:mr(f),v=g==null?y:mr(g),y=new j(N,m+"leave",f,r,p),y.target=w,y.relatedTarget=v,N=null,Vs(p)===d&&(j=new j(h,m+"enter",g,r,p),j.target=v,j.relatedTarget=w,N=j),w=N,f&&g)t:{for(j=f,h=g,m=0,v=j;v;v=ar(v))m++;for(v=0,N=h;N;N=ar(N))v++;for(;0<m-v;)j=ar(j),m--;for(;0<v-m;)h=ar(h),v--;for(;m--;){if(j===h||h!==null&&j===h.alternate)break t;j=ar(j),h=ar(h)}j=null}else j=null;f!==null&&Xc(u,y,f,j,!1),g!==null&&w!==null&&Xc(u,w,g,j,!0)}}e:{if(y=d?mr(d):window,f=y.nodeName&&y.nodeName.toLowerCase(),f==="select"||f==="input"&&y.type==="file")var C=s0;else if(Wc(y))if(mm)C=l0;else{C=n0;var R=r0}else(f=y.nodeName)&&f.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(C=a0);if(C&&(C=C(e,d))){um(u,C,r,p);break e}R&&R(e,y,d),e==="focusout"&&(R=y._wrapperState)&&R.controlled&&y.type==="number"&&ji(y,"number",y.value)}switch(R=d?mr(d):window,e){case"focusin":(Wc(R)||R.contentEditable==="true")&&(dr=R,Ri=d,cn=null);break;case"focusout":cn=Ri=dr=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,Gc(u,r,p);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":Gc(u,r,p)}var k;if(Mo)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else cr?cm(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(om&&r.locale!=="ko"&&(cr||D!=="onCompositionStart"?D==="onCompositionEnd"&&cr&&(k=im()):(js=p,Ao="value"in js?js.value:js.textContent,cr=!0)),R=Oa(d,D),0<R.length&&(D=new Ic(D,e,null,r,p),u.push({event:D,listeners:R}),k?D.data=k:(k=dm(r),k!==null&&(D.data=k)))),(k=Kp?Yp(e,r):Xp(e,r))&&(d=Oa(d,"onBeforeInput"),0<d.length&&(p=new Ic("onBeforeInput","beforeinput",null,r,p),u.push({event:p,listeners:d}),p.data=k))}Nm(u,s)})}function kn(e,s,r){return{instance:e,listener:s,currentTarget:r}}function Oa(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=yn(e,r),l!=null&&n.unshift(kn(e,l,a)),l=yn(e,s),l!=null&&n.push(kn(e,l,a))),e=e.return}return n}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xc(e,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=yn(r,l),c!=null&&i.unshift(kn(r,c,o))):a||(c=yn(r,l),c!=null&&i.push(kn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:s,listeners:i})}var x0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function ed(e){return(typeof e=="string"?e:""+e).replace(x0,`
`).replace(h0,"")}function na(e,s,r){if(s=ed(s),ed(e)!==s&&r)throw Error(I(425))}function za(){}var Li=null,Fi=null;function Mi(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Di=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,f0=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(e){return td.resolve(null).then(e).catch(g0)}:Di;function g0(e){setTimeout(function(){throw e})}function Jl(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),bn(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);bn(s)}function ks(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function sd(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var zr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+zr,_n="__reactProps$"+zr,ls="__reactContainer$"+zr,$i="__reactEvents$"+zr,y0="__reactListeners$"+zr,j0="__reactHandles$"+zr;function Vs(e){var s=e[Wt];if(s)return s;for(var r=e.parentNode;r;){if(s=r[ls]||r[Wt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=sd(e);e!==null;){if(r=e[Wt])return r;e=sd(e)}return s}e=r,r=e.parentNode}return null}function Bn(e){return e=e[Wt]||e[ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function xl(e){return e[_n]||null}var Oi=[],xr=-1;function Ms(e){return{current:e}}function be(e){0>xr||(e.current=Oi[xr],Oi[xr]=null,xr--)}function ge(e,s){xr++,Oi[xr]=e.current,e.current=s}var Ls={},Ge=Ms(Ls),nt=Ms(!1),Ks=Ls;function Pr(e,s){var r=e.type.contextTypes;if(!r)return Ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function at(e){return e=e.childContextTypes,e!=null}function Ba(){be(nt),be(Ge)}function rd(e,s,r){if(Ge.current!==Ls)throw Error(I(168));ge(Ge,s),ge(nt,r)}function Sm(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(I(108,rp(e)||"Unknown",a));return ke({},r,n)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Ks=Ge.current,ge(Ge,e),ge(nt,nt.current),!0}function nd(e,s,r){var n=e.stateNode;if(!n)throw Error(I(169));r?(e=Sm(e,s,Ks),n.__reactInternalMemoizedMergedChildContext=e,be(nt),be(Ge),ge(Ge,e)):be(nt),ge(nt,r)}var Xt=null,hl=!1,Zl=!1;function km(e){Xt===null?Xt=[e]:Xt.push(e)}function v0(e){hl=!0,km(e)}function Ds(){if(!Zl&&Xt!==null){Zl=!0;var e=0,s=fe;try{var r=Xt;for(fe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Xt=null,hl=!1}catch(a){throw Xt!==null&&(Xt=Xt.slice(e+1)),Gu(Eo,Ds),a}finally{fe=s,Zl=!1}}return null}var hr=[],pr=0,Ua=null,Ha=0,wt=[],St=0,Ys=null,ts=1,ss="";function Is(e,s){hr[pr++]=Ha,hr[pr++]=Ua,Ua=e,Ha=s}function _m(e,s,r){wt[St++]=ts,wt[St++]=ss,wt[St++]=Ys,Ys=e;var n=ts;e=ss;var a=32-Mt(n)-1;n&=~(1<<a),r+=1;var l=32-Mt(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,ts=1<<32-Mt(s)+a|r<<a|n,ss=l+e}else ts=1<<l|r<<a|n,ss=e}function $o(e){e.return!==null&&(Is(e,1),_m(e,1,0))}function Oo(e){for(;e===Ua;)Ua=hr[--pr],hr[pr]=null,Ha=hr[--pr],hr[pr]=null;for(;e===Ys;)Ys=wt[--St],wt[St]=null,ss=wt[--St],wt[St]=null,ts=wt[--St],wt[St]=null}var ft=null,pt=null,Ne=!1,Ft=null;function Cm(e,s){var r=kt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function ad(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,ft=e,pt=ks(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,ft=e,pt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Ys!==null?{id:ts,overflow:ss}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=kt(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,ft=e,pt=null,!0):!1;default:return!1}}function zi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bi(e){if(Ne){var s=pt;if(s){var r=s;if(!ad(e,s)){if(zi(e))throw Error(I(418));s=ks(r.nextSibling);var n=ft;s&&ad(e,s)?Cm(n,r):(e.flags=e.flags&-4097|2,Ne=!1,ft=e)}}else{if(zi(e))throw Error(I(418));e.flags=e.flags&-4097|2,Ne=!1,ft=e}}}function ld(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function aa(e){if(e!==ft)return!1;if(!Ne)return ld(e),Ne=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Mi(e.type,e.memoizedProps)),s&&(s=pt)){if(zi(e))throw Em(),Error(I(418));for(;s;)Cm(e,s),s=ks(s.nextSibling)}if(ld(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){pt=ks(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}pt=null}}else pt=ft?ks(e.stateNode.nextSibling):null;return!0}function Em(){for(var e=pt;e;)e=ks(e.nextSibling)}function Rr(){pt=ft=null,Ne=!1}function zo(e){Ft===null?Ft=[e]:Ft.push(e)}var b0=ds.ReactCurrentBatchConfig;function Gr(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,e));var a=n,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof e!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,e))}return e}function la(e,s){throw e=Object.prototype.toString.call(s),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function id(e){var s=e._init;return s(e._payload)}function Tm(e){function s(h,m){if(e){var v=h.deletions;v===null?(h.deletions=[m],h.flags|=16):v.push(m)}}function r(h,m){if(!e)return null;for(;m!==null;)s(h,m),m=m.sibling;return null}function n(h,m){for(h=new Map;m!==null;)m.key!==null?h.set(m.key,m):h.set(m.index,m),m=m.sibling;return h}function a(h,m){return h=Ts(h,m),h.index=0,h.sibling=null,h}function l(h,m,v){return h.index=v,e?(v=h.alternate,v!==null?(v=v.index,v<m?(h.flags|=2,m):v):(h.flags|=2,m)):(h.flags|=1048576,m)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function o(h,m,v,N){return m===null||m.tag!==6?(m=ti(v,h.mode,N),m.return=h,m):(m=a(m,v),m.return=h,m)}function c(h,m,v,N){var C=v.type;return C===or?p(h,m,v.props.children,N,v.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ps&&id(C)===m.type)?(N=a(m,v.props),N.ref=Gr(h,m,v),N.return=h,N):(N=ka(v.type,v.key,v.props,null,h.mode,N),N.ref=Gr(h,m,v),N.return=h,N)}function d(h,m,v,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=si(v,h.mode,N),m.return=h,m):(m=a(m,v.children||[]),m.return=h,m)}function p(h,m,v,N,C){return m===null||m.tag!==7?(m=Qs(v,h.mode,N,C),m.return=h,m):(m=a(m,v),m.return=h,m)}function u(h,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ti(""+m,h.mode,v),m.return=h,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qn:return v=ka(m.type,m.key,m.props,null,h.mode,v),v.ref=Gr(h,null,m),v.return=h,v;case ir:return m=si(m,h.mode,v),m.return=h,m;case ps:var N=m._init;return u(h,N(m._payload),v)}if(tn(m)||Wr(m))return m=Qs(m,h.mode,v,null),m.return=h,m;la(h,m)}return null}function y(h,m,v,N){var C=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(h,m,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qn:return v.key===C?c(h,m,v,N):null;case ir:return v.key===C?d(h,m,v,N):null;case ps:return C=v._init,y(h,m,C(v._payload),N)}if(tn(v)||Wr(v))return C!==null?null:p(h,m,v,N,null);la(h,v)}return null}function f(h,m,v,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return h=h.get(v)||null,o(m,h,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Qn:return h=h.get(N.key===null?v:N.key)||null,c(m,h,N,C);case ir:return h=h.get(N.key===null?v:N.key)||null,d(m,h,N,C);case ps:var R=N._init;return f(h,m,v,R(N._payload),C)}if(tn(N)||Wr(N))return h=h.get(v)||null,p(m,h,N,C,null);la(m,N)}return null}function g(h,m,v,N){for(var C=null,R=null,k=m,D=m=0,L=null;k!==null&&D<v.length;D++){k.index>D?(L=k,k=null):L=k.sibling;var S=y(h,k,v[D],N);if(S===null){k===null&&(k=L);break}e&&k&&S.alternate===null&&s(h,k),m=l(S,m,D),R===null?C=S:R.sibling=S,R=S,k=L}if(D===v.length)return r(h,k),Ne&&Is(h,D),C;if(k===null){for(;D<v.length;D++)k=u(h,v[D],N),k!==null&&(m=l(k,m,D),R===null?C=k:R.sibling=k,R=k);return Ne&&Is(h,D),C}for(k=n(h,k);D<v.length;D++)L=f(k,h,D,v[D],N),L!==null&&(e&&L.alternate!==null&&k.delete(L.key===null?D:L.key),m=l(L,m,D),R===null?C=L:R.sibling=L,R=L);return e&&k.forEach(function(_){return s(h,_)}),Ne&&Is(h,D),C}function j(h,m,v,N){var C=Wr(v);if(typeof C!="function")throw Error(I(150));if(v=C.call(v),v==null)throw Error(I(151));for(var R=C=null,k=m,D=m=0,L=null,S=v.next();k!==null&&!S.done;D++,S=v.next()){k.index>D?(L=k,k=null):L=k.sibling;var _=y(h,k,S.value,N);if(_===null){k===null&&(k=L);break}e&&k&&_.alternate===null&&s(h,k),m=l(_,m,D),R===null?C=_:R.sibling=_,R=_,k=L}if(S.done)return r(h,k),Ne&&Is(h,D),C;if(k===null){for(;!S.done;D++,S=v.next())S=u(h,S.value,N),S!==null&&(m=l(S,m,D),R===null?C=S:R.sibling=S,R=S);return Ne&&Is(h,D),C}for(k=n(h,k);!S.done;D++,S=v.next())S=f(k,h,D,S.value,N),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?D:S.key),m=l(S,m,D),R===null?C=S:R.sibling=S,R=S);return e&&k.forEach(function(b){return s(h,b)}),Ne&&Is(h,D),C}function w(h,m,v,N){if(typeof v=="object"&&v!==null&&v.type===or&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Qn:e:{for(var C=v.key,R=m;R!==null;){if(R.key===C){if(C=v.type,C===or){if(R.tag===7){r(h,R.sibling),m=a(R,v.props.children),m.return=h,h=m;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ps&&id(C)===R.type){r(h,R.sibling),m=a(R,v.props),m.ref=Gr(h,R,v),m.return=h,h=m;break e}r(h,R);break}else s(h,R);R=R.sibling}v.type===or?(m=Qs(v.props.children,h.mode,N,v.key),m.return=h,h=m):(N=ka(v.type,v.key,v.props,null,h.mode,N),N.ref=Gr(h,m,v),N.return=h,h=N)}return i(h);case ir:e:{for(R=v.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(h,m.sibling),m=a(m,v.children||[]),m.return=h,h=m;break e}else{r(h,m);break}else s(h,m);m=m.sibling}m=si(v,h.mode,N),m.return=h,h=m}return i(h);case ps:return R=v._init,w(h,m,R(v._payload),N)}if(tn(v))return g(h,m,v,N);if(Wr(v))return j(h,m,v,N);la(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(h,m.sibling),m=a(m,v),m.return=h,h=m):(r(h,m),m=ti(v,h.mode,N),m.return=h,h=m),i(h)):r(h,m)}return w}var Ar=Tm(!0),Pm=Tm(!1),Va=Ms(null),Wa=null,fr=null,Bo=null;function Io(){Bo=fr=Wa=null}function Uo(e){var s=Va.current;be(Va),e._currentValue=s}function Ii(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function Sr(e,s){Wa=e,Bo=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(st=!0),e.firstContext=null)}function Et(e){var s=e._currentValue;if(Bo!==e)if(e={context:e,memoizedValue:s,next:null},fr===null){if(Wa===null)throw Error(I(308));fr=e,Wa.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return s}var Ws=null;function Ho(e){Ws===null?Ws=[e]:Ws.push(e)}function Rm(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Ho(s)):(r.next=a.next,a.next=r),s.interleaved=r,is(e,n)}function is(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fs=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Am(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ns(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function _s(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,is(e,r)}return a=n.interleaved,a===null?(s.next=s,Ho(n)):(s.next=a.next,a.next=s),n.interleaved=s,is(e,r)}function ja(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,To(e,r)}}function od(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function qa(e,s,r,n){var a=e.updateQueue;fs=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==i&&(o===null?p.firstBaseUpdate=d:o.next=d,p.lastBaseUpdate=c))}if(l!==null){var u=a.baseState;i=0,p=d=c=null,o=l;do{var y=o.lane,f=o.eventTime;if((n&y)===y){p!==null&&(p=p.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,j=o;switch(y=s,f=r,j.tag){case 1:if(g=j.payload,typeof g=="function"){u=g.call(f,u,y);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=j.payload,y=typeof g=="function"?g.call(f,u,y):g,y==null)break e;u=ke({},u,y);break e;case 2:fs=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=a.effects,y===null?a.effects=[o]:y.push(o))}else f={eventTime:f,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(d=p=f,c=u):p=p.next=f,i|=y;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;y=o,o=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(p===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=p,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);er|=i,e.lanes=i,e.memoizedState=u}}function cd(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(I(191,a));a.call(n)}}}var In={},Jt=Ms(In),Cn=Ms(In),En=Ms(In);function qs(e){if(e===In)throw Error(I(174));return e}function Wo(e,s){switch(ge(En,s),ge(Cn,e),ge(Jt,In),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:bi(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=bi(s,e)}be(Jt),ge(Jt,s)}function Lr(){be(Jt),be(Cn),be(En)}function Lm(e){qs(En.current);var s=qs(Jt.current),r=bi(s,e.type);s!==r&&(ge(Cn,e),ge(Jt,r))}function qo(e){Cn.current===e&&(be(Jt),be(Cn))}var we=Ms(0);function Ja(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ql=[];function Jo(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var va=ds.ReactCurrentDispatcher,Gl=ds.ReactCurrentBatchConfig,Xs=0,Se=null,Fe=null,Oe=null,Za=!1,dn=!1,Tn=0,N0=0;function We(){throw Error(I(321))}function Zo(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!Ot(e[r],s[r]))return!1;return!0}function Qo(e,s,r,n,a,l){if(Xs=l,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,va.current=e===null||e.memoizedState===null?_0:C0,e=r(n,a),dn){l=0;do{if(dn=!1,Tn=0,25<=l)throw Error(I(301));l+=1,Oe=Fe=null,s.updateQueue=null,va.current=E0,e=r(n,a)}while(dn)}if(va.current=Qa,s=Fe!==null&&Fe.next!==null,Xs=0,Oe=Fe=Se=null,Za=!1,s)throw Error(I(300));return e}function Go(){var e=Tn!==0;return Tn=0,e}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?Se.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Tt(){if(Fe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var s=Oe===null?Se.memoizedState:Oe.next;if(s!==null)Oe=s,Fe=e;else{if(e===null)throw Error(I(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Oe===null?Se.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function Pn(e,s){return typeof s=="function"?s(e):s}function Kl(e){var s=Tt(),r=s.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=Fe,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,d=l;do{var p=d.lane;if((Xs&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,i=n):c=c.next=u,Se.lanes|=p,er|=p}d=d.next}while(d!==null&&d!==l);c===null?i=n:c.next=o,Ot(n,s.memoizedState)||(st=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,Se.lanes|=l,er|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Yl(e){var s=Tt(),r=s.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Ot(l,s.memoizedState)||(st=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Fm(){}function Mm(e,s){var r=Se,n=Tt(),a=s(),l=!Ot(n.memoizedState,a);if(l&&(n.memoizedState=a,st=!0),n=n.queue,Ko(Om.bind(null,r,n,e),[e]),n.getSnapshot!==s||l||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,Rn(9,$m.bind(null,r,n,a,s),void 0,null),Be===null)throw Error(I(349));Xs&30||Dm(r,s,a)}return a}function Dm(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Se.updateQueue,s===null?(s={lastEffect:null,stores:null},Se.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function $m(e,s,r,n){s.value=r,s.getSnapshot=n,zm(s)&&Bm(e)}function Om(e,s,r){return r(function(){zm(s)&&Bm(e)})}function zm(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Ot(e,r)}catch{return!0}}function Bm(e){var s=is(e,1);s!==null&&Dt(s,e,1,-1)}function dd(e){var s=Vt();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},s.queue=e,e=e.dispatch=k0.bind(null,Se,e),[s.memoizedState,e]}function Rn(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=Se.updateQueue,s===null?(s={lastEffect:null,stores:null},Se.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function Im(){return Tt().memoizedState}function ba(e,s,r,n){var a=Vt();Se.flags|=e,a.memoizedState=Rn(1|s,r,void 0,n===void 0?null:n)}function pl(e,s,r,n){var a=Tt();n=n===void 0?null:n;var l=void 0;if(Fe!==null){var i=Fe.memoizedState;if(l=i.destroy,n!==null&&Zo(n,i.deps)){a.memoizedState=Rn(s,r,l,n);return}}Se.flags|=e,a.memoizedState=Rn(1|s,r,l,n)}function ud(e,s){return ba(8390656,8,e,s)}function Ko(e,s){return pl(2048,8,e,s)}function Um(e,s){return pl(4,2,e,s)}function Hm(e,s){return pl(4,4,e,s)}function Vm(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Wm(e,s,r){return r=r!=null?r.concat([e]):null,pl(4,4,Vm.bind(null,s,e),r)}function Yo(){}function qm(e,s){var r=Tt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Zo(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function Jm(e,s){var r=Tt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Zo(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function Zm(e,s,r){return Xs&21?(Ot(r,s)||(r=Xu(),Se.lanes|=r,er|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=r)}function w0(e,s){var r=fe;fe=r!==0&&4>r?r:4,e(!0);var n=Gl.transition;Gl.transition={};try{e(!1),s()}finally{fe=r,Gl.transition=n}}function Qm(){return Tt().memoizedState}function S0(e,s,r){var n=Es(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Gm(e))Km(s,r);else if(r=Rm(e,s,r,n),r!==null){var a=Ye();Dt(r,e,n,a),Ym(r,s,n)}}function k0(e,s,r){var n=Es(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gm(e))Km(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Ot(o,i)){var c=s.interleaved;c===null?(a.next=a,Ho(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=Rm(e,s,a,n),r!==null&&(a=Ye(),Dt(r,e,n,a),Ym(r,s,n))}}function Gm(e){var s=e.alternate;return e===Se||s!==null&&s===Se}function Km(e,s){dn=Za=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Ym(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,To(e,r)}}var Qa={readContext:Et,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},_0={readContext:Et,useCallback:function(e,s){return Vt().memoizedState=[e,s===void 0?null:s],e},useContext:Et,useEffect:ud,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,ba(4194308,4,Vm.bind(null,s,e),r)},useLayoutEffect:function(e,s){return ba(4194308,4,e,s)},useInsertionEffect:function(e,s){return ba(4,2,e,s)},useMemo:function(e,s){var r=Vt();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=Vt();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=S0.bind(null,Se,e),[n.memoizedState,e]},useRef:function(e){var s=Vt();return e={current:e},s.memoizedState=e},useState:dd,useDebugValue:Yo,useDeferredValue:function(e){return Vt().memoizedState=e},useTransition:function(){var e=dd(!1),s=e[0];return e=w0.bind(null,e[1]),Vt().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=Se,a=Vt();if(Ne){if(r===void 0)throw Error(I(407));r=r()}else{if(r=s(),Be===null)throw Error(I(349));Xs&30||Dm(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,ud(Om.bind(null,n,l,e),[e]),n.flags|=2048,Rn(9,$m.bind(null,n,l,r,s),void 0,null),r},useId:function(){var e=Vt(),s=Be.identifierPrefix;if(Ne){var r=ss,n=ts;r=(n&~(1<<32-Mt(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Tn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=N0++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},C0={readContext:Et,useCallback:qm,useContext:Et,useEffect:Ko,useImperativeHandle:Wm,useInsertionEffect:Um,useLayoutEffect:Hm,useMemo:Jm,useReducer:Kl,useRef:Im,useState:function(){return Kl(Pn)},useDebugValue:Yo,useDeferredValue:function(e){var s=Tt();return Zm(s,Fe.memoizedState,e)},useTransition:function(){var e=Kl(Pn)[0],s=Tt().memoizedState;return[e,s]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Qm,unstable_isNewReconciler:!1},E0={readContext:Et,useCallback:qm,useContext:Et,useEffect:Ko,useImperativeHandle:Wm,useInsertionEffect:Um,useLayoutEffect:Hm,useMemo:Jm,useReducer:Yl,useRef:Im,useState:function(){return Yl(Pn)},useDebugValue:Yo,useDeferredValue:function(e){var s=Tt();return Fe===null?s.memoizedState=e:Zm(s,Fe.memoizedState,e)},useTransition:function(){var e=Yl(Pn)[0],s=Tt().memoizedState;return[e,s]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Qm,unstable_isNewReconciler:!1};function At(e,s){if(e&&e.defaultProps){s=ke({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function Ui(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:ke({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fl={isMounted:function(e){return(e=e._reactInternals)?nr(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=Ye(),a=Es(e),l=ns(n,a);l.payload=s,r!=null&&(l.callback=r),s=_s(e,l,a),s!==null&&(Dt(s,e,a,n),ja(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=Ye(),a=Es(e),l=ns(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=_s(e,l,a),s!==null&&(Dt(s,e,a,n),ja(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Ye(),n=Es(e),a=ns(r,n);a.tag=2,s!=null&&(a.callback=s),s=_s(e,a,n),s!==null&&(Dt(s,e,n,r),ja(s,e,n))}};function md(e,s,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!wn(r,n)||!wn(a,l):!0}function Xm(e,s,r){var n=!1,a=Ls,l=s.contextType;return typeof l=="object"&&l!==null?l=Et(l):(a=at(s)?Ks:Ge.current,n=s.contextTypes,l=(n=n!=null)?Pr(e,a):Ls),s=new s(r,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fl,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function xd(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&fl.enqueueReplaceState(s,s.state,null)}function Hi(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Vo(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Et(l):(l=at(s)?Ks:Ge.current,a.context=Pr(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Ui(e,s,l,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&fl.enqueueReplaceState(a,a.state,null),qa(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fr(e,s){try{var r="",n=s;do r+=sp(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function Xl(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function Vi(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function ex(e,s,r){r=ns(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){Ka||(Ka=!0,eo=n),Vi(e,s)},r}function tx(e,s,r){r=ns(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Vi(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Vi(e,s),typeof n!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function hd(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new T0;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=H0.bind(null,e,s,r),s.then(e,e))}function pd(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function fd(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=ns(-1,1),s.tag=2,_s(r,s,1))),r.lanes|=1),e)}var P0=ds.ReactCurrentOwner,st=!1;function Ke(e,s,r,n){s.child=e===null?Pm(s,null,r,n):Ar(s,e.child,r,n)}function gd(e,s,r,n,a){r=r.render;var l=s.ref;return Sr(s,a),n=Qo(e,s,r,n,l,a),r=Go(),e!==null&&!st?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,os(e,s,a)):(Ne&&r&&$o(s),s.flags|=1,Ke(e,s,n,a),s.child)}function yd(e,s,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!lc(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,sx(e,s,l,n,a)):(e=ka(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:wn,r(i,n)&&e.ref===s.ref)return os(e,s,a)}return s.flags|=1,e=Ts(l,n),e.ref=s.ref,e.return=s,s.child=e}function sx(e,s,r,n,a){if(e!==null){var l=e.memoizedProps;if(wn(l,n)&&e.ref===s.ref)if(st=!1,s.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(st=!0);else return s.lanes=e.lanes,os(e,s,a)}return Wi(e,s,r,n,a)}function rx(e,s,r){var n=s.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(yr,ht),ht|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,ge(yr,ht),ht|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ge(yr,ht),ht|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,ge(yr,ht),ht|=n;return Ke(e,s,a,r),s.child}function nx(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Wi(e,s,r,n,a){var l=at(r)?Ks:Ge.current;return l=Pr(s,l),Sr(s,a),r=Qo(e,s,r,n,l,a),n=Go(),e!==null&&!st?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,os(e,s,a)):(Ne&&n&&$o(s),s.flags|=1,Ke(e,s,r,a),s.child)}function jd(e,s,r,n,a){if(at(r)){var l=!0;Ia(s)}else l=!1;if(Sr(s,a),s.stateNode===null)Na(e,s),Xm(s,r,n),Hi(s,r,n,a),n=!0;else if(e===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Et(d):(d=at(r)?Ks:Ge.current,d=Pr(s,d));var p=r.getDerivedStateFromProps,u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==d)&&xd(s,i,n,d),fs=!1;var y=s.memoizedState;i.state=y,qa(s,n,i,a),c=s.memoizedState,o!==n||y!==c||nt.current||fs?(typeof p=="function"&&(Ui(s,r,p,n),c=s.memoizedState),(o=fs||md(s,r,o,n,y,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),i.props=n,i.state=c,i.context=d,n=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Am(e,s),o=s.memoizedProps,d=s.type===s.elementType?o:At(s.type,o),i.props=d,u=s.pendingProps,y=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=at(r)?Ks:Ge.current,c=Pr(s,c));var f=r.getDerivedStateFromProps;(p=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==u||y!==c)&&xd(s,i,n,c),fs=!1,y=s.memoizedState,i.state=y,qa(s,n,i,a);var g=s.memoizedState;o!==u||y!==g||nt.current||fs?(typeof f=="function"&&(Ui(s,r,f,n),g=s.memoizedState),(d=fs||md(s,r,d,n,y,g,c)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=g),i.props=n,i.state=g,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(s.flags|=1024),n=!1)}return qi(e,s,r,n,l,a)}function qi(e,s,r,n,a,l){nx(e,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&nd(s,r,!1),os(e,s,l);n=s.stateNode,P0.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&i?(s.child=Ar(s,e.child,null,l),s.child=Ar(s,null,o,l)):Ke(e,s,o,l),s.memoizedState=n.state,a&&nd(s,r,!0),s.child}function ax(e){var s=e.stateNode;s.pendingContext?rd(e,s.pendingContext,s.pendingContext!==s.context):s.context&&rd(e,s.context,!1),Wo(e,s.containerInfo)}function vd(e,s,r,n,a){return Rr(),zo(a),s.flags|=256,Ke(e,s,r,n),s.child}var Ji={dehydrated:null,treeContext:null,retryLane:0};function Zi(e){return{baseLanes:e,cachePool:null,transitions:null}}function lx(e,s,r){var n=s.pendingProps,a=we.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ge(we,a&1),e===null)return Bi(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,e=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=jl(i,n,0,null),e=Qs(e,n,r,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Zi(r),s.memoizedState=Ji,e):Xo(s,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return R0(e,s,i,n,o,a,r);if(l){l=n.fallback,i=s.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Ts(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Ts(o,l):(l=Qs(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=e.child.memoizedState,i=i===null?Zi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,s.memoizedState=Ji,n}return l=e.child,e=l.sibling,n=Ts(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Xo(e,s){return s=jl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function ia(e,s,r,n){return n!==null&&zo(n),Ar(s,e.child,null,r),e=Xo(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function R0(e,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=Xl(Error(I(422))),ia(e,s,i,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=jl({mode:"visible",children:n.children},a,0,null),l=Qs(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&Ar(s,e.child,null,i),s.child.memoizedState=Zi(i),s.memoizedState=Ji,l);if(!(s.mode&1))return ia(e,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(I(419)),n=Xl(l,n,void 0),ia(e,s,i,n)}if(o=(i&e.childLanes)!==0,st||o){if(n=Be,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,is(e,a),Dt(n,e,a,-1))}return ac(),n=Xl(Error(I(421))),ia(e,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=V0.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,pt=ks(a.nextSibling),ft=s,Ne=!0,Ft=null,e!==null&&(wt[St++]=ts,wt[St++]=ss,wt[St++]=Ys,ts=e.id,ss=e.overflow,Ys=s),s=Xo(s,n.children),s.flags|=4096,s)}function bd(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Ii(e.return,s,r)}function ei(e,s,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function ix(e,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Ke(e,s,n.children,r),n=we.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bd(e,r,s);else if(e.tag===19)bd(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ge(we,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&Ja(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),ei(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ja(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ei(s,!0,r,null,l);break;case"together":ei(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Na(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function os(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),er|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(I(153));if(s.child!==null){for(e=s.child,r=Ts(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Ts(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function A0(e,s,r){switch(s.tag){case 3:ax(s),Rr();break;case 5:Lm(s);break;case 1:at(s.type)&&Ia(s);break;case 4:Wo(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;ge(Va,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(ge(we,we.current&1),s.flags|=128,null):r&s.child.childLanes?lx(e,s,r):(ge(we,we.current&1),e=os(e,s,r),e!==null?e.sibling:null);ge(we,we.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return ix(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ge(we,we.current),n)break;return null;case 22:case 23:return s.lanes=0,rx(e,s,r)}return os(e,s,r)}var ox,Qi,cx,dx;ox=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qi=function(){};cx=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,qs(Jt.current);var l=null;switch(r){case"input":a=gi(e,a),n=gi(e,n),l=[];break;case"select":a=ke({},a,{value:void 0}),n=ke({},n,{value:void 0}),l=[];break;case"textarea":a=vi(e,a),n=vi(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=za)}Ni(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fn.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ve("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};dx=function(e,s,r,n){r!==n&&(s.flags|=4)};function Kr(e,s){if(!Ne)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qe(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function L0(e,s,r){var n=s.pendingProps;switch(Oo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return at(s.type)&&Ba(),qe(s),null;case 3:return n=s.stateNode,Lr(),be(nt),be(Ge),Jo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(aa(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ft!==null&&(ro(Ft),Ft=null))),Qi(e,s),qe(s),null;case 5:qo(s);var a=qs(En.current);if(r=s.type,e!==null&&s.stateNode!=null)cx(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(I(166));return qe(s),null}if(e=qs(Jt.current),aa(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[Wt]=s,n[_n]=l,e=(s.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(a=0;a<rn.length;a++)ve(rn[a],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":Pc(n,l),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ve("invalid",n);break;case"textarea":Ac(n,l),ve("invalid",n)}Ni(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&na(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&na(n.textContent,o,e),a=["children",""+o]):fn.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ve("scroll",n)}switch(r){case"input":Gn(n),Rc(n,l,!0);break;case"textarea":Gn(n),Lc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=za)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ou(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Wt]=s,e[_n]=n,ox(e,s,!1,!1),s.stateNode=e;e:{switch(i=wi(r,n),r){case"dialog":ve("cancel",e),ve("close",e),a=n;break;case"iframe":case"object":case"embed":ve("load",e),a=n;break;case"video":case"audio":for(a=0;a<rn.length;a++)ve(rn[a],e);a=n;break;case"source":ve("error",e),a=n;break;case"img":case"image":case"link":ve("error",e),ve("load",e),a=n;break;case"details":ve("toggle",e),a=n;break;case"input":Pc(e,n),a=gi(e,n),ve("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ke({},n,{value:void 0}),ve("invalid",e);break;case"textarea":Ac(e,n),a=vi(e,n),ve("invalid",e);break;default:a=n}Ni(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Iu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zu(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&gn(e,c):typeof c=="number"&&gn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ve("scroll",e):c!=null&&wo(e,l,c,i))}switch(r){case"input":Gn(e),Rc(e,n,!1);break;case"textarea":Gn(e),Lc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+As(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?vr(e,!!n.multiple,l,!1):n.defaultValue!=null&&vr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=za)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qe(s),null;case 6:if(e&&s.stateNode!=null)dx(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(I(166));if(r=qs(En.current),qs(Jt.current),aa(s)){if(n=s.stateNode,r=s.memoizedProps,n[Wt]=s,(l=n.nodeValue!==r)&&(e=ft,e!==null))switch(e.tag){case 3:na(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&na(n.nodeValue,r,(e.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wt]=s,s.stateNode=n}return qe(s),null;case 13:if(be(we),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&pt!==null&&s.mode&1&&!(s.flags&128))Em(),Rr(),s.flags|=98560,l=!1;else if(l=aa(s),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[Wt]=s}else Rr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;qe(s),l=!1}else Ft!==null&&(ro(Ft),Ft=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||we.current&1?De===0&&(De=3):ac())),s.updateQueue!==null&&(s.flags|=4),qe(s),null);case 4:return Lr(),Qi(e,s),e===null&&Sn(s.stateNode.containerInfo),qe(s),null;case 10:return Uo(s.type._context),qe(s),null;case 17:return at(s.type)&&Ba(),qe(s),null;case 19:if(be(we),l=s.memoizedState,l===null)return qe(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)Kr(l,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(i=Ja(e),i!==null){for(s.flags|=128,Kr(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ge(we,we.current&1|2),s.child}e=e.sibling}l.tail!==null&&Ee()>Mr&&(s.flags|=128,n=!0,Kr(l,!1),s.lanes=4194304)}else{if(!n)if(e=Ja(i),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Kr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ne)return qe(s),null}else 2*Ee()-l.renderingStartTime>Mr&&r!==1073741824&&(s.flags|=128,n=!0,Kr(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ee(),s.sibling=null,r=we.current,ge(we,n?r&1|2:r&1),s):(qe(s),null);case 22:case 23:return nc(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?ht&1073741824&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),null;case 24:return null;case 25:return null}throw Error(I(156,s.tag))}function F0(e,s){switch(Oo(s),s.tag){case 1:return at(s.type)&&Ba(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Lr(),be(nt),be(Ge),Jo(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return qo(s),null;case 13:if(be(we),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(I(340));Rr()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return be(we),null;case 4:return Lr(),null;case 10:return Uo(s.type._context),null;case 22:case 23:return nc(),null;case 24:return null;default:return null}}var oa=!1,Ze=!1,M0=typeof WeakSet=="function"?WeakSet:Set,Q=null;function gr(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){_e(e,s,n)}else r.current=null}function Gi(e,s,r){try{r()}catch(n){_e(e,s,n)}}var Nd=!1;function D0(e,s){if(Li=Da,e=pm(),Do(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,p=0,u=e,y=null;t:for(;;){for(var f;u!==r||a!==0&&u.nodeType!==3||(o=i+a),u!==l||n!==0&&u.nodeType!==3||(c=i+n),u.nodeType===3&&(i+=u.nodeValue.length),(f=u.firstChild)!==null;)y=u,u=f;for(;;){if(u===e)break t;if(y===r&&++d===a&&(o=i),y===l&&++p===n&&(c=i),(f=u.nextSibling)!==null)break;u=y,y=u.parentNode}u=f}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fi={focusedElem:e,selectionRange:r},Da=!1,Q=s;Q!==null;)if(s=Q,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,Q=e;else for(;Q!==null;){s=Q;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var j=g.memoizedProps,w=g.memoizedState,h=s.stateNode,m=h.getSnapshotBeforeUpdate(s.elementType===s.type?j:At(s.type,j),w);h.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(N){_e(s,s.return,N)}if(e=s.sibling,e!==null){e.return=s.return,Q=e;break}Q=s.return}return g=Nd,Nd=!1,g}function un(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Gi(s,r,l)}a=a.next}while(a!==n)}}function gl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Ki(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function ux(e){var s=e.alternate;s!==null&&(e.alternate=null,ux(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Wt],delete s[_n],delete s[$i],delete s[y0],delete s[j0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mx(e){return e.tag===5||e.tag===3||e.tag===4}function wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yi(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=za));else if(n!==4&&(e=e.child,e!==null))for(Yi(e,s,r),e=e.sibling;e!==null;)Yi(e,s,r),e=e.sibling}function Xi(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Xi(e,s,r),e=e.sibling;e!==null;)Xi(e,s,r),e=e.sibling}var Ie=null,Lt=!1;function hs(e,s,r){for(r=r.child;r!==null;)xx(e,s,r),r=r.sibling}function xx(e,s,r){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(cl,r)}catch{}switch(r.tag){case 5:Ze||gr(r,s);case 6:var n=Ie,a=Lt;Ie=null,hs(e,s,r),Ie=n,Lt=a,Ie!==null&&(Lt?(e=Ie,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(Lt?(e=Ie,r=r.stateNode,e.nodeType===8?Jl(e.parentNode,r):e.nodeType===1&&Jl(e,r),bn(e)):Jl(Ie,r.stateNode));break;case 4:n=Ie,a=Lt,Ie=r.stateNode.containerInfo,Lt=!0,hs(e,s,r),Ie=n,Lt=a;break;case 0:case 11:case 14:case 15:if(!Ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Gi(r,s,i),a=a.next}while(a!==n)}hs(e,s,r);break;case 1:if(!Ze&&(gr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_e(r,s,o)}hs(e,s,r);break;case 21:hs(e,s,r);break;case 22:r.mode&1?(Ze=(n=Ze)||r.memoizedState!==null,hs(e,s,r),Ze=n):hs(e,s,r);break;default:hs(e,s,r)}}function Sd(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new M0),s.forEach(function(n){var a=W0.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Rt(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ie=o.stateNode,Lt=!1;break e;case 3:Ie=o.stateNode.containerInfo,Lt=!0;break e;case 4:Ie=o.stateNode.containerInfo,Lt=!0;break e}o=o.return}if(Ie===null)throw Error(I(160));xx(l,i,a),Ie=null,Lt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){_e(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hx(s,e),s=s.sibling}function hx(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(s,e),It(e),n&4){try{un(3,e,e.return),gl(3,e)}catch(j){_e(e,e.return,j)}try{un(5,e,e.return)}catch(j){_e(e,e.return,j)}}break;case 1:Rt(s,e),It(e),n&512&&r!==null&&gr(r,r.return);break;case 5:if(Rt(s,e),It(e),n&512&&r!==null&&gr(r,r.return),e.flags&32){var a=e.stateNode;try{gn(a,"")}catch(j){_e(e,e.return,j)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Du(a,l),wi(o,i);var d=wi(o,l);for(i=0;i<c.length;i+=2){var p=c[i],u=c[i+1];p==="style"?Iu(a,u):p==="dangerouslySetInnerHTML"?zu(a,u):p==="children"?gn(a,u):wo(a,p,u,d)}switch(o){case"input":yi(a,l);break;case"textarea":$u(a,l);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var f=l.value;f!=null?vr(a,!!l.multiple,f,!1):y!==!!l.multiple&&(l.defaultValue!=null?vr(a,!!l.multiple,l.defaultValue,!0):vr(a,!!l.multiple,l.multiple?[]:"",!1))}a[_n]=l}catch(j){_e(e,e.return,j)}}break;case 6:if(Rt(s,e),It(e),n&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(j){_e(e,e.return,j)}}break;case 3:if(Rt(s,e),It(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{bn(s.containerInfo)}catch(j){_e(e,e.return,j)}break;case 4:Rt(s,e),It(e);break;case 13:Rt(s,e),It(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(sc=Ee())),n&4&&Sd(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(d=Ze)||p,Rt(s,e),Ze=d):Rt(s,e),It(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Q=e,p=e.child;p!==null;){for(u=Q=p;Q!==null;){switch(y=Q,f=y.child,y.tag){case 0:case 11:case 14:case 15:un(4,y,y.return);break;case 1:gr(y,y.return);var g=y.stateNode;if(typeof g.componentWillUnmount=="function"){n=y,r=y.return;try{s=n,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(j){_e(n,r,j)}}break;case 5:gr(y,y.return);break;case 22:if(y.memoizedState!==null){_d(u);continue}}f!==null?(f.return=y,Q=f):_d(u)}p=p.sibling}e:for(p=null,u=e;;){if(u.tag===5){if(p===null){p=u;try{a=u.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Bu("display",i))}catch(j){_e(e,e.return,j)}}}else if(u.tag===6){if(p===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(j){_e(e,e.return,j)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Rt(s,e),It(e),n&4&&Sd(e);break;case 21:break;default:Rt(s,e),It(e)}}function It(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(mx(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(gn(a,""),n.flags&=-33);var l=wd(e);Xi(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=wd(e);Yi(e,o,i);break;default:throw Error(I(161))}}catch(c){_e(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function $0(e,s,r){Q=e,px(e)}function px(e,s,r){for(var n=(e.mode&1)!==0;Q!==null;){var a=Q,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||oa;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Ze;o=oa;var d=Ze;if(oa=i,(Ze=c)&&!d)for(Q=a;Q!==null;)i=Q,c=i.child,i.tag===22&&i.memoizedState!==null?Cd(a):c!==null?(c.return=i,Q=c):Cd(a);for(;l!==null;)Q=l,px(l),l=l.sibling;Q=a,oa=o,Ze=d}kd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Q=l):kd(e)}}function kd(e){for(;Q!==null;){var s=Q;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ze||gl(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Ze)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:At(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&cd(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}cd(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var u=p.dehydrated;u!==null&&bn(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ze||s.flags&512&&Ki(s)}catch(y){_e(s,s.return,y)}}if(s===e){Q=null;break}if(r=s.sibling,r!==null){r.return=s.return,Q=r;break}Q=s.return}}function _d(e){for(;Q!==null;){var s=Q;if(s===e){Q=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Q=r;break}Q=s.return}}function Cd(e){for(;Q!==null;){var s=Q;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{gl(4,s)}catch(c){_e(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){_e(s,a,c)}}var l=s.return;try{Ki(s)}catch(c){_e(s,l,c)}break;case 5:var i=s.return;try{Ki(s)}catch(c){_e(s,i,c)}}}catch(c){_e(s,s.return,c)}if(s===e){Q=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Q=o;break}Q=s.return}}var O0=Math.ceil,Ga=ds.ReactCurrentDispatcher,ec=ds.ReactCurrentOwner,_t=ds.ReactCurrentBatchConfig,ue=0,Be=null,Ae=null,Ue=0,ht=0,yr=Ms(0),De=0,An=null,er=0,yl=0,tc=0,mn=null,tt=null,sc=0,Mr=1/0,Kt=null,Ka=!1,eo=null,Cs=null,ca=!1,vs=null,Ya=0,xn=0,to=null,wa=-1,Sa=0;function Ye(){return ue&6?Ee():wa!==-1?wa:wa=Ee()}function Es(e){return e.mode&1?ue&2&&Ue!==0?Ue&-Ue:b0.transition!==null?(Sa===0&&(Sa=Xu()),Sa):(e=fe,e!==0||(e=window.event,e=e===void 0?16:lm(e.type)),e):1}function Dt(e,s,r,n){if(50<xn)throw xn=0,to=null,Error(I(185));On(e,r,n),(!(ue&2)||e!==Be)&&(e===Be&&(!(ue&2)&&(yl|=r),De===4&&ys(e,Ue)),lt(e,n),r===1&&ue===0&&!(s.mode&1)&&(Mr=Ee()+500,hl&&Ds()))}function lt(e,s){var r=e.callbackNode;bp(e,s);var n=Ma(e,e===Be?Ue:0);if(n===0)r!==null&&Dc(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&Dc(r),s===1)e.tag===0?v0(Ed.bind(null,e)):km(Ed.bind(null,e)),f0(function(){!(ue&6)&&Ds()}),r=null;else{switch(em(n)){case 1:r=Eo;break;case 4:r=Ku;break;case 16:r=Fa;break;case 536870912:r=Yu;break;default:r=Fa}r=wx(r,fx.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function fx(e,s){if(wa=-1,Sa=0,ue&6)throw Error(I(327));var r=e.callbackNode;if(kr()&&e.callbackNode!==r)return null;var n=Ma(e,e===Be?Ue:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=Xa(e,n);else{s=n;var a=ue;ue|=2;var l=yx();(Be!==e||Ue!==s)&&(Kt=null,Mr=Ee()+500,Zs(e,s));do try{I0();break}catch(o){gx(e,o)}while(!0);Io(),Ga.current=l,ue=a,Ae!==null?s=0:(Be=null,Ue=0,s=De)}if(s!==0){if(s===2&&(a=Ei(e),a!==0&&(n=a,s=so(e,a))),s===1)throw r=An,Zs(e,0),ys(e,n),lt(e,Ee()),r;if(s===6)ys(e,n);else{if(a=e.current.alternate,!(n&30)&&!z0(a)&&(s=Xa(e,n),s===2&&(l=Ei(e),l!==0&&(n=l,s=so(e,l))),s===1))throw r=An,Zs(e,0),ys(e,n),lt(e,Ee()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(I(345));case 2:Us(e,tt,Kt);break;case 3:if(ys(e,n),(n&130023424)===n&&(s=sc+500-Ee(),10<s)){if(Ma(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ye(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Di(Us.bind(null,e,tt,Kt),s);break}Us(e,tt,Kt);break;case 4:if(ys(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var i=31-Mt(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=Ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*O0(n/1960))-n,10<n){e.timeoutHandle=Di(Us.bind(null,e,tt,Kt),n);break}Us(e,tt,Kt);break;case 5:Us(e,tt,Kt);break;default:throw Error(I(329))}}}return lt(e,Ee()),e.callbackNode===r?fx.bind(null,e):null}function so(e,s){var r=mn;return e.current.memoizedState.isDehydrated&&(Zs(e,s).flags|=256),e=Xa(e,s),e!==2&&(s=tt,tt=r,s!==null&&ro(s)),e}function ro(e){tt===null?tt=e:tt.push.apply(tt,e)}function z0(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Ot(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ys(e,s){for(s&=~tc,s&=~yl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-Mt(s),n=1<<r;e[r]=-1,s&=~n}}function Ed(e){if(ue&6)throw Error(I(327));kr();var s=Ma(e,0);if(!(s&1))return lt(e,Ee()),null;var r=Xa(e,s);if(e.tag!==0&&r===2){var n=Ei(e);n!==0&&(s=n,r=so(e,n))}if(r===1)throw r=An,Zs(e,0),ys(e,s),lt(e,Ee()),r;if(r===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Us(e,tt,Kt),lt(e,Ee()),null}function rc(e,s){var r=ue;ue|=1;try{return e(s)}finally{ue=r,ue===0&&(Mr=Ee()+500,hl&&Ds())}}function tr(e){vs!==null&&vs.tag===0&&!(ue&6)&&kr();var s=ue;ue|=1;var r=_t.transition,n=fe;try{if(_t.transition=null,fe=1,e)return e()}finally{fe=n,_t.transition=r,ue=s,!(ue&6)&&Ds()}}function nc(){ht=yr.current,be(yr)}function Zs(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,p0(r)),Ae!==null)for(r=Ae.return;r!==null;){var n=r;switch(Oo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ba();break;case 3:Lr(),be(nt),be(Ge),Jo();break;case 5:qo(n);break;case 4:Lr();break;case 13:be(we);break;case 19:be(we);break;case 10:Uo(n.type._context);break;case 22:case 23:nc()}r=r.return}if(Be=e,Ae=e=Ts(e.current,null),Ue=ht=s,De=0,An=null,tc=yl=er=0,tt=mn=null,Ws!==null){for(s=0;s<Ws.length;s++)if(r=Ws[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Ws=null}return e}function gx(e,s){do{var r=Ae;try{if(Io(),va.current=Qa,Za){for(var n=Se.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Za=!1}if(Xs=0,Oe=Fe=Se=null,dn=!1,Tn=0,ec.current=null,r===null||r.return===null){De=1,An=s,Ae=null;break}e:{var l=e,i=r.return,o=r,c=s;if(s=Ue,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=o,u=p.tag;if(!(p.mode&1)&&(u===0||u===11||u===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=pd(i);if(f!==null){f.flags&=-257,fd(f,i,o,l,s),f.mode&1&&hd(l,d,s),s=f,c=d;var g=s.updateQueue;if(g===null){var j=new Set;j.add(c),s.updateQueue=j}else g.add(c);break e}else{if(!(s&1)){hd(l,d,s),ac();break e}c=Error(I(426))}}else if(Ne&&o.mode&1){var w=pd(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),fd(w,i,o,l,s),zo(Fr(c,o));break e}}l=c=Fr(c,o),De!==4&&(De=2),mn===null?mn=[l]:mn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var h=ex(l,c,s);od(l,h);break e;case 1:o=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Cs===null||!Cs.has(v)))){l.flags|=65536,s&=-s,l.lanes|=s;var N=tx(l,o,s);od(l,N);break e}}l=l.return}while(l!==null)}vx(r)}catch(C){s=C,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function yx(){var e=Ga.current;return Ga.current=Qa,e===null?Qa:e}function ac(){(De===0||De===3||De===2)&&(De=4),Be===null||!(er&268435455)&&!(yl&268435455)||ys(Be,Ue)}function Xa(e,s){var r=ue;ue|=2;var n=yx();(Be!==e||Ue!==s)&&(Kt=null,Zs(e,s));do try{B0();break}catch(a){gx(e,a)}while(!0);if(Io(),ue=r,Ga.current=n,Ae!==null)throw Error(I(261));return Be=null,Ue=0,De}function B0(){for(;Ae!==null;)jx(Ae)}function I0(){for(;Ae!==null&&!mp();)jx(Ae)}function jx(e){var s=Nx(e.alternate,e,ht);e.memoizedProps=e.pendingProps,s===null?vx(e):Ae=s,ec.current=null}function vx(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=F0(r,s),r!==null){r.flags&=32767,Ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Ae=null;return}}else if(r=L0(r,s,ht),r!==null){Ae=r;return}if(s=s.sibling,s!==null){Ae=s;return}Ae=s=e}while(s!==null);De===0&&(De=5)}function Us(e,s,r){var n=fe,a=_t.transition;try{_t.transition=null,fe=1,U0(e,s,r,n)}finally{_t.transition=a,fe=n}return null}function U0(e,s,r,n){do kr();while(vs!==null);if(ue&6)throw Error(I(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Np(e,l),e===Be&&(Ae=Be=null,Ue=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ca||(ca=!0,wx(Fa,function(){return kr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=_t.transition,_t.transition=null;var i=fe;fe=1;var o=ue;ue|=4,ec.current=null,D0(e,r),hx(r,e),o0(Fi),Da=!!Li,Fi=Li=null,e.current=r,$0(r),xp(),ue=o,fe=i,_t.transition=l}else e.current=r;if(ca&&(ca=!1,vs=e,Ya=a),l=e.pendingLanes,l===0&&(Cs=null),fp(r.stateNode),lt(e,Ee()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ka)throw Ka=!1,e=eo,eo=null,e;return Ya&1&&e.tag!==0&&kr(),l=e.pendingLanes,l&1?e===to?xn++:(xn=0,to=e):xn=0,Ds(),null}function kr(){if(vs!==null){var e=em(Ya),s=_t.transition,r=fe;try{if(_t.transition=null,fe=16>e?16:e,vs===null)var n=!1;else{if(e=vs,vs=null,Ya=0,ue&6)throw Error(I(331));var a=ue;for(ue|=4,Q=e.current;Q!==null;){var l=Q,i=l.child;if(Q.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:un(8,p,l)}var u=p.child;if(u!==null)u.return=p,Q=u;else for(;Q!==null;){p=Q;var y=p.sibling,f=p.return;if(ux(p),p===d){Q=null;break}if(y!==null){y.return=f,Q=y;break}Q=f}}}var g=l.alternate;if(g!==null){var j=g.child;if(j!==null){g.child=null;do{var w=j.sibling;j.sibling=null,j=w}while(j!==null)}}Q=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,Q=i;else e:for(;Q!==null;){if(l=Q,l.flags&2048)switch(l.tag){case 0:case 11:case 15:un(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,Q=h;break e}Q=l.return}}var m=e.current;for(Q=m;Q!==null;){i=Q;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Q=v;else e:for(i=m;Q!==null;){if(o=Q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gl(9,o)}}catch(C){_e(o,o.return,C)}if(o===i){Q=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Q=N;break e}Q=o.return}}if(ue=a,Ds(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(cl,e)}catch{}n=!0}return n}finally{fe=r,_t.transition=s}}return!1}function Td(e,s,r){s=Fr(r,s),s=ex(e,s,1),e=_s(e,s,1),s=Ye(),e!==null&&(On(e,1,s),lt(e,s))}function _e(e,s,r){if(e.tag===3)Td(e,e,r);else for(;s!==null;){if(s.tag===3){Td(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cs===null||!Cs.has(n))){e=Fr(r,e),e=tx(s,e,1),s=_s(s,e,1),e=Ye(),s!==null&&(On(s,1,e),lt(s,e));break}}s=s.return}}function H0(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=Ye(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(Ue&r)===r&&(De===4||De===3&&(Ue&130023424)===Ue&&500>Ee()-sc?Zs(e,0):tc|=r),lt(e,s)}function bx(e,s){s===0&&(e.mode&1?(s=Xn,Xn<<=1,!(Xn&130023424)&&(Xn=4194304)):s=1);var r=Ye();e=is(e,s),e!==null&&(On(e,s,r),lt(e,r))}function V0(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),bx(e,r)}function W0(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(s),bx(e,r)}var Nx;Nx=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||nt.current)st=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return st=!1,A0(e,s,r);st=!!(e.flags&131072)}else st=!1,Ne&&s.flags&1048576&&_m(s,Ha,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Na(e,s),e=s.pendingProps;var a=Pr(s,Ge.current);Sr(s,r),a=Qo(null,s,n,e,a,r);var l=Go();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,at(n)?(l=!0,Ia(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Vo(s),a.updater=fl,s.stateNode=a,a._reactInternals=s,Hi(s,n,e,r),s=qi(null,s,n,!0,l,r)):(s.tag=0,Ne&&l&&$o(s),Ke(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Na(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=J0(n),e=At(n,e),a){case 0:s=Wi(null,s,n,e,r);break e;case 1:s=jd(null,s,n,e,r);break e;case 11:s=gd(null,s,n,e,r);break e;case 14:s=yd(null,s,n,At(n.type,e),r);break e}throw Error(I(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:At(n,a),Wi(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:At(n,a),jd(e,s,n,a,r);case 3:e:{if(ax(s),e===null)throw Error(I(387));n=s.pendingProps,l=s.memoizedState,a=l.element,Am(e,s),qa(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Fr(Error(I(423)),s),s=vd(e,s,n,r,a);break e}else if(n!==a){a=Fr(Error(I(424)),s),s=vd(e,s,n,r,a);break e}else for(pt=ks(s.stateNode.containerInfo.firstChild),ft=s,Ne=!0,Ft=null,r=Pm(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rr(),n===a){s=os(e,s,r);break e}Ke(e,s,n,r)}s=s.child}return s;case 5:return Lm(s),e===null&&Bi(s),n=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Mi(n,a)?i=null:l!==null&&Mi(n,l)&&(s.flags|=32),nx(e,s),Ke(e,s,i,r),s.child;case 6:return e===null&&Bi(s),null;case 13:return lx(e,s,r);case 4:return Wo(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=Ar(s,null,n,r):Ke(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:At(n,a),gd(e,s,n,a,r);case 7:return Ke(e,s,s.pendingProps,r),s.child;case 8:return Ke(e,s,s.pendingProps.children,r),s.child;case 12:return Ke(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,ge(Va,n._currentValue),n._currentValue=i,l!==null)if(Ot(l.value,i)){if(l.children===a.children&&!nt.current){s=os(e,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=ns(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Ii(l.return,r,s),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(I(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ii(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Ke(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Sr(s,r),a=Et(a),n=n(a),s.flags|=1,Ke(e,s,n,r),s.child;case 14:return n=s.type,a=At(n,s.pendingProps),a=At(n.type,a),yd(e,s,n,a,r);case 15:return sx(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:At(n,a),Na(e,s),s.tag=1,at(n)?(e=!0,Ia(s)):e=!1,Sr(s,r),Xm(s,n,a),Hi(s,n,a,r),qi(null,s,n,!0,e,r);case 19:return ix(e,s,r);case 22:return rx(e,s,r)}throw Error(I(156,s.tag))};function wx(e,s){return Gu(e,s)}function q0(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,s,r,n){return new q0(e,s,r,n)}function lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J0(e){if(typeof e=="function")return lc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ko)return 11;if(e===_o)return 14}return 2}function Ts(e,s){var r=e.alternate;return r===null?(r=kt(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ka(e,s,r,n,a,l){var i=2;if(n=e,typeof e=="function")lc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case or:return Qs(r.children,a,l,s);case So:i=8,a|=8;break;case xi:return e=kt(12,r,s,a|2),e.elementType=xi,e.lanes=l,e;case hi:return e=kt(13,r,s,a),e.elementType=hi,e.lanes=l,e;case pi:return e=kt(19,r,s,a),e.elementType=pi,e.lanes=l,e;case Lu:return jl(r,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ru:i=10;break e;case Au:i=9;break e;case ko:i=11;break e;case _o:i=14;break e;case ps:i=16,n=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return s=kt(i,r,s,a),s.elementType=e,s.type=n,s.lanes=l,s}function Qs(e,s,r,n){return e=kt(7,e,n,s),e.lanes=r,e}function jl(e,s,r,n){return e=kt(22,e,n,s),e.elementType=Lu,e.lanes=r,e.stateNode={isHidden:!1},e}function ti(e,s,r){return e=kt(6,e,null,s),e.lanes=r,e}function si(e,s,r){return s=kt(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function Z0(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dl(0),this.expirationTimes=Dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ic(e,s,r,n,a,l,i,o,c){return e=new Z0(e,s,r,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=kt(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vo(l),e}function Q0(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function Sx(e){if(!e)return Ls;e=e._reactInternals;e:{if(nr(e)!==e||e.tag!==1)throw Error(I(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(at(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(I(171))}if(e.tag===1){var r=e.type;if(at(r))return Sm(e,r,s)}return s}function kx(e,s,r,n,a,l,i,o,c){return e=ic(r,n,!0,e,a,l,i,o,c),e.context=Sx(null),r=e.current,n=Ye(),a=Es(r),l=ns(n,a),l.callback=s??null,_s(r,l,a),e.current.lanes=a,On(e,a,n),lt(e,n),e}function vl(e,s,r,n){var a=s.current,l=Ye(),i=Es(a);return r=Sx(r),s.context===null?s.context=r:s.pendingContext=r,s=ns(l,i),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=_s(a,s,i),e!==null&&(Dt(e,a,i,l),ja(e,a,i)),i}function el(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pd(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function oc(e,s){Pd(e,s),(e=e.alternate)&&Pd(e,s)}function G0(){return null}var _x=typeof reportError=="function"?reportError:function(e){console.error(e)};function cc(e){this._internalRoot=e}bl.prototype.render=cc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(I(409));vl(e,s,null,null)};bl.prototype.unmount=cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;tr(function(){vl(null,e,null,null)}),s[ls]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var s=rm();e={blockedOn:null,target:e,priority:s};for(var r=0;r<gs.length&&s!==0&&s<gs[r].priority;r++);gs.splice(r,0,e),r===0&&am(e)}};function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rd(){}function K0(e,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=el(i);l.call(d)}}var i=kx(s,n,e,0,null,!1,!1,"",Rd);return e._reactRootContainer=i,e[ls]=i.current,Sn(e.nodeType===8?e.parentNode:e),tr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=el(c);o.call(d)}}var c=ic(e,0,!1,null,null,!1,!1,"",Rd);return e._reactRootContainer=c,e[ls]=c.current,Sn(e.nodeType===8?e.parentNode:e),tr(function(){vl(s,c,r,n)}),c}function wl(e,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=el(i);o.call(c)}}vl(s,i,e,a)}else i=K0(r,s,e,a,n);return el(i)}tm=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=sn(s.pendingLanes);r!==0&&(To(s,r|1),lt(s,Ee()),!(ue&6)&&(Mr=Ee()+500,Ds()))}break;case 13:tr(function(){var n=is(e,1);if(n!==null){var a=Ye();Dt(n,e,1,a)}}),oc(e,1)}};Po=function(e){if(e.tag===13){var s=is(e,134217728);if(s!==null){var r=Ye();Dt(s,e,134217728,r)}oc(e,134217728)}};sm=function(e){if(e.tag===13){var s=Es(e),r=is(e,s);if(r!==null){var n=Ye();Dt(r,e,s,n)}oc(e,s)}};rm=function(){return fe};nm=function(e,s){var r=fe;try{return fe=e,s()}finally{fe=r}};ki=function(e,s,r){switch(s){case"input":if(yi(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=xl(n);if(!a)throw Error(I(90));Mu(n),yi(n,a)}}}break;case"textarea":$u(e,r);break;case"select":s=r.value,s!=null&&vr(e,!!r.multiple,s,!1)}};Vu=rc;Wu=tr;var Y0={usingClientEntryPoint:!1,Events:[Bn,mr,xl,Uu,Hu,rc]},Yr={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X0={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zu(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||G0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{cl=da.inject(X0),qt=da}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y0;jt.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dc(s))throw Error(I(200));return Q0(e,s,null,r)};jt.createRoot=function(e,s){if(!dc(e))throw Error(I(299));var r=!1,n="",a=_x;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=ic(e,1,!1,null,null,r,!1,n,a),e[ls]=s.current,Sn(e.nodeType===8?e.parentNode:e),new cc(s)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Zu(s),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return tr(e)};jt.hydrate=function(e,s,r){if(!Nl(s))throw Error(I(200));return wl(null,e,s,!0,r)};jt.hydrateRoot=function(e,s,r){if(!dc(e))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=_x;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=kx(s,null,e,1,r??null,a,!1,l,i),e[ls]=s.current,Sn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new bl(s)};jt.render=function(e,s,r){if(!Nl(s))throw Error(I(200));return wl(null,e,s,!1,r)};jt.unmountComponentAtNode=function(e){if(!Nl(e))throw Error(I(40));return e._reactRootContainer?(tr(function(){wl(null,null,e,!1,function(){e._reactRootContainer=null,e[ls]=null})}),!0):!1};jt.unstable_batchedUpdates=rc;jt.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!Nl(r))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return wl(e,s,r,!1,n)};jt.version="18.3.1-next-f1338f8080-20240426";function Cx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cx)}catch(e){console.error(e)}}Cx(),Cu.exports=jt;var ef=Cu.exports,Ad=ef;ui.createRoot=Ad.createRoot,ui.hydrateRoot=Ad.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ln.apply(this,arguments)}var bs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bs||(bs={}));const Ld="popstate";function tf(e){e===void 0&&(e={});function s(n,a){let{pathname:l,search:i,hash:o}=n.location;return no("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:tl(a)}return rf(s,r,null,e)}function Te(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Ex(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function sf(){return Math.random().toString(36).substr(2,8)}function Fd(e,s){return{usr:e.state,key:e.key,idx:s}}function no(e,s,r,n){return r===void 0&&(r=null),Ln({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?Br(s):s,{state:r,key:s&&s.key||n||sf()})}function tl(e){let{pathname:s="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Br(e){let s={};if(e){let r=e.indexOf("#");r>=0&&(s.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(s.search=e.substr(n),e=e.substr(0,n)),e&&(s.pathname=e)}return s}function rf(e,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,o=bs.Pop,c=null,d=p();d==null&&(d=0,i.replaceState(Ln({},i.state,{idx:d}),""));function p(){return(i.state||{idx:null}).idx}function u(){o=bs.Pop;let w=p(),h=w==null?null:w-d;d=w,c&&c({action:o,location:j.location,delta:h})}function y(w,h){o=bs.Push;let m=no(j.location,w,h);d=p()+1;let v=Fd(m,d),N=j.createHref(m);try{i.pushState(v,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(N)}l&&c&&c({action:o,location:j.location,delta:1})}function f(w,h){o=bs.Replace;let m=no(j.location,w,h);d=p();let v=Fd(m,d),N=j.createHref(m);i.replaceState(v,"",N),l&&c&&c({action:o,location:j.location,delta:0})}function g(w){let h=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof w=="string"?w:tl(w);return m=m.replace(/ $/,"%20"),Te(h,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,h)}let j={get action(){return o},get location(){return e(a,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Ld,u),c=w,()=>{a.removeEventListener(Ld,u),c=null}},createHref(w){return s(a,w)},createURL:g,encodeLocation(w){let h=g(w);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:y,replace:f,go(w){return i.go(w)}};return j}var Md;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Md||(Md={}));function nf(e,s,r){return r===void 0&&(r="/"),af(e,s,r)}function af(e,s,r,n){let a=typeof s=="string"?Br(s):s,l=uc(a.pathname||"/",r);if(l==null)return null;let i=Tx(e);lf(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=jf(l);o=ff(i[c],d)}return o}function Tx(e,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Te(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Ps([n,c.relativePath]),p=r.concat(c);l.children&&l.children.length>0&&(Te(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Tx(l.children,s,p,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:hf(d,l.index),routesMeta:p})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Px(l.path))a(l,i,c)}),s}function Px(e){let s=e.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=Px(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function lf(e){e.sort((s,r)=>s.score!==r.score?r.score-s.score:pf(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const of=/^:[\w-]+$/,cf=3,df=2,uf=1,mf=10,xf=-2,Dd=e=>e==="*";function hf(e,s){let r=e.split("/"),n=r.length;return r.some(Dd)&&(n+=xf),s&&(n+=df),r.filter(a=>!Dd(a)).reduce((a,l)=>a+(of.test(l)?cf:l===""?uf:mf),n)}function pf(e,s){return e.length===s.length&&e.slice(0,-1).every((n,a)=>n===s[a])?e[e.length-1]-s[s.length-1]:0}function ff(e,s,r){let{routesMeta:n}=e,a={},l="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,p=l==="/"?s:s.slice(l.length)||"/",u=gf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),y=c.route;if(!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:Ps([l,u.pathname]),pathnameBase:wf(Ps([l,u.pathnameBase])),route:y}),u.pathnameBase!=="/"&&(l=Ps([l,u.pathnameBase]))}return i}function gf(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=yf(e.path,e.caseSensitive,e.end),a=s.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,p,u)=>{let{paramName:y,isOptional:f}=p;if(y==="*"){let j=o[u]||"";i=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const g=o[u];return f&&!g?d[y]=void 0:d[y]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:e}}function yf(e,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Ex(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function jf(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ex(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function uc(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function vf(e,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Br(e):e;return{pathname:r?r.startsWith("/")?r:bf(r,s):s,search:Sf(n),hash:kf(a)}}function bf(e,s){let r=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ri(e,s,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nf(e){return e.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function mc(e,s){let r=Nf(e);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function xc(e,s,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Br(e):(a=Ln({},e),Te(!a.pathname||!a.pathname.includes("?"),ri("?","pathname","search",a)),Te(!a.pathname||!a.pathname.includes("#"),ri("#","pathname","hash",a)),Te(!a.search||!a.search.includes("#"),ri("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=r;else{let u=s.length-1;if(!n&&i.startsWith("..")){let y=i.split("/");for(;y[0]==="..";)y.shift(),u-=1;a.pathname=y.join("/")}o=u>=0?s[u]:"/"}let c=vf(a,o),d=i&&i!=="/"&&i.endsWith("/"),p=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const Ps=e=>e.join("/").replace(/\/\/+/g,"/"),wf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Sf=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kf=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _f(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rx=["post","put","patch","delete"];new Set(Rx);const Cf=["get",...Rx];new Set(Cf);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fn.apply(this,arguments)}const hc=x.createContext(null),Ef=x.createContext(null),$s=x.createContext(null),Sl=x.createContext(null),us=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Ax=x.createContext(null);function Tf(e,s){let{relative:r}=s===void 0?{}:s;Ir()||Te(!1);let{basename:n,navigator:a}=x.useContext($s),{hash:l,pathname:i,search:o}=Fx(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:Ps([n,i])),a.createHref({pathname:c,search:o,hash:l})}function Ir(){return x.useContext(Sl)!=null}function Ur(){return Ir()||Te(!1),x.useContext(Sl).location}function Lx(e){x.useContext($s).static||x.useLayoutEffect(e)}function Un(){let{isDataRoute:e}=x.useContext(us);return e?Hf():Pf()}function Pf(){Ir()||Te(!1);let e=x.useContext(hc),{basename:s,future:r,navigator:n}=x.useContext($s),{matches:a}=x.useContext(us),{pathname:l}=Ur(),i=JSON.stringify(mc(a,r.v7_relativeSplatPath)),o=x.useRef(!1);return Lx(()=>{o.current=!0}),x.useCallback(function(d,p){if(p===void 0&&(p={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let u=xc(d,JSON.parse(i),l,p.relative==="path");e==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:Ps([s,u.pathname])),(p.replace?n.replace:n.push)(u,p.state,p)},[s,n,i,l,e])}function Rf(){let{matches:e}=x.useContext(us),s=e[e.length-1];return s?s.params:{}}function Fx(e,s){let{relative:r}=s===void 0?{}:s,{future:n}=x.useContext($s),{matches:a}=x.useContext(us),{pathname:l}=Ur(),i=JSON.stringify(mc(a,n.v7_relativeSplatPath));return x.useMemo(()=>xc(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function Af(e,s){return Lf(e,s)}function Lf(e,s,r,n){Ir()||Te(!1);let{navigator:a}=x.useContext($s),{matches:l}=x.useContext(us),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Ur(),p;if(s){var u;let w=typeof s=="string"?Br(s):s;c==="/"||(u=w.pathname)!=null&&u.startsWith(c)||Te(!1),p=w}else p=d;let y=p.pathname||"/",f=y;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=nf(e,{pathname:f}),j=Of(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Ps([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ps([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,r,n);return s&&j?x.createElement(Sl.Provider,{value:{location:Fn({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:bs.Pop}},j):j}function Ff(){let e=Uf(),s=_f(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),r?x.createElement("pre",{style:a},r):null,null)}const Mf=x.createElement(Ff,null);class Df extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?x.createElement(us.Provider,{value:this.props.routeContext},x.createElement(Ax.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $f(e){let{routeContext:s,match:r,children:n}=e,a=x.useContext(hc);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(us.Provider,{value:s},n)}function Of(e,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let p=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);p>=0||Te(!1),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<i.length;p++){let u=i[p];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=p),u.route.id){let{loaderData:y,errors:f}=r,g=u.route.loader&&y[u.route.id]===void 0&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((p,u,y)=>{let f,g=!1,j=null,w=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,j=u.route.errorElement||Mf,c&&(d<0&&y===0?(Vf("route-fallback"),g=!0,w=null):d===y&&(g=!0,w=u.route.hydrateFallbackElement||null)));let h=s.concat(i.slice(0,y+1)),m=()=>{let v;return f?v=j:g?v=w:u.route.Component?v=x.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=p,x.createElement($f,{match:u,routeContext:{outlet:p,matches:h,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||y===0)?x.createElement(Df,{location:r.location,revalidation:r.revalidation,component:j,error:f,children:m(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):m()},null)}var Mx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mx||{}),Dx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dx||{});function zf(e){let s=x.useContext(hc);return s||Te(!1),s}function Bf(e){let s=x.useContext(Ef);return s||Te(!1),s}function If(e){let s=x.useContext(us);return s||Te(!1),s}function $x(e){let s=If(),r=s.matches[s.matches.length-1];return r.route.id||Te(!1),r.route.id}function Uf(){var e;let s=x.useContext(Ax),r=Bf(),n=$x();return s!==void 0?s:(e=r.errors)==null?void 0:e[n]}function Hf(){let{router:e}=zf(Mx.UseNavigateStable),s=$x(Dx.UseNavigateStable),r=x.useRef(!1);return Lx(()=>{r.current=!0}),x.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Fn({fromRouteId:s},l)))},[e,s])}const $d={};function Vf(e,s,r){$d[e]||($d[e]=!0)}function Wf(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function bt(e){let{to:s,replace:r,state:n,relative:a}=e;Ir()||Te(!1);let{future:l,static:i}=x.useContext($s),{matches:o}=x.useContext(us),{pathname:c}=Ur(),d=Un(),p=xc(s,mc(o,l.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(p);return x.useEffect(()=>d(JSON.parse(u),{replace:r,state:n,relative:a}),[d,u,a,r,n]),null}function Je(e){Te(!1)}function qf(e){let{basename:s="/",children:r=null,location:n,navigationType:a=bs.Pop,navigator:l,static:i=!1,future:o}=e;Ir()&&Te(!1);let c=s.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:l,static:i,future:Fn({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof n=="string"&&(n=Br(n));let{pathname:p="/",search:u="",hash:y="",state:f=null,key:g="default"}=n,j=x.useMemo(()=>{let w=uc(p,c);return w==null?null:{location:{pathname:w,search:u,hash:y,state:f,key:g},navigationType:a}},[c,p,u,y,f,g,a]);return j==null?null:x.createElement($s.Provider,{value:d},x.createElement(Sl.Provider,{children:r,value:j}))}function Jf(e){let{children:s,location:r}=e;return Af(ao(s),r)}new Promise(()=>{});function ao(e,s){s===void 0&&(s=[]);let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let l=[...s,a];if(n.type===x.Fragment){r.push.apply(r,ao(n.props.children,l));return}n.type!==Je&&Te(!1),!n.props.index||!n.props.children||Te(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=ao(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lo.apply(this,arguments)}function Zf(e,s){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Qf(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gf(e,s){return e.button===0&&(!s||s==="_self")&&!Qf(e)}const Kf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Yf="6";try{window.__reactRouterVersion=Yf}catch{}const Xf="startTransition",Od=Hh[Xf];function eg(e){let{basename:s,children:r,future:n,window:a}=e,l=x.useRef();l.current==null&&(l.current=tf({window:a,v5Compat:!0}));let i=l.current,[o,c]=x.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},p=x.useCallback(u=>{d&&Od?Od(()=>c(u)):c(u)},[c,d]);return x.useLayoutEffect(()=>i.listen(p),[i,p]),x.useEffect(()=>Wf(n),[n]),x.createElement(qf,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const tg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sl=x.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:p,viewTransition:u}=s,y=Zf(s,Kf),{basename:f}=x.useContext($s),g,j=!1;if(typeof d=="string"&&sg.test(d)&&(g=d,tg))try{let v=new URL(window.location.href),N=d.startsWith("//")?new URL(v.protocol+d):new URL(d),C=uc(N.pathname,f);N.origin===v.origin&&C!=null?d=C+N.search+N.hash:j=!0}catch{}let w=Tf(d,{relative:a}),h=rg(d,{replace:i,state:o,target:c,preventScrollReset:p,relative:a,viewTransition:u});function m(v){n&&n(v),v.defaultPrevented||h(v)}return x.createElement("a",lo({},y,{href:g||w,onClick:j||l?n:m,ref:r,target:c}))});var zd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zd||(zd={}));var Bd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Bd||(Bd={}));function rg(e,s){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=Un(),d=Ur(),p=Fx(e,{relative:i});return x.useCallback(u=>{if(Gf(u,r)){u.preventDefault();let y=n!==void 0?n:tl(d)===tl(p);c(e,{replace:y,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,p,n,a,r,e,l,i,o])}function Ox(e,s){return function(){return e.apply(s,arguments)}}const{toString:ng}=Object.prototype,{getPrototypeOf:pc}=Object,{iterator:kl,toStringTag:zx}=Symbol,_l=(e=>s=>{const r=ng.call(s);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bt=e=>(e=e.toLowerCase(),s=>_l(s)===e),Cl=e=>s=>typeof s===e,{isArray:Hr}=Array,Dr=Cl("undefined");function Hn(e){return e!==null&&!Dr(e)&&e.constructor!==null&&!Dr(e.constructor)&&it(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bx=Bt("ArrayBuffer");function ag(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&Bx(e.buffer),s}const lg=Cl("string"),it=Cl("function"),Ix=Cl("number"),Vn=e=>e!==null&&typeof e=="object",ig=e=>e===!0||e===!1,_a=e=>{if(_l(e)!=="object")return!1;const s=pc(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(zx in e)&&!(kl in e)},og=e=>{if(!Vn(e)||Hn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},cg=Bt("Date"),dg=Bt("File"),ug=Bt("Blob"),mg=Bt("FileList"),xg=e=>Vn(e)&&it(e.pipe),hg=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||it(e.append)&&((s=_l(e))==="formdata"||s==="object"&&it(e.toString)&&e.toString()==="[object FormData]"))},pg=Bt("URLSearchParams"),[fg,gg,yg,jg]=["ReadableStream","Request","Response","Headers"].map(Bt),vg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wn(e,s,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Hr(e))for(n=0,a=e.length;n<a;n++)s.call(null,e[n],n,e);else{if(Hn(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let o;for(n=0;n<i;n++)o=l[n],s.call(null,e[o],o,e)}}function Ux(e,s){if(Hn(e))return null;s=s.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const Js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hx=e=>!Dr(e)&&e!==Js;function io(){const{caseless:e,skipUndefined:s}=Hx(this)&&this||{},r={},n=(a,l)=>{const i=e&&Ux(r,l)||l;_a(r[i])&&_a(a)?r[i]=io(r[i],a):_a(a)?r[i]=io({},a):Hr(a)?r[i]=a.slice():(!s||!Dr(a))&&(r[i]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Wn(arguments[a],n);return r}const bg=(e,s,r,{allOwnKeys:n}={})=>(Wn(s,(a,l)=>{r&&it(a)?e[l]=Ox(a,r):e[l]=a},{allOwnKeys:n}),e),Ng=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wg=(e,s,r,n)=>{e.prototype=Object.create(s.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),r&&Object.assign(e.prototype,r)},Sg=(e,s,r,n)=>{let a,l,i;const o={};if(s=s||{},e==null)return s;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)i=a[l],(!n||n(i,e,s))&&!o[i]&&(s[i]=e[i],o[i]=!0);e=r!==!1&&pc(e)}while(e&&(!r||r(e,s))&&e!==Object.prototype);return s},kg=(e,s,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=s.length;const n=e.indexOf(s,r);return n!==-1&&n===r},_g=e=>{if(!e)return null;if(Hr(e))return e;let s=e.length;if(!Ix(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=e[s];return r},Cg=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&pc(Uint8Array)),Eg=(e,s)=>{const n=(e&&e[kl]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;s.call(e,l[0],l[1])}},Tg=(e,s)=>{let r;const n=[];for(;(r=e.exec(s))!==null;)n.push(r);return n},Pg=Bt("HTMLFormElement"),Rg=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Id=(({hasOwnProperty:e})=>(s,r)=>e.call(s,r))(Object.prototype),Ag=Bt("RegExp"),Vx=(e,s)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Wn(r,(a,l)=>{let i;(i=s(a,l,e))!==!1&&(n[l]=i||a)}),Object.defineProperties(e,n)},Lg=e=>{Vx(e,(s,r)=>{if(it(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(it(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Fg=(e,s)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return Hr(e)?n(e):n(String(e).split(s)),r},Mg=()=>{},Dg=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function $g(e){return!!(e&&it(e.append)&&e[zx]==="FormData"&&e[kl])}const Og=e=>{const s=new Array(10),r=(n,a)=>{if(Vn(n)){if(s.indexOf(n)>=0)return;if(Hn(n))return n;if(!("toJSON"in n)){s[a]=n;const l=Hr(n)?[]:{};return Wn(n,(i,o)=>{const c=r(i,a+1);!Dr(c)&&(l[o]=c)}),s[a]=void 0,l}}return n};return r(e,0)},zg=Bt("AsyncFunction"),Bg=e=>e&&(Vn(e)||it(e))&&it(e.then)&&it(e.catch),Wx=((e,s)=>e?setImmediate:s?((r,n)=>(Js.addEventListener("message",({source:a,data:l})=>{a===Js&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Js.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",it(Js.postMessage)),Ig=typeof queueMicrotask<"u"?queueMicrotask.bind(Js):typeof process<"u"&&process.nextTick||Wx,Ug=e=>e!=null&&it(e[kl]),F={isArray:Hr,isArrayBuffer:Bx,isBuffer:Hn,isFormData:hg,isArrayBufferView:ag,isString:lg,isNumber:Ix,isBoolean:ig,isObject:Vn,isPlainObject:_a,isEmptyObject:og,isReadableStream:fg,isRequest:gg,isResponse:yg,isHeaders:jg,isUndefined:Dr,isDate:cg,isFile:dg,isBlob:ug,isRegExp:Ag,isFunction:it,isStream:xg,isURLSearchParams:pg,isTypedArray:Cg,isFileList:mg,forEach:Wn,merge:io,extend:bg,trim:vg,stripBOM:Ng,inherits:wg,toFlatObject:Sg,kindOf:_l,kindOfTest:Bt,endsWith:kg,toArray:_g,forEachEntry:Eg,matchAll:Tg,isHTMLForm:Pg,hasOwnProperty:Id,hasOwnProp:Id,reduceDescriptors:Vx,freezeMethods:Lg,toObjectSet:Fg,toCamelCase:Rg,noop:Mg,toFiniteNumber:Dg,findKey:Ux,global:Js,isContextDefined:Hx,isSpecCompliantForm:$g,toJSONObject:Og,isAsyncFn:zg,isThenable:Bg,setImmediate:Wx,asap:Ig,isIterable:Ug};function ie(e,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}F.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const qx=ie.prototype,Jx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Jx[e]={value:e}});Object.defineProperties(ie,Jx);Object.defineProperty(qx,"isAxiosError",{value:!0});ie.from=(e,s,r,n,a,l)=>{const i=Object.create(qx);F.toFlatObject(e,i,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=s==null&&e?e.code:s;return ie.call(i,o,c,r,n,a),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",l&&Object.assign(i,l),i};const Hg=null;function oo(e){return F.isPlainObject(e)||F.isArray(e)}function Zx(e){return F.endsWith(e,"[]")?e.slice(0,-2):e}function Ud(e,s,r){return e?e.concat(s).map(function(a,l){return a=Zx(a),!r&&l?"["+a+"]":a}).join(r?".":""):s}function Vg(e){return F.isArray(e)&&!e.some(oo)}const Wg=F.toFlatObject(F,{},null,function(s){return/^is[A-Z]/.test(s)});function El(e,s,r){if(!F.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,r=F.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,w){return!F.isUndefined(w[j])});const n=r.metaTokens,a=r.visitor||p,l=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(s);if(!F.isFunction(a))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(F.isDate(g))return g.toISOString();if(F.isBoolean(g))return g.toString();if(!c&&F.isBlob(g))throw new ie("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(g)||F.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function p(g,j,w){let h=g;if(g&&!w&&typeof g=="object"){if(F.endsWith(j,"{}"))j=n?j:j.slice(0,-2),g=JSON.stringify(g);else if(F.isArray(g)&&Vg(g)||(F.isFileList(g)||F.endsWith(j,"[]"))&&(h=F.toArray(g)))return j=Zx(j),h.forEach(function(v,N){!(F.isUndefined(v)||v===null)&&s.append(i===!0?Ud([j],N,l):i===null?j:j+"[]",d(v))}),!1}return oo(g)?!0:(s.append(Ud(w,j,l),d(g)),!1)}const u=[],y=Object.assign(Wg,{defaultVisitor:p,convertValue:d,isVisitable:oo});function f(g,j){if(!F.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+j.join("."));u.push(g),F.forEach(g,function(h,m){(!(F.isUndefined(h)||h===null)&&a.call(s,h,F.isString(m)?m.trim():m,j,y))===!0&&f(h,j?j.concat(m):[m])}),u.pop()}}if(!F.isObject(e))throw new TypeError("data must be an object");return f(e),s}function Hd(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function fc(e,s){this._pairs=[],e&&El(e,this,s)}const Qx=fc.prototype;Qx.append=function(s,r){this._pairs.push([s,r])};Qx.toString=function(s){const r=s?function(n){return s.call(this,n,Hd)}:Hd;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function qg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gx(e,s,r){if(!s)return e;const n=r&&r.encode||qg;F.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let l;if(a?l=a(s,r):l=F.isURLSearchParams(s)?s.toString():new fc(s,r).toString(n),l){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Vd{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){F.forEach(this.handlers,function(n){n!==null&&s(n)})}}const Kx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jg=typeof URLSearchParams<"u"?URLSearchParams:fc,Zg=typeof FormData<"u"?FormData:null,Qg=typeof Blob<"u"?Blob:null,Gg={isBrowser:!0,classes:{URLSearchParams:Jg,FormData:Zg,Blob:Qg},protocols:["http","https","file","blob","url","data"]},gc=typeof window<"u"&&typeof document<"u",co=typeof navigator=="object"&&navigator||void 0,Kg=gc&&(!co||["ReactNative","NativeScript","NS"].indexOf(co.product)<0),Yg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xg=gc&&window.location.href||"http://localhost",ey=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gc,hasStandardBrowserEnv:Kg,hasStandardBrowserWebWorkerEnv:Yg,navigator:co,origin:Xg},Symbol.toStringTag,{value:"Module"})),Qe={...ey,...Gg};function ty(e,s){return El(e,new Qe.classes.URLSearchParams,{visitor:function(r,n,a,l){return Qe.isNode&&F.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function sy(e){return F.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function ry(e){const s={},r=Object.keys(e);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],s[l]=e[l];return s}function Yx(e){function s(r,n,a,l){let i=r[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),c=l>=r.length;return i=!i&&F.isArray(a)?a.length:i,c?(F.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!o):((!a[i]||!F.isObject(a[i]))&&(a[i]=[]),s(r,n,a[i],l)&&F.isArray(a[i])&&(a[i]=ry(a[i])),!o)}if(F.isFormData(e)&&F.isFunction(e.entries)){const r={};return F.forEachEntry(e,(n,a)=>{s(sy(n),a,r,0)}),r}return null}function ny(e,s,r){if(F.isString(e))try{return(s||JSON.parse)(e),F.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const qn={transitional:Kx,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=F.isObject(s);if(l&&F.isHTMLForm(s)&&(s=new FormData(s)),F.isFormData(s))return a?JSON.stringify(Yx(s)):s;if(F.isArrayBuffer(s)||F.isBuffer(s)||F.isStream(s)||F.isFile(s)||F.isBlob(s)||F.isReadableStream(s))return s;if(F.isArrayBufferView(s))return s.buffer;if(F.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ty(s,this.formSerializer).toString();if((o=F.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return El(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),ny(s)):s}],transformResponse:[function(s){const r=this.transitional||qn.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(F.isResponse(s)||F.isReadableStream(s))return s;if(s&&F.isString(s)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?ie.from(o,ie.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],e=>{qn.headers[e]={}});const ay=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ly=e=>{const s={};let r,n,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||s[r]&&ay[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},Wd=Symbol("internals");function Xr(e){return e&&String(e).trim().toLowerCase()}function Ca(e){return e===!1||e==null?e:F.isArray(e)?e.map(Ca):String(e)}function iy(e){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)s[n[1]]=n[2];return s}const oy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ni(e,s,r,n,a){if(F.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!F.isString(s)){if(F.isString(n))return s.indexOf(n)!==-1;if(F.isRegExp(n))return n.test(s)}}function cy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function dy(e,s){const r=F.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,l,i){return this[n].call(this,s,a,l,i)},configurable:!0})})}let ot=class{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function l(o,c,d){const p=Xr(c);if(!p)throw new Error("header name must be a non-empty string");const u=F.findKey(a,p);(!u||a[u]===void 0||d===!0||d===void 0&&a[u]!==!1)&&(a[u||c]=Ca(o))}const i=(o,c)=>F.forEach(o,(d,p)=>l(d,p,c));if(F.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(F.isString(s)&&(s=s.trim())&&!oy(s))i(ly(s),r);else if(F.isObject(s)&&F.isIterable(s)){let o={},c,d;for(const p of s){if(!F.isArray(p))throw TypeError("Object iterator must return a key-value pair");o[d=p[0]]=(c=o[d])?F.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}i(o,r)}else s!=null&&l(r,s,n);return this}get(s,r){if(s=Xr(s),s){const n=F.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return iy(a);if(F.isFunction(r))return r.call(this,a,n);if(F.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Xr(s),s){const n=F.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||ni(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function l(i){if(i=Xr(i),i){const o=F.findKey(n,i);o&&(!r||ni(n,n[o],o,r))&&(delete n[o],a=!0)}}return F.isArray(s)?s.forEach(l):l(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!s||ni(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const r=this,n={};return F.forEach(this,(a,l)=>{const i=F.findKey(n,l);if(i){r[i]=Ca(a),delete r[l];return}const o=s?cy(l):String(l).trim();o!==l&&delete r[l],r[o]=Ca(a),n[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return F.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&F.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[Wd]=this[Wd]={accessors:{}}).accessors,a=this.prototype;function l(i){const o=Xr(i);n[o]||(dy(a,i),n[o]=!0)}return F.isArray(s)?s.forEach(l):l(s),this}};ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(ot.prototype,({value:e},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(n){this[r]=n}}});F.freezeMethods(ot);function ai(e,s){const r=this||qn,n=s||r,a=ot.from(n.headers);let l=n.data;return F.forEach(e,function(o){l=o.call(r,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function Xx(e){return!!(e&&e.__CANCEL__)}function Vr(e,s,r){ie.call(this,e??"canceled",ie.ERR_CANCELED,s,r),this.name="CanceledError"}F.inherits(Vr,ie,{__CANCEL__:!0});function eh(e,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):s(new ie("Request failed with status code "+r.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function uy(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function my(e,s){e=e||10;const r=new Array(e),n=new Array(e);let a=0,l=0,i;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),p=n[l];i||(i=d),r[a]=c,n[a]=d;let u=l,y=0;for(;u!==a;)y+=r[u++],u=u%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-i<s)return;const f=p&&d-p;return f?Math.round(y*1e3/f):void 0}}function xy(e,s){let r=0,n=1e3/s,a,l;const i=(d,p=Date.now())=>{r=p,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const p=Date.now(),u=p-r;u>=n?i(d,p):(a=d,l||(l=setTimeout(()=>{l=null,i(a)},n-u)))},()=>a&&i(a)]}const rl=(e,s,r=3)=>{let n=0;const a=my(50,250);return xy(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,c=i-n,d=a(c),p=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&p?(o-i)/d:void 0,event:l,lengthComputable:o!=null,[s?"download":"upload"]:!0};e(u)},r)},qd=(e,s)=>{const r=e!=null;return[n=>s[0]({lengthComputable:r,total:e,loaded:n}),s[1]]},Jd=e=>(...s)=>F.asap(()=>e(...s)),hy=Qe.hasStandardBrowserEnv?((e,s)=>r=>(r=new URL(r,Qe.origin),e.protocol===r.protocol&&e.host===r.host&&(s||e.port===r.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,py=Qe.hasStandardBrowserEnv?{write(e,s,r,n,a,l){const i=[e+"="+encodeURIComponent(s)];F.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),F.isString(n)&&i.push("path="+n),F.isString(a)&&i.push("domain="+a),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gy(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function th(e,s,r){let n=!fy(s);return e&&(n||r==!1)?gy(e,s):s}const Zd=e=>e instanceof ot?{...e}:e;function sr(e,s){s=s||{};const r={};function n(d,p,u,y){return F.isPlainObject(d)&&F.isPlainObject(p)?F.merge.call({caseless:y},d,p):F.isPlainObject(p)?F.merge({},p):F.isArray(p)?p.slice():p}function a(d,p,u,y){if(F.isUndefined(p)){if(!F.isUndefined(d))return n(void 0,d,u,y)}else return n(d,p,u,y)}function l(d,p){if(!F.isUndefined(p))return n(void 0,p)}function i(d,p){if(F.isUndefined(p)){if(!F.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function o(d,p,u){if(u in s)return n(d,p);if(u in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,p,u)=>a(Zd(d),Zd(p),u,!0)};return F.forEach(Object.keys({...e,...s}),function(p){const u=c[p]||a,y=u(e[p],s[p],p);F.isUndefined(y)&&u!==o||(r[p]=y)}),r}const sh=e=>{const s=sr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:o}=s;if(s.headers=i=ot.from(i),s.url=Gx(th(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),F.isFormData(r)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(F.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([p,u])=>{d.includes(p.toLowerCase())&&i.set(p,u)})}}if(Qe.hasStandardBrowserEnv&&(n&&F.isFunction(n)&&(n=n(s)),n||n!==!1&&hy(s.url))){const c=a&&l&&py.read(l);c&&i.set(a,c)}return s},yy=typeof XMLHttpRequest<"u",jy=yy&&function(e){return new Promise(function(r,n){const a=sh(e);let l=a.data;const i=ot.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,p,u,y,f,g;function j(){f&&f(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function h(){if(!w)return;const v=ot.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),C={data:!o||o==="text"||o==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:v,config:e,request:w};eh(function(k){r(k),j()},function(k){n(k),j()},C),w=null}"onloadend"in w?w.onloadend=h:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(h)},w.onabort=function(){w&&(n(new ie("Request aborted",ie.ECONNABORTED,e,w)),w=null)},w.onerror=function(N){const C=N&&N.message?N.message:"Network Error",R=new ie(C,ie.ERR_NETWORK,e,w);R.event=N||null,n(R),w=null},w.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const C=a.transitional||Kx;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),n(new ie(N,C.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,w)),w=null},l===void 0&&i.setContentType(null),"setRequestHeader"in w&&F.forEach(i.toJSON(),function(N,C){w.setRequestHeader(C,N)}),F.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),o&&o!=="json"&&(w.responseType=a.responseType),d&&([y,g]=rl(d,!0),w.addEventListener("progress",y)),c&&w.upload&&([u,f]=rl(c),w.upload.addEventListener("progress",u),w.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(p=v=>{w&&(n(!v||v.type?new Vr(null,e,w):v),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const m=uy(a.url);if(m&&Qe.protocols.indexOf(m)===-1){n(new ie("Unsupported protocol "+m+":",ie.ERR_BAD_REQUEST,e));return}w.send(l||null)})},vy=(e,s)=>{const{length:r}=e=e?e.filter(Boolean):[];if(s||r){let n=new AbortController,a;const l=function(d){if(!a){a=!0,o();const p=d instanceof Error?d:this.reason;n.abort(p instanceof ie?p:new Vr(p instanceof Error?p.message:p))}};let i=s&&setTimeout(()=>{i=null,l(new ie(`timeout ${s} of ms exceeded`,ie.ETIMEDOUT))},s);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>F.asap(o),c}},by=function*(e,s){let r=e.byteLength;if(r<s){yield e;return}let n=0,a;for(;n<r;)a=n+s,yield e.slice(n,a),n=a},Ny=async function*(e,s){for await(const r of wy(e))yield*by(r,s)},wy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},Qd=(e,s,r,n)=>{const a=Ny(e,s);let l=0,i,o=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:p}=await a.next();if(d){o(),c.close();return}let u=p.byteLength;if(r){let y=l+=u;r(y)}c.enqueue(new Uint8Array(p))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},Gd=64*1024,{isFunction:ua}=F,Sy=(({Request:e,Response:s})=>({Request:e,Response:s}))(F.global),{ReadableStream:Kd,TextEncoder:Yd}=F.global,Xd=(e,...s)=>{try{return!!e(...s)}catch{return!1}},ky=e=>{e=F.merge.call({skipUndefined:!0},Sy,e);const{fetch:s,Request:r,Response:n}=e,a=s?ua(s):typeof fetch=="function",l=ua(r),i=ua(n);if(!a)return!1;const o=a&&ua(Kd),c=a&&(typeof Yd=="function"?(g=>j=>g.encode(j))(new Yd):async g=>new Uint8Array(await new r(g).arrayBuffer())),d=l&&o&&Xd(()=>{let g=!1;const j=new r(Qe.origin,{body:new Kd,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!j}),p=i&&o&&Xd(()=>F.isReadableStream(new n("").body)),u={stream:p&&(g=>g.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!u[g]&&(u[g]=(j,w)=>{let h=j&&j[g];if(h)return h.call(j);throw new ie(`Response type '${g}' is not supported`,ie.ERR_NOT_SUPPORT,w)})});const y=async g=>{if(g==null)return 0;if(F.isBlob(g))return g.size;if(F.isSpecCompliantForm(g))return(await new r(Qe.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(F.isArrayBufferView(g)||F.isArrayBuffer(g))return g.byteLength;if(F.isURLSearchParams(g)&&(g=g+""),F.isString(g))return(await c(g)).byteLength},f=async(g,j)=>{const w=F.toFiniteNumber(g.getContentLength());return w??y(j)};return async g=>{let{url:j,method:w,data:h,signal:m,cancelToken:v,timeout:N,onDownloadProgress:C,onUploadProgress:R,responseType:k,headers:D,withCredentials:L="same-origin",fetchOptions:S}=sh(g),_=s||fetch;k=k?(k+"").toLowerCase():"text";let b=vy([m,v&&v.toAbortSignal()],N),A=null;const B=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let H;try{if(R&&d&&w!=="get"&&w!=="head"&&(H=await f(D,h))!==0){let W=new r(j,{method:"POST",body:h,duplex:"half"}),G;if(F.isFormData(h)&&(G=W.headers.get("content-type"))&&D.setContentType(G),W.body){const[J,re]=qd(H,rl(Jd(R)));h=Qd(W.body,Gd,J,re)}}F.isString(L)||(L=L?"include":"omit");const q=l&&"credentials"in r.prototype,ae={...S,signal:b,method:w.toUpperCase(),headers:D.normalize().toJSON(),body:h,duplex:"half",credentials:q?L:void 0};A=l&&new r(j,ae);let M=await(l?_(A,S):_(j,ae));const T=p&&(k==="stream"||k==="response");if(p&&(C||T&&B)){const W={};["status","statusText","headers"].forEach(X=>{W[X]=M[X]});const G=F.toFiniteNumber(M.headers.get("content-length")),[J,re]=C&&qd(G,rl(Jd(C),!0))||[];M=new n(Qd(M.body,Gd,J,()=>{re&&re(),B&&B()}),W)}k=k||"text";let U=await u[F.findKey(u,k)||"text"](M,g);return!T&&B&&B(),await new Promise((W,G)=>{eh(W,G,{data:U,headers:ot.from(M.headers),status:M.status,statusText:M.statusText,config:g,request:A})})}catch(q){throw B&&B(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,g,A),{cause:q.cause||q}):ie.from(q,q&&q.code,g,A)}}},_y=new Map,rh=e=>{let s=e?e.env:{};const{fetch:r,Request:n,Response:a}=s,l=[n,a,r];let i=l.length,o=i,c,d,p=_y;for(;o--;)c=l[o],d=p.get(c),d===void 0&&p.set(c,d=o?new Map:ky(s)),p=d;return d};rh();const uo={http:Hg,xhr:jy,fetch:{get:rh}};F.forEach(uo,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const eu=e=>`- ${e}`,Cy=e=>F.isFunction(e)||e===null||e===!1,nh={getAdapter:(e,s)=>{e=F.isArray(e)?e:[e];const{length:r}=e;let n,a;const l={};for(let i=0;i<r;i++){n=e[i];let o;if(a=n,!Cy(n)&&(a=uo[(o=String(n)).toLowerCase()],a===void 0))throw new ie(`Unknown adapter '${o}'`);if(a&&(F.isFunction(a)||(a=a.get(s))))break;l[o||"#"+i]=a}if(!a){const i=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?i.length>1?`since :
`+i.map(eu).join(`
`):" "+eu(i[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:uo};function li(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vr(null,e)}function tu(e){return li(e),e.headers=ot.from(e.headers),e.data=ai.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nh.getAdapter(e.adapter||qn.adapter,e)(e).then(function(n){return li(e),n.data=ai.call(e,e.transformResponse,n),n.headers=ot.from(n.headers),n},function(n){return Xx(n)||(li(e),n&&n.response&&(n.response.data=ai.call(e,e.transformResponse,n.response),n.response.headers=ot.from(n.response.headers))),Promise.reject(n)})}const ah="1.12.2",Tl={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Tl[e]=function(n){return typeof n===e||"a"+(s<1?"n ":" ")+e}});const su={};Tl.transitional=function(s,r,n){function a(l,i){return"[Axios v"+ah+"] Transitional option '"+l+"'"+i+(n?". "+n:"")}return(l,i,o)=>{if(s===!1)throw new ie(a(i," has been removed"+(r?" in "+r:"")),ie.ERR_DEPRECATED);return r&&!su[i]&&(su[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,o):!0}};Tl.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function Ey(e,s,r){if(typeof e!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],i=s[l];if(i){const o=e[l],c=o===void 0||i(o,l,e);if(c!==!0)throw new ie("option "+l+" must be "+c,ie.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ie("Unknown option "+l,ie.ERR_BAD_OPTION)}}const Ea={assertOptions:Ey,validators:Tl},Ut=Ea.validators;let Gs=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Vd,response:new Vd}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=sr(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&Ea.assertOptions(n,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),a!=null&&(F.isFunction(a)?r.paramsSerializer={serialize:a}:Ea.assertOptions(a,{encode:Ut.function,serialize:Ut.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ea.assertOptions(r,{baseUrl:Ut.spelling("baseURL"),withXsrfToken:Ut.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&F.merge(l.common,l[r.method]);l&&F.forEach(["delete","get","head","post","put","patch","common"],g=>{delete l[g]}),r.headers=ot.concat(i,l);const o=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(c=c&&j.synchronous,o.unshift(j.fulfilled,j.rejected))});const d=[];this.interceptors.response.forEach(function(j){d.push(j.fulfilled,j.rejected)});let p,u=0,y;if(!c){const g=[tu.bind(this),void 0];for(g.unshift(...o),g.push(...d),y=g.length,p=Promise.resolve(r);u<y;)p=p.then(g[u++],g[u++]);return p}y=o.length;let f=r;for(;u<y;){const g=o[u++],j=o[u++];try{f=g(f)}catch(w){j.call(this,w);break}}try{p=tu.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,y=d.length;u<y;)p=p.then(d[u++],d[u++]);return p}getUri(s){s=sr(this.defaults,s);const r=th(s.baseURL,s.url,s.allowAbsoluteUrls);return Gx(r,s.params,s.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(s){Gs.prototype[s]=function(r,n){return this.request(sr(n||{},{method:s,url:r,data:(n||{}).data}))}});F.forEach(["post","put","patch"],function(s){function r(n){return function(l,i,o){return this.request(sr(o||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Gs.prototype[s]=r(),Gs.prototype[s+"Form"]=r(!0)});let Ty=class lh{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(o=>{n.subscribe(o),l=o}).then(a);return i.cancel=function(){n.unsubscribe(l)},i},s(function(l,i,o){n.reason||(n.reason=new Vr(l,i,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new lh(function(a){s=a}),cancel:s}}};function Py(e){return function(r){return e.apply(null,r)}}function Ry(e){return F.isObject(e)&&e.isAxiosError===!0}const mo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mo).forEach(([e,s])=>{mo[s]=e});function ih(e){const s=new Gs(e),r=Ox(Gs.prototype.request,s);return F.extend(r,Gs.prototype,s,{allOwnKeys:!0}),F.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return ih(sr(e,a))},r}const Pe=ih(qn);Pe.Axios=Gs;Pe.CanceledError=Vr;Pe.CancelToken=Ty;Pe.isCancel=Xx;Pe.VERSION=ah;Pe.toFormData=El;Pe.AxiosError=ie;Pe.Cancel=Pe.CanceledError;Pe.all=function(s){return Promise.all(s)};Pe.spread=Py;Pe.isAxiosError=Ry;Pe.mergeConfig=sr;Pe.AxiosHeaders=ot;Pe.formToJSON=e=>Yx(F.isHTMLForm(e)?new FormData(e):e);Pe.getAdapter=nh.getAdapter;Pe.HttpStatusCode=mo;Pe.default=Pe;const{Axios:tv,AxiosError:sv,CanceledError:rv,isCancel:nv,CancelToken:av,VERSION:lv,all:iv,Cancel:ov,isAxiosError:cv,spread:dv,toFormData:uv,AxiosHeaders:mv,HttpStatusCode:xv,formToJSON:hv,getAdapter:pv,mergeConfig:fv}=Pe,Ay=()=>"/api",O=Pe.create({baseURL:Ay(),headers:{"Content-Type":"application/json"}});O.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e));O.interceptors.response.use(e=>e,e=>{var s;return((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(e)});const xo={getStatus:()=>O.get("/math-game/status"),startGame:e=>O.post("/math-game/start",e),submitGame:e=>O.post("/math-game/submit",e)},Yt={getJobs:()=>O.get("/jobs"),getJob:e=>O.get(`/jobs/${e}`),applyToJob:(e,s)=>O.post(`/jobs/${e}/apply`,{answers:s}),getApplications:e=>{const s=new URLSearchParams;e!=null&&e.status&&s.append("status",e.status),e!=null&&e.job_id&&s.append("job_id",e.job_id.toString()),e!=null&&e.user_id&&s.append("user_id",e.user_id.toString());const r=s.toString();return O.get(`/jobs/applications${r?`?${r}`:""}`)},getApplication:e=>O.get(`/jobs/applications/${e}`),updateApplicationStatus:(e,s)=>O.put(`/jobs/applications/${e}`,{status:s}),getJobAssignmentsOverview:e=>{const s=e?`?class=${e}`:"";return O.get(`/jobs/assignments/overview${s}`)},assignJobToStudent:(e,s)=>O.post("/jobs/assign",{user_id:e,job_id:s}),removeJobFromStudent:e=>O.delete(`/jobs/assign/${e}`)},rs={getParcels:e=>{const s=new URLSearchParams;(e==null?void 0:e.minRow)!==void 0&&s.append("minRow",e.minRow.toString()),(e==null?void 0:e.maxRow)!==void 0&&s.append("maxRow",e.maxRow.toString()),(e==null?void 0:e.minCol)!==void 0&&s.append("minCol",e.minCol.toString()),(e==null?void 0:e.maxCol)!==void 0&&s.append("maxCol",e.maxCol.toString()),(e==null?void 0:e.owned)!==void 0&&s.append("owned",e.owned.toString()),e!=null&&e.biome&&s.append("biome",e.biome);const r=s.toString();return O.get(`/land/parcels${r?`?${r}`:""}`)},getParcel:e=>O.get(`/land/parcels/${e}`),getMyProperties:()=>O.get("/land/my-properties"),submitPurchaseRequest:(e,s)=>O.post("/land/purchase-request",{parcel_id:e,offered_price:s}),getPurchaseRequests:e=>{const s=e?`?status=${e}`:"";return O.get(`/land/purchase-requests${s}`)},updatePurchaseRequest:(e,s,r)=>O.put(`/land/purchase-requests/${e}`,{status:s,denial_reason:r}),seedLandData:()=>O.post("/land/seed"),getStats:()=>O.get("/land/stats"),getBiomeConfig:()=>O.get("/land/biome-config")},Gt={getTreasuryInfo:e=>O.get(`/town/treasury/${e}`),depositToTreasury:(e,s,r)=>O.post(`/town/treasury/${e}/deposit`,{amount:s,description:r}),withdrawFromTreasury:(e,s,r)=>O.post(`/town/treasury/${e}/withdraw`,{amount:s,description:r}),getTaxBrackets:()=>O.get("/town/tax-brackets"),getTaxReport:(e,s)=>{const r=s?`?period=${s}`:"";return O.get(`/town/tax-report/${e}${r}`)},paySalaries:e=>O.post(`/town/pay-salaries/${e}`),payBasicSalary:(e,s)=>O.post(`/town/pay-basic-salary/${e}`,s?{amount:s}:{}),toggleTax:(e,s)=>O.post(`/town/toggle-tax/${e}`,{enabled:s})},Hs={getTenders:e=>{const s=e?`?town_class=${e}`:"";return O.get(`/tenders${s}`)},createTender:e=>O.post("/tenders",e),applyToTender:e=>O.post(`/tenders/${e}/apply`),getTenderApplications:e=>O.get(`/tenders/${e}/applications`),updateTenderApplicationStatus:(e,s)=>O.put(`/tenders/applications/${e}`,{status:s}),payTender:e=>O.post(`/tenders/${e}/pay`)},oh=x.createContext(void 0),Ve=()=>{const e=x.useContext(oh);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Ly=({children:e})=>{const[s,r]=x.useState(null),[n,a]=x.useState(null),[l,i]=x.useState(!0);x.useEffect(()=>{const y=localStorage.getItem("token");y?(O.defaults.headers.common.Authorization=`Bearer ${y}`,o()):i(!1)},[]);const o=async()=>{try{const y=await O.get("/auth/profile");r(y.data.user),a(y.data.account)}catch(y){console.error("Failed to fetch profile:",y),localStorage.removeItem("token"),delete O.defaults.headers.common.Authorization}finally{i(!1)}},u={user:s,account:n,login:async(y,f)=>{var g,j;try{console.log("Attempting login for:",y);const w=await O.post("/auth/login",{username:y,password:f});console.log("Login response:",w.data);const{token:h,user:m,account:v}=w.data;localStorage.setItem("token",h),O.defaults.headers.common.Authorization=`Bearer ${h}`,console.log("Setting user state:",m),r(m),a(v),console.log("User state set, should redirect to dashboard"),window.location.href="/"}catch(w){throw console.error("Login error:",w),new Error(((j=(g=w.response)==null?void 0:g.data)==null?void 0:j.error)||"Login failed")}},register:async(y,f,g,j,w,h,m)=>{var v,N;try{console.log("Attempting registration for:",y,g);const C=await O.post("/auth/register",{username:y,password:f,role:g,first_name:j,last_name:w,class:h,email:m});if(console.log("Registration response:",C.data),C.data.requires_approval)return C.data;const{token:R,user:k,account:D}=C.data;localStorage.setItem("token",R),O.defaults.headers.common.Authorization=`Bearer ${R}`,r(k),a(D),window.location.href="/"}catch(C){throw console.error("Registration error:",C),new Error(((N=(v=C.response)==null?void 0:v.data)==null?void 0:N.error)||"Registration failed")}},logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("student_header_color_index"),delete O.defaults.headers.common.Authorization,r(null),a(null)},loading:l};return t.jsx(oh.Provider,{value:u,children:e})},ch=x.createContext(void 0),Nt=()=>{const e=x.useContext(ch);if(e===void 0)throw new Error("usePlugins must be used within a PluginProvider");return e},ut=({children:e})=>{const[s,r]=x.useState([]),[n,a]=x.useState(!0),l=async()=>{try{const c=await O.get("/plugins");r(c.data)}catch(c){console.error("Failed to fetch plugins:",c)}finally{a(!1)}};x.useEffect(()=>{localStorage.getItem("token")?l():a(!1)},[]);const i=s.filter(c=>c.enabled),o={plugins:s,enabledPlugins:i,loading:n,refreshPlugins:l};return t.jsx(ch.Provider,{value:o,children:e})},dh=x.createContext(void 0),ms=()=>{const e=x.useContext(dh);if(e===void 0)throw new Error("useTown must be used within a TownProvider");return e},mt=({children:e})=>{const{user:s}=Ve(),[r,n]=x.useState(null),[a,l]=x.useState(null),[i,o]=x.useState([]),[c,d]=x.useState([]),[p,u]=x.useState(!0);x.useEffect(()=>{s&&(s.class&&["6A","6B","6C"].includes(s.class)?l(s.class):s.role==="teacher"&&c.length>0&&!a&&l(c[0].class))},[s,c,a]),x.useEffect(()=>{a&&s&&(y(),g())},[a,s]),x.useEffect(()=>{(s==null?void 0:s.role)==="teacher"&&f()},[s]);const y=async()=>{if(!(!a||!s))try{const m=await O.get(`/town/settings?class=${a}`);n(m.data)}catch(m){console.error("Failed to fetch town settings:",m)}finally{u(!1)}},f=async()=>{if(s)try{const m=await O.get("/town/settings?all=true");d(m.data)}catch(m){console.error("Failed to fetch all towns:",m)}},g=async()=>{if(!(!a||!s))try{const m=await O.get(`/announcements?town_class=${a}`);o(m.data)}catch(m){console.error("Failed to fetch announcements:",m)}},h={currentTown:r,currentTownClass:a,announcements:i,allTowns:c,loading:p,setCurrentTownClass:m=>{l(m),u(!0)},refreshTown:async()=>{await y(),(s==null?void 0:s.role)==="teacher"&&await f()},refreshAnnouncements:g};return t.jsx(dh.Provider,{value:h,children:e})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(e,s)=>{const r=x.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...d},p)=>x.createElement("svg",{ref:p,...Fy,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${My(e)}`,o].join(" "),...d},[...s.map(([u,y])=>x.createElement(u,y)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=V("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=V("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=V("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=V("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=V("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=V("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=V("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=V("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=V("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=V("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=V("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=V("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=V("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=V("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=V("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=V("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=V("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=V("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=V("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=V("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=V("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=V("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=V("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=V("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=V("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=V("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=V("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=V("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=V("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=V("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=V("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=V("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=V("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=V("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=V("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=V("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=V("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=V("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=V("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=V("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=V("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=V("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=V("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=V("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=V("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=V("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),uu=({user:e,size:s="md",className:r=""})=>{if(!e)return null;const n=()=>e.first_name&&e.last_name?`${e.first_name[0]}${e.last_name[0]}`.toUpperCase():e.username?e.username.substring(0,2).toUpperCase():"??",a={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},l={sm:"text-lg",md:"text-2xl",lg:"text-3xl"};return t.jsx("div",{className:`${a[s]} rounded-full flex items-center justify-center font-semibold ${r}`,style:e.profile_emoji?{}:{backgroundColor:"#9CA3AF",color:"white"},children:e.profile_emoji?t.jsx("span",{className:l[s],children:e.profile_emoji}):t.jsx("span",{children:n()})})},ij=({children:e})=>{const{user:s,logout:r}=Ve(),n=Ur(),[a,l]=x.useState(!1),i=()=>{r()},o=[{name:"Dashboard",href:"/",icon:Ta}],c=d=>d==="/"?n.pathname==="/":n.pathname.startsWith(d);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-primary-600 p-2 rounded-lg",children:t.jsx("img",{src:"/logo.png",alt:"Town Hub",className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Town Hub"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Game of Life Control Center"})]})]}),t.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:o.map(d=>{const p=d.icon;return t.jsxs(sl,{to:d.href,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c(d.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[t.jsx(p,{className:"h-4 w-4"}),t.jsx("span",{children:d.name})]},d.name)})}),s&&t.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[t.jsx(uu,{user:s,size:"md"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:s.username}),t.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:s.role==="teacher"?" Teacher":" Student"})]})]}),t.jsxs("button",{onClick:i,className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[t.jsx(cu,{className:"h-4 w-4"}),t.jsx("span",{children:"Logout"})]})]}),t.jsx("button",{onClick:()=>l(!a),className:"md:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:a?t.jsx(zs,{className:"h-6 w-6"}):t.jsx(Wy,{className:"h-6 w-6"})})]})}),a&&t.jsx("div",{className:"md:hidden border-t border-gray-200",children:t.jsxs("div",{className:"px-4 py-3 space-y-1",children:[o.map(d=>{const p=d.icon;return t.jsxs(sl,{to:d.href,onClick:()=>l(!1),className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-base font-medium transition-colors ${c(d.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[t.jsx(p,{className:"h-5 w-5"}),t.jsx("span",{children:d.name})]},d.name)}),s&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsxs("div",{className:"px-4 py-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(uu,{user:s,size:"md"}),t.jsx("span",{className:"font-medium text-gray-900",children:s.username})]}),t.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium inline-block",children:s.role==="teacher"?" Teacher":" Student"})]}),t.jsxs("button",{onClick:()=>{i(),l(!1)},className:"flex items-center space-x-2 w-full px-4 py-2 rounded-lg text-base font-medium text-gray-600 hover:bg-gray-100",children:[t.jsx(cu,{className:"h-5 w-5"}),t.jsx("span",{children:"Logout"})]})]})]})})]}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})},oj=()=>{const{login:e,register:s}=Ve(),[r,n]=x.useState(!0),[a,l]=x.useState(!1),[i,o]=x.useState(!1),[c,d]=x.useState({username:"",password:"",confirmPassword:"",role:"student",first_name:"",last_name:"",class:"",email:""}),[p,u]=x.useState(""),[y,f]=x.useState(""),[g,j]=x.useState(!1),w=async m=>{if(m.preventDefault(),u(""),!r&&c.password!==c.confirmPassword){u("Passwords do not match");return}j(!0);try{if(r)await e(c.username,c.password);else{const v=await s(c.username,c.password,c.role,c.first_name,c.last_name,c.class,c.email);if(v&&v.requires_approval){u(""),f("Registration successful! Your account is pending teacher approval. You will be able to log in once a teacher approves your account."),d({username:"",password:"",confirmPassword:"",role:"student",first_name:"",last_name:"",class:"",email:""}),setTimeout(()=>{n(!0),f("")},5e3);return}}}catch(v){u(v.message)}finally{j(!1)}},h=m=>{d({...c,[m.target.name]:m.target.value})};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"mx-auto flex items-center justify-center",children:t.jsx("img",{src:"/logo.png",alt:"Game of Life Town Hub",style:{width:"180px",height:"180px"}})})}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r?"Game of Life Town Hub":"Join the Game!"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Sign in to your account":"Create your classroom account"})]}),t.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:t.jsxs("form",{className:"space-y-6",onSubmit:w,children:[p&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),y&&t.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:y}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"username",className:"label",children:[t.jsx(Os,{className:"h-4 w-4 inline mr-1"}),"Username"]}),t.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"input-field",placeholder:"Enter your username",value:c.username,onChange:h})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"password",className:"label",children:[t.jsx(ou,{className:"h-4 w-4 inline mr-1"}),"Password"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Enter your password",value:c.password,onChange:h}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!a),children:a?t.jsx(au,{className:"h-4 w-4 text-gray-400"}):t.jsx(al,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"confirmPassword",className:"label",children:[t.jsx(ou,{className:"h-4 w-4 inline mr-1"}),"Confirm Password"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Confirm your password",value:c.confirmPassword,onChange:h}),t.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!i),children:i?t.jsx(au,{className:"h-4 w-4 text-gray-400"}):t.jsx(al,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"role",className:"label",children:"I am a..."}),t.jsxs("select",{id:"role",name:"role",className:"input-field",value:c.role,onChange:h,children:[t.jsx("option",{value:"student",children:" Student"}),t.jsx("option",{value:"teacher",children:" Teacher"})]})]}),c.role==="student"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"first_name",className:"label",children:"First Name"}),t.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,className:"input-field",placeholder:"Enter first name",value:c.first_name,onChange:h})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"last_name",className:"label",children:"Last Name"}),t.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,className:"input-field",placeholder:"Enter last name",value:c.last_name,onChange:h})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"class",className:"label",children:"Class"}),t.jsxs("select",{id:"class",name:"class",required:!0,className:"input-field",value:c.class,onChange:h,children:[t.jsx("option",{value:"",children:"Select your class"}),t.jsx("option",{value:"6A",children:"6A"}),t.jsx("option",{value:"6B",children:"6B"}),t.jsx("option",{value:"6C",children:"6C"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"input-field",placeholder:"yourname@stpeters.co.za",value:c.email,onChange:h}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must end with @stpeters.co.za"})]})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:g,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Please wait...":r?"Sign In":"Create Account"})}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:()=>{n(!r),d({username:"",password:"",confirmPassword:"",role:"student",first_name:"",last_name:"",class:"",email:""}),u("")},className:"text-primary-600 hover:text-primary-500 font-medium",children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}),t.jsx("div",{className:"text-center text-sm text-gray-500",children:t.jsx("p",{children:" Welcome to your Town Hub - Manage your virtual life!"})})]})})},bh=({plugin:e})=>t.jsx(sl,{to:e.route_path,className:"block bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-primary-300 transition-all transform hover:scale-105",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center text-2xl",children:e.icon||""})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),e.description&&t.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.description})]}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Active"})})]})}),Nh=({announcements:e,maxItems:s=5})=>{const r=e.slice(0,s),n=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=l=>{switch(l){case"green":return{border:"border-green-500",bg:"bg-green-50",text:"text-green-900"};case"yellow":return{border:"border-yellow-500",bg:"bg-yellow-50",text:"text-yellow-900"};case"red":return{border:"border-red-500",bg:"bg-red-50",text:"text-red-900"};case"purple":return{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-900"};case"blue":default:return{border:"border-primary-500",bg:"bg-primary-50",text:"text-gray-900"}}};return e.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(ii,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"})]}),t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(ii,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No announcements yet"}),t.jsx("p",{className:"text-sm",children:"Check back later for town updates"})]})]}):t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(ii,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"}),e.length>s&&t.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[e.length-s," more"]})]}),t.jsx("div",{className:"space-y-4",children:r.map(l=>{const i=a(l.background_color);return t.jsxs("div",{className:`border-l-4 ${i.border} pl-4 py-2 ${i.bg} rounded-r-lg ${l.enable_wiggle?"announcement-wiggle":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-1",children:[t.jsx("h3",{className:`font-semibold ${i.text}`,children:l.title}),t.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 ml-2",children:[t.jsx($e,{className:"h-3 w-3"}),t.jsx("span",{children:n(l.created_at)})]})]}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:l.content}),l.created_by_username&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Posted by ",l.created_by_username]})]},l.id)})})]})},wh=({town:e,readOnly:s=!0,showTreasury:r=!1})=>{const n=a=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(a);return e?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(_r,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Information"}),!s&&t.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["Class ",e.class]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(_r,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Name"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.town_name})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(Os,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mayor"})]}),t.jsx("p",{className:"text-base text-gray-900",children:e.mayor_name||"TBD"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(Qy,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Tax Rate"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("p",{className:"text-base text-gray-900",children:[e.tax_rate,"%"]}),e.tax_enabled!==void 0&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.tax_enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.tax_enabled?"Active":"Disabled"})]})]}),r&&e.treasury_balance!==void 0&&t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(Zt,{className:"h-4 w-4 text-emerald-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Treasury"})]}),t.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:n(e.treasury_balance)}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for paying student salaries"})]})]})]}):t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(_r,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No town information available"})]})})},cj=({user:e})=>{var a;if(!(e.job_id&&e.job_name))return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(gt,{className:"h-5 w-5 text-amber-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(gt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No job assigned yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Apply for jobs in the Jobs system"})]})]});const r=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),n=((a=e.job_description)==null?void 0:a.split(`
`).filter(l=>l.trim()))||[];return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(gt,{className:"h-5 w-5 text-amber-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),t.jsx("div",{className:"border-l-4 border-amber-500 pl-4 py-3 bg-amber-50 rounded-r-lg mb-4",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-900 flex items-center gap-2",children:[t.jsx(By,{className:"h-5 w-5 text-amber-600"}),e.job_name]}),e.job_company_name&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[t.jsx(_r,{className:"h-4 w-4 mr-1"}),e.job_company_name]}),e.job_location&&t.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[t.jsx(Ct,{className:"h-4 w-4 mr-1"}),e.job_location]})]})})}),t.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 mb-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ye,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Weekly Salary"})]}),t.jsx("span",{className:"text-xl font-bold text-green-700",children:e.job_salary?r(e.job_salary):"N/A"})]}),n.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(nl,{className:"h-4 w-4 text-gray-600"}),t.jsx("h4",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:"Responsibilities"})]}),t.jsxs("ul",{className:"space-y-2",children:[n.slice(0,5).map((l,i)=>t.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[t.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-amber-400 mt-1.5 mr-2 flex-shrink-0"}),t.jsx("span",{children:l})]},i)),n.length>5&&t.jsxs("li",{className:"text-xs text-gray-400 pl-4",children:["+",n.length-5," more responsibilities"]})]})]}),e.job_requirements&&e.job_requirements!==e.job_description&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[t.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Requirements"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.job_requirements})]})]})},$t={Savanna:{baseValue:2e4,risk:"medium",color:"#c4a747",lightColor:"#e8d999",pros:["Good grazing land","Wildlife tourism potential","Moderate rainfall"],cons:["Seasonal droughts","Fire risk","Limited water sources"]},Grassland:{baseValue:15e3,risk:"low",color:"#7cb342",lightColor:"#aed581",pros:["Excellent farming potential","Easy to develop","Stable ecosystem"],cons:["Soil erosion risk","Limited shade","Overgrazing concerns"]},Forest:{baseValue:35e3,risk:"medium",color:"#2e7d32",lightColor:"#66bb6a",pros:["Rich biodiversity","Timber resources","Carbon credits potential"],cons:["Fire risk","Clearing restrictions","Difficult access"]},Fynbos:{baseValue:45e3,risk:"high",color:"#9c27b0",lightColor:"#ce93d8",pros:["Unique biodiversity","Eco-tourism value","Protected species habitat"],cons:["Fire-dependent ecosystem","Strict conservation laws","Limited development"]},"Nama Karoo":{baseValue:1e4,risk:"medium",color:"#8d6e63",lightColor:"#bcaaa4",pros:["Sheep farming suited","Low land cost","Unique landscape"],cons:["Very dry climate","Limited water","Remote location"]},"Succulent Karoo":{baseValue:4500,risk:"high",color:"#ff7043",lightColor:"#ffab91",pros:["Rare plant species","Research value","Mining potential"],cons:["Extreme temperatures","Water scarcity","Conservation restrictions"]},Desert:{baseValue:8e3,risk:"high",color:"#ffd54f",lightColor:"#ffee58",pros:["Solar energy potential","Low land price","Mineral deposits"],cons:["Extreme conditions","No water","Uninhabitable without infrastructure"]},Thicket:{baseValue:25e3,risk:"low",color:"#558b2f",lightColor:"#8bc34a",pros:["Carbon storage","Game farming potential","Drought resistant"],cons:["Dense vegetation","Clearing needed","Elephant damage risk"]},"Indian Ocean Coastal Belt":{baseValue:6e4,risk:"medium",color:"#0288d1",lightColor:"#4fc3f7",pros:["High property value","Tourism potential","Port access"],cons:["Coastal erosion","Cyclone risk","High development costs"]}},il={low:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},medium:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},high:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"}},Me=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),cs={Savanna:"",Grassland:"",Forest:"",Fynbos:"","Nama Karoo":"","Succulent Karoo":"",Desert:"",Thicket:"","Indian Ocean Coastal Belt":""},dj=.02,Sh=e=>{const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/(7*24*60*60*1e3));return Math.max(0,a)},fo=(e,s)=>{const r=Sh(s);if(r===0)return e;const n=e*Math.pow(1+dj,r);return Math.round(n)},uj=()=>{const e=Un(),[s,r]=x.useState(null),[n,a]=x.useState(!0),[l,i]=x.useState(!1);x.useEffect(()=>{o()},[]);const o=async()=>{try{const p=await rs.getMyProperties();r(p.data)}catch{i(!0)}finally{a(!1)}},{totalCurrentValue:c,totalAppreciation:d}=x.useMemo(()=>{if(!s||s.total_count===0)return{totalCurrentValue:0,totalAppreciation:0};let p=0,u=0;return s.parcels.forEach(y=>{const f=Number(y.value);u+=f,y.purchased_at?p+=fo(f,y.purchased_at):p+=f}),{totalCurrentValue:p,totalAppreciation:p-u}},[s]);return n?t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsx("div",{className:"flex items-center justify-center h-40",children:t.jsx(pe,{className:"h-8 w-8 text-primary-600 animate-spin"})})}):l?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(Ct,{className:"h-5 w-5 text-primary-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:"My Properties"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Unable to load properties"})]}):t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(vc,{className:"h-5 w-5"}),t.jsx("h3",{className:"font-semibold",children:"My Properties"})]}),t.jsxs("button",{onClick:()=>e("/land"),className:"text-xs bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full flex items-center space-x-1 transition-colors",children:[t.jsx("span",{children:"View All"}),t.jsx(Oy,{className:"h-3 w-3"})]})]})}),t.jsx("div",{className:"p-4",children:s&&s.total_count===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsx(Ct,{className:"h-10 w-10 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No properties owned yet"}),t.jsx("button",{onClick:()=>e("/land"),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Explore Land Registry "})]}):s&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[t.jsx(Ct,{className:"h-3 w-3"}),t.jsx("span",{className:"text-xs",children:"Plots"})]}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.total_count})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[t.jsx(ye,{className:"h-3 w-3"}),t.jsx("span",{className:"text-xs",children:"Current Value"})]}),t.jsx("p",{className:"text-xl font-bold text-green-600",children:Me(c)}),d>0&&t.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-1",children:[t.jsx(rt,{className:"h-3 w-3 text-emerald-500"}),t.jsxs("span",{className:"text-xs text-emerald-600",children:["+",Me(d)]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Recent Purchases"}),s.parcels.slice(0,3).map(p=>{const u=Number(p.value),y=p.purchased_at?fo(u,p.purchased_at):u,f=y>u;return t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>e("/land"),children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-sm",style:{backgroundColor:$t[p.biome_type].lightColor},children:cs[p.biome_type]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.grid_code}),t.jsx("p",{className:"text-xs text-gray-500",children:p.biome_type})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-semibold text-green-600",children:Me(y)}),f&&t.jsxs("p",{className:"text-xs text-emerald-500 flex items-center justify-end",children:[t.jsx(rt,{className:"h-2 w-2 mr-0.5"}),"+",Me(y-u)]})]})]},p.id)}),s.total_count>3&&t.jsxs("p",{className:"text-xs text-center text-gray-400 pt-1",children:["+",s.total_count-3," more plots"]})]})]})})]})},mj=()=>{const[e,s]=x.useState([]),[r,n]=x.useState(!0);x.useEffect(()=>{(async()=>{try{n(!0);const o=await Hs.getTenders();s(o.data)}finally{n(!1)}})()},[]);const a=x.useMemo(()=>e.filter(i=>i.my_application_status==="approved"),[e]),l=x.useMemo(()=>a.slice(0,5),[a]);return t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(nl,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Tenders"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:a.length})]}),r?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(pe,{className:"h-6 w-6 text-primary-600 animate-spin"})}):a.length===0?t.jsxs("div",{className:"text-center py-6 text-gray-500",children:[t.jsx("p",{className:"font-medium",children:"No tenders yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Apply for a tender to see it here."})]}):t.jsxs("div",{className:"space-y-3",children:[l.map(i=>t.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-semibold text-gray-900 truncate",children:i.name}),i.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-0.5 line-clamp-2",children:i.description}),t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[i.status==="awarded"?t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:[t.jsx(Ce,{className:"h-3.5 w-3.5"}),"AWARDED"]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-100 text-amber-800",children:[t.jsx($e,{className:"h-3.5 w-3.5"}),"APPROVED"]}),i.status==="awarded"&&t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${i.paid?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-700"}`,children:[t.jsx(hn,{className:"h-3.5 w-3.5"}),i.paid?"PAID":"UNPAID"]})]})]})})},i.id)),a.length>l.length&&t.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",a.length-l.length," more"]})]})]})},ma=[{gradient:"bg-gradient-to-r from-red-500 to-red-700",text:"text-white",subtext:"text-red-100"},{gradient:"bg-gradient-to-r from-blue-500 to-blue-700",text:"text-white",subtext:"text-blue-100"},{gradient:"bg-gradient-to-r from-yellow-400 to-yellow-600",text:"text-gray-900",subtext:"text-yellow-900"}],xj=()=>{const e=sessionStorage.getItem("student_header_color_index");if(e!==null){const r=parseInt(e,10);if(r>=0&&r<ma.length)return ma[r]}const s=Math.floor(Math.random()*ma.length);return sessionStorage.setItem("student_header_color_index",String(s)),ma[s]},hj=()=>{const{user:e}=Ve(),{enabledPlugins:s,loading:r}=Nt(),{currentTown:n,announcements:a,loading:l}=ms(),[i]=x.useState(xj),o=e!=null&&e.first_name&&(e!=null&&e.last_name)?`${e.first_name} ${e.last_name}`:(e==null?void 0:e.username)||"Student",c=(e==null?void 0:e.job_name)||"No job assigned",[d,p]=x.useState(()=>{const f=Number(localStorage.getItem("dismissed_tender_announcement_id")||"0");return Number.isFinite(f)?f:0}),u=x.useMemo(()=>a.filter(g=>g.title.toLowerCase().includes("tender")).slice().sort((g,j)=>new Date(j.created_at).getTime()-new Date(g.created_at).getTime())[0],[a]),y=x.useMemo(()=>u?Date.now()-new Date(u.created_at).getTime()<1e3*60*60*48&&u.id>d:!1,[u,d]);return r||l?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`${i.gradient} rounded-2xl p-6`,children:[t.jsxs("h1",{className:`text-2xl font-bold mb-2 ${i.text}`,children:["Welcome, ",o,"! "]}),t.jsxs("p",{className:i.subtext,children:[n?`Welcome to ${n.town_name}!`:"Welcome to Town Hub!",c!=="No job assigned"&&`  Your job: ${c}`]})]}),y&&u&&t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-amber-400 bg-gradient-to-r from-amber-300 via-orange-300 to-red-300 p-5 animate-pulse",children:[t.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_30%_20%,white,transparent_55%)]"}),t.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"bg-white/40 rounded-xl p-2",children:t.jsx(Jn,{className:"h-6 w-6 text-red-800"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-extrabold text-red-900 tracking-wide uppercase",children:"New Tender Available"}),t.jsx("p",{className:"text-lg font-bold text-red-950",children:u.title}),t.jsx("p",{className:"text-sm text-red-900 mt-1 line-clamp-2",children:u.content}),t.jsx("div",{className:"mt-3",children:t.jsx(sl,{to:"/tenders",className:"inline-flex items-center px-4 py-2 rounded-lg bg-red-700 text-white font-bold hover:bg-red-800 transition-colors shadow",children:"View & Apply Now"})})]})]}),t.jsx("button",{onClick:()=>{localStorage.setItem("dismissed_tender_announcement_id",String(u.id)),p(u.id)},className:"flex-shrink-0 bg-white/40 hover:bg-white/60 rounded-lg p-2 transition-colors","aria-label":"Dismiss tender alert",children:t.jsx(zs,{className:"h-5 w-5 text-red-900"})})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(pn,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Available Systems"})]}),s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No systems available at this time"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later for updates"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(f=>t.jsx(bh,{plugin:f},f.id))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[t.jsx(wh,{town:n,readOnly:!0}),t.jsx(Nh,{announcements:a}),e&&t.jsx(cj,{user:e}),t.jsx(uj,{})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.jsx(mj,{})})]})},pj=({plugins:e,onUpdate:s})=>{const[r,n]=x.useState(null),a=async l=>{n(l);try{await O.put(`/plugins/${l}/toggle`),s()}catch(i){console.error("Failed to toggle plugin:",i),alert("Failed to toggle plugin. Please try again.")}finally{n(null)}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Plugin Management"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enable or disable plugins for all towns. Changes affect all classes (6A, 6B, 6C)."})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-200",children:e.map(l=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[t.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center text-xl",children:l.icon||""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:l.name}),l.description&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.description}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Route: ",l.route_path]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:`text-sm font-medium ${l.enabled?"text-success-600":"text-gray-400"}`,children:l.enabled?"Enabled":"Disabled"}),t.jsx("button",{onClick:()=>a(l.id),disabled:r===l.id,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${l.enabled?"bg-primary-600":"bg-gray-200"} ${r===l.id?"opacity-50 cursor-not-allowed":""}`,children:r===l.id?t.jsx(ph,{className:"h-4 w-4 text-white animate-spin absolute left-1"}):t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.enabled?"translate-x-6":"translate-x-1"}`})})]})]},l.id))})})]})},fj=({announcements:e,onUpdate:s})=>{const{currentTownClass:r,allTowns:n}=ms(),[a,l]=x.useState(!1),[i,o]=x.useState(null),[c,d]=x.useState({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),[p,u]=x.useState(!1);x.useEffect(()=>{i&&(d({title:i.title,content:i.content,town_class:i.town_class,post_to_all:!1,background_color:i.background_color||"blue",enable_wiggle:i.enable_wiggle||!1}),l(!0))},[i]);const y=async g=>{var j,w;g.preventDefault(),u(!0);try{if(i)await O.put(`/announcements/${i.id}`,{title:c.title,content:c.content,town_class:c.town_class,background_color:c.background_color,enable_wiggle:c.enable_wiggle});else if(c.post_to_all){const h=["6A","6B","6C"];await Promise.all(h.map(m=>O.post("/announcements",{title:c.title,content:c.content,town_class:m,background_color:c.background_color,enable_wiggle:c.enable_wiggle})))}else await O.post("/announcements",{title:c.title,content:c.content,town_class:c.town_class,background_color:c.background_color,enable_wiggle:c.enable_wiggle});l(!1),o(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),s()}catch(h){console.error("Failed to save announcement:",h),alert(((w=(j=h.response)==null?void 0:j.data)==null?void 0:w.error)||"Failed to save announcement")}finally{u(!1)}},f=async g=>{var j,w;if(confirm("Are you sure you want to delete this announcement?"))try{await O.delete(`/announcements/${g}`),s()}catch(h){console.error("Failed to delete announcement:",h),alert(((w=(j=h.response)==null?void 0:j.data)==null?void 0:w.error)||"Failed to delete announcement")}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Announcement Management"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Post and manage town announcements"})]}),t.jsxs("button",{onClick:()=>{l(!0),o(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-primary flex items-center space-x-2",children:[t.jsx(Mn,{className:"h-4 w-4"}),t.jsx("span",{children:"New Announcement"})]})]}),a&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:i?"Edit Announcement":"New Announcement"}),t.jsx("button",{onClick:()=>{l(!1),o(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"text-gray-400 hover:text-gray-600",children:t.jsx(zs,{className:"h-5 w-5"})})]}),t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!i&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.post_to_all,onChange:g=>d({...c,post_to_all:g.target.checked}),className:"mt-0.5 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Post to All Classes"}),t.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"This will create the same announcement for all three classes (6A, 6B, and 6C)"})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c.post_to_all?"Target Classes":"Town"}),c.post_to_all?t.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-700",children:[t.jsx("span",{className:"font-medium",children:"All Classes:"})," 6A Town, 6B Town, 6C Town"]}):t.jsxs("select",{value:c.town_class,onChange:g=>d({...c,town_class:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0,children:[t.jsx("option",{value:"6A",children:"6A Town"}),t.jsx("option",{value:"6B",children:"6B Town"}),t.jsx("option",{value:"6C",children:"6C Town"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),t.jsx("input",{type:"text",value:c.title,onChange:g=>d({...c,title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),t.jsx("textarea",{value:c.content,onChange:g=>d({...c,content:g.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),t.jsx("div",{className:"grid grid-cols-5 gap-3",children:[{value:"blue",label:"Blue",bgClass:"bg-blue-500",hoverClass:"hover:bg-blue-600"},{value:"green",label:"Green",bgClass:"bg-green-500",hoverClass:"hover:bg-green-600"},{value:"yellow",label:"Yellow",bgClass:"bg-yellow-500",hoverClass:"hover:bg-yellow-600"},{value:"red",label:"Red",bgClass:"bg-red-500",hoverClass:"hover:bg-red-600"},{value:"purple",label:"Purple",bgClass:"bg-purple-500",hoverClass:"hover:bg-purple-600"}].map(g=>t.jsxs("button",{type:"button",onClick:()=>d({...c,background_color:g.value}),className:`relative p-4 rounded-lg transition-all ${g.bgClass} ${g.hoverClass} ${c.background_color===g.value?"ring-4 ring-primary-600 ring-offset-2 scale-105":"opacity-70 hover:opacity-100"}`,children:[c.background_color===g.value&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"bg-white rounded-full p-1",children:t.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),t.jsx("span",{className:"text-xs font-medium text-white opacity-0",children:g.label})]},g.value))}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",t.jsx("span",{className:"font-medium capitalize",children:c.background_color})]})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.enable_wiggle,onChange:g=>d({...c,enable_wiggle:g.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable wiggle animation"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Adds a subtle wiggle effect for extra attention"})]})]})}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:p,className:"btn-primary flex-1",children:p?"Saving...":i?"Update":"Create"}),t.jsx("button",{type:"button",onClick:()=>{l(!1),o(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-secondary",children:"Cancel"})]})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-200",children:e.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500",children:[t.jsx("p",{children:"No announcements yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement above"})]}):e.map(g=>t.jsx("div",{className:"p-4 hover:bg-gray-50",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:g.title}),t.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:g.town_class})]}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:g.content}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("span",{children:["Posted by ",g.created_by_username]}),t.jsx("span",{children:new Date(g.created_at).toLocaleDateString()})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsx("button",{onClick:()=>o(g),className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",children:t.jsx(gh,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>f(g.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:t.jsx(vh,{className:"h-4 w-4"})})]})]})},g.id))})})]})},gj=()=>{var D;const{allTowns:e,refreshTown:s}=ms(),[r,n]=x.useState(((D=e[0])==null?void 0:D.id)||null),[a,l]=x.useState({}),[i,o]=x.useState(!1),[c,d]=x.useState(""),[p,u]=x.useState(!1),[y,f]=x.useState({}),[g,j]=x.useState(!0),[w,h]=x.useState(!1),m=e.find(L=>L.id===r);x.useEffect(()=>{(async()=>{try{const S=await O.get("/transactions/bank-settings");f(S.data)}catch(S){console.error("Failed to fetch bank settings:",S)}finally{j(!1)}})()},[]),x.useEffect(()=>{m&&l({town_name:m.town_name,mayor_name:m.mayor_name||"",tax_rate:m.tax_rate,tax_enabled:m.tax_enabled})},[m]);const v=async(L,S)=>{var _,b;h(!0);try{await O.put(`/transactions/bank-settings/${L}`,{value:S}),f({...y,[L]:S})}catch(A){console.error("Failed to update bank setting:",A),alert(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to update setting")}finally{h(!1)}},N=async()=>{var L,S;if(m){o(!0);try{await Gt.toggleTax(m.class,!m.tax_enabled),await s()}catch(_){console.error("Failed to toggle tax:",_),alert(((S=(L=_.response)==null?void 0:L.data)==null?void 0:S.error)||"Failed to toggle tax")}finally{o(!1)}}},C=L=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(L),R=async L=>{var S,_;if(L.preventDefault(),!!r){o(!0);try{await O.put(`/town/settings/${r}`,a),await s(),alert("Town settings updated successfully!")}catch(b){console.error("Failed to update town settings:",b),alert(((_=(S=b.response)==null?void 0:S.data)==null?void 0:_.error)||"Failed to update town settings")}finally{o(!1)}}},k=async()=>{var S,_;if(c!=="RESET"){alert("Type RESET to confirm the factory reset.");return}if(window.confirm(`This will DELETE ALL students, loans, tenders, land ownership, transactions, announcements, and reset treasury/settings for ALL towns.

This cannot be undone.

Click OK to proceed.`)){u(!0);try{await O.post("/admin/factory-reset",{confirm:"RESET"}),d(""),await s(),alert("Factory reset completed. You may need to refresh the page."),window.location.reload()}catch(b){console.error("Factory reset failed:",b),alert(((_=(S=b.response)==null?void 0:S.data)==null?void 0:_.error)||"Factory reset failed")}finally{u(!1)}}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Settings"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage settings for each town"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Town"}),t.jsx("select",{value:r||"",onChange:L=>n(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:e.map(L=>t.jsxs("option",{value:L.id,children:[L.town_name," (Class ",L.class,")"]},L.id))})]}),m&&t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town Name"}),t.jsx("input",{type:"text",value:a.town_name||"",onChange:L=>l({...a,town_name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mayor Name"}),t.jsx("input",{type:"text",value:a.mayor_name||"",onChange:L=>l({...a,mayor_name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter mayor name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),t.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:a.tax_rate||0,onChange:L=>l({...a,tax_rate:parseFloat(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Collection"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, progressive tax is deducted from salaries"})]}),t.jsx("button",{type:"button",onClick:N,disabled:i,className:"focus:outline-none",children:m!=null&&m.tax_enabled?t.jsx(wc,{className:"h-10 w-10 text-green-600"}):t.jsx(Nc,{className:"h-10 w-10 text-gray-400"})})]})}),m&&t.jsxs("div",{className:"border border-emerald-200 rounded-lg p-4 bg-emerald-50",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(Zt,{className:"h-5 w-5 text-emerald-600"}),t.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Town Treasury"})]}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:C(m.treasury_balance||1e7)}),t.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"Used for paying student salaries"})]}),t.jsxs("button",{type:"submit",disabled:i,className:"btn-primary flex items-center space-x-2",children:[t.jsx(ho,{className:"h-4 w-4"}),t.jsx("span",{children:i?"Saving...":"Save Settings"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:t.jsx(uh,{className:"h-5 w-5 text-purple-700"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Math Game Settings"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure the math game settings for all students"})]})]}),g?t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Game Limit"}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Number of math games each student can play per day (resets at 6 AM)"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"number",min:"0",max:"100",value:y.math_game_daily_limit||"3",onChange:L=>f({...y,math_game_daily_limit:L.target.value}),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500"}),t.jsx("span",{className:"text-sm text-gray-600",children:"games per day"}),t.jsxs("button",{onClick:()=>v("math_game_daily_limit",y.math_game_daily_limit||"3"),disabled:w,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[t.jsx(ho,{className:"h-4 w-4"}),t.jsx("span",{children:w?"Saving...":"Save"})]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Set to 0 to disable math games entirely"})]})})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-100",children:t.jsx(Jn,{className:"h-5 w-5 text-red-700"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Factory Reset (Danger)"}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This resets the game to a clean state: deletes all students, loans, tenders, land ownership & requests, transactions, and announcements. It also resets town treasury/settings for ALL towns."}),t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",t.jsx("span",{className:"font-bold text-red-700",children:"RESET"})," to confirm"]}),t.jsx("input",{value:c,onChange:L=>d(L.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-red-500 focus:border-red-500",placeholder:"RESET"})]}),t.jsx("button",{type:"button",onClick:k,disabled:p||c!=="RESET",className:"w-full px-4 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 transition-colors disabled:opacity-50",children:p?"Resetting...":"Factory Reset"})]})]})]})})]})},yj=()=>{const{currentTownClass:e,allTowns:s}=ms(),[r,n]=x.useState("jobs"),[a,l]=x.useState(e||"all"),[i,o]=x.useState([]),[c,d]=x.useState([]),[p,u]=x.useState([]),[y,f]=x.useState(!0),[g,j]=x.useState(null),[w,h]=x.useState(null);x.useEffect(()=>{m()},[a,r]);const m=async()=>{var S,_;try{if(f(!0),j(null),r==="jobs"){const b=a==="all"?void 0:a,A=await Yt.getJobAssignmentsOverview(b);o(A.data.jobs),d(A.data.students)}else{const b=a==="all"?void 0:a,A={status:"pending"};let H=(await Yt.getApplications(A)).data;if(b&&b!=="all"){const ae=(await Yt.getJobAssignmentsOverview(b)).data.students.map(M=>M.id);H=H.filter(M=>ae.includes(M.user_id))}u(H)}}catch(b){j(((_=(S=b.response)==null?void 0:S.data)==null?void 0:_.error)||"Failed to load data")}finally{f(!1)}},v=async(S,_)=>{var b,A;try{j(null),await Yt.assignJobToStudent(S,_),h("Job assigned successfully"),m(),setTimeout(()=>h(null),3e3)}catch(B){j(((A=(b=B.response)==null?void 0:b.data)==null?void 0:A.error)||"Failed to assign job")}},N=async S=>{var _,b;if(confirm("Are you sure you want to remove this job assignment?"))try{j(null),await Yt.removeJobFromStudent(S),h("Job assignment removed successfully"),m(),setTimeout(()=>h(null),3e3)}catch(A){j(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to remove job assignment")}},C=async S=>{var _,b;try{j(null),await Yt.updateApplicationStatus(S,"approved"),h("Application approved and job assigned"),m(),setTimeout(()=>h(null),3e3)}catch(A){j(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to approve application")}},R=async S=>{var _,b;if(confirm("Are you sure you want to deny this application?"))try{j(null),await Yt.updateApplicationStatus(S,"denied"),h("Application denied"),m(),setTimeout(()=>h(null),3e3)}catch(A){j(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to deny application")}},k=S=>c.filter(_=>_.job_id===S),D=S=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(S),L=S=>{if(!S)return null;const _=S.match(/(\d+)\s+positions?/i);return _?parseInt(_[1]):null};return y&&i.length===0&&p.length===0?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Class:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),s.map(S=>t.jsx("button",{onClick:()=>l(S.class),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===S.class?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S.class},S.class))]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8",children:[t.jsxs("button",{onClick:()=>n("jobs"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="jobs"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(gt,{className:"h-4 w-4"}),t.jsx("span",{children:"Job Assignments"})]}),t.jsxs("button",{onClick:()=>n("applications"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="applications"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx($e,{className:"h-4 w-4"}),t.jsx("span",{children:"Pending Applications"}),p.length>0&&t.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]})]})}),g&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),w&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:w}),r==="jobs"&&t.jsx("div",{className:"space-y-4",children:i.map(S=>{const _=k(S.id),b=L(S.requirements),A=b?_.length>=b:!1;return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:S.name}),S.company_name&&t.jsxs("span",{className:"text-sm text-gray-600",children:["(",S.company_name,")"]})]}),S.location&&t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",S.location]}),t.jsxs("p",{className:"text-sm font-medium text-primary-600 mb-2",children:[D(S.salary)," per period"]}),b&&t.jsxs("p",{className:"text-sm text-gray-600",children:[b," position",b>1?"s":""," available"]})]}),t.jsx("div",{className:"text-right",children:t.jsx("div",{className:"text-sm text-gray-600",children:a==="all"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["Total: ",S.total_assigned||0," assigned"]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Across all classes"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["Class: ",S.class_assigned||0," assigned"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["In ",a]})]})})})]}),_.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assigned Students:"}),t.jsx("div",{className:"space-y-2",children:_.map(B=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium text-gray-900",children:[B.first_name," ",B.last_name]}),t.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",B.username,") - ",B.class]})]}),t.jsxs("button",{onClick:()=>N(B.id),className:"text-red-600 hover:text-red-700 flex items-center space-x-1 text-sm",children:[t.jsx(sj,{className:"h-4 w-4"}),t.jsx("span",{children:"Remove"})]})]},B.id))})]}),a!=="all"&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assign to Student:"}),t.jsx("div",{className:"space-y-2",children:c.filter(B=>B.class===a&&(!B.job_id||B.job_id!==S.id)).map(B=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium text-gray-900",children:[B.first_name," ",B.last_name]}),t.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",B.username,")"]}),B.job_name&&t.jsxs("span",{className:"text-xs text-orange-600 ml-2",children:["Currently: ",B.job_name]})]}),t.jsxs("button",{onClick:()=>v(B.id,S.id),disabled:A,className:`flex items-center space-x-1 text-sm ${A?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[t.jsx(rj,{className:"h-4 w-4"}),t.jsx("span",{children:"Assign"})]})]},B.id))})]})]},S.id)})}),r==="applications"&&t.jsx("div",{className:"space-y-4",children:p.length===0?t.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[t.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-gray-600",children:"No pending applications"})]}):p.map(S=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:S.job_name}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Applicant:"})," ",S.applicant_first_name," ",S.applicant_last_name," (",S.applicant_username,")"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Applied:"})," ",new Date(S.created_at).toLocaleDateString()]}),S.job_salary&&t.jsxs("p",{children:[t.jsx("strong",{children:"Salary:"})," ",D(S.job_salary)]})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>C(S.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[t.jsx(Ce,{className:"h-4 w-4"}),t.jsx("span",{children:"Approve"})]}),t.jsxs("button",{onClick:()=>R(S.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[t.jsx(zt,{className:"h-4 w-4"}),t.jsx("span",{children:"Deny"})]})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Application Answers:"}),t.jsx("div",{className:"space-y-3",children:Object.entries(S.answers||{}).map(([_,b])=>{const B={interest:"Why are you interested in this position?",experience:"What relevant experience do you have?",availability:"Are you available to work during school hours?",skills:"What skills make you a good fit?",hours:"How many hours per week can you commit?"}[_]||_;return t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:B}),t.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:Array.isArray(b)?b.join(", "):b})]},_)})})]})]},S.id))})]})},jj=()=>{const{currentTownClass:e,refreshTown:s}=ms(),[r,n]=x.useState(null),[a,l]=x.useState(null),[i,o]=x.useState([]),[c,d]=x.useState(!0),[p,u]=x.useState("overview"),[y,f]=x.useState(""),[g,j]=x.useState(""),[w,h]=x.useState(""),[m,v]=x.useState(""),[N,C]=x.useState("1500"),[R,k]=x.useState(!1),[D,L]=x.useState(null),[S,_]=x.useState("month");x.useEffect(()=>{e&&b()},[e,S]);const b=async()=>{if(e){d(!0);try{const[T,U,W]=await Promise.all([Gt.getTreasuryInfo(e),Gt.getTaxReport(e,S),Gt.getTaxBrackets()]);n(T.data),l(U.data),o(W.data)}catch(T){console.error("Failed to fetch treasury data:",T)}finally{d(!1)}}},A=T=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(T),B=async()=>{if(!(!e||!r)){k(!0);try{await Gt.toggleTax(e,!r.tax_enabled),await b(),await s()}catch(T){console.error("Failed to toggle tax:",T),alert("Failed to toggle tax")}finally{k(!1)}}},H=async T=>{var U,W;if(T.preventDefault(),!(!e||!y)){k(!0);try{await Gt.depositToTreasury(e,parseFloat(y),g),f(""),j(""),await b(),await s(),alert("Deposit successful!")}catch(G){console.error("Failed to deposit:",G),alert(((W=(U=G.response)==null?void 0:U.data)==null?void 0:W.error)||"Failed to deposit")}finally{k(!1)}}},q=async T=>{var U,W;if(T.preventDefault(),!(!e||!w)){k(!0);try{await Gt.withdrawFromTreasury(e,parseFloat(w),m),h(""),v(""),await b(),await s(),alert("Withdrawal successful!")}catch(G){console.error("Failed to withdraw:",G),alert(((W=(U=G.response)==null?void 0:U.data)==null?void 0:W.error)||"Failed to withdraw")}finally{k(!1)}}},ae=async()=>{var T,U;if(e&&confirm("Are you sure you want to pay salaries to all employed students? Tax will be automatically deducted.")){k(!0);try{const W=await Gt.paySalaries(e);L(W.data),await b(),await s()}catch(W){console.error("Failed to pay salaries:",W),alert(((U=(T=W.response)==null?void 0:T.data)==null?void 0:U.error)||"Failed to pay salaries")}finally{k(!1)}}},M=async()=>{var T,U;if(e&&confirm("Are you sure you want to pay basic salary to all unemployed students?")){k(!0);try{const W=parseFloat(N)||void 0,G=await Gt.payBasicSalary(e,W);alert(`Basic salary paid to ${G.data.paid_count} students. Total: ${A(G.data.total_paid)}`),await b(),await s()}catch(W){console.error("Failed to pay basic salary:",W),alert(((U=(T=W.response)==null?void 0:T.data)==null?void 0:U.error)||"Failed to pay basic salary")}finally{k(!1)}}};return e?c?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Treasury"}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Manage finances for Class ",e]})]}),t.jsx("button",{onClick:b,disabled:c,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(Dn,{className:`h-5 w-5 ${c?"animate-spin":""}`})})]}),r&&t.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-emerald-100 text-sm font-medium",children:"Treasury Balance"}),t.jsx("p",{className:"text-4xl font-bold mt-1",children:A(r.treasury_balance)}),t.jsx("p",{className:"text-emerald-100 text-sm mt-2",children:"Starting balance: R10,000,000"})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"text-emerald-100 text-sm",children:"Tax Collection"}),t.jsx("button",{onClick:B,disabled:R,className:"focus:outline-none",title:r.tax_enabled?"Click to disable tax":"Click to enable tax",children:r.tax_enabled?t.jsx(wc,{className:"h-8 w-8 text-white"}):t.jsx(Nc,{className:"h-8 w-8 text-emerald-200"})})]}),t.jsx("p",{className:`text-sm font-medium ${r.tax_enabled?"text-white":"text-emerald-200"}`,children:r.tax_enabled?"Progressive Tax Active":"Tax Disabled"})]})]})}),r&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-1",children:[t.jsx(rt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Tax Collected"})]}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(r.stats.total_tax_collected)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-1",children:[t.jsx(jr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Salaries Paid"})]}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(Math.abs(r.stats.total_salaries_paid))})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-1",children:[t.jsx(du,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Deposits"})]}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(r.stats.total_deposits)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 mb-1",children:[t.jsx(nu,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Withdrawals"})]}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(Math.abs(r.stats.total_withdrawals))})]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:Zt},{id:"pay-salaries",label:"Pay Salaries",icon:ye},{id:"tax-report",label:"Tax Report",icon:yc},{id:"transactions",label:"Transactions",icon:Yy}].map(({id:T,label:U,icon:W})=>t.jsxs("button",{onClick:()=>u(T),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===T?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(W,{className:"h-4 w-4"}),t.jsx("span",{children:U})]},T))})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[p==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Progressive Tax Brackets"}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsx("div",{className:"space-y-2",children:i.map((T,U)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:[A(T.min_salary)," - ",T.max_salary?A(T.max_salary):""]}),t.jsxs("span",{className:`font-semibold ${T.tax_rate===0?"text-green-600":"text-gray-900"}`,children:[T.tax_rate,"% tax"]})]},T.id))})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[t.jsx(du,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{children:"Deposit to Treasury"})]}),t.jsxs("form",{onSubmit:H,className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),t.jsx("input",{type:"number",min:"0.01",step:"0.01",value:y,onChange:T=>f(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),t.jsx("input",{type:"text",value:g,onChange:T=>j(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Donation from event"})]}),t.jsx("button",{type:"submit",disabled:R||!y,className:"w-full btn-primary",children:R?"Processing...":"Deposit"})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[t.jsx(nu,{className:"h-5 w-5 text-amber-600"}),t.jsx("span",{children:"Withdraw from Treasury"})]}),t.jsxs("form",{onSubmit:q,className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),t.jsx("input",{type:"number",min:"0.01",step:"0.01",value:w,onChange:T=>h(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),t.jsx("input",{type:"text",value:m,onChange:T=>v(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Town infrastructure"})]}),t.jsx("button",{type:"submit",disabled:R||!w,className:"w-full bg-amber-500 text-white py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50",children:R?"Processing...":"Withdraw"})]})]})]})]}),p==="pay-salaries"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[t.jsx(ze,{className:"h-5 w-5 text-blue-600"}),t.jsx("span",{children:"Pay Employed Students"})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Pay all employed students their job salary. ",r!=null&&r.tax_enabled?"Progressive tax will be automatically deducted.":"Tax is currently disabled."]}),t.jsx("button",{onClick:ae,disabled:R,className:"btn-primary",children:R?"Processing...":"Pay Salaries Now"})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[t.jsx(ye,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{children:"Pay Basic Salary (Unemployed)"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pay a basic salary to all unemployed students. This is tax-exempt."}),t.jsxs("div",{className:"flex items-end space-x-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount per student (R)"}),t.jsx("input",{type:"number",min:"0.01",step:"0.01",value:N,onChange:T=>C(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 w-40"})]}),t.jsx("button",{onClick:M,disabled:R,className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:R?"Processing...":"Pay Basic Salary"})]})]}),D&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[t.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center space-x-2",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsx("span",{children:"Payment Complete!"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"Students Paid"}),t.jsx("p",{className:"text-xl font-bold text-green-800",children:D.paid_count})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"Gross Salaries"}),t.jsx("p",{className:"text-xl font-bold text-green-800",children:A(D.total_gross)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"Tax Collected"}),t.jsx("p",{className:"text-xl font-bold text-green-800",children:A(D.total_tax)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"Net Paid"}),t.jsx("p",{className:"text-xl font-bold text-green-800",children:A(D.total_net)})]})]}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-green-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Student"}),t.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Job"}),t.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Gross"}),t.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Tax"}),t.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Net"})]})}),t.jsx("tbody",{children:D.payment_details.map((T,U)=>t.jsxs("tr",{className:U%2===0?"bg-white":"bg-green-50",children:[t.jsx("td",{className:"px-3 py-2 text-gray-900",children:T.first_name&&T.last_name?`${T.first_name} ${T.last_name}`:T.username}),t.jsx("td",{className:"px-3 py-2 text-gray-600",children:T.job_name}),t.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:A(T.gross_salary)}),t.jsxs("td",{className:"px-3 py-2 text-right text-red-600",children:["-",A(T.tax_amount)," (",T.tax_rate,"%)"]}),t.jsx("td",{className:"px-3 py-2 text-right font-medium text-green-600",children:A(T.net_salary)})]},T.id))})]})})]})]}),p==="tax-report"&&a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Tax Report"}),t.jsxs("select",{value:S,onChange:T=>_(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"week",children:"Last 7 days"}),t.jsx("option",{value:"month",children:"Last 30 days"}),t.jsx("option",{value:"all",children:"All time"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(a.summary.total_gross)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Tax"}),t.jsx("p",{className:"text-xl font-bold text-green-600",children:A(a.summary.total_tax)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Net"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:A(a.summary.total_net)})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Avg Tax Rate"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[a.summary.avg_tax_rate.toFixed(1),"%"]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Tax by Student"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Student"}),t.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Gross Earnings"}),t.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Tax Paid"}),t.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Net Received"}),t.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Payments"})]})}),t.jsxs("tbody",{children:[a.student_taxes.map((T,U)=>t.jsxs("tr",{className:U%2===0?"bg-white":"bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-gray-900",children:T.first_name&&T.last_name?`${T.first_name} ${T.last_name}`:T.username}),t.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:A(T.total_gross)}),t.jsx("td",{className:"px-4 py-3 text-right text-green-600 font-medium",children:A(T.total_tax_paid)}),t.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:A(T.total_net)}),t.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:T.payment_count})]},T.user_id)),a.student_taxes.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No tax transactions in this period"})})]})]})})]})]}),p==="transactions"&&r&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Recent Treasury Transactions"}),t.jsxs("div",{className:"space-y-2",children:[r.transactions.map(T=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`p-2 rounded-full ${T.amount>0?"bg-green-100":"bg-red-100"}`,children:T.amount>0?t.jsx(rt,{className:"h-4 w-4 text-green-600"}):t.jsx(jr,{className:"h-4 w-4 text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.description}),t.jsxs("p",{className:"text-xs text-gray-500",children:[T.transaction_type.replace("_"," "),"  ",new Date(T.created_at).toLocaleString(),T.created_by_username&&`  by ${T.created_by_username}`]})]})]}),t.jsxs("span",{className:`font-semibold ${T.amount>0?"text-green-600":"text-red-600"}`,children:[T.amount>0?"+":"",A(T.amount)]})]},T.id)),r.transactions.length===0&&t.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Zt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"Select a town to manage treasury"})]})},vj=({students:e,onUpdate:s})=>{const r=Un(),[n,a]=x.useState(null),[l,i]=x.useState(!1),[o,c]=x.useState(!1),[d,p]=x.useState(!1),[u,y]=x.useState(null),[f,g]=x.useState({amount:"",description:""}),[j,w]=x.useState(!1),[h,m]=x.useState(""),[v,N]=x.useState(""),[C,R]=x.useState(""),[k,D]=x.useState("all"),[L,S]=x.useState("surname"),[_,b]=x.useState("asc"),[A,B]=x.useState(new Set),[H,q]=x.useState({}),[ae,M]=x.useState(null),T=x.useMemo(()=>{const z=e.reduce((Y,Z)=>{const $=Z.class||"Unassigned";return Y[$]||(Y[$]=[]),Y[$].push(Z),Y},{}),ee=Object.keys(z).sort((Y,Z)=>Y==="Unassigned"?1:Z==="Unassigned"?-1:Y.localeCompare(Z));return{grouped:z,sortedClasses:ee}},[e]),W=(z=>z==="all"?e:T.grouped[z]||[])(k).filter(z=>z.username.toLowerCase().includes(C.toLowerCase())||z.first_name&&z.first_name.toLowerCase().includes(C.toLowerCase())||z.last_name&&z.last_name.toLowerCase().includes(C.toLowerCase())),G=x.useMemo(()=>{const z=_==="asc"?1:-1;return W.map((ee,Y)=>({s:ee,idx:Y})).sort((ee,Y)=>{if(L==="balance"){const Z=Number(ee.s.balance)||0,$=Number(Y.s.balance)||0,oe=Z-$;if(oe!==0)return oe*z}else{const Z=(ee.s.last_name||"").toLowerCase(),$=(Y.s.last_name||"").toLowerCase();if(Z!==$)return Z.localeCompare($)*z;const oe=(ee.s.first_name||"").toLowerCase(),ce=(Y.s.first_name||"").toLowerCase();if(oe!==ce)return oe.localeCompare(ce)*z;const je=(ee.s.username||"").toLowerCase(),P=(Y.s.username||"").toLowerCase();if(je!==P)return je.localeCompare(P)*z}return ee.idx-Y.idx}).map(({s:ee})=>ee)},[W,L,_]),J=async z=>{var ee,Y;if(z.preventDefault(),!!n){m(""),N(""),w(!0);try{await O.post("/transactions/deposit",{username:n.username,amount:parseFloat(f.amount),description:f.description||"Deposit by teacher"}),N("Deposit successful!"),g({amount:"",description:""}),i(!1),s()}catch(Z){m(((Y=(ee=Z.response)==null?void 0:ee.data)==null?void 0:Y.error)||"Deposit failed")}finally{w(!1)}}},re=async z=>{var ee,Y;if(z.preventDefault(),!!n){m(""),N(""),w(!0);try{await O.post("/transactions/withdraw",{username:n.username,amount:parseFloat(f.amount),description:f.description||"Withdrawal by teacher"}),N("Withdrawal successful!"),g({amount:"",description:""}),c(!1),s()}catch(Z){m(((Y=(ee=Z.response)==null?void 0:ee.data)==null?void 0:Y.error)||"Withdrawal failed")}finally{w(!1)}}},X=async()=>{var z,ee;if(u){m(""),N(""),w(!0);try{await O.delete(`/students/${u.username}`),N(`Student ${u.username} has been deleted successfully`),p(!1),y(null),s()}catch(Y){m(((ee=(z=Y.response)==null?void 0:z.data)==null?void 0:ee.error)||"Failed to delete student")}finally{w(!1)}}},le=z=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(z),ne=z=>{const ee=z.id,Y=A.has(ee),Z=new Set(A);if(Y){Z.delete(ee),B(Z);return}Z.add(ee),B(Z)},me=async z=>{var ee,Y;M(z.id),m(""),N("");try{const $=(await O.post(`/students/${z.username}/reset-password`,{reveal:!0})).data.temporary_password;if(!$){N(`Password reset for ${z.username}. (Password not returned by server)`);return}q(oe=>({...oe,[z.id]:$})),N(`Password reset for ${z.username}. Share the new password with the student.`),A.has(z.id)||B(oe=>new Set(oe).add(z.id))}catch(Z){m(((Y=(ee=Z.response)==null?void 0:ee.data)==null?void 0:Y.error)||"Failed to reset password")}finally{M(null)}},K=z=>{navigator.clipboard.writeText(z).then(()=>{N("Copied to clipboard!"),setTimeout(()=>N(""),2e3)}).catch(()=>{m("Failed to copy to clipboard")})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(yh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search students by name or username...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:C,onChange:z=>R(z.target.value)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Sort by"}),t.jsxs("select",{value:L,onChange:z=>S(z.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[t.jsx("option",{value:"surname",children:"Surname"}),t.jsx("option",{value:"balance",children:"Bank balance"})]}),t.jsx("button",{type:"button",onClick:()=>b(z=>z==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",title:_==="asc"?"Ascending":"Descending",children:_==="asc"?"AZ":"ZA"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>D("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[t.jsx(ze,{className:"h-4 w-4 inline mr-2"}),"All Students (",e.length,")"]}),T.sortedClasses.map(z=>t.jsxs("button",{onClick:()=>D(z),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k===z?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[z==="Unassigned"?"":""," ",z," (",T.grouped[z].length,")"]},z))]}),h&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),v&&t.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:v}),k==="all"&&T.sortedClasses.length>1&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Class Summary"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.sortedClasses.map(z=>{const ee=T.grouped[z],Y=ee.reduce((Z,$)=>Z+(Number($.balance)||0),0);return t.jsx("div",{className:"bg-white rounded-lg p-3 border",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-900",children:[z==="Unassigned"?"":""," ",z]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[ee.length," students"]})]}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-sm font-semibold text-success-600",children:le(Y)})})]})},z)})})]}),G.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:C?"No students found":`No students in ${k==="all"?"any class":k}`}),t.jsx("p",{className:"text-gray-500",children:C?"Try adjusting your search terms":k==="all"?"Students will appear here once they register":"Students in this class will appear here"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(z=>{const ee=A.has(z.id),Y=H[z.id];return t.jsxs("div",{className:`card transition-all duration-200 ${(n==null?void 0:n.id)===z.id?"ring-2 ring-primary-500 bg-primary-50":"hover:shadow-md"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[t.jsx("div",{className:"bg-primary-100 p-2 rounded-full flex-shrink-0",children:t.jsx(Os,{className:"h-5 w-5 text-primary-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:z.first_name&&z.last_name?`${z.first_name} ${z.last_name}`:z.username}),t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",z.username]}),t.jsx("div",{className:"flex items-center space-x-2 mt-1 flex-wrap",children:t.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:z.class||"Unassigned"})})]})]}),t.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:t.jsx("p",{className:"text-lg font-bold text-success-600",children:le(z.balance)})})]}),t.jsxs("div",{className:"mb-3 space-y-1",children:[z.email&&t.jsx("p",{className:"text-xs text-gray-600 truncate",title:z.email,children:z.email}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",title:`Account: ${z.account_number}`,children:["Account: ",z.account_number]})]}),t.jsxs("div",{className:"mb-3 border-t border-gray-200 pt-3",children:[t.jsx("button",{onClick:()=>ne(z),className:"w-full flex items-center justify-between text-sm text-gray-700 hover:text-primary-600 transition-colors",children:t.jsxs("span",{className:"flex items-center",children:[ee?t.jsx(hh,{className:"h-4 w-4 mr-1"}):t.jsx(xh,{className:"h-4 w-4 mr-1"}),"Credentials"]})}),ee&&t.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Username"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"text",readOnly:!0,value:z.username,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:Z=>Z.currentTarget.select()}),t.jsx("button",{onClick:()=>K(z.username),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy username",children:t.jsx(oi,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Password"}),Y?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"text",readOnly:!0,value:Y,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:Z=>Z.currentTarget.select()}),t.jsx("button",{onClick:()=>K(Y),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy password",children:t.jsx(oi,{className:"h-4 w-4"})})]}):ae===z.id?t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-white border border-gray-300 rounded",children:[t.jsx(Dn,{className:"h-4 w-4 animate-spin text-primary-600"}),t.jsx("span",{className:"text-sm text-gray-500",children:"Loading password"})]}):t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"flex-1 px-3 py-2 bg-amber-50 border border-amber-200 rounded text-sm text-amber-800",children:"Password not loaded yet. Click Reset to generate a new one."}),t.jsxs("button",{onClick:()=>me(z),disabled:ae===z.id,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-primary-100 text-primary-700 hover:bg-primary-200 rounded text-sm transition-colors disabled:opacity-50",children:[t.jsx(Dn,{className:"h-4 w-4"}),t.jsx("span",{children:"Reset"})]})]})]}),Y&&t.jsxs("button",{onClick:()=>K(`Username: ${z.username}
Password: ${Y}`),className:"w-full px-3 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded text-sm transition-colors flex items-center justify-center space-x-2",children:[t.jsx(oi,{className:"h-4 w-4"}),t.jsx("span",{children:"Copy username and password"})]})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:Z=>{Z.stopPropagation(),r(`/student/${z.username}`)},className:"flex-1 bg-primary-100 text-primary-700 hover:bg-primary-200 px-3 py-2 rounded-lg transition-colors text-sm flex items-center justify-center space-x-1",title:"View detailed profile",children:[t.jsx(al,{className:"h-4 w-4"}),t.jsx("span",{children:"View Details"})]}),t.jsxs("button",{onClick:Z=>{Z.stopPropagation(),a(z),i(!0)},className:"flex-1 btn-success text-sm",children:[t.jsx(Mn,{className:"h-4 w-4 inline mr-1"}),"Add Money"]}),t.jsxs("button",{onClick:Z=>{Z.stopPropagation(),a(z),c(!0)},className:"flex-1 btn-warning text-sm",children:[t.jsx(fh,{className:"h-4 w-4 inline mr-1"}),"Remove Money"]}),t.jsx("button",{onClick:Z=>{Z.stopPropagation(),y(z),p(!0)},className:"px-3 py-2 bg-red-100 text-red-600 hover:bg-red-200 rounded-lg transition-colors text-sm",title:"Delete Student",children:t.jsx(vh,{className:"h-4 w-4"})})]})]},z.id)})}),l&&n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add Money to ",n.username]}),t.jsxs("form",{onSubmit:J,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"label",children:[t.jsx(ye,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:f.amount,onChange:z=>g({...f,amount:z.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Description"}),t.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Salary, Bonus, Reward",value:f.description,onChange:z=>g({...f,description:z.target.value})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:j,className:"flex-1 btn-success disabled:opacity-50",children:j?"Adding...":"Add Money"}),t.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),o&&n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Remove Money from ",n.username]}),t.jsxs("form",{onSubmit:re,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"label",children:[t.jsx(ye,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:n.balance,required:!0,className:"input-field",placeholder:"0.00",value:f.amount,onChange:z=>g({...f,amount:z.target.value})}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",le(n.balance)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"label",children:"Description"}),t.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Fine, Expense, Penalty",value:f.description,onChange:z=>g({...f,description:z.target.value})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:j,className:"flex-1 btn-warning disabled:opacity-50",children:j?"Removing...":"Remove Money"}),t.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),d&&u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:t.jsx(Jn,{className:"h-6 w-6 text-red-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Student"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-gray-600 mb-3",children:"Are you sure you want to delete the following student? This action cannot be undone."}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:u.first_name&&u.last_name?`${u.first_name} ${u.last_name}`:u.username}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",u.username]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Class: ",u.class||"Unassigned"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: ",le(u.balance)]})]}),t.jsxs("p",{className:"text-sm text-red-600 mt-3",children:[t.jsx("strong",{children:"Warning:"})," All associated data including transactions, loans, job applications, and land ownership will be removed."]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:X,disabled:j,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:j?"Deleting...":"Delete Student"}),t.jsx("button",{onClick:()=>{p(!1),y(null)},className:"flex-1 btn-secondary",children:"Cancel"})]})]})})]})},bj=({onUpdate:e})=>{const[s,r]=x.useState([]),[n,a]=x.useState(!0),[l,i]=x.useState(""),[o,c]=x.useState(""),[d,p]=x.useState(null);x.useEffect(()=>{u()},[]);const u=async()=>{var j,w;try{a(!0),i("");const h=await O.get("/students/pending");r(h.data)}catch(h){i(((w=(j=h.response)==null?void 0:j.data)==null?void 0:w.error)||"Failed to fetch pending students")}finally{a(!1)}},y=async j=>{var w,h;p(j.id),i(""),c("");try{await O.post(`/students/${j.username}/approve`),c(`Student ${j.username} has been approved successfully`),await u(),e()}catch(m){i(((h=(w=m.response)==null?void 0:w.data)==null?void 0:h.error)||"Failed to approve student")}finally{p(null)}},f=async j=>{var w,h;if(confirm(`Are you sure you want to deny ${j.username}? This action cannot be undone.`)){p(j.id),i(""),c("");try{await O.post(`/students/${j.username}/deny`),c(`Student ${j.username} has been denied`),await u(),e()}catch(m){i(((h=(w=m.response)==null?void 0:w.data)==null?void 0:h.error)||"Failed to deny student")}finally{p(null)}}},g=j=>new Date(j).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:t.jsx($e,{className:"h-6 w-6 text-amber-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"New Student Registrations"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," ",s.length===1?"student":"students"," waiting for approval"]})]})]}),t.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors",children:[t.jsx(Dn,{className:"h-4 w-4"}),t.jsx("span",{children:"Refresh"})]})]}),l&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(Le,{className:"h-5 w-5"}),t.jsx("span",{children:l})]}),o&&t.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:o}),s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[t.jsx($e,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Students"}),t.jsx("p",{className:"text-gray-500",children:"All new student registrations have been processed."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(j=>t.jsxs("div",{className:"bg-white rounded-xl border-2 border-amber-200 shadow-sm p-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[t.jsx("div",{className:"bg-amber-100 p-2 rounded-full flex-shrink-0",children:t.jsx(Os,{className:"h-5 w-5 text-amber-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:j.first_name&&j.last_name?`${j.first_name} ${j.last_name}`:j.username}),t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",j.username]})]})]})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[j.class&&t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:j.class})}),j.email&&t.jsx("p",{className:"text-xs text-gray-600 truncate",title:j.email,children:j.email}),j.account_number&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",j.account_number]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",g(j.created_at)]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>y(j),disabled:d===j.id,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-success-600 text-white rounded-lg hover:bg-success-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d===j.id?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Processing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Uy,{className:"h-4 w-4"}),t.jsx("span",{children:"Approve"})]})}),t.jsx("button",{onClick:()=>f(j),disabled:d===j.id,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(zs,{className:"h-4 w-4"})})]})]},j.id))})]})},Nj=()=>{const{user:e}=Ve(),{enabledPlugins:s,plugins:r,loading:n,refreshPlugins:a}=Nt(),{currentTown:l,currentTownClass:i,allTowns:o,announcements:c,loading:d,setCurrentTownClass:p,refreshAnnouncements:u}=ms(),[y,f]=x.useState("dashboard"),[g,j]=x.useState(0),[w,h]=x.useState([]),[m,v]=x.useState([]),[N,C]=x.useState(!0),R=e!=null&&e.first_name&&(e!=null&&e.last_name)?`${e.first_name} ${e.last_name}`:(e==null?void 0:e.username)||"Teacher";x.useEffect(()=>{k()},[]);const k=async()=>{var b;try{const[A,B,H]=await Promise.all([O.get("/students"),O.get("/loans"),O.get("/students/pending").catch(()=>({data:[]}))]);h(A.data),v(B.data),j(((b=H.data)==null?void 0:b.length)||0)}catch(A){console.error("Failed to fetch data:",A)}finally{C(!1)}},D=x.useMemo(()=>{const b={};return o.forEach(A=>{const B=w.filter(q=>q.class===A.class),H=m.filter(q=>{const ae=w.find(M=>M.username===q.borrower_username);return(ae==null?void 0:ae.class)===A.class});b[A.class]={studentCount:B.length,totalBalance:B.reduce((q,ae)=>q+(Number(ae.balance)||0),0),employedCount:B.filter(q=>q.job_id).length,unemployedCount:B.filter(q=>!q.job_id).length,activeLoans:H.filter(q=>q.status==="active").length,pendingLoans:H.filter(q=>q.status==="pending").length}}),b},[w,m,o]),L=i?D[i]:null,S=x.useMemo(()=>i?w.filter(b=>b.class===i):[],[w,i]),_=b=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(b);return n||d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",R,"! "]}),t.jsx("p",{className:"text-primary-100",children:"Town Hub Control Center"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-primary-100 text-sm",children:"Managing"}),t.jsxs("p",{className:"text-xl font-bold",children:[o.length," Towns"]})]})]})}),g>0&&y!=="pending"&&t.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx($e,{className:"h-5 w-5 text-amber-600"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[g," new student",g!==1?"s":""," waiting for approval"]}),t.jsx("p",{className:"text-xs text-amber-600",children:'Click "New Students" tab to review and approve'})]})]}),t.jsx("button",{onClick:()=>f("pending"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium",children:"Review Now"})]})}),o.length>0&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:t.jsx("div",{className:"grid grid-cols-3 divide-x divide-gray-200",children:o.map(b=>{const A=D[b.class],B=i===b.class;return t.jsxs("button",{onClick:()=>p(b.class),className:`p-4 text-left transition-all ${B?"bg-gradient-to-br from-primary-50 to-primary-100 border-b-4 border-primary-500":"hover:bg-gray-50 border-b-4 border-transparent"}`,children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${B?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"}`,children:t.jsx(Ct,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h3",{className:`font-bold ${B?"text-primary-700":"text-gray-900"}`,children:b.town_name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Class ",b.class]})]})]}),A&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ze,{className:"h-3 w-3 text-gray-400"}),t.jsxs("span",{className:"text-gray-600",children:[A.studentCount," students"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Zt,{className:"h-3 w-3 text-gray-400"}),t.jsx("span",{className:`${A.totalBalance>=0?"text-green-600":"text-red-600"}`,children:_(A.totalBalance)})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(gt,{className:"h-3 w-3 text-gray-400"}),t.jsxs("span",{className:"text-gray-600",children:[A.employedCount," employed"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(iu,{className:"h-3 w-3 text-emerald-500"}),t.jsx("span",{className:"text-emerald-600",children:_(b.treasury_balance||1e7)})]})]})]},b.id)})})}),l&&L&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.studentCount}),t.jsxs("p",{className:"text-xs text-gray-500",children:[L.employedCount," employed"]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Zt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),t.jsx("p",{className:`text-2xl font-bold ${L.totalBalance>=0?"text-green-600":"text-red-600"}`,children:_(L.totalBalance)}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",_(L.studentCount>0?L.totalBalance/L.studentCount:0)]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(gt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Employment"})]}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[L.studentCount>0?Math.round(L.employedCount/L.studentCount*100):0,"%"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[L.unemployedCount," unemployed"]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(es,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Loans"})]}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:L.activeLoans}),t.jsx("p",{className:"text-xs text-amber-600",children:L.pendingLoans>0?`${L.pendingLoans} pending approval`:"No pending"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"dashboard",label:"Overview",icon:pn},{id:"pending",label:"New Students",icon:$e,badge:g},{id:"students",label:"Students",icon:ze},{id:"treasury",label:"Treasury",icon:iu},{id:"jobs",label:"Jobs",icon:gt},{id:"plugins",label:"Plugins",icon:jh},{id:"announcements",label:"Announcements",icon:Vy},{id:"town",label:"Town Settings",icon:_r}].map(({id:b,label:A,icon:B,badge:H})=>t.jsxs("button",{onClick:()=>f(b),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 relative ${y===b?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(B,{className:"h-4 w-4"}),t.jsx("span",{children:A}),H!==void 0&&H>0&&t.jsx("span",{className:"ml-1 bg-amber-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center",children:H})]},b))})}),t.jsxs("div",{className:"p-6",children:[y==="dashboard"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(wh,{town:l,readOnly:!0,showTreasury:!0}),t.jsx(Nh,{announcements:c})]}),S.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ze,{className:"h-5 w-5 text-primary-600"}),t.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Students in ",(l==null?void 0:l.town_name)||`Class ${i}`]})]}),t.jsxs("span",{className:"text-sm text-gray-500",children:[S.length," students"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.slice(0,9).map(b=>t.jsx("div",{className:`bg-white rounded-lg p-3 border ${Number(b.balance)<0?"border-red-200 bg-red-50":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:b.username}),t.jsxs("p",{className:"text-xs text-gray-500",children:["@",b.username]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:`font-semibold ${Number(b.balance)<0?"text-red-600":"text-green-600"}`,children:_(b.balance)}),b.job_name?t.jsx("p",{className:"text-xs text-blue-600",children:b.job_name}):t.jsx("p",{className:"text-xs text-gray-400",children:"No job"})]})]})},b.id))}),S.length>9&&t.jsxs("p",{className:"text-center text-sm text-gray-500 mt-3",children:["+",S.length-9," more students"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(pn,{className:"h-5 w-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Available Systems"})]}),s.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No systems available at this time"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(b=>t.jsx(bh,{plugin:b},b.id))})]})]}),y==="pending"&&t.jsx(bj,{onUpdate:k}),y==="students"&&t.jsx(vj,{students:w,onUpdate:k}),y==="treasury"&&t.jsx(jj,{}),y==="plugins"&&t.jsx(pj,{plugins:r,onUpdate:a}),y==="announcements"&&t.jsx(fj,{announcements:c,onUpdate:u}),y==="jobs"&&t.jsx(yj,{}),y==="town"&&t.jsx(gj,{})]})]})]})},wj=()=>{const{username:e}=Rf(),s=Un(),[r,n]=x.useState(null),[a,l]=x.useState(!0),[i,o]=x.useState(""),[c,d]=x.useState("overview");x.useEffect(()=>{p()},[e]);const p=async()=>{var b,A;try{l(!0);const B=await O.get(`/students/${e}/details`);n(B.data)}catch(B){o(((A=(b=B.response)==null?void 0:b.data)==null?void 0:A.error)||"Failed to load student details")}finally{l(!1)}},u=b=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(b),y=b=>new Date(b).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=b=>new Date(b).toLocaleDateString("en-ZA",{month:"short",day:"numeric",year:"numeric"}),g=(b,A)=>{const B="text-xs px-2 py-1 rounded-full flex items-center space-x-1";return b==="approved"||b==="verified"?t.jsxs("span",{className:`${B} bg-green-100 text-green-700`,children:[t.jsx(Ce,{className:"h-3 w-3"}),t.jsx("span",{children:A?"Approved  Paid":"Approved"})]}):b==="denied"?t.jsxs("span",{className:`${B} bg-red-100 text-red-700`,children:[t.jsx(zt,{className:"h-3 w-3"}),t.jsx("span",{children:"Denied"})]}):t.jsxs("span",{className:`${B} bg-yellow-100 text-yellow-700`,children:[t.jsx(Le,{className:"h-3 w-3"}),t.jsx("span",{children:"Pending"})]})},j=b=>b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:b.username,w=(b,A)=>b.from_username===A&&b.to_username===A?"Internal":b.from_username===A?`To ${b.to_first_name&&b.to_last_name?`${b.to_first_name} ${b.to_last_name}`:b.to_username||"Unknown"}`:b.to_username===A?`From ${b.from_first_name&&b.from_last_name?`${b.from_first_name} ${b.from_last_name}`:b.from_username||"Unknown"}`:b.transaction_type;if(a)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ph,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading student details..."})]})});if(i||!r)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Le,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-600 mb-4",children:i||"Failed to load student details"}),t.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Back to Dashboard"})]})});const{student:h,transactions:m,loans:v,landParcels:N,mathGameSessions:C,pizzaContributions:R,shopPurchases:k,jobApplications:D,suggestions:L,bugReports:S,stats:_}=r;return t.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("button",{onClick:()=>s("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[t.jsx($y,{className:"h-5 w-5"}),t.jsx("span",{children:"Back to Dashboard"})]})})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white shadow-lg",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 p-4 rounded-full",children:t.jsx(Os,{className:"h-12 w-12"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-1",children:j(h)}),t.jsxs("p",{className:"text-primary-100 mb-2",children:["@",h.username]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[h.class&&t.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:["Class ",h.class]}),h.email&&t.jsx("span",{className:"text-sm text-primary-100",children:h.email})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-primary-100 text-sm mb-1",children:"Current Balance"}),t.jsx("p",{className:`text-4xl font-bold ${Number(h.balance)<0?"text-red-300":"text-white"}`,children:u(h.balance)}),t.jsxs("p",{className:"text-xs text-primary-200 mt-1",children:["Account: ",h.account_number]})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[t.jsx(rt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Earned"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:u(_.total_deposits+_.total_math_earnings)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[t.jsx(jr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Spent"})]}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:u(_.total_withdrawals+_.shop_purchases_total+_.pizza_contributions_total)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[t.jsx(Ta,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Property Value"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u(_.land_value_total)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_.land_parcels_owned," parcels"]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[t.jsx(es,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Loan Debt"})]}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:u(_.total_loan_debt)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_.active_loans," active"]})]})]}),h.job_name&&t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:t.jsx(gt,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Current Job"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Employment Details"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Position"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:h.job_name})]}),h.job_company_name&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:h.job_company_name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Salary"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:u(h.job_salary||0)})]}),h.job_description&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),t.jsx("p",{className:"text-gray-700",children:h.job_description})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:yc},{id:"transactions",label:"Transactions",icon:ye},{id:"loans",label:"Loans",icon:es},{id:"property",label:"Property",icon:Ta},{id:"activities",label:"Activities",icon:di}].map(({id:b,label:A,icon:B})=>t.jsxs("button",{onClick:()=>d(b),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${c===b?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(B,{className:"h-4 w-4"}),t.jsx("span",{children:A})]},b))})}),t.jsxs("div",{className:"p-6",children:[c==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),t.jsx("span",{className:"font-semibold text-gray-900",children:_.total_transactions})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Math Games Played"}),t.jsx("span",{className:"font-semibold text-gray-900",children:_.math_games_played})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Math Game Earnings"}),t.jsx("span",{className:"font-semibold text-green-600",children:u(_.total_math_earnings)})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Pizza Contributions"}),t.jsx("span",{className:"font-semibold text-orange-600",children:u(_.pizza_contributions_total)})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Shop Purchases"}),t.jsx("span",{className:"font-semibold text-blue-600",children:u(_.shop_purchases_total)})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Activity"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(jr,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Sent to Students"})]}),t.jsx("span",{className:"font-semibold text-green-600",children:u(_.total_transfers_sent)})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(rt,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Received from Students"})]}),t.jsx("span",{className:"font-semibold text-blue-600",children:u(_.total_transfers_received)})]}),t.jsx("div",{className:"p-3 bg-gray-100 rounded-lg border border-gray-300",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Net Transfer"}),t.jsx("span",{className:`font-bold ${_.total_transfers_received-_.total_transfers_sent>=0?"text-green-600":"text-red-600"}`,children:u(_.total_transfers_received-_.total_transfers_sent)})]})})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),t.jsx("div",{className:"space-y-2",children:m.slice(0,5).map(b=>{const A=b.from_username===h.username;return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`p-2 rounded-full ${A?"bg-red-100":"bg-green-100"}`,children:A?t.jsx(jr,{className:"h-4 w-4 text-red-600"}):t.jsx(rt,{className:"h-4 w-4 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:w(b,h.username)}),t.jsx("p",{className:"text-xs text-gray-500",children:b.description||b.transaction_type})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`font-semibold ${A?"text-red-600":"text-green-600"}`,children:[A?"-":"+",u(b.amount)]}),t.jsx("p",{className:"text-xs text-gray-500",children:f(b.created_at)})]})]},b.id)})})]})]}),c==="transactions"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["All Transactions (",m.length,")"]})}),m.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]}):t.jsx("div",{className:"space-y-2",children:m.map(b=>{const A=b.from_username===h.username;return t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:`p-2 rounded-full mt-1 ${A?"bg-red-100":"bg-green-100"}`,children:A?t.jsx(jr,{className:"h-4 w-4 text-red-600"}):t.jsx(rt,{className:"h-4 w-4 text-green-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:w(b,h.username)}),t.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:b.transaction_type})]}),b.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:b.description}),t.jsx("p",{className:"text-xs text-gray-500",children:y(b.created_at)})]})]}),t.jsx("div",{className:"text-right ml-4",children:t.jsxs("p",{className:`text-lg font-bold ${A?"text-red-600":"text-green-600"}`,children:[A?"-":"+",u(b.amount)]})})]})},b.id)})})]}),c==="loans"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Loans (",v.length,")"]})}),v.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(es,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No loans"})]}):t.jsx("div",{className:"grid gap-4",children:v.map(b=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-purple-500",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:u(b.amount)}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${b.status==="active"?"bg-green-100 text-green-700":b.status==="pending"?"bg-yellow-100 text-yellow-700":b.status==="paid_off"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:b.status})]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[b.term_months," months  ",b.interest_rate,"% interest"]})]}),b.status==="active"&&t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),t.jsx("p",{className:"text-lg font-bold text-purple-600",children:u(b.outstanding_balance)})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Monthly Payment"}),t.jsx("p",{className:"font-semibold text-gray-900",children:u(b.monthly_payment)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Total Paid"}),t.jsx("p",{className:"font-semibold text-green-600",children:u(b.total_paid)})]}),b.status==="active"&&t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Payments Left"}),t.jsx("p",{className:"font-semibold text-gray-900",children:b.payments_remaining})]})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Created: ",f(b.created_at),b.approved_at&&`  Approved: ${f(b.approved_at)}`]})]},b.id))})]}),c==="property"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Land Parcels (",N.length,")"]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Value"}),t.jsx("p",{className:"text-xl font-bold text-blue-600",children:u(_.land_value_total)})]})]}),N.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ta,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No land parcels owned"})]}):t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:N.map(b=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-green-500",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:b.grid_code}),t.jsx("p",{className:"text-sm text-gray-600",children:b.biome_type})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-green-600",children:u(b.value)}),t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${b.risk_level==="low"?"bg-green-100 text-green-700":b.risk_level==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[b.risk_level," risk"]})]})]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Purchased: ",f(b.purchased_at)]})]},b.id))})]}),c==="activities"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Math Game Sessions (",C.length,")"]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Earnings"}),t.jsx("p",{className:"text-xl font-bold text-green-600",children:u(_.total_math_earnings)})]})]}),C.length===0?t.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[t.jsx(di,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"No math games played yet"})]}):t.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:C.slice(0,10).map(b=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(di,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${b.difficulty==="easy"?"bg-green-100 text-green-700":b.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:b.difficulty})]}),t.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+",u(b.earnings)]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:["Score: ",b.score]}),t.jsxs("span",{className:"text-gray-600",children:[b.correct_answers,"/",b.total_problems," correct"]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y(b.played_at)})]},b.id))})]}),R.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pizza Contributions"}),t.jsx("p",{className:"text-lg font-bold text-orange-600",children:u(_.pizza_contributions_total)})]}),t.jsx("div",{className:"space-y-2",children:R.map((b,A)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Pa,{className:"h-4 w-4 text-orange-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:b.description})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-semibold text-orange-600",children:u(b.amount)}),t.jsx("p",{className:"text-xs text-gray-500",children:f(b.created_at)})]})]},A))})]}),k.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Shop Purchases"}),t.jsx("p",{className:"text-lg font-bold text-blue-600",children:u(_.shop_purchases_total)})]}),t.jsx("div",{className:"space-y-2",children:k.map((b,A)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Er,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:b.description})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-600",children:u(b.amount)}),t.jsx("p",{className:"text-xs text-gray-500",children:f(b.created_at)})]})]},A))})]}),D.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Job Applications"}),t.jsx("div",{className:"space-y-2",children:D.map(b=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(_r,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.job_name}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Salary: ",u(b.job_salary)]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${b.status==="approved"?"bg-green-100 text-green-700":b.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:b.status}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f(b.created_at)})]})]},b.id))})]}),(L.length>0||S.length>0)&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suggestions & Bugs"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Suggestions"}),t.jsx("p",{className:"text-xs text-gray-500",children:L.length})]}),L.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions submitted."}):t.jsx("div",{className:"space-y-2",children:L.map(b=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[g(b.status,b.reward_paid),t.jsx("span",{className:"text-xs text-gray-500",children:f(b.created_at)})]}),t.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:b.content})]},b.id))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Bug Reports"}),t.jsx("p",{className:"text-xs text-gray-500",children:S.length})]}),S.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No bugs reported."}):t.jsx("div",{className:"space-y-2",children:S.map(b=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[g(b.status,b.reward_paid),t.jsx("span",{className:"text-xs text-gray-500",children:f(b.created_at)})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:b.title}),t.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:b.description})]},b.id))})]})]})]})]})]})]})]})]})},Sj=({onSuccess:e})=>{const[s,r]=x.useState({to_username:"",amount:"",description:""}),[n,a]=x.useState(!1),[l,i]=x.useState(""),[o,c]=x.useState(""),[d,p]=x.useState([]),[u,y]=x.useState(!0),[f,g]=x.useState(null),[j,w]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[N,C]=await Promise.all([O.get("/students/classmates"),O.get("/transactions/can-transact")]);p(N.data),g(C.data)}catch(N){console.error("Failed to load data:",N),i("Failed to load data. Please refresh the page.")}finally{y(!1),w(!1)}})()},[]);const h=async v=>{var N,C;v.preventDefault(),i(""),c(""),a(!0);try{await O.post("/transactions/transfer",{to_username:s.to_username,amount:parseFloat(s.amount),description:s.description||void 0}),c("Transfer completed successfully!"),r({to_username:"",amount:"",description:""}),e()}catch(R){i(((C=(N=R.response)==null?void 0:N.data)==null?void 0:C.error)||"Transfer failed")}finally{a(!1)}},m=v=>{r({...s,[v.target.name]:v.target.value})};return j?t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):f&&!f.canTransact?t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(zt,{className:"h-8 w-8 text-red-600"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfers Blocked"})]}),t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[t.jsx(Le,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-800 font-medium mb-2",children:"You cannot make transfers at this time"}),t.jsx("p",{className:"text-red-700 text-sm",children:f.reason})]}),t.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:" How to resolve:"}),t.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[t.jsx("li",{children:" If you have a negative balance, deposit money to clear it"}),t.jsx("li",{children:" If you have an overdue loan payment, make a loan payment first"}),t.jsx("li",{children:" Contact your teacher if you need assistance"})]})]})]}):t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Rs,{className:"h-8 w-8 text-primary-600"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfer Money"}),t.jsx("p",{className:"text-gray-600",children:"Send money to another student in your class"})]}),t.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),o&&t.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:o}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"to_username",className:"label",children:[t.jsx(Os,{className:"h-4 w-4 inline mr-1"}),"Send to (Classmate)"]}),u?t.jsx("div",{className:"input-field text-gray-500",children:"Loading classmates..."}):t.jsxs("select",{id:"to_username",name:"to_username",required:!0,className:"input-field",value:s.to_username,onChange:m,children:[t.jsx("option",{value:"",children:"Select a classmate"}),d.map(v=>t.jsx("option",{value:v.username,children:v.first_name&&v.last_name?`${v.first_name} ${v.last_name} (${v.username})`:v.username},v.id))]}),!u&&d.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No classmates found in your class."})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"amount",className:"label",children:[t.jsx(ye,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),t.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:s.amount,onChange:m})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"description",className:"label",children:[t.jsx(qy,{className:"h-4 w-4 inline mr-1"}),"Description (Optional)"]}),t.jsx("input",{id:"description",name:"description",type:"text",className:"input-field",placeholder:"What's this for?",value:s.description,onChange:m})]}),t.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Sending...":"Send Money"})]}),t.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Transfer Tips:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Make sure you have enough money in your account"}),t.jsx("li",{children:" Select a classmate from your class to send money to"}),t.jsx("li",{children:" Add a description to remember what the money is for"}),t.jsx("li",{children:" Pay off any outstanding loans before making transfers"})]})]})]})},kj=({onSuccess:e})=>{const[s,r]=x.useState([]),[n,a]=x.useState(null),[l,i]=x.useState(!1),[o,c]=x.useState({amount:"",term_weeks:"4"}),[d,p]=x.useState(!0),[u,y]=x.useState(!1),[f,g]=x.useState(""),[j,w]=x.useState("");x.useEffect(()=>{h()},[]);const h=async()=>{try{const[_,b]=await Promise.all([O.get("/loans"),O.get("/loans/eligibility")]);r(_.data),a(b.data)}catch(_){console.error("Failed to fetch data:",_)}finally{p(!1)}},m=()=>{const _=parseFloat(o.amount)||0,b=parseInt(o.term_weeks)||4;let A;b<=4?A=.05:b<=8?A=.08:A=.1;const B=_*(1+A),H=B/b;return{interestRate:A,totalAmount:B,weeklyPayment:H,interestAmount:B-_}},v=async _=>{var b,A,B;_.preventDefault(),g(""),w(""),y(!0);try{const H=await O.post("/loans/apply",{amount:parseFloat(o.amount),term_weeks:parseInt(o.term_weeks)});w("Loan application submitted successfully! Weekly payment: R"+((b=H.data.weeklyPayment)==null?void 0:b.toFixed(2))),c({amount:"",term_weeks:"4"}),i(!1),h(),e()}catch(H){g(((B=(A=H.response)==null?void 0:A.data)==null?void 0:B.error)||"Loan application failed")}finally{y(!1)}},N=async(_,b)=>{var A,B;try{await O.post("/loans/pay",{loan_id:_,amount:b}),w("Payment successful!"),h(),e()}catch(H){g(((B=(A=H.response)==null?void 0:A.data)==null?void 0:B.error)||"Payment failed")}},C=_=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(_),R=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),k=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};s.some(_=>_.status==="pending");const D=s.some(_=>_.status==="approved");s.some(_=>_.status==="active");const L=s.find(_=>_.status==="active"),S=m();return d?t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ye,{className:"h-8 w-8 text-primary-600"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Center"}),t.jsx("p",{className:"text-gray-600",children:"Apply for loans and manage your payments"})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[t.jsx(zt,{className:"h-5 w-5 mr-2"}),f]}),j&&t.jsxs("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg flex items-center",children:[t.jsx(Ce,{className:"h-5 w-5 mr-2"}),j]}),t.jsx("div",{className:`rounded-xl p-4 ${n!=null&&n.hasJob?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(gt,{className:`h-6 w-6 ${n!=null&&n.hasJob?"text-green-600":"text-yellow-600"}`}),t.jsxs("div",{children:[t.jsx("h3",{className:`font-semibold ${n!=null&&n.hasJob?"text-green-900":"text-yellow-900"}`,children:n!=null&&n.hasJob?`Job: ${n.jobName}`:"No Job Assigned"}),n!=null&&n.hasJob?t.jsxs("p",{className:"text-sm text-green-700",children:["Weekly Salary: ",C(n.salary),"  Max Loan: ",C(n.maxLoanAmount)]}):t.jsx("p",{className:"text-sm text-yellow-700",children:"You need a job to apply for a loan. Apply for a job in the Jobs section."})]})]})}),(n==null?void 0:n.eligible)&&!l&&t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>i(!0),className:"btn-primary",children:"Apply for a Loan"})}),n&&!n.eligible&&n.reason&&t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"h-5 w-5 text-gray-500 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Cannot Apply for Loan"}),t.jsx("p",{className:"text-sm text-gray-600",children:n.reason})]})]})}),D&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ce,{className:"h-5 w-5 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-green-900",children:"Loan Approved!"}),t.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved and the money is being processed. Payments will start next Monday."})]})]})}),L&&L.next_payment_date&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx($e,{className:"h-5 w-5 text-blue-600 mr-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-blue-900",children:"Next Payment Due"}),t.jsxs("p",{className:"text-sm text-blue-800",children:[R(L.next_payment_date),"  ",C(L.weekly_payment||L.monthly_payment/4.33)]})]})]}),t.jsx("button",{onClick:()=>N(L.id,L.weekly_payment||L.monthly_payment/4.33),className:"btn-success text-sm",children:"Pay Now"})]})}),l&&(n==null?void 0:n.eligible)&&t.jsxs("div",{className:"card max-w-md mx-auto",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Apply for a Loan"}),t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"amount",className:"label",children:[t.jsx(ye,{className:"h-4 w-4 inline mr-1"}),"Loan Amount (Max: ",C(n.maxLoanAmount),")"]}),t.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"1",max:n.maxLoanAmount,required:!0,className:"input-field",placeholder:"0.00",value:o.amount,onChange:_=>c({...o,amount:_.target.value})})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"term_weeks",className:"label",children:[t.jsx(Iy,{className:"h-4 w-4 inline mr-1"}),"Repayment Term (Weeks)"]}),t.jsxs("select",{id:"term_weeks",name:"term_weeks",className:"input-field",value:o.term_weeks,onChange:_=>c({...o,term_weeks:_.target.value}),children:[t.jsx("option",{value:"2",children:"2 weeks (5% interest)"}),t.jsx("option",{value:"4",children:"4 weeks (5% interest)"}),t.jsx("option",{value:"6",children:"6 weeks (8% interest)"}),t.jsx("option",{value:"8",children:"8 weeks (8% interest)"}),t.jsx("option",{value:"10",children:"10 weeks (10% interest)"}),t.jsx("option",{value:"12",children:"12 weeks (10% interest)"})]})]}),parseFloat(o.amount)>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:"Loan Summary"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsx("div",{className:"text-gray-500",children:"Principal:"}),t.jsx("div",{className:"font-medium",children:C(parseFloat(o.amount))}),t.jsxs("div",{className:"text-gray-500",children:["Interest (",(S.interestRate*100).toFixed(0),"%):"]}),t.jsx("div",{className:"font-medium",children:C(S.interestAmount)}),t.jsx("div",{className:"text-gray-500",children:"Total Repayment:"}),t.jsx("div",{className:"font-medium text-primary-600",children:C(S.totalAmount)}),t.jsx("div",{className:"text-gray-500",children:"Weekly Payment:"}),t.jsx("div",{className:"font-medium text-primary-600",children:C(S.weeklyPayment)})]}),n.maxWeeklyPayment&&S.weeklyPayment>n.maxWeeklyPayment&&t.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded text-red-700 text-sm",children:" Weekly payment exceeds 50% of your salary. Please reduce the amount or extend the term."})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:u||n.maxWeeklyPayment&&S.weeklyPayment>n.maxWeeklyPayment,className:"flex-1 btn-primary disabled:opacity-50",children:u?"Applying...":"Apply"}),t.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Loans"}),s.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(ye,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No loans yet. Apply for your first loan to get started!"})]}):t.jsx("div",{className:"space-y-4",children:s.map(_=>t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",_.id]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",R(_.created_at)]})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(_.status)}`,children:_.status.replace("_"," ").toUpperCase()})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),t.jsx("p",{className:"font-semibold text-gray-900",children:C(_.amount)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Weekly Payment"}),t.jsx("p",{className:"font-semibold text-gray-900",children:C(_.weekly_payment||_.monthly_payment/4.33)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding Balance"}),t.jsx("p",{className:"font-semibold text-gray-900",children:C(_.outstanding_balance)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),t.jsx("p",{className:"font-semibold text-gray-900",children:_.term_weeks?`${_.term_weeks} weeks`:`${_.term_months} months`})]})]}),_.status==="active"&&t.jsx("div",{className:"border-t pt-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Payments Remaining"}),t.jsx("p",{className:"font-semibold text-gray-900",children:_.payments_remaining||0}),_.next_payment_date&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Next payment: ",R(_.next_payment_date)]})]}),t.jsx("button",{onClick:()=>N(_.id,_.weekly_payment||_.monthly_payment/4.33),className:"btn-success",children:"Make Payment"})]})}),_.status==="pending"&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"h-4 w-4 text-yellow-600 mr-2"}),t.jsx("p",{className:"text-sm text-yellow-800",children:"Your loan application is pending teacher approval."})]})}),_.status==="approved"&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ce,{className:"h-4 w-4 text-green-600 mr-2"}),t.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved! The money will be disbursed to your account shortly."})]})})]},_.id))})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Loan Information:"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Job Required:"})," You must have a job to apply for a loan"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Loan Amount:"})," Based on your salary (max loan = up to 6x weekly salary)"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Interest rates:"})," 5% (1-4 weeks), 8% (5-8 weeks), 10% (9-12 weeks)"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Payments:"})," Automatic weekly payments every Monday"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Payment Limit:"})," Weekly payment cannot exceed 50% of your salary"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Important:"})," If you don't have enough funds, payment still goes through (negative balance)"]}),t.jsxs("li",{children:[" ",t.jsx("strong",{children:"Restrictions:"})," Clear any negative balance before new loans or transfers"]})]})]})]})},_j=({isOpen:e,onClose:s,onGameComplete:r,gameStatus:n})=>{const[a,l]=x.useState("difficulty"),[i,o]=x.useState("easy"),[c,d]=x.useState(null),[p,u]=x.useState(60),[y,f]=x.useState(0),[g,j]=x.useState(null),[w,h]=x.useState(""),[m,v]=x.useState([]),[N,C]=x.useState(0),[R,k]=x.useState(0),[D,L]=x.useState(null),[S,_]=x.useState(!1),[b,A]=x.useState(null),[B,H]=x.useState(!1),[q,ae]=x.useState(null),M=["Nice try, cheater! ","Nope! One answer per question!","Did you really think that would work? ","NO! Wait for the next question!","Spam detected! -0 points for effort ","Slow down there, speedster!","Patience, young grasshopper ","Your keyboard is not a money printer!","Error 418: I'm a teapot, not a fool ","BONK! No cheating! "],T=x.useCallback(ne=>{const K={easy:{addition:{max:20,min:1},subtraction:{max:20,min:1},multiplication:{max:12,min:1},division:{max:12,min:2}},medium:{addition:{max:50,min:1},subtraction:{max:50,min:1},multiplication:{max:15,min:1},division:{max:15,min:2}},hard:{addition:{max:100,min:1},subtraction:{max:100,min:1},multiplication:{max:20,min:1},division:{max:20,min:2}}}[ne],z=["+","-","",""],ee=z[Math.floor(Math.random()*z.length)];let Y,Z,$;switch(ee){case"+":Y=Math.floor(Math.random()*(K.addition.max-K.addition.min+1))+K.addition.min,Z=Math.floor(Math.random()*(K.addition.max-K.addition.min+1))+K.addition.min,$=Y+Z;break;case"-":Y=Math.floor(Math.random()*(K.subtraction.max-K.subtraction.min+1))+K.subtraction.min,Z=Math.floor(Math.random()*(K.subtraction.max-K.subtraction.min+1))+K.subtraction.min,Y<Z&&([Y,Z]=[Z,Y]),$=Y-Z;break;case"":Y=Math.floor(Math.random()*(K.multiplication.max-K.multiplication.min+1))+K.multiplication.min,Z=Math.floor(Math.random()*(K.multiplication.max-K.multiplication.min+1))+K.multiplication.min,$=Y*Z;break;case"":$=Math.floor(Math.random()*(K.division.max-K.division.min+1))+K.division.min,Z=Math.floor(Math.random()*(K.division.max-K.division.min+1))+K.division.min,Y=Z*$;break}return{num1:Y,num2:Z,operation:ee,answer:$,display:`${Y} ${ee} ${Z} =`}},[]),U=async ne=>{try{o(ne);const me=await xo.startGame({difficulty:ne});d(me.data.session.id),l("playing"),u(60),f(0),v([]),C(0),k(0),h(""),j(T(ne))}catch(me){console.error("Failed to start game:",me),alert("Failed to start game. Please try again.")}},W=()=>{if(S){const K=M[Math.floor(Math.random()*M.length)];ae(K),setTimeout(()=>ae(null),1500);return}if(!g||!w.trim())return;const me=parseInt(w)===g.answer;if(L(me),_(!0),v(K=>[...K,me]),me){const K=N+1;C(K),k(z=>Math.max(z,K)),f(z=>z+1)}else C(0);setTimeout(()=>{h(""),j(T(i)),L(null),_(!1)},1e3)},G=ne=>{ne.key==="Enter"&&W()},J=ne=>{h(ne==="backspace"?me=>me.slice(0,-1):ne==="clear"?"":me=>me+ne)},re=x.useCallback(async()=>{var ne,me;if(!c){console.error("No session ID available");return}if(B){console.log("Already submitting, skipping...");return}H(!0),l("results");try{console.log("Submitting game:",{sessionId:c,score:y,answerSequenceLength:m.length});const K=await xo.submitGame({session_id:c,score:y,correct_answers:y,total_problems:m.length,answer_sequence:m});console.log("Game submission successful:",K.data),A({score:y,correctAnswers:y,totalProblems:m.length,earnings:K.data.earnings,isNewHighScore:K.data.isNewHighScore,accuracy:m.length>0?y/m.length*100:0}),r()}catch(K){console.error("Failed to submit game:",K);const z=((me=(ne=K.response)==null?void 0:ne.data)==null?void 0:me.error)||"Failed to submit game results";console.error("Error details:",z),A({score:y,correctAnswers:y,totalProblems:m.length,earnings:0,isNewHighScore:!1,accuracy:m.length>0?y/m.length*100:0,error:z})}finally{H(!1)}},[c,y,m,B,r]);x.useEffect(()=>{if(a==="playing"&&p>0){const ne=setTimeout(()=>{u(me=>me-1)},1e3);return()=>clearTimeout(ne)}else a==="playing"&&p===0&&(console.log("Timer reached 0, ending game..."),re())},[a,p,re]);const X=()=>{l("difficulty"),d(null),u(60),f(0),j(null),h(""),v([]),C(0),k(0),L(null),_(!1),A(null),H(!1),ae(null)},le=()=>{X(),s()};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"Math Game"}),t.jsx("button",{onClick:le,className:"text-gray-400 hover:text-white transition-colors",children:t.jsx(zs,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"p-6",children:[a==="difficulty"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Choose Difficulty"}),t.jsx("p",{className:"text-gray-400",children:"Earn more money with harder problems!"})]}),t.jsx("div",{className:"space-y-4",children:[{level:"easy",label:"Easy",multiplier:"1.0x",range:"1-20,  up to 12",color:"bg-green-600"},{level:"medium",label:"Medium",multiplier:"1.2x",range:"1-50,  up to 15",color:"bg-yellow-600"},{level:"hard",label:"Hard",multiplier:"1.5x",range:"1-100,  up to 20",color:"bg-red-600"}].map(({level:ne,label:me,multiplier:K,range:z,color:ee})=>t.jsx("button",{onClick:()=>U(ne),className:`w-full p-4 rounded-xl ${ee} text-white hover:opacity-90 transition-opacity`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-semibold",children:me}),t.jsxs("div",{className:"text-sm opacity-90",children:["Numbers ",z]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"font-bold",children:K}),t.jsx("div",{className:"text-sm opacity-90",children:"Multiplier"})]})]})},ne))}),n&&t.jsxs("div",{className:"text-center text-sm text-gray-400",children:[n.remaining_plays," plays remaining today"]})]}),a==="playing"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"bg-pink-600 text-white px-4 py-2 rounded-lg font-bold text-lg",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]}),t.jsxs("div",{className:"text-white",children:[t.jsx("div",{className:"text-2xl font-bold",children:y}),t.jsx("div",{className:"text-sm text-gray-400",children:"Score"})]})]}),t.jsxs("div",{className:"text-right text-white",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(nj,{className:"h-4 w-4"}),t.jsx("span",{className:"font-bold",children:N})]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Streak"})]})]}),q&&t.jsx("div",{className:"bg-red-500 text-white px-4 py-3 rounded-lg text-center font-bold animate-pulse mb-4",children:q}),t.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[t.jsx("div",{className:"text-4xl font-bold text-white mb-6",children:g==null?void 0:g.display}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:w,onChange:ne=>h(ne.target.value),onKeyPress:G,placeholder:"?",disabled:S,className:"w-32 text-3xl font-bold text-center bg-gray-700 text-white border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-pink-500 disabled:opacity-50",autoFocus:!0}),S&&t.jsx("div",{className:"absolute -right-12 top-1/2 transform -translate-y-1/2",children:D?t.jsx(Ce,{className:"h-8 w-8 text-green-500"}):t.jsx(zt,{className:"h-8 w-8 text-red-500"})})]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-4",children:[["1","2","3"],["4","5","6"],["7","8","9"],["clear","0","backspace"]].map((ne,me)=>t.jsx("div",{className:"contents",children:ne.map(K=>t.jsx("button",{onClick:()=>J(K),disabled:S,className:`py-4 px-6 rounded-lg font-semibold text-white transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed ${K==="clear"||K==="backspace"?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 hover:bg-gray-600"}`,children:K==="backspace"?"":K==="clear"?"C":K},K))},me))}),t.jsx("button",{onClick:W,disabled:!w.trim()||S,className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Answer"})]}),a==="results"&&b&&t.jsxs("div",{className:"space-y-6 text-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Game Complete!"}),t.jsx("p",{className:"text-gray-400",children:"Here's how you did:"})]}),b.error&&t.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-lg",children:[t.jsx("p",{className:"font-semibold",children:" Error saving results"}),t.jsx("p",{className:"text-sm mt-1",children:b.error}),t.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Your earnings may not have been recorded. Please contact your teacher."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-white",children:b.score}),t.jsx("div",{className:"text-sm text-gray-400",children:"Score"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsxs("div",{className:`text-3xl font-bold ${b.error?"text-gray-500":"text-green-500"}`,children:["R",Number(b.earnings||0).toFixed(2)]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Earned"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsxs("div",{className:"text-3xl font-bold text-blue-500",children:[b.accuracy.toFixed(0),"%"]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Accuracy"})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-purple-500",children:R}),t.jsx("div",{className:"text-sm text-gray-400",children:"Best Streak"})]})]}),b.isNewHighScore&&!b.error&&t.jsxs("div",{className:"bg-yellow-600 text-white p-4 rounded-lg flex items-center justify-center space-x-2",children:[t.jsx(ll,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:"New High Score!"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>{n&&n.remaining_plays>0?(X(),l("difficulty")):le()},className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition-colors",children:n&&n.remaining_plays>0?"Play Again":"Close"}),t.jsx("button",{onClick:le,className:"w-full bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Close"})]})]}),B&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Submitting results..."})]})]})]})}):null},Cj=({bankPlugin:e})=>{var xs;const[s,r]=x.useState("payments"),[n,a]=x.useState([]),[l,i]=x.useState([]),[o,c]=x.useState([]),[d,p]=x.useState(!0),[u,y]=x.useState("all"),[f,g]=x.useState(null),[j,w]=x.useState(""),[h,m]=x.useState(!1),[v,N]=x.useState(!1),[C,R]=x.useState("deposit"),[k,D]=x.useState({amount:"",description:""}),[L,S]=x.useState({amount:"",description:""}),[_,b]=x.useState(null),[A,B]=x.useState(!1),[H,q]=x.useState(""),[ae,M]=x.useState(""),[T,U]=x.useState(!1),[W,G]=x.useState({}),[J,re]=x.useState(0),[X,le]=x.useState(!1);x.useEffect(()=>{ne(),me()},[]);const ne=async()=>{try{const[E,te,se]=await Promise.all([O.get("/students"),O.get("/loans"),O.get("/transactions/history")]);a(E.data),i(te.data),c(se.data)}catch(E){console.error("Failed to fetch data:",E)}finally{p(!1)}},me=async()=>{try{const[E,te]=await Promise.all([O.get("/transactions/bank-settings"),O.get("/transactions/unemployed-students")]);G(E.data),re(te.data.count)}catch(E){console.error("Failed to fetch bank settings:",E)}},K=async()=>{var E,te;le(!0),q(""),M("");try{const se=W.basic_salary_enabled==="true"?"false":"true";await O.put("/transactions/bank-settings/basic_salary_enabled",{value:se}),G({...W,basic_salary_enabled:se}),M(`Auto basic salary ${se==="true"?"enabled":"disabled"}`)}catch(se){q(((te=(E=se.response)==null?void 0:E.data)==null?void 0:te.error)||"Failed to update setting")}finally{le(!1)}},z=async()=>{var E,te;U(!0),q(""),M("");try{const se=await O.post("/transactions/pay-basic-salary",{});M(`Paid basic salary to ${se.data.updated_count} unemployed students (R${se.data.amount} each)`),ne(),me()}catch(se){q(((te=(E=se.response)==null?void 0:E.data)==null?void 0:te.error)||"Failed to pay basic salary")}finally{U(!1)}},ee=x.useMemo(()=>{const E=n.reduce((se,he)=>{const dt=he.class||"Unassigned";return se[dt]||(se[dt]=[]),se[dt].push(he),se},{}),te=Object.keys(E).sort((se,he)=>se==="Unassigned"?1:he==="Unassigned"?-1:se.localeCompare(he));return{grouped:E,sortedClasses:te}},[n]),Y=x.useMemo(()=>{let E=u==="all"?n:ee.grouped[u]||[];return j&&(E=E.filter(te=>{var se,he;return te.username.toLowerCase().includes(j.toLowerCase())||((se=te.first_name)==null?void 0:se.toLowerCase().includes(j.toLowerCase()))||((he=te.last_name)==null?void 0:he.toLowerCase().includes(j.toLowerCase()))})),E},[n,u,j,ee]),Z=x.useMemo(()=>{let E=l;if(u!=="all"){const te=(ee.grouped[u]||[]).map(se=>se.id);E=E.filter(se=>{const he=n.find(dt=>dt.username===se.borrower_username);return he&&te.includes(he.id)})}return f&&(E=E.filter(te=>te.borrower_username===f.username)),E},[l,u,f,ee,n]),$=x.useMemo(()=>{let E=o;if(u!=="all"){const te=(ee.grouped[u]||[]).map(se=>se.username);E=E.filter(se=>te.includes(se.from_username||"")||te.includes(se.to_username||""))}return f&&(E=E.filter(te=>te.from_username===f.username||te.to_username===f.username)),E},[o,u,f,ee]),oe=x.useMemo(()=>{const E=u==="all"?n:ee.grouped[u]||[],te=E.reduce((Bs,Pl)=>Bs+(Number(Pl.balance)||0),0),se=Z.filter(Bs=>Bs.status==="pending").length,he=Z.filter(Bs=>Bs.status==="active").length,dt=$.filter(Bs=>{const Pl=new Date(Bs.created_at);return new Date().getTime()-Pl.getTime()<7*24*60*60*1e3}).length;return{totalBalance:te,pendingLoans:se,activeLoans:he,recentTransactions:dt,studentCount:E.length}},[n,Z,$,u,ee]),ce=E=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(E),je=E=>new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=async E=>{var te,se;if(E.preventDefault(),!!f){q(""),M(""),U(!0);try{const he=C==="deposit"?"/transactions/deposit":"/transactions/withdraw";await O.post(he,{username:f.username,amount:parseFloat(k.amount),description:k.description||`${C==="deposit"?"Payment":"Withdrawal"} by teacher`}),M(`${C==="deposit"?"Payment":"Withdrawal"} successful!`),D({amount:"",description:""}),m(!1),ne()}catch(he){q(((se=(te=he.response)==null?void 0:te.data)==null?void 0:se.error)||"Operation failed")}finally{U(!1)}}},Re=async(E,te)=>{var se,he;if(E.preventDefault(),u==="all"){q("Please select a specific class for bulk payments");return}q(""),M(""),U(!0);try{const dt=te==="deposit"?"/transactions/bulk-payment":"/transactions/bulk-removal";await O.post(dt,{class_name:u,amount:parseFloat(L.amount),description:L.description||`Bulk ${te==="deposit"?"payment":"withdrawal"} by teacher`}),M(`Bulk ${te==="deposit"?"payment":"withdrawal"} successful!`),S({amount:"",description:""}),N(!1),ne()}catch(dt){q(((he=(se=dt.response)==null?void 0:se.data)==null?void 0:he.error)||"Bulk operation failed")}finally{U(!1)}},xe=async(E,te)=>{var se,he;q(""),M(""),U(!0);try{await O.post("/loans/approve",{loan_id:E,approved:te}),M(`Loan ${te?"approved":"denied"} successfully!`),B(!1),b(null),ne()}catch(dt){q(((he=(se=dt.response)==null?void 0:se.data)==null?void 0:he.error)||"Failed to update loan status")}finally{U(!1)}},ct=async E=>{var te,se;q(""),M(""),U(!0);try{await O.post(`/loans/activate/${E}`),M("Loan activated successfully!"),ne()}catch(he){q(((se=(te=he.response)==null?void 0:te.data)==null?void 0:se.error)||"Failed to activate loan")}finally{U(!1)}},Pt=(E,te,se)=>{switch(E){case"deposit":case"salary":return t.jsx(Dy,{className:"h-4 w-4 text-green-600"});case"withdrawal":case"fine":return t.jsx(zy,{className:"h-4 w-4 text-red-600"});case"transfer":return t.jsx(Rs,{className:"h-4 w-4 text-blue-600"});case"loan_disbursement":return t.jsx(hn,{className:"h-4 w-4 text-amber-600"});case"loan_repayment":return t.jsx(es,{className:"h-4 w-4 text-purple-600"});default:return t.jsx(ye,{className:"h-4 w-4 text-gray-600"})}},Qt=E=>{switch(E){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Bank Management"}),t.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe.studentCount})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Zt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:ce(oe.totalBalance)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Le,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Pending Loans"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-600",children:oe.pendingLoans})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(es,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Active Loans"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:oe.activeLoans})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Cr,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"This Week"})]}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:oe.recentTransactions})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(jc,{className:"h-5 w-5 text-gray-500"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Filters"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.jsx("button",{onClick:()=>{y("all"),g(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${u==="all"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),ee.sortedClasses.map(E=>t.jsxs("button",{onClick:()=>{y(E),g(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${u===E?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[E," (",ee.grouped[E].length,")"]},E))]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(yh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search students...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:j,onChange:E=>w(E.target.value)})]}),t.jsx("div",{className:"w-full md:w-64",children:t.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:(f==null?void 0:f.id)||"",onChange:E=>{const te=Y.find(se=>se.id===parseInt(E.target.value));g(te||null)},children:[t.jsx("option",{value:"",children:"All Students"}),Y.map(E=>t.jsx("option",{value:E.id,children:E.first_name&&E.last_name?`${E.first_name} ${E.last_name}`:E.username},E.id))]})}),f&&t.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 underline",children:"Clear Student Filter"})]})]}),H&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(zt,{className:"h-5 w-5"}),t.jsx("span",{children:H})]}),ae&&t.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsx("span",{children:ae})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"payments",label:"Payments",icon:hn},{id:"loans",label:"Loans",icon:es},{id:"activity",label:"Activity",icon:Cr}].map(({id:E,label:te,icon:se})=>t.jsxs("button",{onClick:()=>r(E),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===E?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(se,{className:"h-4 w-4"}),t.jsx("span",{children:te})]},E))})}),t.jsxs("div",{className:"p-6",children:[s==="payments"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(jh,{className:"h-6 w-6 text-purple-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Basic Salary Settings"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Unemployed students receive R1,500/week on Mondays at 07:00"})]})]}),t.jsxs("button",{onClick:K,disabled:X,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${W.basic_salary_enabled==="true"?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:[W.basic_salary_enabled==="true"?t.jsx(wc,{className:"h-5 w-5"}):t.jsx(Nc,{className:"h-5 w-5"}),t.jsx("span",{children:W.basic_salary_enabled==="true"?"Auto Pay ON":"Auto Pay OFF"})]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-purple-100",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(gt,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-gray-900",children:[J," Unemployed Students"]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Will receive basic salary when paid"})]})]}),t.jsxs("button",{onClick:z,disabled:T||J===0,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[t.jsx(hn,{className:"h-4 w-4"}),t.jsx("span",{children:T?"Paying...":"Pay Basic Salary Now"})]})]}),W.last_basic_salary_run&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Last auto-payment: ",new Date(W.last_basic_salary_run).toLocaleString()]})]}),u!=="all"&&t.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-200",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[t.jsx(ze,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Bulk Actions for ",u]}),t.jsx("div",{className:"flex flex-wrap gap-3",children:t.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[t.jsx(Mn,{className:"h-4 w-4"}),t.jsx("span",{children:"Pay All Students"})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(E=>{const te=Number(E.balance)<0;return t.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition-all ${te?"border-red-400 bg-red-50":(f==null?void 0:f.id)===E.id?"border-emerald-500 shadow-lg":"border-gray-200 hover:border-emerald-300 hover:shadow-md"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`p-2 rounded-full ${te?"bg-red-100":"bg-emerald-100"}`,children:t.jsx(Os,{className:`h-5 w-5 ${te?"text-red-600":"text-emerald-600"}`})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:E.first_name&&E.last_name?`${E.first_name} ${E.last_name}`:E.username}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",E.username]})]})]}),t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:E.class||"N/A"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:`text-2xl font-bold ${te?"text-red-600":"text-emerald-600"}`,children:ce(E.balance)}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",E.account_number]}),te&&t.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:" Negative balance"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>{g(E),R("deposit"),m(!0)},className:"flex-1 px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[t.jsx(Mn,{className:"h-4 w-4"}),t.jsx("span",{children:"Add"})]}),t.jsxs("button",{onClick:()=>{g(E),R("withdraw"),m(!0)},className:"flex-1 px-3 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[t.jsx(fh,{className:"h-4 w-4"}),t.jsx("span",{children:"Remove"})]})]})]},E.id)})}),Y.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ze,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No students found"})]})]}),s==="loans"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200 mb-6",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[t.jsx($e,{className:"h-5 w-5 mr-2 text-blue-600"}),"Weekly Payment Processing"]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Process automatic loan payments for all students with active loans. Payments are normally processed every Monday."}),t.jsx("button",{onClick:async()=>{var E,te,se;q(""),M(""),U(!0);try{const he=await O.post("/loans/process-weekly-payments",{force:!0});M(`Processed ${((E=he.data.results)==null?void 0:E.length)||0} loan payments`),ne()}catch(he){q(((se=(te=he.response)==null?void 0:te.data)==null?void 0:se.error)||"Failed to process payments")}finally{U(!1)}},disabled:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:T?"Processing...":"Process Weekly Payments Now"})]}),Z.filter(E=>E.status==="pending").length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Le,{className:"h-5 w-5 text-amber-600 mr-2"}),"Pending Approval (",Z.filter(E=>E.status==="pending").length,")"]}),t.jsx("div",{className:"space-y-4",children:Z.filter(E=>E.status==="pending").map(E=>t.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",je(E.created_at)]})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Qt(E.status)}`,children:E.status.toUpperCase()})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),t.jsx("p",{className:"font-semibold",children:ce(E.amount)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),t.jsx("p",{className:"font-semibold",children:ce(E.monthly_payment)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),t.jsxs("p",{className:"font-semibold",children:[E.term_months," months"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Interest Rate"}),t.jsxs("p",{className:"font-semibold",children:[(E.interest_rate*100).toFixed(1),"%"]})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>xe(E.id,!0),disabled:T,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:"Approve"}),t.jsx("button",{onClick:()=>xe(E.id,!1),disabled:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:"Deny"})]})]},E.id))})]}),Z.filter(E=>["active","approved"].includes(E.status)).length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(es,{className:"h-5 w-5 text-blue-600 mr-2"}),"Active Loans (",Z.filter(E=>["active","approved"].includes(E.status)).length,")"]}),t.jsx("div",{className:"space-y-4",children:Z.filter(E=>["active","approved"].includes(E.status)).map(E=>t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),t.jsx("p",{className:"text-sm text-gray-500",children:E.approved_at?`Approved on ${je(E.approved_at)}`:"Awaiting activation"})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Qt(E.status)}`,children:E.status.toUpperCase()})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Original Amount"}),t.jsx("p",{className:"font-semibold",children:ce(E.amount)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),t.jsx("p",{className:"font-semibold",children:ce(E.outstanding_balance)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),t.jsx("p",{className:"font-semibold",children:ce(E.monthly_payment)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Remaining"}),t.jsxs("p",{className:"font-semibold",children:[E.payments_remaining||0," payments"]})]})]}),E.total_paid&&Number(E.total_paid)>0&&t.jsx("div",{className:"mt-4 bg-white rounded-lg p-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Paid"}),t.jsx("span",{className:"font-semibold text-emerald-600",children:ce(E.total_paid)})]})}),E.status==="approved"&&t.jsx("div",{className:"mt-4",children:t.jsx("button",{onClick:()=>ct(E.id),disabled:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Activate Loan"})})]},E.id))})]}),Z.filter(E=>["paid_off","denied"].includes(E.status)).length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ce,{className:"h-5 w-5 text-gray-600 mr-2"}),"Completed/Denied (",Z.filter(E=>["paid_off","denied"].includes(E.status)).length,")"]}),t.jsx("div",{className:"space-y-4",children:Z.filter(E=>["paid_off","denied"].includes(E.status)).map(E=>t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),t.jsx("p",{className:"text-sm text-gray-500",children:je(E.created_at)})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Qt(E.status)}`,children:E.status.replace("_"," ").toUpperCase()})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),t.jsx("p",{className:"font-semibold",children:ce(E.amount)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),t.jsxs("p",{className:"font-semibold",children:[E.term_months," months"]})]}),E.total_paid&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Paid"}),t.jsx("p",{className:"font-semibold",children:ce(E.total_paid)})]})]})]},E.id))})]}),Z.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(es,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No loan applications found"})]})]}),s==="activity"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[$.length," transactions"]})]}),$.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Cr,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):t.jsx("div",{className:"space-y-2",children:$.map(E=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white p-2 rounded-full shadow-sm",children:Pt(E.transaction_type,E.from_username,E.to_username)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.description||E.transaction_type.replace(/_/g," ")}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[t.jsx("span",{children:je(E.created_at)}),E.from_username&&t.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:["From: ",E.from_username]}),E.to_username&&t.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["To: ",E.to_username]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:`font-bold ${["deposit","salary","loan_disbursement"].includes(E.transaction_type)?"text-emerald-600":["withdrawal","fine","loan_repayment"].includes(E.transaction_type)?"text-red-600":"text-blue-600"}`,children:[["withdrawal","fine","loan_repayment"].includes(E.transaction_type)?"-":"+",ce(E.amount)]}),t.jsx("p",{className:"text-xs text-gray-500 capitalize",children:E.transaction_type.replace(/_/g," ")})]})]},E.id))})]})]})]}),h&&f&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[C==="deposit"?"Add Money to":"Remove Money from"," ",f.first_name||f.username]}),t.jsxs("form",{onSubmit:P,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),t.jsxs("div",{className:"relative",children:[t.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:C==="withdraw"?f.balance:void 0,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:k.amount,onChange:E=>D({...k,amount:E.target.value})})]}),C==="withdraw"&&t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",ce(f.balance)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),t.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:C==="deposit"?"e.g., Salary, Bonus, Reward":"e.g., Fine, Expense",value:k.description,onChange:E=>D({...k,description:E.target.value})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:T,className:`flex-1 py-2 text-white rounded-lg transition-colors disabled:opacity-50 ${C==="deposit"?"bg-emerald-600 hover:bg-emerald-700":"bg-amber-600 hover:bg-amber-700"}`,children:T?"Processing...":C==="deposit"?"Add Money":"Remove Money"}),t.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),v&&u!=="all"&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Bulk Payment to ",u]}),t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["This will add money to all ",((xs=ee.grouped[u])==null?void 0:xs.length)||0," students in ",u]}),t.jsxs("form",{onSubmit:E=>Re(E,"deposit"),className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount per student"}),t.jsxs("div",{className:"relative",children:[t.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:L.amount,onChange:E=>S({...L,amount:E.target.value})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),t.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Weekly allowance, Class bonus",value:L.description,onChange:E=>S({...L,description:E.target.value})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{type:"submit",disabled:T,className:"flex-1 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:T?"Processing...":"Pay All Students"}),t.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})})]})},Ej=({bankPlugin:e})=>{const{user:s,account:r}=Ve(),[n,a]=x.useState([]),[l,i]=x.useState([]),[o,c]=x.useState(null),[d,p]=x.useState(!0),[u,y]=x.useState("overview"),[f,g]=x.useState(!1);x.useEffect(()=>{j()},[]);const j=async()=>{try{const[N,C,R]=await Promise.all([O.get("/transactions/history"),O.get("/loans"),xo.getStatus().catch(()=>({data:null}))]);a(N.data),i(C.data),c(R.data)}catch(N){console.error("Failed to fetch data:",N)}finally{p(!1)}},w=N=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(N),h=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=N=>{switch(N){case"deposit":case"salary":return t.jsx(rt,{className:"h-4 w-4 text-success-600"});case"withdrawal":case"fine":return t.jsx(Le,{className:"h-4 w-4 text-red-600"});case"transfer":return t.jsx(Rs,{className:"h-4 w-4 text-primary-600"});case"loan_disbursement":return t.jsx(ye,{className:"h-4 w-4 text-warning-600"});case"loan_repayment":return t.jsx(Zt,{className:"h-4 w-4 text-blue-600"});default:return t.jsx(ye,{className:"h-4 w-4 text-gray-600"})}},v=N=>N.transaction_type==="transfer"?N.from_username===(s==null?void 0:s.username)?`Sent to ${N.to_username}`:`Received from ${N.from_username}`:N.description||N.transaction_type;return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Bank"}),t.jsx("p",{className:"text-primary-100",children:"Financial Services System"})]})]})}),t.jsx("div",{className:`card ${((r==null?void 0:r.balance)||0)<0?"border-2 border-red-500 bg-red-50":""}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Account Balance"}),t.jsx("p",{className:`text-3xl font-bold ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`,children:w((r==null?void 0:r.balance)||0)}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Account: ",r==null?void 0:r.account_number]}),((r==null?void 0:r.balance)||0)<0&&t.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[t.jsx(Le,{className:"h-4 w-4 mr-1"}),"Negative balance! Pay off your debt to make transactions."]})})]}),t.jsx("div",{className:`p-4 rounded-full ${((r==null?void 0:r.balance)||0)<0?"bg-red-100":"bg-primary-100"}`,children:t.jsx(Zt,{className:`h-8 w-8 ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`})})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:Zt},{id:"earn",label:"Earn Money",icon:uh},{id:"transfer",label:"Transfer Money",icon:Rs},{id:"loans",label:"Loans",icon:ye},{id:"history",label:"History",icon:Cr}].map(({id:N,label:C,icon:R})=>t.jsxs("button",{onClick:()=>y(N),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${u===N?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(R,{className:"h-4 w-4"}),t.jsx("span",{children:C})]},N))})}),t.jsxs("div",{className:"p-6",children:[u==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-success-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(rt,{className:"h-5 w-5 text-success-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-success-800",children:"Total Deposits"})]}),t.jsx("p",{className:"text-2xl font-bold text-success-600 mt-1",children:w(n.filter(N=>["deposit","salary"].includes(N.transaction_type)).reduce((N,C)=>N+C.amount,0))})]}),t.jsxs("div",{className:"bg-warning-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ye,{className:"h-5 w-5 text-warning-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-warning-800",children:"Active Loans"})]}),t.jsx("p",{className:"text-2xl font-bold text-warning-600 mt-1",children:l.filter(N=>N.status==="active").length})]}),t.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Rs,{className:"h-5 w-5 text-primary-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-primary-800",children:"Transfers Made"})]}),t.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:n.filter(N=>N.transaction_type==="transfer"&&N.from_username===(s==null?void 0:s.username)).length})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),t.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(N=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[m(N.transaction_type),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:v(N)}),t.jsx("p",{className:"text-sm text-gray-500",children:h(N.created_at)})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:`font-semibold ${N.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[N.from_username===(s==null?void 0:s.username)?"-":"+",w(N.amount)]})})]},N.id))})]})]}),u==="earn"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Earn Money by Solving Math! "}),t.jsx("p",{className:"text-purple-100",children:"Test your mental math skills and earn real money in your bank account!"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plays Remaining"}),t.jsx($e,{className:"h-5 w-5 text-blue-600"})]}),t.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[(o==null?void 0:o.remaining_plays)||0,"/",(o==null?void 0:o.daily_limit)||3]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Resets daily at 6 AM"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"High Scores"}),t.jsx(ll,{className:"h-5 w-5 text-yellow-600"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Easy:"}),t.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.high_scores.easy)||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Medium:"}),t.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.high_scores.medium)||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Hard:"}),t.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.high_scores.hard)||0})]})]})]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("button",{onClick:()=>g(!0),disabled:!o||o.remaining_plays<=0,className:`px-8 py-4 rounded-xl font-bold text-lg transition-all ${o&&o.remaining_plays>0?"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-700 hover:to-purple-700 transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:o&&o.remaining_plays>0?t.jsxs(t.Fragment,{children:[t.jsx(Gy,{className:"inline-block h-6 w-6 mr-2"}),"Start Math Game"]}):"No Plays Remaining Today"}),o&&o.remaining_plays>0&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"60 seconds  Earn R1 per correct answer  Difficulty multipliers apply"})]}),(o==null?void 0:o.recent_sessions)&&o.recent_sessions.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Games"}),t.jsx("div",{className:"space-y-3",children:o.recent_sessions.slice(0,5).map(N=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${N.difficulty==="easy"?"bg-green-500":N.difficulty==="medium"?"bg-yellow-500":"bg-red-500"}`}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[N.difficulty," - ",N.score," points"]}),t.jsx("p",{className:"text-sm text-gray-500",children:new Date(N.played_at).toLocaleDateString()})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-semibold text-green-600",children:["+R",Number(N.earnings||0).toFixed(2)]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[N.correct_answers,"/",N.total_problems," correct"]})]})]},N.id))})]})]}),u==="transfer"&&t.jsx(Sj,{onSuccess:j}),u==="loans"&&t.jsx(kj,{onSuccess:j}),u==="history"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),n.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Cr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No transactions yet"}),t.jsx("p",{className:"text-sm",children:"Your transaction history will appear here"})]}):t.jsx("div",{className:"space-y-2",children:n.map(N=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[m(N.transaction_type),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:v(N)}),t.jsx("p",{className:"text-sm text-gray-500",children:h(N.created_at)})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:`font-semibold ${N.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[N.from_username===(s==null?void 0:s.username)?"-":"+",w(N.amount)]})})]},N.id))})]})]})]}),t.jsx(_j,{isOpen:f,onClose:()=>g(!1),onGameComplete:j,gameStatus:o})]})},Tj=()=>{const{user:e}=Ve(),{plugins:s,loading:r}=Nt(),n=s.find(a=>a.route_path==="/bank");return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!n||!n.enabled?t.jsx(bt,{to:"/",replace:!0}):(e==null?void 0:e.role)==="teacher"?t.jsx(Cj,{bankPlugin:n}):t.jsx(Ej,{bankPlugin:n})},Pj=({parcel:e,position:s,containerRef:r})=>{const n=$t[e.biome_type],a=il[e.risk_level],l=cs[e.biome_type],i=Number(e.value),o=e.purchased_at?Sh(e.purchased_at):0,c=e.owner_id&&e.purchased_at?fo(i,e.purchased_at):i,d=c-i,p=e.owner_first_name&&e.owner_last_name?`${e.owner_first_name} ${e.owner_last_name}`:e.owner_username||"Unknown",u=320,y=400,f=10;let g=s.x+15,j=s.y+15;if(r.current){const w=r.current.getBoundingClientRect();g+u>w.right-f&&(g=s.x-u-15),j+y>w.bottom-f&&(j=s.y-y-15),g=Math.max(w.left+f,g),j=Math.max(w.top+f,j)}return t.jsxs("div",{className:"fixed z-50 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",style:{left:`${g}px`,top:`${j}px`,width:`${u}px`,maxHeight:`${y}px`},children:[t.jsx("div",{className:"p-4 text-white",style:{backgroundColor:n.color},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:l}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg",children:e.grid_code}),t.jsx("p",{className:"text-sm opacity-90",children:e.biome_type})]})]}),t.jsxs("div",{className:"text-right",children:[e.owner_id&&d>0?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-xl font-bold",children:Me(c)}),t.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[t.jsx(rt,{className:"h-3 w-3 text-green-300"}),t.jsxs("span",{className:"text-xs text-green-300",children:["+",Me(d)]})]})]}):t.jsx("p",{className:"text-xl font-bold",children:Me(i)}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.owner_id?"bg-red-500/30":"bg-green-500/30"}`,children:e.owner_id?"Owned":"Available"})]})]})}),t.jsxs("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Jn,{className:`h-4 w-4 ${a.text}`}),t.jsx("span",{className:"text-sm text-gray-600",children:"Risk Level:"}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${a.bg} ${a.text} font-medium capitalize`,children:e.risk_level})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsxs("span",{children:["Grid Position: Row ",e.row_index+1,", Col ",e.col_index+1]})]}),e.owner_id&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(Os,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-gray-600",children:"Owner:"}),t.jsx("span",{className:"font-medium",children:p})]}),e.purchased_at&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx($e,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-gray-600",children:"Purchased:"}),t.jsx("span",{children:new Date(e.purchased_at).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(rt,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-gray-600",children:"Ownership:"}),t.jsxs("span",{children:[o," ",o===1?"week":"weeks"," (2% weekly interest)"]})]}),d>0&&t.jsxs("div",{className:"bg-green-50 rounded p-2 mt-1",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-600",children:"Original Value:"}),t.jsx("span",{children:Me(i)})]}),t.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-700",children:[t.jsx("span",{children:"Current Value:"}),t.jsx("span",{children:Me(c)})]})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[t.jsx(tj,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Advantages"})]}),t.jsx("ul",{className:"space-y-1",children:(e.pros||n.pros).map((w,h)=>t.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[t.jsx("span",{className:"text-green-500 mr-1",children:"+"}),w]},h))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[t.jsx(ej,{className:"h-4 w-4 text-red-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Disadvantages"})]}),t.jsx("ul",{className:"space-y-1",children:(e.cons||n.cons).map((w,h)=>t.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[t.jsx("span",{className:"text-red-500 mr-1",children:"-"}),w]},h))})]})]}),t.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:t.jsx("p",{className:"text-xs text-gray-500 text-center",children:e.owner_id?`This plot is already owned by ${p}`:"Click to purchase this plot"})})]})},Rj=({parcel:e,onClose:s,onSuccess:r})=>{const{account:n}=Ve(),[a,l]=x.useState(!1),[i,o]=x.useState(""),[c,d]=x.useState(!1),p=$t[e.biome_type],u=cs[e.biome_type],y=il[e.risk_level],f=Number(n==null?void 0:n.balance)||0,g=Number(e.value)||0,j=f>=g,w=async()=>{var h,m;if(j){l(!0),o("");try{await rs.submitPurchaseRequest(e.id,g),d(!0),setTimeout(()=>{r(),s()},2e3)}catch(v){o(((m=(h=v.response)==null?void 0:h.data)==null?void 0:m.error)||"Failed to submit purchase request")}finally{l(!1)}}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[t.jsxs("div",{className:"p-6 text-white relative",style:{backgroundColor:p.color},children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-1 hover:bg-white/20 rounded-full transition-colors",children:t.jsx(zs,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"text-5xl",children:u}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:e.grid_code}),t.jsx("p",{className:"text-white/80",children:e.biome_type})]})]})]}),t.jsx("div",{className:"p-6 space-y-6",children:c?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ce,{className:"h-8 w-8 text-green-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request Submitted!"}),t.jsx("p",{className:"text-gray-600",children:"Your purchase request has been submitted for teacher approval. You'll be notified once it's reviewed."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ye,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Plot Price"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Me(g)})]}),t.jsxs("div",{className:`rounded-xl p-4 ${j?"bg-green-50":"bg-red-50"}`,children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ye,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Your Balance"})]}),t.jsx("p",{className:`text-2xl font-bold ${j?"text-green-600":"text-red-600"}`,children:Me(f)})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsxs("span",{children:["Row ",e.row_index+1,", Col ",e.col_index+1]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Jn,{className:`h-4 w-4 ${y.text}`}),t.jsxs("span",{className:`px-2 py-0.5 rounded-full ${y.bg} ${y.text} font-medium capitalize`,children:[e.risk_level," risk"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[t.jsx("p",{className:"font-medium text-green-800 mb-2",children:"Advantages"}),t.jsx("ul",{className:"space-y-1",children:p.pros.slice(0,2).map((h,m)=>t.jsxs("li",{className:"text-green-700 text-xs",children:["+ ",h]},m))})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[t.jsx("p",{className:"font-medium text-red-800 mb-2",children:"Disadvantages"}),t.jsx("ul",{className:"space-y-1",children:p.cons.slice(0,2).map((h,m)=>t.jsxs("li",{className:"text-red-700 text-xs",children:["- ",h]},m))})]})]}),i&&t.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[t.jsx(Le,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("p",{className:"text-sm",children:i})]}),!j&&t.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 bg-amber-50 p-3 rounded-lg",children:[t.jsx(Le,{className:"h-5 w-5 flex-shrink-0"}),t.jsxs("p",{className:"text-sm",children:["You need ",Me(g-f)," more to purchase this plot."]})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3 text-sm text-blue-700",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Note:"})," Plot purchases require teacher approval. The purchase amount will be deducted from your balance once approved."]})})]})}),!c&&t.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex space-x-3",children:[t.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Cancel"}),t.jsxs("button",{onClick:w,disabled:!j||a,className:`flex-1 px-4 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 transition-colors ${j?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[t.jsx(bc,{className:"h-5 w-5"}),t.jsx("span",{children:a?"Submitting...":"Request Purchase"})]})]})]})})},xa=10,Aj=20,Lj=80,mu=50,kh=({onParcelSelect:e,readOnly:s=!1})=>{const[r,n]=x.useState([]),[a,l]=x.useState(!0),[i,o]=x.useState(""),[c,d]=x.useState(mu),[p,u]=x.useState(null),[y,f]=x.useState({x:0,y:0}),[g,j]=x.useState(null),[w,h]=x.useState(!1),[m,v]=x.useState(""),[N,C]=x.useState("all"),[R,k]=x.useState(!1),D=x.useRef(null),L=x.useRef(null);x.useEffect(()=>{S()},[]);const S=async()=>{var J,re;l(!0),o("");try{const X=await rs.getParcels();n(X.data)}catch(X){o(((re=(J=X.response)==null?void 0:J.data)==null?void 0:re.error)||"Failed to load land plots")}finally{l(!1)}},_=x.useMemo(()=>{const J=new Map;return r.forEach(re=>{J.set(`${re.row_index}-${re.col_index}`,re)}),J},[r]),b=x.useCallback((J,re)=>_.get(`${J}-${re}`),[_]),A=x.useCallback(J=>J?!(m&&J.biome_type!==m||N==="available"&&J.owner_id||N==="owned"&&!J.owner_id):!0,[m,N]),B=x.useCallback(J=>{f({x:J.clientX,y:J.clientY})},[]),H=x.useCallback((J,re)=>{const X=b(J,re);X&&A(X)?u(X):u(null)},[b,A]),q=x.useCallback((J,re)=>{const X=b(J,re);X&&!X.owner_id&&!s&&(j(X),h(!0)),e&&X&&e(X)},[b,s,e]),ae=()=>d(J=>Math.min(J+2,Lj)),M=()=>d(J=>Math.max(J-2,Aj)),T=()=>d(mu),U=x.useCallback((J,re)=>{const X=b(J,re);if(!X)return{backgroundColor:"#e5e7eb"};if(!A(X))return{backgroundColor:"#f3f4f6",opacity:.3};const le=$t[X.biome_type],ne=!!X.owner_id;return{backgroundColor:ne?le.lightColor:le.color,border:ne?`1px solid ${le.color}`:"none"}},[b,A]),W=x.useMemo(()=>{const J=[];for(let re=0;re<xa;re++)for(let X=0;X<xa;X++){const le=b(re,X),ne=(p==null?void 0:p.row_index)===re&&(p==null?void 0:p.col_index)===X;J.push(t.jsx("div",{className:`transition-all cursor-pointer rounded-sm ${ne?"ring-2 ring-white z-10 scale-110 shadow-lg":"hover:brightness-110"}`,style:{...U(re,X),width:`${c}px`,height:`${c}px`,minWidth:`${c}px`,minHeight:`${c}px`},onMouseEnter:()=>H(re,X),onMouseLeave:()=>u(null),onClick:()=>q(re,X),title:(le==null?void 0:le.grid_code)||`Empty ${re}-${X}`},`${re}-${X}`))}return J},[c,p,b,U,H,q]),G=Object.keys($t);return a?t.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-xl",children:[t.jsx(pe,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading land plots..."})]}):i?t.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-red-50 rounded-xl",children:[t.jsx("p",{className:"text-red-600 mb-4",children:i}),t.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]}):r.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-amber-50 rounded-xl border-2 border-amber-200",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"text-amber-800 font-medium mb-2",children:"No land plots found"}),t.jsx("p",{className:"text-sm text-amber-600",children:"Ask your teacher to seed the land data first"}),t.jsx("p",{className:"text-xs text-amber-500 mt-2",children:'(Teacher: Go to Land Registry  click "Seed Land Data")'})]}):t.jsxs("div",{className:"space-y-4",ref:D,children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Zoom:"}),t.jsx("button",{onClick:M,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom Out",children:t.jsx(lj,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-sm font-medium w-12 text-center",children:[c,"px"]}),t.jsx("button",{onClick:ae,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom In",children:t.jsx(aj,{className:"h-4 w-4"})}),t.jsx("button",{onClick:T,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Reset Zoom",children:t.jsx(Hy,{className:"h-4 w-4"})})]}),t.jsxs("button",{onClick:()=>k(!R),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${R?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[t.jsx(jc,{className:"h-4 w-4"}),t.jsx("span",{children:"Filters"}),(m||N!=="all")&&t.jsx("span",{className:"bg-primary-600 text-white text-xs px-2 py-0.5 rounded-full",children:"Active"})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[t.jsxs("span",{children:["Total: ",t.jsx("strong",{children:r.length.toLocaleString()})]}),t.jsxs("span",{children:["Available: ",t.jsx("strong",{children:r.filter(J=>!J.owner_id).length.toLocaleString()})]}),t.jsxs("span",{children:["Owned: ",t.jsx("strong",{children:r.filter(J=>J.owner_id).length.toLocaleString()})]})]})]}),R&&t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Filter Plots"}),t.jsx("button",{onClick:()=>{v(""),C("all")},className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Biome Type"}),t.jsxs("select",{value:m,onChange:J=>v(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"All Biomes"}),G.map(J=>t.jsxs("option",{value:J,children:[cs[J]," ",J]},J))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Ownership"}),t.jsxs("select",{value:N,onChange:J=>C(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Plots"}),t.jsx("option",{value:"available",children:"Available Only"}),t.jsx("option",{value:"owned",children:"Owned Only"})]})]})]})]}),t.jsxs("div",{className:"relative bg-gray-200 rounded-xl overflow-auto border-2 border-gray-400 p-4",style:{minHeight:"200px"},onMouseMove:B,children:[t.jsx("div",{ref:L,className:"inline-grid gap-1 bg-gray-300 p-2 rounded-lg",style:{gridTemplateColumns:`repeat(${xa}, ${c}px)`,gridTemplateRows:`repeat(${xa}, ${c}px)`},children:W}),p&&t.jsx(Pj,{parcel:p,position:y,containerRef:D})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Biome Legend"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:G.map(J=>{const re=$t[J];return t.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-2 py-1 rounded",onClick:()=>v(m===J?"":J),children:[t.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:re.color}}),t.jsxs("span",{className:"text-xs text-gray-600",children:[cs[J]," ",J]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["(",Me(re.baseValue),")"]})]},J)})}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 rounded bg-green-600"}),t.jsx("span",{children:"Available"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 rounded bg-green-200 border border-green-600"}),t.jsx("span",{children:"Owned"})]})]})]}),w&&g&&t.jsx(Rj,{parcel:g,onClose:()=>{h(!1),j(null)},onSuccess:()=>{S()}})]})},Fj=({landPlugin:e})=>{const[s,r]=x.useState("grid"),[n,a]=x.useState([]),[l,i]=x.useState(null),[o,c]=x.useState(!0),[d,p]=x.useState(null),[u,y]=x.useState(""),[f,g]=x.useState(""),[j,w]=x.useState("pending"),[h,m]=x.useState(!1);x.useEffect(()=>{v()},[j]);const v=async()=>{c(!0);try{const[k,D]=await Promise.all([rs.getPurchaseRequests(j||void 0),rs.getStats()]);a(k.data),i(D.data)}catch(k){console.error("Failed to fetch land data:",k)}finally{c(!1)}},N=async(k,D,L)=>{var S,_;p(k),y(""),g("");try{await rs.updatePurchaseRequest(k,D,L),g(`Request ${D} successfully`),v()}catch(b){y(((_=(S=b.response)==null?void 0:S.data)==null?void 0:_.error)||`Failed to ${D} request`)}finally{p(null)}},C=async()=>{var k,D;m(!0),y(""),g("");try{const L=await rs.seedLandData();g(`${L.data.message} - ${L.data.count} parcels created`),v()}catch(L){y(((D=(k=L.response)==null?void 0:k.data)==null?void 0:D.error)||"Failed to seed land data")}finally{m(!1)}},R=k=>{switch(k){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry Management"}),t.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]}),t.jsxs("button",{onClick:C,disabled:h||l!==null&&l.total_parcels>0,className:`px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors ${l&&l.total_parcels>0?"bg-white/10 text-white/50 cursor-not-allowed":"bg-white/20 hover:bg-white/30"}`,children:[t.jsx(ci,{className:"h-4 w-4"}),t.jsx("span",{children:h?"Seeding...":l&&l.total_parcels>0?"Data Seeded":"Seed Land Data"})]})]})}),l&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Plots"})]}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_parcels.toLocaleString()})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Ce,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Available"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.available_parcels.toLocaleString()})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Owned"})]}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.owned_parcels.toLocaleString()})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx($e,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.pending_requests})]})]}),u&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(zt,{className:"h-5 w-5"}),t.jsx("span",{children:u})]}),f&&t.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsx("span",{children:f})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"grid",label:"Land Grid",icon:vc},{id:"requests",label:"Purchase Requests",icon:$e,badge:l==null?void 0:l.pending_requests},{id:"stats",label:"Statistics",icon:ye}].map(({id:k,label:D,icon:L,badge:S})=>t.jsxs("button",{onClick:()=>r(k),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===k?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(L,{className:"h-4 w-4"}),t.jsx("span",{children:D}),S!==void 0&&S>0&&t.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-0.5 rounded-full",children:S})]},k))})}),t.jsxs("div",{className:"p-6",children:[s==="grid"&&t.jsxs(t.Fragment,{children:[l&&l.total_parcels===0&&t.jsxs("div",{className:"mb-6 bg-amber-50 border-2 border-amber-200 rounded-xl p-6 text-center",children:[t.jsx(ci,{className:"h-12 w-12 mx-auto mb-4 text-amber-500"}),t.jsx("h3",{className:"text-lg font-semibold text-amber-800 mb-2",children:"No Land Data Yet"}),t.jsx("p",{className:"text-amber-600 mb-4",children:"Click the button below to generate 100 land plots (10x10 grid)"}),t.jsxs("button",{onClick:C,disabled:h,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-medium flex items-center space-x-2 mx-auto",children:[t.jsx(ci,{className:"h-5 w-5"}),t.jsx("span",{children:h?"Seeding Land Data...":"Seed Land Data Now"})]})]}),t.jsx(kh,{readOnly:!0})]}),s==="requests"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(jc,{className:"h-4 w-4 text-gray-500"}),t.jsxs("select",{value:j,onChange:k=>w(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[t.jsx("option",{value:"",children:"All Requests"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"denied",children:"Denied"})]}),t.jsx("button",{onClick:v,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:t.jsx(Dn,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]}),o?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 text-emerald-600 animate-spin"})}):n.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsxs("p",{children:["No ",j||""," purchase requests found"]})]}):t.jsx("div",{className:"space-y-4",children:n.map(k=>t.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:k.parcel_biome_type?$t[k.parcel_biome_type].lightColor:"#e5e7eb"},children:k.parcel_biome_type?cs[k.parcel_biome_type]:""}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("h4",{className:"font-semibold text-gray-900",children:["Plot ",k.parcel_grid_code]}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${R(k.status)}`,children:k.status.toUpperCase()})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by: ",t.jsx("strong",{children:k.applicant_first_name&&k.applicant_last_name?`${k.applicant_first_name} ${k.applicant_last_name}`:k.applicant_username}),k.applicant_class&&` (${k.applicant_class})`]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[k.parcel_biome_type,"  Offered: ",Me(k.offered_price)]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Submitted: ",new Date(k.created_at).toLocaleString()]}),k.denial_reason&&t.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Reason: ",k.denial_reason]})]})]}),k.status.toLowerCase()==="pending"&&t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:()=>N(k.id,"approved"),disabled:d!==null,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[d===k.id?t.jsx(pe,{className:"h-4 w-4 animate-spin"}):t.jsx(Ce,{className:"h-4 w-4"}),t.jsx("span",{children:d===k.id?"Processing...":"Approve"})]}),t.jsxs("button",{onClick:()=>{const D=prompt("Reason for denial (optional):");N(k.id,"denied",D||void 0)},disabled:d!==null,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[d===k.id?t.jsx(pe,{className:"h-4 w-4 animate-spin"}):t.jsx(zt,{className:"h-4 w-4"}),t.jsx("span",{children:"Deny"})]})]})]})},k.id))})]}),s==="stats"&&l&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Biome Distribution"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.biome_stats.map(k=>t.jsxs("div",{className:"bg-white rounded-xl p-4 border-2",style:{borderColor:$t[k.biome_type].color},children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("span",{className:"text-2xl",children:cs[k.biome_type]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:k.biome_type}),t.jsxs("p",{className:"text-sm text-gray-500",children:[k.count," plots"]})]})]}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Owned:"}),t.jsxs("span",{className:"font-medium",children:[k.owned_count," (",(k.owned_count/k.count*100).toFixed(1),"%)"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Avg Value:"}),t.jsx("span",{className:"font-medium",children:Me(k.avg_value)})]})]}),t.jsx("div",{className:"mt-3 h-2 bg-gray-100 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all",style:{width:`${k.owned_count/k.count*100}%`,backgroundColor:$t[k.biome_type].color}})})]},k.biome_type))})]}),l.top_owners.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Land Owners"}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Owner"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Plots"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Value"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:l.top_owners.map((k,D)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`font-bold ${D===0?"text-amber-500":D===1?"text-gray-400":D===2?"text-amber-700":"text-gray-500"}`,children:["#",D+1]})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.first_name&&k.last_name?`${k.first_name} ${k.last_name}`:k.username}),t.jsxs("p",{className:"text-sm text-gray-500",children:["@",k.username]})]}),t.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-900",children:[k.parcel_count," plots"]}),t.jsx("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:Me(k.total_value)})]},k.username))})]})})]})]})]})]})]})},Mj=({landPlugin:e})=>{const[s,r]=x.useState("explore"),[n,a]=x.useState(null),[l,i]=x.useState([]),[o,c]=x.useState(!0),[d,p]=x.useState(null);x.useEffect(()=>{u()},[]);const u=async()=>{c(!0);try{const[f,g]=await Promise.all([rs.getMyProperties(),rs.getPurchaseRequests()]);a(f.data),i(g.data)}catch(f){console.error("Failed to fetch land data:",f)}finally{c(!1)}},y=f=>{switch(f){case"pending":return"bg-amber-100 text-amber-800 border-amber-300";case"approved":return"bg-green-100 text-green-800 border-green-300";case"denied":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry"}),t.jsx("p",{className:"text-primary-100",children:"Explore and purchase land parcels"})]})]})}),n&&t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(Ct,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"My Plots"})]}),t.jsx("p",{className:"text-2xl font-bold text-primary-600",children:n.total_count})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx(ye,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Portfolio Value"})]}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Me(n.total_value)})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[t.jsx($e,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),t.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.filter(f=>f.status==="pending").length})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"explore",label:"Explore Land",icon:vc},{id:"my-properties",label:"My Plots",icon:Ct,badge:n==null?void 0:n.total_count},{id:"requests",label:"My Requests",icon:$e,badge:l.filter(f=>f.status==="pending").length}].map(({id:f,label:g,icon:j,badge:w})=>t.jsxs("button",{onClick:()=>r(f),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===f?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(j,{className:"h-4 w-4"}),t.jsx("span",{children:g}),w!==void 0&&w>0&&t.jsx("span",{className:"bg-primary-500 text-white text-xs px-2 py-0.5 rounded-full",children:w})]},f))})}),t.jsxs("div",{className:"p-6",children:[s==="explore"&&t.jsx(kh,{onParcelSelect:f=>console.log("Selected:",f)}),s==="my-properties"&&(o?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 text-primary-600 animate-spin"})}):n&&n.parcels.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(Ct,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"You don't own any land yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Explore the grid and purchase your first plot!"})]}):n&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.parcels.map(f=>t.jsxs("div",{className:"bg-white rounded-xl border-2 overflow-hidden hover:shadow-lg transition-shadow",style:{borderColor:$t[f.biome_type].color},children:[t.jsx("div",{className:"p-4 text-white",style:{backgroundColor:$t[f.biome_type].color},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:cs[f.biome_type]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold",children:f.grid_code}),t.jsx("p",{className:"text-sm opacity-80",children:f.biome_type})]})]}),t.jsx("p",{className:"text-lg font-bold",children:Me(f.value)})]})}),t.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[t.jsx("span",{children:"Location:"}),t.jsxs("span",{className:"font-medium",children:["Row ",f.row_index+1,", Col ",f.col_index+1]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Risk:"}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${il[f.risk_level].bg} ${il[f.risk_level].text} capitalize`,children:f.risk_level})]}),f.purchased_at&&t.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[t.jsx("span",{children:"Purchased:"}),t.jsx("span",{className:"font-medium",children:new Date(f.purchased_at).toLocaleDateString()})]})]})]},f.id))})),s==="requests"&&(o?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 text-primary-600 animate-spin"})}):l.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No purchase requests yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Your purchase requests will appear here"})]}):t.jsx("div",{className:"space-y-4",children:l.map(f=>t.jsxs("div",{className:`rounded-xl border ${y(f.status)} overflow-hidden`,children:[t.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>p(d===f.id?null:f.id),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-2xl",children:f.parcel_biome_type?cs[f.parcel_biome_type]:""}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold",children:["Parcel ",f.parcel_grid_code]}),t.jsxs("p",{className:"text-sm opacity-80",children:[f.parcel_biome_type,"  ",Me(f.offered_price)]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-xs font-medium uppercase",children:f.status}),d===f.id?t.jsx(hh,{className:"h-4 w-4"}):t.jsx(xh,{className:"h-4 w-4"})]})]})}),d===f.id&&t.jsxs("div",{className:"px-4 pb-4 pt-2 border-t space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"opacity-70",children:"Submitted:"}),t.jsx("span",{children:new Date(f.created_at).toLocaleString()})]}),f.reviewed_at&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"opacity-70",children:"Reviewed:"}),t.jsx("span",{children:new Date(f.reviewed_at).toLocaleString()})]}),f.reviewer_username&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"opacity-70",children:"Reviewed by:"}),t.jsx("span",{children:f.reviewer_username})]}),f.denial_reason&&t.jsxs("div",{className:"mt-2 p-2 bg-white/50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium",children:"Reason:"}),t.jsx("p",{className:"text-sm",children:f.denial_reason})]})]})]},f.id))}))]})]})]})},Dj=()=>{const{user:e}=Ve(),{plugins:s,loading:r}=Nt(),n=s.find(a=>a.route_path==="/land");return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!n||!n.enabled?t.jsx(bt,{to:"/",replace:!0}):(e==null?void 0:e.role)==="teacher"?t.jsx(Fj,{landPlugin:n}):t.jsx(Mj,{landPlugin:n})},$j=({job:e,onClick:s,rotation:r=0,isFulfilled:n=!1})=>{const[a,l]=x.useState(!1),[i,o]=x.useState(!1),c=n||e.is_fulfilled,p=((j,w)=>{if(!j)return"bg-blue-50 border-blue-200";const h=j.toLowerCase();return w!=null&&w.toLowerCase(),h.includes("government")?"bg-green-50 border-green-200":h.includes("finance")?"bg-blue-50 border-blue-200":h.includes("police")?"bg-pink-50 border-pink-200":h.includes("infrastructure")||h.includes("design")?"bg-orange-50 border-orange-200":h.includes("education")?"bg-yellow-50 border-yellow-200":h.includes("health")?"bg-red-50 border-red-200":h.includes("retail")||h.includes("events")||h.includes("business")?"bg-purple-50 border-purple-200":h.includes("media")||h.includes("news")?"bg-cyan-50 border-cyan-200":"bg-gray-50 border-gray-200"})(e.company_name,e.name),y=(()=>{if(!e.requirements)return null;const j=e.requirements.match(/(\d+)\s+positions?/i)||e.requirements.match(/(\d+)\s+position/i);return j?parseInt(j[1]):null})(),f=j=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),g=x.useRef(null);return x.useEffect(()=>{const j=()=>{if(g.current){const w=g.current.getBoundingClientRect(),h=g.current.closest(".pin-board");if(h){const m=h.getBoundingClientRect(),v=w.top-m.top;o(v<m.height*.3)}}};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),t.jsxs("div",{ref:g,className:`job-flyer relative cursor-pointer transition-all duration-300 ${a?"wiggle-subtle":""}`,style:{transform:`rotate(${r}deg)`},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:s,children:[t.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full border-2 border-red-700 shadow-md z-10"}),t.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full border-2 border-blue-700 shadow-md z-10"}),t.jsxs("div",{className:`${p} border-2 rounded-lg p-4 shadow-lg hover:shadow-xl transition-shadow min-h-[180px] flex flex-col relative overflow-hidden`,children:[c&&t.jsxs("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-60 flex flex-col items-center justify-center z-20 rounded-lg",children:[t.jsx(Ce,{className:"h-10 w-10 text-green-400 mb-2"}),t.jsx("div",{className:"text-white font-bold text-lg text-center px-2",children:"Position Fulfilled"}),e.assigned_to_name&&t.jsxs("div",{className:"text-green-200 text-sm text-center px-2 mt-1",children:["by ",e.assigned_to_name]})]}),t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx(gt,{className:"h-6 w-6 text-gray-700 flex-shrink-0"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold text-gray-900",children:f(e.salary)}),t.jsx("div",{className:"text-xs text-gray-600",children:"per period"})]})]}),t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:e.name}),e.company_name&&t.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:e.company_name}),e.description&&t.jsx("p",{className:"text-xs text-gray-600 line-clamp-3 flex-grow",children:e.description}),e.location&&t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" ",e.location]}),a&&t.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl z-50 pointer-events-none whitespace-nowrap ${i?"top-full mt-2":"-top-24"}`,children:[t.jsx("div",{className:"font-semibold",children:e.name}),t.jsx("div",{className:"text-gray-300",children:f(e.salary)}),y&&t.jsxs("div",{className:"text-gray-400 mt-1 text-center",children:[y," position",y>1?"s":""," available"]}),t.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 ${i?"bottom-full mb-0":"top-full mt-0"}`,children:t.jsx("div",{className:`border-4 border-transparent ${i?"border-b-gray-900":"border-t-gray-900"}`})})]})]})]})},Oj=({isOpen:e,onClose:s,job:r,onApply:n,userHasJob:a=!1,userJobName:l})=>{if(!e||!r)return null;const i=r.is_fulfilled,o=!a&&!i,c=p=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),d=p=>new Date(p).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(gt,{className:"h-6 w-6"}),t.jsx("h2",{className:"text-2xl font-bold",children:"Job Details"})]}),t.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:t.jsx(zs,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.name}),r.company_name&&t.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[t.jsx(mh,{className:"h-5 w-5 mr-2"}),t.jsx("span",{className:"text-lg font-medium",children:r.company_name})]}),t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("div",{className:"flex items-center text-primary-600",children:[t.jsx(ye,{className:"h-5 w-5 mr-2"}),t.jsx("span",{className:"text-xl font-bold",children:c(r.salary)}),t.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"per period"})]}),r.location&&t.jsxs("div",{className:"flex items-center text-gray-600",children:[t.jsx(Ct,{className:"h-5 w-5 mr-2"}),t.jsx("span",{children:r.location})]})]})]}),r.description&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[t.jsx(yc,{className:"h-5 w-5 mr-2"}),"Job Description"]}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.description})]}),r.requirements&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Requirements"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.requirements})]}),t.jsxs("div",{className:"text-sm text-gray-500 border-t border-gray-200 pt-4",children:["Posted on ",d(r.created_at)]}),i&&t.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx(Ce,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-green-800",children:"Position Fulfilled"}),t.jsxs("p",{className:"text-sm text-green-600",children:["This position has been filled",r.assigned_to_name?` by ${r.assigned_to_name}`:"","."]})]})]}),a&&!i&&t.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[t.jsx(Le,{className:"h-6 w-6 text-amber-600 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-amber-800",children:"You Already Have a Job"}),t.jsxs("p",{className:"text-sm text-amber-600",children:["You are currently employed as: ",l]})]})]}),t.jsxs("div",{className:"flex space-x-4 pt-4",children:[o?t.jsx("button",{onClick:n,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Apply Now"}):t.jsx("button",{disabled:!0,className:"flex-1 bg-gray-300 text-gray-500 font-semibold py-3 px-6 rounded-lg cursor-not-allowed",children:i?"Position Filled":"Cannot Apply"}),t.jsx("button",{onClick:s,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]})]})})},xu=[{id:"interest",type:"long_answer",label:"Why are you interested in this position?",required:!0},{id:"experience",type:"long_answer",label:"What relevant experience do you have?",required:!0},{id:"availability",type:"yes_no",label:"Are you available to work during school hours?",required:!0},{id:"skills",type:"short_answer",label:"What skills make you a good fit?",required:!0},{id:"hours",type:"multiple_choice",label:"How many hours per week can you commit?",required:!0,options:["1-5 hours","6-10 hours","11-15 hours","16+ hours"]}],zj=({isOpen:e,onClose:s,jobId:r,jobName:n,onSuccess:a})=>{const[l,i]=x.useState({}),[o,c]=x.useState({}),[d,p]=x.useState(!1),[u,y]=x.useState(!1),f=(m,v)=>{i(N=>({...N,[m]:v})),o[m]&&c(N=>{const C={...N};return delete C[m],C})},g=()=>{const m={};return xu.forEach(v=>{if(v.required){const N=l[v.id];!N||typeof N=="string"&&N.trim()===""?m[v.id]="This field is required":v.type==="short_answer"&&typeof N=="string"&&N.length>200?m[v.id]="Answer must be 200 characters or less":v.type==="long_answer"&&typeof N=="string"&&N.length>1e3&&(m[v.id]="Answer must be 1000 characters or less")}}),c(m),Object.keys(m).length===0},j=async m=>{var v,N;if(m.preventDefault(),!!g()){p(!0);try{await Yt.applyToJob(r,l),y(!0),setTimeout(()=>{a(),w()},2e3)}catch(C){console.error("Failed to submit application:",C),alert(((N=(v=C.response)==null?void 0:v.data)==null?void 0:N.error)||"Failed to submit application. Please try again.")}finally{p(!1)}}},w=()=>{i({}),c({}),y(!1),s()},h=m=>{var C;const v=l[m.id]||"",N=o[m.id];switch(m.type){case"short_answer":return t.jsxs("div",{children:[t.jsx("input",{type:"text",value:typeof v=="string"?v:"",onChange:R=>f(m.id,R.target.value),maxLength:200,className:`input-field ${N?"border-red-500":""}`,placeholder:"Enter your answer..."}),t.jsxs("div",{className:"flex justify-between mt-1",children:[N&&t.jsx("span",{className:"text-sm text-red-600",children:N}),t.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/200 characters"]})]})]});case"long_answer":return t.jsxs("div",{children:[t.jsx("textarea",{value:typeof v=="string"?v:"",onChange:R=>f(m.id,R.target.value),maxLength:1e3,rows:5,className:`input-field ${N?"border-red-500":""}`,placeholder:"Enter your answer..."}),t.jsxs("div",{className:"flex justify-between mt-1",children:[N&&t.jsx("span",{className:"text-sm text-red-600",children:N}),t.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/1000 characters"]})]})]});case"multiple_choice":return t.jsxs("div",{className:"space-y-2",children:[(C=m.options)==null?void 0:C.map(R=>t.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"radio",name:m.id,value:R,checked:v===R,onChange:k=>f(m.id,k.target.value),className:"w-4 h-4 text-primary-600"}),t.jsx("span",{className:"text-gray-700",children:R})]},R)),N&&t.jsx("span",{className:"text-sm text-red-600",children:N})]});case"yes_no":return t.jsxs("div",{className:"space-y-2",children:[["Yes","No"].map(R=>t.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"radio",name:m.id,value:R,checked:v===R,onChange:k=>f(m.id,k.target.value),className:"w-4 h-4 text-primary-600"}),t.jsx("span",{className:"text-gray-700",children:R})]},R)),N&&t.jsx("span",{className:"text-sm text-red-600",children:N})]});default:return null}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl sticky top-0 z-10",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Job Application"}),t.jsxs("p",{className:"text-primary-100 text-sm mt-1",children:["Applying for: ",n]})]}),t.jsx("button",{onClick:w,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:t.jsx(zs,{className:"h-6 w-6"})})]}),t.jsx("div",{className:"p-6",children:u?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ce,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Application Submitted!"}),t.jsx("p",{className:"text-gray-600",children:"Your application has been submitted successfully. A teacher will review it soon."})]}):t.jsxs("form",{onSubmit:j,className:"space-y-6",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," Please fill out all required fields. Your application will be reviewed by a teacher."]})}),xu.map(m=>t.jsxs("div",{children:[t.jsxs("label",{className:"label",children:[m.label,m.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),h(m)]},m.id)),t.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"submit",disabled:d,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{children:"Submitting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Rs,{className:"h-5 w-5"}),t.jsx("span",{children:"Submit Application"})]})}),t.jsx("button",{type:"button",onClick:w,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})})]})}):null},Bj=()=>{const{plugins:e,loading:s}=Nt(),{user:r}=Ve(),n=e.find(R=>R.route_path==="/jobs"),[a,l]=x.useState([]),[i,o]=x.useState(!0),[c,d]=x.useState(null),[p,u]=x.useState(!1),[y,f]=x.useState(!1),g=(r==null?void 0:r.job_id)!==null&&(r==null?void 0:r.job_id)!==void 0;x.useEffect(()=>{n&&n.enabled&&j()},[n]);const j=async()=>{try{o(!0);const R=await Yt.getJobs();l(R.data)}catch(R){console.error("Failed to fetch jobs:",R)}finally{o(!1)}},w=R=>{d(R),u(!0)},h=()=>{u(!1),f(!0)},m=()=>{j()},v=()=>{u(!1),d(null)},N=()=>{f(!1)},C=R=>R*7.3%11-5;return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})}):!n||!n.enabled?t.jsx(bt,{to:"/",replace:!0}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Jobs"}),t.jsx("p",{className:"text-primary-100",children:"Employment Board"})]})]}),g&&t.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[t.jsx(Le,{className:"h-5 w-5"}),t.jsxs("span",{className:"text-sm font-medium",children:["You are employed as: ",r==null?void 0:r.job_name]})]})]})}),t.jsx("div",{className:"pin-board rounded-2xl p-8 min-h-[600px] relative overflow-hidden",children:i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})}):a.length===0?t.jsxs("div",{className:"text-center py-16",children:[t.jsx(gt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Jobs Available"}),t.jsx("p",{className:"text-gray-600",children:"Check back later for new job opportunities!"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map((R,k)=>t.jsx($j,{job:R,onClick:()=>w(R),rotation:C(k)},R.id))})}),t.jsx(Oj,{isOpen:p,onClose:v,job:c,onApply:h,userHasJob:g,userJobName:r==null?void 0:r.job_name}),c&&t.jsx(zj,{isOpen:y,onClose:N,jobId:c.id,jobName:c.name,onSuccess:m})]})},Ij=()=>{const{plugins:e,loading:s}=Nt(),r=e.find(n=>n.route_path==="/news");return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?t.jsx(bt,{to:"/",replace:!0}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Town News"}),t.jsx("p",{className:"text-primary-100",children:"Local News & Updates"})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx(Jy,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Town News"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),t.jsx("p",{className:"text-sm text-gray-500",children:"Local news and updates will be available here soon."})]})]})},Uj=()=>{const{plugins:e,loading:s}=Nt(),r=e.find(n=>n.route_path==="/government");return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?t.jsx(bt,{to:"/",replace:!0}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Government"}),t.jsx("p",{className:"text-primary-100",children:"Town Government Services"})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx(mh,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Government Services"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),t.jsx("p",{className:"text-sm text-gray-500",children:"Government services and information will be available here soon."})]})]})},Hj=()=>{const{plugins:e,loading:s}=Nt(),{user:r}=Ve(),{currentTownClass:n}=ms(),a=e.find($=>$.route_path==="/tenders"),l=(r==null?void 0:r.role)==="teacher",[i,o]=x.useState([]),[c,d]=x.useState(!0),[p,u]=x.useState(""),[y,f]=x.useState(""),[g,j]=x.useState(!1),[w,h]=x.useState(!1),[m,v]=x.useState({name:"",description:"",value:""}),[N,C]=x.useState(!1),[R,k]=x.useState(null),[D,L]=x.useState([]),[S,_]=x.useState(!1),[b,A]=x.useState(null),[B,H]=x.useState(null),[q,ae]=x.useState(!1),[M,T]=x.useState(null),[U,W]=x.useState(!1),G=async()=>{var $,oe;try{d(!0),u("");const ce=l&&n||void 0,je=await Hs.getTenders(ce);o(je.data)}catch(ce){u(((oe=($=ce.response)==null?void 0:$.data)==null?void 0:oe.error)||"Failed to load tenders")}finally{d(!1)}};if(x.useEffect(()=>{s||!a||!a.enabled||l&&!n||G()},[l,n,s,a]),s)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!a||!a.enabled)return t.jsx(bt,{to:"/",replace:!0});const J=$=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format($),re=$=>{switch($){case"open":return"bg-emerald-100 text-emerald-800";case"awarded":return"bg-blue-100 text-blue-800";case"closed":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},X=$=>{switch($){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-emerald-100 text-emerald-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}},le=async $=>{var oe,ce;k($),C(!0),L([]);try{_(!0);const je=await Hs.getTenderApplications($.id);L(je.data.applications)}catch(je){u(((ce=(oe=je.response)==null?void 0:oe.data)==null?void 0:ce.error)||"Failed to load applications")}finally{_(!1)}},ne=async($,oe)=>{var ce,je;A($),u(""),f("");try{await Hs.updateTenderApplicationStatus($,oe),f(`Application ${oe}`),R&&await le(R),await G()}catch(P){u(((je=(ce=P.response)==null?void 0:ce.data)==null?void 0:je.error)||"Failed to update application")}finally{A(null)}},me=async $=>{var oe,ce;H($.id),u(""),f("");try{await Hs.payTender($.id),f("Tender paid from treasury"),await G()}catch(je){u(((ce=(oe=je.response)==null?void 0:oe.data)==null?void 0:ce.error)||"Failed to pay tender")}finally{H(null)}},K=l&&!!n,z=async $=>{var oe,ce;if($.preventDefault(),!!n){h(!0),u(""),f("");try{await Hs.createTender({town_class:n,name:m.name.trim(),description:m.description.trim()||void 0,value:Number(m.value||0)}),f("Tender created"),j(!1),v({name:"",description:"",value:""}),await G()}catch(je){u(((ce=(oe=je.response)==null?void 0:oe.data)==null?void 0:ce.error)||"Failed to create tender")}finally{h(!1)}}},ee=$=>{T($),ae(!0),f(""),u("")},Y=async()=>{var $,oe;if(M){W(!0),u(""),f("");try{await Hs.applyToTender(M.id),f("Application submitted"),ae(!1),T(null),await G()}catch(ce){u(((oe=($=ce.response)==null?void 0:$.data)==null?void 0:oe.error)||"Failed to apply")}finally{W(!1)}}},Z=x.useMemo(()=>[...i].sort(($,oe)=>new Date(oe.created_at).getTime()-new Date($.created_at).getTime()),[i]);return c?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Tenders"}),t.jsx("p",{className:"text-primary-100",children:l?`Manage building tenders for ${n||"your selected town"}`:"Apply for building jobs that need to happen on the game board"})]})]})}),(p||y)&&t.jsxs("div",{className:"space-y-3",children:[p&&t.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(zt,{className:"h-5 w-5"}),t.jsx("span",{children:p})]}),y&&t.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsx("span",{children:y})]})]}),l&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:"Create a new tender"}),t.jsx("p",{className:"text-sm text-gray-500",children:n?`This will be created for Class ${n}.`:"Select a town tab on the Teacher Dashboard first."})]}),t.jsxs("button",{onClick:()=>j(!0),disabled:!K,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[t.jsx(Mn,{className:"h-4 w-4"}),t.jsx("span",{children:"Create Tender"})]})]}),Z.length===0?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx(nl,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No tenders yet"}),t.jsx("p",{className:"text-gray-600",children:l?"Create the first tender for this town.":"Check back later for new building jobs."})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Z.map($=>t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:$.name}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${re($.status)}`,children:$.status.toUpperCase()}),!l&&$.my_application_status&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X($.my_application_status)}`,children:$.my_application_status.toUpperCase()})]}),$.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:$.description}),t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[t.jsx("span",{className:"font-medium text-gray-700",children:J(Number($.value||0))}),t.jsx("span",{children:""}),t.jsxs("span",{children:["Town: ",$.town_class]}),l&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[$.pending_count??0," pending"]}),t.jsxs("span",{children:["(",$.application_count??0," total)"]})]}),$.status==="awarded"&&$.awarded_to_username&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{className:"text-blue-700",children:["Awarded to ",$.awarded_to_username]})]}),$.status==="awarded"&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{className:$.paid?"text-emerald-700":"text-amber-700",children:$.paid?"Paid":"Unpaid"})]})]})]}),t.jsx("div",{className:"flex-shrink-0",children:l?t.jsxs("div",{className:"flex items-center gap-2",children:[$.status==="awarded"&&!$.paid&&t.jsxs("button",{onClick:()=>me($),disabled:B===$.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center space-x-2 disabled:opacity-50",children:[B===$.id?t.jsx(pe,{className:"h-4 w-4 animate-spin"}):t.jsx(hn,{className:"h-4 w-4"}),t.jsx("span",{children:"Pay"})]}),t.jsxs("button",{onClick:()=>le($),className:`relative px-3 py-2 rounded-lg transition-colors text-sm flex items-center space-x-2 ${($.pending_count??0)>0?"bg-amber-100 hover:bg-amber-200 ring-2 ring-amber-400 animate-pulse":"bg-gray-100 hover:bg-gray-200"}`,children:[t.jsx(al,{className:"h-4 w-4"}),t.jsx("span",{children:"Applications"}),($.pending_count??0)>0&&t.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] h-5 px-1 rounded-full bg-red-600 text-white text-xs flex items-center justify-center",children:$.pending_count})]})]}):t.jsx("button",{onClick:()=>ee($),className:"px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"View"})})]})},$.id))}),g&&l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Tender"}),t.jsxs("form",{onSubmit:z,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tender name"}),t.jsx("input",{required:!0,value:m.name,onChange:$=>v({...m,name:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Build a town hall"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:m.description,onChange:$=>v({...m,description:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"What needs to be built? Any rules/requirements?"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value (ZAR)"}),t.jsx("input",{required:!0,type:"number",min:"0",step:"0.01",value:m.value,onChange:$=>v({...m,value:$.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),t.jsxs("div",{className:"flex space-x-3 pt-2",children:[t.jsx("button",{type:"submit",disabled:w||!n,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:w?"Creating...":"Create"}),t.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),N&&l&&R&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[R.name,"  Applications"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",t.jsx("span",{className:"font-medium",children:R.status.toUpperCase()}),"  Town: ",R.town_class]})]}),t.jsx("button",{onClick:()=>{C(!1),k(null),L([])},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),S?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 text-primary-600 animate-spin"})}):D.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(nl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No applications yet"})]}):t.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-auto pr-1",children:D.map($=>t.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-semibold text-gray-900 truncate",children:$.applicant_first_name||$.applicant_last_name?`${$.applicant_first_name||""} ${$.applicant_last_name||""}`.trim():$.applicant_username}),$.applicant_username&&t.jsxs("span",{className:"text-sm text-gray-500",children:["@",$.applicant_username]}),$.applicant_class&&t.jsxs("span",{className:"text-xs text-gray-500",children:["(",$.applicant_class,")"]}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X($.status)}`,children:$.status.toUpperCase()})]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Applied: ",new Date($.created_at).toLocaleString()]}),$.reviewer_username&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Reviewed by ",$.reviewer_username," ",$.reviewed_at?` ${new Date($.reviewed_at).toLocaleString()}`:""]})]}),t.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:R.status==="open"&&$.status==="pending"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ne($.id,"approved"),disabled:b===$.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:b===$.id?"...":"Approve"}),t.jsx("button",{onClick:()=>ne($.id,"denied"),disabled:b===$.id,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:b===$.id?"...":"Deny"})]}):null})]})},$.id))})]})}),q&&!l&&M&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xl mx-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:M.name}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${re(M.status)}`,children:M.status.toUpperCase()}),M.my_application_status&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X(M.my_application_status)}`,children:M.my_application_status.toUpperCase()}),t.jsxs("span",{className:"text-sm text-gray-500",children:[" ",J(Number(M.value||0))]})]})]}),t.jsx("button",{onClick:()=>{ae(!1),T(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),M.description&&t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:M.description}),t.jsxs("div",{className:"mt-6 flex gap-3",children:[t.jsx("button",{onClick:Y,disabled:U||M.status!=="open"||!!M.my_application_status,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:U?"Applying...":M.my_application_status?"Already Applied":"Apply"}),t.jsx("button",{onClick:()=>{ae(!1),T(null)},className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},Vj=()=>{const{plugins:e,loading:s}=Nt(),{currentTownClass:r}=ms(),{user:n}=Ve(),[a,l]=x.useState(null),[i,o]=x.useState(!0),[c,d]=x.useState(!1),[p,u]=x.useState(!1),[y,f]=x.useState(""),[g,j]=x.useState(null),[w,h]=x.useState(!1),m=e.find(k=>k.route_path==="/town-rules");x.useEffect(()=>{r&&v()},[r]);const v=async()=>{var k,D;if(r)try{o(!0),j(null);const L=await O.get("/town-rules",{params:{town_class:r}});l(L.data),f(L.data.rules||"")}catch(L){console.error("Failed to fetch town rules:",L),j(((D=(k=L.response)==null?void 0:k.data)==null?void 0:D.error)||"Failed to load town rules")}finally{o(!1)}},N=async()=>{var k,D;if(r)try{d(!0),j(null),h(!1),await O.put("/town-rules",{town_class:r,rules:y||null}),h(!0),u(!1),await v(),setTimeout(()=>h(!1),3e3)}catch(L){console.error("Failed to save town rules:",L),j(((D=(k=L.response)==null?void 0:k.data)==null?void 0:D.error)||"Failed to save town rules")}finally{d(!1)}},C=()=>{f((a==null?void 0:a.rules)||""),u(!1),j(null),h(!1)};if(s)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!m||!m.enabled)return t.jsx(bt,{to:"/",replace:!0});const R=(n==null?void 0:n.role)==="teacher";return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Town Rules"}),t.jsxs("p",{className:"text-primary-100",children:["Rules and Regulations for ",r]})]})]})}),g&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),w&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:"Town rules saved successfully!"}),i?t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading town rules..."})]}):t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[R&&!p&&t.jsx("div",{className:"flex justify-end mb-4",children:t.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[t.jsx(gh,{className:"h-4 w-4"}),t.jsx("span",{children:"Edit Rules"})]})}),p?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Town Rules"}),t.jsx("textarea",{value:y,onChange:k=>f(k.target.value),placeholder:"Enter town rules here. Rules will be set later...",className:"w-full h-96 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Rules can be formatted as plain text. Markdown support may be added in the future."})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{onClick:C,disabled:c,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:N,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Saving..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(ho,{className:"h-4 w-4"}),t.jsx("span",{children:"Save Rules"})]})})]})]}):t.jsx("div",{children:a!=null&&a.rules?t.jsxs("div",{className:"prose max-w-none",children:[t.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:a.rules}),a.updated_at&&t.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",new Date(a.updated_at).toLocaleString()]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Xy,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Rules Set"}),t.jsx("p",{className:"text-gray-600 mb-4",children:R?'Click "Edit Rules" to add rules for this town.':"No rules have been set for this town yet."})]})})]})]})},Wj=()=>{const{plugins:e,loading:s}=Nt(),{user:r}=Ve(),n=e.find(H=>H.route_path==="/winkel"),[a,l]=x.useState([]),[i,o]=x.useState([]),[c,d]=x.useState(!0),[p,u]=x.useState(!0),[y,f]=x.useState(null),[g,j]=x.useState(""),[w,h]=x.useState(""),[m,v]=x.useState("shop"),[N,C]=x.useState("consumables"),[R,k]=x.useState(null),[D,L]=x.useState([]);x.useEffect(()=>{n&&n.enabled&&S()},[n]);const S=async()=>{try{d(!0);const[H,q,ae,M,T]=await Promise.all([O.get("/winkel/items"),O.get("/winkel/purchases"),(r==null?void 0:r.role)==="student"?O.get("/winkel/can-purchase"):Promise.resolve({data:{canPurchase:!0}}),(r==null?void 0:r.role)==="student"?O.get("/transactions/history").then(()=>O.get("/transactions/history").then(()=>Promise.resolve({data:null}))):Promise.resolve({data:null}),(r==null?void 0:r.role)==="student"?O.get("/winkel/owned-emojis"):Promise.resolve({data:[]})]),U=H.data.map(G=>({...G,price:parseFloat(G.price)||0})),W=q.data.map(G=>({...G,price_paid:parseFloat(G.price_paid)||0}));if(l(U),o(W),u(ae.data.canPurchase),L(T.data||[]),(r==null?void 0:r.role)==="student")try{const G=await O.get("/transactions/history")}catch(G){console.error("Failed to fetch balance:",G)}}catch(H){console.error("Failed to fetch shop data:",H),j("Failed to load shop data")}finally{d(!1)}},_=async H=>{var q,ae;try{f(H),j(""),h("");const M=await O.post("/winkel/purchase",{item_id:H});h(M.data.message||"Purchase successful!"),u(!1),await S(),setTimeout(()=>h(""),3e3)}catch(M){j(((ae=(q=M.response)==null?void 0:q.data)==null?void 0:ae.error)||"Failed to make purchase"),setTimeout(()=>j(""),5e3)}finally{f(null)}},b=a.filter(H=>H.category==="consumable"),A=a.filter(H=>H.category==="privilege"),B=a.filter(H=>H.category==="profile");return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})}):!n||!n.enabled?t.jsx(bt,{to:"/",replace:!0}):(r==null?void 0:r.role)==="teacher"?t.jsx(qj,{purchases:i,items:a,loading:c}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 rounded-full p-4",children:t.jsx(Er,{className:"h-8 w-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),t.jsx("p",{className:"text-orange-100",children:"Your weekly shopping destination"})]})]}),!p&&t.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[t.jsx($e,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:"Come back next week!"})]})]})}),g&&t.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-center space-x-3",children:[t.jsx(Le,{className:"h-5 w-5 text-red-500"}),t.jsx("p",{className:"text-red-700",children:g})]}),w&&t.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[t.jsx(Ce,{className:"h-5 w-5 text-green-500"}),t.jsx("p",{className:"text-green-700",children:w})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("button",{onClick:()=>v("shop"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${m==="shop"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(bc,{className:"h-5 w-5"}),t.jsx("span",{children:"Shop"})]})}),t.jsx("button",{onClick:()=>v("history"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${m==="history"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(Cr,{className:"h-5 w-5"}),t.jsx("span",{children:"My Purchases"})]})})]}),t.jsxs("div",{className:"p-6",children:[m==="shop"&&t.jsxs("div",{className:"space-y-6",children:[!p&&t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center",children:t.jsx("p",{className:"text-amber-800 font-semibold",children:" You've already made your weekly purchase! Come back next week for more shopping."})}),t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("button",{onClick:()=>C("consumables"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${N==="consumables"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(lu,{className:"h-5 w-5"}),t.jsx("span",{children:" Consumables"}),t.jsx("span",{className:"text-xs text-gray-500",children:"(Impulse Spending)"})]})}),t.jsx("button",{onClick:()=>C("privileges"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${N==="privileges"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(po,{className:"h-5 w-5"}),t.jsx("span",{children:" Time & Privileges"}),t.jsx("span",{className:"text-xs text-gray-500",children:"(Very Powerful)"})]})}),t.jsx("button",{onClick:()=>C("profile"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${N==="profile"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{children:"Profile Emojis"}),t.jsx("span",{className:"text-xs text-gray-500",children:"(Permanent)"})]})})]}),N==="consumables"&&t.jsxs("div",{children:[t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-gray-600",children:"These items drain money without long-term advantage. Perfect for impulse spending!"})}),c?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 animate-spin text-primary-600"})}):b.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(lu,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No consumables available at this time."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(H=>t.jsx(hu,{item:H,onPurchase:_,canPurchase:p,purchasing:y===H.id},H.id))})]}),N==="privileges"&&t.jsxs("div",{children:[t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-gray-600",children:"Time is the most valuable currency in class. These privileges give you comfort and freedom!"})}),c?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 animate-spin text-primary-600"})}):A.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(po,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No privileges available at this time."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(H=>t.jsx(hu,{item:H,onPurchase:_,canPurchase:p,purchasing:y===H.id},H.id))})]}),N==="profile"&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-gray-600 mb-3",children:"Customize your profile with a fun emoji! These are permanent and you can switch between owned emojis anytime."}),D.length>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Your Owned Emojis:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(H=>{var ae;const q=(ae=H.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:ae[1];return t.jsx("button",{onClick:async()=>{var M,T;try{await O.post("/winkel/change-emoji",{item_id:H.id}),h("Profile emoji changed!"),setTimeout(()=>h(""),3e3),window.location.reload()}catch(U){j(((T=(M=U.response)==null?void 0:M.data)==null?void 0:T.error)||"Failed to change emoji")}},className:"text-3xl p-2 hover:scale-110 transition-transform bg-white rounded-lg border-2 border-blue-300 hover:border-blue-500",title:"Click to use this emoji",children:q},H.id)})}),t.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click any emoji to use it on your profile"})]})]}),c?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 animate-spin text-primary-600"})}):B.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx("span",{className:"text-6xl mb-4 block",children:""}),t.jsx("p",{children:"No profile emojis available at this time."})]}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:B.map(H=>{var M;const q=(M=H.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:M[1],ae=D.some(T=>T.id===H.id);return t.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-2 p-4 text-center transition-all ${ae?"border-green-400 bg-green-50":"border-gray-200 hover:border-primary-300 hover:shadow-md"}`,children:[t.jsx("div",{className:"text-5xl mb-3",children:q}),t.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:H.name.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u,"")}),t.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:H.description}),ae?t.jsx("div",{className:"bg-green-500 text-white px-3 py-2 rounded-lg font-semibold text-sm",children:" Owned"}):t.jsx("button",{onClick:()=>_(H.id),disabled:y===H.id,className:"w-full bg-primary-600 text-white px-3 py-2 rounded-lg font-semibold hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:y===H.id?t.jsx(pe,{className:"h-4 w-4 animate-spin mx-auto"}):`Buy R${H.price.toFixed(0)}`})]},H.id)})})]})]}),m==="history"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Purchase History"}),i.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(Er,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No purchases yet. Start shopping!"})]}):t.jsx("div",{className:"space-y-3",children:i.map(H=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900",children:H.item_name}),t.jsx("p",{className:"text-sm text-gray-600",children:H.item_category==="consumable"?" Consumable":" Privilege"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Purchased: ",new Date(H.purchase_date).toLocaleDateString()]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"font-bold text-primary-600",children:["R",(parseFloat(H.price_paid)||0).toFixed(2)]})})]},H.id))})]})]})]})]})},hu=({item:e,onPurchase:s,canPurchase:r,purchasing:n})=>t.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-primary-400 hover:shadow-lg transition-all",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e.name}),t.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-semibold",children:["R",(parseFloat(e.price)||0).toFixed(2)]})]}),e.description&&t.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),e.notes&&t.jsx("p",{className:"text-xs text-gray-500 italic mb-4",children:e.notes}),t.jsx("button",{onClick:()=>s(e.id),disabled:!r||n,className:`w-full py-3 rounded-lg font-semibold transition-all ${!r||n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:from-primary-700 hover:to-primary-800 shadow-md hover:shadow-lg"}`,children:n?t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(pe,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Processing..."})]}):t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(bc,{className:"h-4 w-4"}),t.jsx("span",{children:"Buy Now"})]})})]}),qj=({purchases:e,items:s,loading:r})=>{const[n,a]=x.useState(null),[l,i]=x.useState(!0);x.useEffect(()=>{o()},[]);const o=async()=>{try{i(!0);const c=await O.get("/winkel/stats");a(c.data)}catch(c){console.error("Failed to fetch stats:",c)}finally{i(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 rounded-full p-4",children:t.jsx(Er,{className:"h-8 w-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),t.jsx("p",{className:"text-orange-100",children:"Shop Management & Analytics"})]})]})}),!l&&n&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Shop Balance"}),t.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["R",(parseFloat(n.shop_balance)||0).toFixed(2)]})]}),t.jsx(Er,{className:"h-8 w-8 text-emerald-600"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Total money in shop account"})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchases"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.total_purchases})]}),t.jsx(rt,{className:"h-8 w-8 text-primary-600"})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),t.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["R",(parseFloat(n.total_revenue)||0).toFixed(2)]})]}),t.jsx(ye,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Active Items"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.filter(c=>c.available).length})]}),t.jsx(Zy,{className:"h-8 w-8 text-blue-600"})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"All Purchases"})}),t.jsx("div",{className:"overflow-x-auto",children:r?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(pe,{className:"h-8 w-8 animate-spin text-primary-600"})}):e.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(Er,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"No purchases yet."})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(c=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[c.first_name," ",c.last_name]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[c.username," (",c.class,")"]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("p",{className:"text-sm text-gray-900",children:c.item_name})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${c.item_category==="consumable"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"}`,children:c.item_category==="consumable"?" Consumable":" Privilege"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-primary-600",children:["R",(parseFloat(c.price_paid)||0).toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(c.purchase_date).toLocaleDateString()})]},c.id))})]})})]})]})},Jj=()=>{const{plugins:e,loading:s}=Nt(),{user:r,account:n}=Ve(),{currentTownClass:a}=ms(),l=e.find(S=>S.route_path==="/pizza-time"),[i,o]=x.useState(null),[c,d]=x.useState(!0),[p,u]=x.useState(null),[y,f]=x.useState(""),[g,j]=x.useState(""),[w,h]=x.useState(!1),[m,v]=x.useState(!1);x.useEffect(()=>{if(l&&l.enabled){N();const S=setInterval(N,5e3);return()=>clearInterval(S)}},[l,a]);const N=async()=>{var S,_;try{f("");const b=(r==null?void 0:r.role)==="teacher"&&a?`/pizza-time/status?class=${a}`:"/pizza-time/status",A=await O.get(b);o(A.data)}catch(b){console.error("Failed to fetch pizza time status:",b);const A=((_=(S=b.response)==null?void 0:S.data)==null?void 0:_.error)||b.message||"Failed to load pizza time status";f(A)}finally{d(!1)}},C=async S=>{var _,b;if(!n||n.balance<S){f("Insufficient funds"),setTimeout(()=>f(""),5e3);return}try{u(S),f(""),j("");const A=await O.post("/pizza-time/donate",{amount:S});j(`Donated R${S.toFixed(2)}! Thank you for your contribution! `),await N(),setTimeout(()=>j(""),3e3)}catch(A){f(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to make donation"),setTimeout(()=>f(""),5e3)}finally{u(null)}},R=async()=>{var _,b;if(!i)return;const S=(r==null?void 0:r.role)==="teacher"?a||"6A":r==null?void 0:r.class;if(!S){f("No class selected. Please select a class first.");return}try{h(!0),f(""),j("");const A=await O.post("/pizza-time/toggle",{class:S,is_active:!i.is_active});j(A.data.message),await N(),setTimeout(()=>j(""),3e3)}catch(A){f(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to toggle pizza time"),setTimeout(()=>f(""),5e3)}finally{h(!1)}},k=async()=>{var _,b;if(!i)return;const S=(r==null?void 0:r.role)==="teacher"?a||"6A":r==null?void 0:r.class;if(!S){f("No class selected. Please select a class first.");return}if(window.confirm("Are you sure you want to reset the pizza time fund? This will set the fund to R0.00 but keep donation history."))try{v(!0),f(""),j("");const A=await O.post("/pizza-time/reset",{class:S});j(A.data.message),await N(),setTimeout(()=>j(""),3e3)}catch(A){f(((b=(_=A.response)==null?void 0:_.data)==null?void 0:b.error)||"Failed to reset pizza time"),setTimeout(()=>f(""),5e3)}finally{v(!1)}},D=x.useMemo(()=>i?Math.min(i.current_fund/i.goal_amount*100,100):0,[i]),L=x.useMemo(()=>{if(!i||!i.donation_history||i.donation_history.length===0)return[];let S=0;return i.donation_history.map(_=>(S+=_.daily_total,{date:_.date,amount:S,daily_total:_.daily_total,donation_count:_.donation_count}))},[i]);return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})}):!l||!l.enabled?t.jsx(bt,{to:"/",replace:!0}):c?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(pe,{className:"h-12 w-12 animate-spin text-primary-600"})}):!i&&!c?t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Le,{className:"h-5 w-5 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-red-700 font-semibold",children:"Failed to load pizza time status"}),y&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:y}),t.jsx("p",{className:"text-red-600 text-sm mt-2",children:"If you see this error, the server may need to be restarted to run database migrations."})]})]})})}):(r==null?void 0:r.role)==="teacher"?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 rounded-full p-4",children:t.jsx(Pa,{className:"h-8 w-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),t.jsx("p",{className:"text-orange-100",children:"Class donation tracker for pizza party"})]})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${i.is_active?"bg-green-500/30 border-2 border-green-300":"bg-gray-500/30 border-2 border-gray-300"}`,children:i.is_active?" Active":" Inactive"})})]})}),y&&t.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Le,{className:"h-5 w-5 text-red-500 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-700 font-semibold",children:y}),y.includes("class assigned")&&t.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please contact your teacher to assign you to a class (6A, 6B, or 6C) before using Pizza Time."})]})]})}),g&&t.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[t.jsx(Ce,{className:"h-5 w-5 text-green-500"}),t.jsx("p",{className:"text-green-700",children:g})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fund Progress"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["R",i.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["of R",i.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})," goal"]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 mb-2",children:t.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-8 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${D}%`},children:D>10&&t.jsxs("span",{className:"text-white text-sm font-semibold",children:[D.toFixed(1),"%"]})})}),t.jsxs("div",{className:"text-sm text-gray-600",children:[i.donation_count," donation",i.donation_count!==1?"s":""," received"]})]}),L.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[t.jsx(ru,{className:"h-5 w-5"}),t.jsx("span",{children:"Fund Growth Over Time"})]}),t.jsx("div",{className:"h-64 flex items-end space-x-1",children:L.map((S,_)=>{const b=Math.max(...L.map(B=>B.amount),i.goal_amount),A=S.amount/b*100;return t.jsx("div",{className:"flex-1 group relative",style:{minWidth:"20px"},children:t.jsx("div",{className:"w-full bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all duration-300 hover:opacity-80 cursor-pointer",style:{height:`${A}%`},title:`${new Date(S.date).toLocaleDateString()}: R${S.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})} (${S.donation_count} donation${S.donation_count!==1?"s":""})`,children:t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[t.jsx("div",{className:"font-semibold",children:new Date(S.date).toLocaleDateString()}),t.jsxs("div",{children:["R",S.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("div",{className:"text-gray-300",children:[S.donation_count," donation",S.donation_count!==1?"s":""]})]})})},S.date)})}),t.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"Hover over bars to see details"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Controls"}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:R,disabled:w,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 ${i.is_active?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"} disabled:opacity-50`,children:w?t.jsx(pe,{className:"h-5 w-5 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ky,{className:"h-5 w-5"}),t.jsxs("span",{children:[i.is_active?"Deactivate":"Activate"," Pizza Time"]})]})}),t.jsx("button",{onClick:k,disabled:m||i.current_fund===0,className:"px-6 py-3 rounded-lg font-semibold bg-gray-500 hover:bg-gray-600 text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?t.jsx(pe,{className:"h-5 w-5 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(zt,{className:"h-5 w-5"}),t.jsx("span",{children:"Reset Fund"})]})})]})]}),i.donations&&i.donations.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[t.jsx(ze,{className:"h-5 w-5"}),t.jsx("span",{children:"Recent Donations"})]}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.donations.map(S=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-800",children:S.first_name&&S.last_name?`${S.first_name} ${S.last_name}`:S.username}),t.jsx("div",{className:"text-sm text-gray-500",children:new Date(S.created_at).toLocaleString()})]}),t.jsxs("div",{className:"text-lg font-bold text-primary-600",children:["R",S.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},S.id))})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 rounded-full p-4",children:t.jsx(Pa,{className:"h-8 w-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),t.jsx("p",{className:"text-orange-100",children:"Help your class reach the pizza party goal!"})]})]}),!i.is_active&&t.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[t.jsx(Le,{className:"h-5 w-5"}),t.jsx("span",{className:"font-semibold",children:"Pizza Time is not active"})]})]})}),y&&t.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Le,{className:"h-5 w-5 text-red-500 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-700 font-semibold",children:y}),y.includes("class assigned")&&t.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please contact your teacher to assign you to a class (6A, 6B, or 6C) before using Pizza Time."})]})]})}),g&&t.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[t.jsx(Ce,{className:"h-5 w-5 text-green-500"}),t.jsx("p",{className:"text-green-700",children:g})]}),!i.is_active&&t.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:t.jsx("p",{className:"text-amber-800 font-semibold",children:"Pizza Time is currently inactive. Your teacher needs to activate it before you can donate."})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fund Progress"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["R",i.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["of R",i.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})," goal"]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 mb-2",children:t.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-8 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${D}%`},children:D>10&&t.jsxs("span",{className:"text-white text-sm font-semibold",children:[D.toFixed(1),"%"]})})}),t.jsxs("div",{className:"text-sm text-gray-600",children:[i.donation_count," donation",i.donation_count!==1?"s":""," received"]})]}),L.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[t.jsx(ru,{className:"h-5 w-5"}),t.jsx("span",{children:"Fund Growth Over Time"})]}),t.jsx("div",{className:"h-64 flex items-end space-x-1",children:L.map(S=>{const _=Math.max(...L.map(A=>A.amount),i.goal_amount),b=S.amount/_*100;return t.jsx("div",{className:"flex-1 group relative",style:{minWidth:"20px"},children:t.jsx("div",{className:"w-full bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all duration-300 hover:opacity-80 cursor-pointer",style:{height:`${b}%`},title:`${new Date(S.date).toLocaleDateString()}: R${S.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})} (${S.donation_count} donation${S.donation_count!==1?"s":""})`,children:t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[t.jsx("div",{className:"font-semibold",children:new Date(S.date).toLocaleDateString()}),t.jsxs("div",{children:["R",S.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("div",{className:"text-gray-300",children:[S.donation_count," donation",S.donation_count!==1?"s":""]})]})})},S.date)})}),t.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"Hover over bars to see details"})]}),i.is_active&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[t.jsx(ye,{className:"h-5 w-5"}),t.jsx("span",{children:"Make a Donation"})]}),n&&t.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Your balance: ",t.jsxs("span",{className:"font-semibold text-primary-600",children:["R",n.balance.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[500,1e3,2e3,5e3].map(S=>{const _=n?n.balance>=S:!1;return t.jsx("button",{onClick:()=>C(S),disabled:!_||p===S||!i.is_active,className:`px-6 py-4 rounded-lg font-bold text-lg transition-all ${_&&i.is_active?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:p===S?t.jsx(pe,{className:"h-5 w-5 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Pa,{className:"h-5 w-5"}),t.jsxs("span",{children:["R",S.toLocaleString()]})]})},S)})})]})]})},Zj=()=>{const{plugins:e,loading:s}=Nt(),r=e.find(w=>w.route_path==="/leaderboard"),[n,a]=x.useState([]),[l,i]=x.useState({"6A":[],"6B":[],"6C":[]}),[o,c]=x.useState(!0),[d,p]=x.useState("overall"),u=w=>{switch(w){case 1:return"";case 2:return"";case 3:return"";case 4:return"";case 5:return"";default:return""}},y=w=>{switch(w){case 1:return"bg-yellow-400 text-yellow-900 border-yellow-500";case 2:return"bg-gray-300 text-gray-900 border-gray-400";case 3:return"bg-orange-400 text-orange-900 border-orange-500";case 4:return"bg-blue-100 text-blue-900 border-blue-300";case 5:return"bg-blue-50 text-blue-900 border-blue-200";default:return"bg-gray-100 text-gray-900 border-gray-300"}};x.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const[w,h]=await Promise.all([O.get("/leaderboard/overall"),O.get("/leaderboard/all-classes")]);a(w.data.leaderboard||[]),i(h.data||{"6A":[],"6B":[],"6C":[]})}catch(w){console.error("Failed to fetch leaderboards:",w)}finally{c(!1)}},g=w=>w.first_name&&w.last_name?`${w.first_name} ${w.last_name}`:w.username,j=w=>w.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ll,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-gray-500",children:"No games played yet. Be the first to compete!"})]}):t.jsx("div",{className:"space-y-3",children:w.map(h=>t.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all hover:scale-[1.02] ${y(h.rank)}`,children:[t.jsxs("div",{className:"flex-shrink-0 text-center w-16",children:[t.jsx("div",{className:"text-4xl mb-1",children:u(h.rank)}),t.jsxs("div",{className:"text-lg font-bold",children:["#",h.rank]})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-semibold text-lg truncate",children:g(h)}),t.jsxs("div",{className:"text-sm opacity-75",children:[h.class&&t.jsxs("span",{className:"mr-3",children:["Class ",h.class]}),t.jsxs("span",{children:[h.games_played," game",h.games_played!==1?"s":""]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center gap-1 justify-end mb-1",children:[t.jsx(po,{className:"h-5 w-5"}),t.jsx("span",{className:"text-2xl font-bold",children:h.total_points.toLocaleString()})]}),t.jsx("div",{className:"text-xs opacity-75",children:"Total Points"})]}),t.jsxs("div",{className:"hidden md:flex flex-col gap-1 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-16 opacity-75",children:"Easy:"}),t.jsx("span",{className:"font-semibold",children:h.high_score_easy})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-16 opacity-75",children:"Medium:"}),t.jsx("span",{className:"font-semibold",children:h.high_score_medium})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-16 opacity-75",children:"Hard:"}),t.jsx("span",{className:"font-semibold",children:h.high_score_hard})]})]})]},h.user_id))});return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?t.jsx(bt,{to:"/",replace:!0}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Math Game Leaderboard"}),t.jsx("p",{className:"text-yellow-100",children:"Top performers across all classes"})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>p("overall"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="overall"?"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(rt,{className:"h-4 w-4"}),t.jsx("span",{children:"Overall Top 5"})]})}),t.jsx("button",{onClick:()=>p("6A"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6A"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{children:"Class 6A"})]})}),t.jsx("button",{onClick:()=>p("6B"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6B"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{children:"Class 6B"})]})}),t.jsx("button",{onClick:()=>p("6C"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6C"?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{children:"Class 6C"})]})})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:o?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs(t.Fragment,{children:[d==="overall"&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(ll,{className:"h-6 w-6 text-yellow-500"}),"Overall Top 5 Champions"]}),j(n)]}),d==="6A"&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(ze,{className:"h-6 w-6 text-blue-500"}),"Class 6A Top 5"]}),j(l["6A"])]}),d==="6B"&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(ze,{className:"h-6 w-6 text-green-500"}),"Class 6B Top 5"]}),j(l["6B"])]}),d==="6C"&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(ze,{className:"h-6 w-6 text-purple-500"}),"Class 6C Top 5"]}),j(l["6C"])]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-3xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Rankings Work"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsxs("li",{children:[" Rankings are based on ",t.jsx("strong",{children:"total points"})," earned across all math games"]}),t.jsx("li",{children:" Points are awarded based on difficulty level and answer streaks"}),t.jsx("li",{children:" The leaderboard updates in real-time as students play"}),t.jsx("li",{children:" Each class has its own Top 5, plus an Overall Top 5 across all classes"})]})]})]})})]})},Ht=e=>e?new Date(e).toLocaleString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",lr=({status:e})=>{const s=x.useMemo(()=>{switch(e){case"approved":case"verified":return{icon:Ce,className:"bg-green-100 text-green-700 border-green-200",label:e==="verified"?"approved":e};case"denied":return{icon:zt,className:"bg-red-100 text-red-700 border-red-200",label:e};default:return{icon:Le,className:"bg-yellow-100 text-yellow-700 border-yellow-200",label:"pending"}}},[e]),r=s.icon;return t.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full border ${s.className}`,children:[t.jsx(r,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"capitalize",children:s.label})]})},Qj=()=>{const{plugins:e,loading:s}=Nt(),{user:r}=Ve(),[n,a]=x.useState("my"),[l,i]=x.useState("pending"),[o,c]=x.useState(!1),[d,p]=x.useState(null),[u,y]=x.useState([]),[f,g]=x.useState([]),[j,w]=x.useState(!1),[h,m]=x.useState(null),[v,N]=x.useState([]),[C,R]=x.useState([]),[k,D]=x.useState([]),[L,S]=x.useState([]),[_,b]=x.useState("bug"),[A,B]=x.useState(!1),[H,q]=x.useState(null),[ae,M]=x.useState(null),[T,U]=x.useState(""),[W,G]=x.useState(""),[J,re]=x.useState(""),X=(r==null?void 0:r.role)==="teacher",le=e.find(P=>P.route_path==="/suggestions-bugs");x.useEffect(()=>{!s&&(le!=null&&le.enabled)&&(a(X?"review":"my"),X&&i("pending"))},[s,le==null?void 0:le.enabled,X]);const ne=async()=>{var P,Re;try{c(!0),p(null);const xe=await O.get("/suggestions-bugs/my");y(xe.data.suggestions||[]),g(xe.data.bugReports||[])}catch(xe){p(((Re=(P=xe.response)==null?void 0:P.data)==null?void 0:Re.error)||"Failed to load your submissions")}finally{c(!1)}},me=async()=>{var P,Re;try{w(!0),m(null);const xe=await O.get("/suggestions-bugs/admin/queue");N(xe.data.suggestions||[]),R(xe.data.bugReports||[])}catch(xe){m(((Re=(P=xe.response)==null?void 0:P.data)==null?void 0:Re.error)||"Failed to load review queue")}finally{w(!1)}},K=async()=>{var P,Re;try{w(!0),m(null);const xe=await O.get("/suggestions-bugs/admin/all");D(xe.data.suggestions||[]),S(xe.data.bugReports||[])}catch(xe){m(((Re=(P=xe.response)==null?void 0:P.data)==null?void 0:Re.error)||"Failed to load suggestions & bugs")}finally{w(!1)}};x.useEffect(()=>{le!=null&&le.enabled&&r&&(r.role==="student"?ne():(me(),K()))},[le==null?void 0:le.enabled,r==null?void 0:r.role]);const z=async()=>{var P,Re,xe,ct,Pt,Qt;try{B(!0),q(null),M(null),await O.post("/suggestions-bugs/suggestions",{content:T}),U(""),M("Suggestion submitted!"),await ne()}catch(xs){q(((Re=(P=xs.response)==null?void 0:P.data)==null?void 0:Re.error)||((Qt=(Pt=(ct=(xe=xs.response)==null?void 0:xe.data)==null?void 0:ct.errors)==null?void 0:Pt[0])==null?void 0:Qt.msg)||"Failed to submit suggestion")}finally{B(!1)}},ee=async()=>{var P,Re,xe,ct,Pt,Qt;try{B(!0),q(null),M(null),await O.post("/suggestions-bugs/bugs",{title:W,description:J}),G(""),re(""),M("Bug report submitted!"),await ne()}catch(xs){q(((Re=(P=xs.response)==null?void 0:P.data)==null?void 0:Re.error)||((Qt=(Pt=(ct=(xe=xs.response)==null?void 0:xe.data)==null?void 0:ct.errors)==null?void 0:Pt[0])==null?void 0:Qt.msg)||"Failed to submit bug report")}finally{B(!1)}},Y=async(P,Re)=>{var xe,ct;try{await O.put(`/suggestions-bugs/admin/suggestions/${P}/review`,{status:Re}),await me(),await K()}catch(Pt){m(((ct=(xe=Pt.response)==null?void 0:xe.data)==null?void 0:ct.error)||"Failed to update suggestion")}},Z=async(P,Re)=>{var xe,ct;try{await O.put(`/suggestions-bugs/admin/bugs/${P}/review`,{status:Re}),await me(),await K()}catch(Pt){m(((ct=(xe=Pt.response)==null?void 0:xe.data)==null?void 0:ct.error)||"Failed to update bug report")}},$=x.useMemo(()=>k.filter(P=>P.status==="approved"),[k]),oe=x.useMemo(()=>k.filter(P=>P.status==="denied"),[k]),ce=x.useMemo(()=>L.filter(P=>P.status==="verified"),[L]),je=x.useMemo(()=>L.filter(P=>P.status==="denied"),[L]);return s?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!le||!le.enabled?t.jsx(bt,{to:"/",replace:!0}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Suggestions & Bugs"}),t.jsxs("p",{className:"text-primary-100",children:["Submit ideas and report legit bugs. If approved, you earn ",t.jsx("span",{className:"font-semibold",children:"R1000"}),"."]})]})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[t.jsx("div",{className:"border-b border-gray-200 px-6",children:t.jsxs("nav",{className:"flex gap-6",children:[!X&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>a("my"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="my"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My submissions"}),t.jsx("button",{onClick:()=>a("submit"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="submit"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Submit"})]}),X&&t.jsx("button",{onClick:()=>a("review"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="review"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Review queue"})]})}),t.jsxs("div",{className:"p-6",children:[!X&&n==="my"&&t.jsxs("div",{className:"space-y-6",children:[d&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),o?t.jsxs("div",{className:"text-center py-10",children:[t.jsx(pe,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-600",children:"Loading your submissions..."})]}):t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Suggestions"}),t.jsx("span",{className:"text-xs text-gray-500",children:u.length})]}),u.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions yet."}):t.jsx("div",{className:"space-y-3",children:u.slice(0,10).map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx(lr,{status:P.status}),t.jsx("span",{className:"text-xs text-gray-500",children:Ht(P.created_at)})]}),t.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:P.content}),(P.status==="approved"||P.status==="denied")&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:"",P.reward_paid?"  Reward paid ":P.status==="approved"?"  Reward pending":""]})]},P.id))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Bug reports"}),t.jsx("span",{className:"text-xs text-gray-500",children:f.length})]}),f.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No bug reports yet."}):t.jsx("div",{className:"space-y-3",children:f.slice(0,10).map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx(lr,{status:P.status}),t.jsx("span",{className:"text-xs text-gray-500",children:Ht(P.created_at)})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:P.title}),t.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:P.description}),(P.status==="verified"||P.status==="denied")&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:"",P.reward_paid?"  Reward paid ":P.status==="verified"?"  Reward pending":""]})]},P.id))})]})]})]}),!X&&n==="submit"&&t.jsxs("div",{className:"space-y-4",children:[H&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:H}),ae&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:ae}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>b("bug"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${_==="bug"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Report a bug"}),t.jsx("button",{onClick:()=>b("suggestion"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${_==="suggestion"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Make a suggestion"})]}),_==="bug"?t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bug title"}),t.jsx("input",{value:W,onChange:P=>G(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Short summary of the bug"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What happened?"}),t.jsx("textarea",{value:J,onChange:P=>re(P.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"Steps to reproduce, what you expected, what you saw..."})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:ee,disabled:A||W.trim().length<3||J.trim().length<10,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[A?t.jsx(pe,{className:"h-4 w-4 animate-spin"}):t.jsx(Rs,{className:"h-4 w-4"}),"Submit bug"]})})]}):t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Suggestion"}),t.jsx("textarea",{value:T,onChange:P=>U(P.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"What would make the app better?"}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"If approved, you earn R1000."})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:z,disabled:A||T.trim().length<5,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[A?t.jsx(pe,{className:"h-4 w-4 animate-spin"}):t.jsx(Rs,{className:"h-4 w-4"}),"Submit suggestion"]})})]})]}),X&&n==="review"&&t.jsxs("div",{className:"space-y-6",children:[h&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),j?t.jsxs("div",{className:"text-center py-10",children:[t.jsx(pe,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-600",children:"Loading review queue..."})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>i("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="pending"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Pending (",v.length+C.length,")"]}),t.jsxs("button",{onClick:()=>i("approved"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="approved"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Approved (",$.length+ce.length,")"]}),t.jsxs("button",{onClick:()=>i("denied"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="denied"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Denied (",oe.length+je.length,")"]})]}),l==="pending"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending suggestions"}),t.jsx("span",{className:"text-xs text-gray-500",children:v.length})]}),v.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):t.jsx("div",{className:"space-y-3",children:v.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx("span",{className:"text-xs text-gray-500",children:Ht(P.created_at)})]}),t.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:P.content}),t.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[t.jsx("button",{onClick:()=>Y(P.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),t.jsx("button",{onClick:()=>Y(P.id,"approved"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},P.id))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending bug reports"}),t.jsx("span",{className:"text-xs text-gray-500",children:C.length})]}),C.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):t.jsx("div",{className:"space-y-3",children:C.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx("span",{className:"text-xs text-gray-500",children:Ht(P.created_at)})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:P.title}),t.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:P.description}),t.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[t.jsx("button",{onClick:()=>Z(P.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),t.jsx("button",{onClick:()=>Z(P.id,"verified"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},P.id))})]})]}),l==="approved"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved suggestions"}),t.jsx("span",{className:"text-xs text-gray-500",children:$.length})]}),$.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No approved suggestions yet."}):t.jsx("div",{className:"space-y-3",children:$.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx(lr,{status:P.status})]}),t.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:P.content}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:"",P.reward_paid?"  Reward paid ":"  Reward pending"]})]},P.id))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved bug reports"}),t.jsx("span",{className:"text-xs text-gray-500",children:ce.length})]}),ce.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No approved bug reports yet."}):t.jsx("div",{className:"space-y-3",children:ce.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx(lr,{status:P.status})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:P.title}),t.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:P.description}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:"",P.reward_paid?"  Reward paid ":"  Reward pending"]})]},P.id))})]})]}),l==="denied"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied suggestions"}),t.jsx("span",{className:"text-xs text-gray-500",children:oe.length})]}),oe.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No denied suggestions."}):t.jsx("div",{className:"space-y-3",children:oe.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx(lr,{status:P.status})]}),t.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:P.content}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:""]})]},P.id))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied bug reports"}),t.jsx("span",{className:"text-xs text-gray-500",children:je.length})]}),je.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No denied bug reports."}):t.jsx("div",{className:"space-y-3",children:je.map(P=>t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-xs text-gray-600",children:[t.jsx("span",{className:"font-medium",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),P.class?t.jsxs("span",{className:"ml-2 text-gray-500",children:["(",P.class,")"]}):null]}),t.jsx(lr,{status:P.status})]}),t.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:P.title}),t.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:P.description}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",P.reviewed_at?`on ${Ht(P.reviewed_at)}`:"",P.reviewed_by_username?` by ${P.reviewed_by_username}`:""]})]},P.id))})]})]})]})]})]})]})]})},xt=({children:e})=>{const{user:s,loading:r}=Ve();return r?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?t.jsx(ij,{children:e}):t.jsx(bt,{to:"/login",replace:!0})},Gj=()=>{const{user:e}=Ve();return console.log("AppContent - Current user:",e),t.jsxs(Jf,{children:[t.jsx(Je,{path:"/login",element:t.jsx(oj,{})}),t.jsx(Je,{path:"/",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:(e==null?void 0:e.role)==="teacher"?t.jsx(Nj,{}):t.jsx(hj,{})})})})}),t.jsx(Je,{path:"/student/:username",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(wj,{})})})})}),t.jsx(Je,{path:"/bank",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Tj,{})})})})}),t.jsx(Je,{path:"/land",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Dj,{})})})})}),t.jsx(Je,{path:"/jobs",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Bj,{})})})})}),t.jsx(Je,{path:"/news",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Ij,{})})})})}),t.jsx(Je,{path:"/government",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Uj,{})})})})}),t.jsx(Je,{path:"/tenders",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Hj,{})})})})}),t.jsx(Je,{path:"/town-rules",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Vj,{})})})})}),t.jsx(Je,{path:"/winkel",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Wj,{})})})})}),t.jsx(Je,{path:"/pizza-time",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Jj,{})})})})}),t.jsx(Je,{path:"/leaderboard",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Zj,{})})})})}),t.jsx(Je,{path:"/suggestions-bugs",element:t.jsx(xt,{children:t.jsx(ut,{children:t.jsx(mt,{children:t.jsx(Qj,{})})})})}),t.jsx(Je,{path:"*",element:t.jsx(bt,{to:"/",replace:!0})})]})},Kj=()=>t.jsx(eg,{children:t.jsx(Ly,{children:t.jsx(Gj,{})})});ui.createRoot(document.getElementById("root")).render(t.jsx(ku.StrictMode,{children:t.jsx(Kj,{})}));
