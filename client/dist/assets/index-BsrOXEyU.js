function lh(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ju={exports:{}},Rl={},Qu={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rn=Symbol.for("react.element"),oh=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),uh=Symbol.for("react.profiler"),mh=Symbol.for("react.provider"),xh=Symbol.for("react.context"),hh=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),gh=Symbol.for("react.memo"),fh=Symbol.for("react.lazy"),Qc=Symbol.iterator;function yh(t){return t===null||typeof t!="object"?null:(t=Qc&&t[Qc]||t["@@iterator"],typeof t=="function"?t:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zu=Object.assign,Yu={};function Xr(t,s,r){this.props=t,this.context=s,this.refs=Yu,this.updater=r||Ku}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Xr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xu(){}Xu.prototype=Xr.prototype;function Ho(t,s,r){this.props=t,this.context=s,this.refs=Yu,this.updater=r||Ku}var Wo=Ho.prototype=new Xu;Wo.constructor=Ho;Zu(Wo,Xr.prototype);Wo.isPureReactComponent=!0;var Kc=Array.isArray,em=Object.prototype.hasOwnProperty,Vo={current:null},tm={key:!0,ref:!0,__self:!0,__source:!0};function sm(t,s,r){var a,n={},l=null,i=null;if(s!=null)for(a in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)em.call(s,a)&&!tm.hasOwnProperty(a)&&(n[a]=s[a]);var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){for(var o=Array(c),u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}if(t&&t.defaultProps)for(a in c=t.defaultProps,c)n[a]===void 0&&(n[a]=c[a]);return{$$typeof:rn,type:t,key:l,ref:i,props:n,_owner:Vo.current}}function bh(t,s){return{$$typeof:rn,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Go(t){return typeof t=="object"&&t!==null&&t.$$typeof===rn}function jh(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Zc=/\/+/g;function ei(t,s){return typeof t=="object"&&t!==null&&t.key!=null?jh(""+t.key):s.toString(36)}function Dn(t,s,r,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case rn:case oh:i=!0}}if(i)return i=t,n=n(i),t=a===""?"."+ei(i,0):a,Kc(n)?(r="",t!=null&&(r=t.replace(Zc,"$&/")+"/"),Dn(n,s,r,"",function(u){return u})):n!=null&&(Go(n)&&(n=bh(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Zc,"$&/")+"/")+t)),s.push(n)),1;if(i=0,a=a===""?".":a+":",Kc(t))for(var c=0;c<t.length;c++){l=t[c];var o=a+ei(l,c);i+=Dn(l,s,r,o,n)}else if(o=yh(t),typeof o=="function")for(t=o.call(t),c=0;!(l=t.next()).done;)l=l.value,o=a+ei(l,c++),i+=Dn(l,s,r,o,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function gn(t,s,r){if(t==null)return t;var a=[],n=0;return Dn(t,a,"","",function(l){return s.call(r,l,n++)}),a}function vh(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},$n={transition:null},Nh={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:$n,ReactCurrentOwner:Vo};function rm(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:gn,forEach:function(t,s,r){gn(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return gn(t,function(){s++}),s},toArray:function(t){return gn(t,function(s){return s})||[]},only:function(t){if(!Go(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=Xr;je.Fragment=ch;je.Profiler=uh;je.PureComponent=Ho;je.StrictMode=dh;je.Suspense=ph;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nh;je.act=rm;je.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Zu({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Vo.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in s)em.call(s,o)&&!tm.hasOwnProperty(o)&&(a[o]=s[o]===void 0&&c!==void 0?c[o]:s[o])}var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){c=Array(o);for(var u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:rn,type:t.type,key:n,ref:l,props:a,_owner:i}};je.createContext=function(t){return t={$$typeof:xh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mh,_context:t},t.Consumer=t};je.createElement=sm;je.createFactory=function(t){var s=sm.bind(null,t);return s.type=t,s};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:hh,render:t}};je.isValidElement=Go;je.lazy=function(t){return{$$typeof:fh,_payload:{_status:-1,_result:t},_init:vh}};je.memo=function(t,s){return{$$typeof:gh,type:t,compare:s===void 0?null:s}};je.startTransition=function(t){var s=$n.transition;$n.transition={};try{t()}finally{$n.transition=s}};je.unstable_act=rm;je.useCallback=function(t,s){return xt.current.useCallback(t,s)};je.useContext=function(t){return xt.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};je.useEffect=function(t,s){return xt.current.useEffect(t,s)};je.useId=function(){return xt.current.useId()};je.useImperativeHandle=function(t,s,r){return xt.current.useImperativeHandle(t,s,r)};je.useInsertionEffect=function(t,s){return xt.current.useInsertionEffect(t,s)};je.useLayoutEffect=function(t,s){return xt.current.useLayoutEffect(t,s)};je.useMemo=function(t,s){return xt.current.useMemo(t,s)};je.useReducer=function(t,s,r){return xt.current.useReducer(t,s,r)};je.useRef=function(t){return xt.current.useRef(t)};je.useState=function(t){return xt.current.useState(t)};je.useSyncExternalStore=function(t,s,r){return xt.current.useSyncExternalStore(t,s,r)};je.useTransition=function(){return xt.current.useTransition()};je.version="18.3.1";Qu.exports=je;var d=Qu.exports;const am=ih(d),wh=lh({__proto__:null,default:am},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=d,_h=Symbol.for("react.element"),kh=Symbol.for("react.fragment"),Ch=Object.prototype.hasOwnProperty,Rh=Sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ph={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)Ch.call(s,a)&&!Ph.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:_h,type:t,key:l,ref:i,props:n,_owner:Rh.current}}Rl.Fragment=kh;Rl.jsx=nm;Rl.jsxs=nm;Ju.exports=Rl;var e=Ju.exports,Li={},lm={exports:{}},Pt={},im={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(T,F){var G=T.length;T.push(F);e:for(;0<G;){var U=G-1>>>1,ee=T[U];if(0<n(ee,F))T[U]=F,T[G]=ee,G=U;else break e}}function r(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var F=T[0],G=T.pop();if(G!==F){T[0]=G;e:for(var U=0,ee=T.length,te=ee>>>1;U<te;){var de=2*(U+1)-1,K=T[de],se=de+1,ie=T[se];if(0>n(K,G))se<ee&&0>n(ie,K)?(T[U]=ie,T[se]=G,U=se):(T[U]=K,T[de]=G,U=de);else if(se<ee&&0>n(ie,G))T[U]=ie,T[se]=G,U=se;else break e}}return F}function n(T,F){var G=T.sortIndex-F.sortIndex;return G!==0?G:T.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var o=[],u=[],p=1,y=null,f=3,h=!1,g=!1,j=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var F=r(u);F!==null;){if(F.callback===null)a(u);else if(F.startTime<=T)a(u),F.sortIndex=F.expirationTime,s(o,F);else break;F=r(u)}}function w(T){if(j=!1,v(T),!g)if(r(o)!==null)g=!0,N(_);else{var F=r(u);F!==null&&H(w,F.startTime-T)}}function _(T,F){g=!1,j&&(j=!1,m(I),I=-1),h=!0;var G=f;try{for(v(F),y=r(o);y!==null&&(!(y.expirationTime>F)||T&&!P());){var U=y.callback;if(typeof U=="function"){y.callback=null,f=y.priorityLevel;var ee=U(y.expirationTime<=F);F=t.unstable_now(),typeof ee=="function"?y.callback=ee:y===r(o)&&a(o),v(F)}else a(o);y=r(o)}if(y!==null)var te=!0;else{var de=r(u);de!==null&&H(w,de.startTime-F),te=!1}return te}finally{y=null,f=G,h=!1}}var R=!1,S=null,I=-1,M=5,A=-1;function P(){return!(t.unstable_now()-A<M)}function C(){if(S!==null){var T=t.unstable_now();A=T;var F=!0;try{F=S(!0,T)}finally{F?k():(R=!1,S=null)}}else R=!1}var k;if(typeof x=="function")k=function(){x(C)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,W=E.port2;E.port1.onmessage=C,k=function(){W.postMessage(null)}}else k=function(){b(C,0)};function N(T){S=T,R||(R=!0,k())}function H(T,F){I=b(function(){T(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,N(_))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var G=f;f=F;try{return T()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,F){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var G=f;f=T;try{return F()}finally{f=G}},t.unstable_scheduleCallback=function(T,F,G){var U=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,T){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,T={id:p++,callback:F,priorityLevel:T,startTime:G,expirationTime:ee,sortIndex:-1},G>U?(T.sortIndex=G,s(u,T),r(o)===null&&T===r(u)&&(j?(m(I),I=-1):j=!0,H(w,G-U))):(T.sortIndex=ee,s(o,T),g||h||(g=!0,N(_))),T},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(T){var F=f;return function(){var G=f;f=F;try{return T.apply(this,arguments)}finally{f=G}}}})(om);im.exports=om;var Th=im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah=d,Rt=Th;function ae(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cm=new Set,Fa={};function gr(t,s){Wr(t,s),Wr(t+"Capture",s)}function Wr(t,s){for(Fa[t]=s,t=0;t<s.length;t++)cm.add(s[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=Object.prototype.hasOwnProperty,Eh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yc={},Xc={};function Lh(t){return Fi.call(Xc,t)?!0:Fi.call(Yc,t)?!1:Eh.test(t)?Xc[t]=!0:(Yc[t]=!0,!1)}function Fh(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mh(t,s,r,a){if(s===null||typeof s>"u"||Fh(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ht(t,s,r,a,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];st[s]=new ht(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jo=/[\-:]([a-z])/g;function Qo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Jo,Qo);st[s]=new ht(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Jo,Qo);st[s]=new ht(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Jo,Qo);st[s]=new ht(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ko(t,s,r,a){var n=st.hasOwnProperty(s)?st[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Mh(s,r,n,a)&&(r=null),a||n===null?Lh(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var vs=Ah.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fn=Symbol.for("react.element"),wr=Symbol.for("react.portal"),Sr=Symbol.for("react.fragment"),Zo=Symbol.for("react.strict_mode"),Mi=Symbol.for("react.profiler"),dm=Symbol.for("react.provider"),um=Symbol.for("react.context"),Yo=Symbol.for("react.forward_ref"),Di=Symbol.for("react.suspense"),$i=Symbol.for("react.suspense_list"),Xo=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),mm=Symbol.for("react.offscreen"),ed=Symbol.iterator;function ia(t){return t===null||typeof t!="object"?null:(t=ed&&t[ed]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,ti;function ya(t){if(ti===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ti=s&&s[1]||""}return`
`+ti+t}var si=!1;function ri(t,s){if(!t||si)return"";si=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(u){var a=u}Reflect.construct(t,[],s)}else{try{s.call()}catch(u){a=u}t.call(s.prototype)}else{try{throw Error()}catch(u){a=u}t()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),l=a.stack.split(`
`),i=n.length-1,c=l.length-1;1<=i&&0<=c&&n[i]!==l[c];)c--;for(;1<=i&&0<=c;i--,c--)if(n[i]!==l[c]){if(i!==1||c!==1)do if(i--,c--,0>c||n[i]!==l[c]){var o=`
`+n[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=c);break}}}finally{si=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ya(t):""}function Dh(t){switch(t.tag){case 5:return ya(t.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 2:case 15:return t=ri(t.type,!1),t;case 11:return t=ri(t.type.render,!1),t;case 1:return t=ri(t.type,!0),t;default:return""}}function Oi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sr:return"Fragment";case wr:return"Portal";case Mi:return"Profiler";case Zo:return"StrictMode";case Di:return"Suspense";case $i:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case um:return(t.displayName||"Context")+".Consumer";case dm:return(t._context.displayName||"Context")+".Provider";case Yo:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xo:return s=t.displayName||null,s!==null?s:Oi(t.type)||"Memo";case _s:s=t._payload,t=t._init;try{return Oi(t(s))}catch{}}return null}function $h(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oi(s);case 8:return s===Zo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Us(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Oh(t){var s=xm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function yn(t){t._valueTracker||(t._valueTracker=Oh(t))}function hm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=xm(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Xn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ii(t,s){var r=s.checked;return De({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function td(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Us(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function pm(t,s){s=s.checked,s!=null&&Ko(t,"checked",s,!1)}function qi(t,s){pm(t,s);var r=Us(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?zi(t,s.type,r):s.hasOwnProperty("defaultValue")&&zi(t,s.type,Us(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function sd(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zi(t,s,r){(s!=="number"||Xn(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ba=Array.isArray;function $r(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Us(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Bi(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ae(91));return De({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rd(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ae(92));if(ba(r)){if(1<r.length)throw Error(ae(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Us(r)}}function gm(t,s){var r=Us(s.value),a=Us(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function ad(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function fm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ui(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?fm(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bn,ym=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=bn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ma(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ih=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(t){Ih.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Na[s]=Na[t]})});function bm(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Na.hasOwnProperty(t)&&Na[t]?(""+s).trim():s+"px"}function jm(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=bm(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var qh=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hi(t,s){if(s){if(qh[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ae(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ae(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ae(62))}}function Wi(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=null;function ec(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,Or=null,Ir=null;function nd(t){if(t=ln(t)){if(typeof Gi!="function")throw Error(ae(280));var s=t.stateNode;s&&(s=Ll(s),Gi(t.stateNode,t.type,s))}}function vm(t){Or?Ir?Ir.push(t):Ir=[t]:Or=t}function Nm(){if(Or){var t=Or,s=Ir;if(Ir=Or=null,nd(t),s)for(t=0;t<s.length;t++)nd(s[t])}}function wm(t,s){return t(s)}function Sm(){}var ai=!1;function _m(t,s,r){if(ai)return t(s,r);ai=!0;try{return wm(t,s,r)}finally{ai=!1,(Or!==null||Ir!==null)&&(Sm(),Nm())}}function Da(t,s){var r=t.stateNode;if(r===null)return null;var a=Ll(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,s,typeof r));return r}var Ji=!1;if(ps)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Ji=!1}function zh(t,s,r,a,n,l,i,c,o){var u=Array.prototype.slice.call(arguments,3);try{s.apply(r,u)}catch(p){this.onError(p)}}var wa=!1,el=null,tl=!1,Qi=null,Bh={onError:function(t){wa=!0,el=t}};function Uh(t,s,r,a,n,l,i,c,o){wa=!1,el=null,zh.apply(Bh,arguments)}function Hh(t,s,r,a,n,l,i,c,o){if(Uh.apply(this,arguments),wa){if(wa){var u=el;wa=!1,el=null}else throw Error(ae(198));tl||(tl=!0,Qi=u)}}function fr(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function km(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ld(t){if(fr(t)!==t)throw Error(ae(188))}function Wh(t){var s=t.alternate;if(!s){if(s=fr(t),s===null)throw Error(ae(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return ld(n),t;if(l===a)return ld(n),s;l=l.sibling}throw Error(ae(188))}if(r.return!==a.return)r=n,a=l;else{for(var i=!1,c=n.child;c;){if(c===r){i=!0,r=n,a=l;break}if(c===a){i=!0,a=n,r=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===r){i=!0,r=l,a=n;break}if(c===a){i=!0,a=l,r=n;break}c=c.sibling}if(!i)throw Error(ae(189))}}if(r.alternate!==a)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:s}function Cm(t){return t=Wh(t),t!==null?Rm(t):null}function Rm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Rm(t);if(s!==null)return s;t=t.sibling}return null}var Pm=Rt.unstable_scheduleCallback,id=Rt.unstable_cancelCallback,Vh=Rt.unstable_shouldYield,Gh=Rt.unstable_requestPaint,Oe=Rt.unstable_now,Jh=Rt.unstable_getCurrentPriorityLevel,tc=Rt.unstable_ImmediatePriority,Tm=Rt.unstable_UserBlockingPriority,sl=Rt.unstable_NormalPriority,Qh=Rt.unstable_LowPriority,Am=Rt.unstable_IdlePriority,Pl=null,rs=null;function Kh(t){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Pl,t,void 0,(t.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Xh,Zh=Math.log,Yh=Math.LN2;function Xh(t){return t>>>=0,t===0?32:31-(Zh(t)/Yh|0)|0}var jn=64,vn=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rl(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var c=i&~n;c!==0?a=ja(c):(l&=i,l!==0&&(a=ja(l)))}else i=r&~n,i!==0?a=ja(i):l!==0&&(a=ja(l));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-Vt(s),n=1<<r,a|=t[r],s&=~n;return a}function ep(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Vt(l),c=1<<i,o=n[i];o===-1?(!(c&r)||c&a)&&(n[i]=ep(c,s)):o<=s&&(t.expiredLanes|=c),l&=~c}}function Ki(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Em(){var t=jn;return jn<<=1,!(jn&4194240)&&(jn=64),t}function ni(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function an(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Vt(s),t[s]=r}function sp(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Vt(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function sc(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-Vt(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Se=0;function Lm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fm,rc,Mm,Dm,$m,Zi=!1,Nn=[],Es=null,Ls=null,Fs=null,$a=new Map,Oa=new Map,Cs=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(t,s){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":$a.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oa.delete(s.pointerId)}}function ca(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=ln(s),s!==null&&rc(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function ap(t,s,r,a,n){switch(s){case"focusin":return Es=ca(Es,t,s,r,a,n),!0;case"dragenter":return Ls=ca(Ls,t,s,r,a,n),!0;case"mouseover":return Fs=ca(Fs,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return $a.set(l,ca($a.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,Oa.set(l,ca(Oa.get(l)||null,t,s,r,a,n)),!0}return!1}function Om(t){var s=er(t.target);if(s!==null){var r=fr(s);if(r!==null){if(s=r.tag,s===13){if(s=km(r),s!==null){t.blockedOn=s,$m(t.priority,function(){Mm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function On(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Yi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Vi=a,r.target.dispatchEvent(a),Vi=null}else return s=ln(r),s!==null&&rc(s),t.blockedOn=r,!1;s.shift()}return!0}function cd(t,s,r){On(t)&&r.delete(s)}function np(){Zi=!1,Es!==null&&On(Es)&&(Es=null),Ls!==null&&On(Ls)&&(Ls=null),Fs!==null&&On(Fs)&&(Fs=null),$a.forEach(cd),Oa.forEach(cd)}function da(t,s){t.blockedOn===s&&(t.blockedOn=null,Zi||(Zi=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,np)))}function Ia(t){function s(n){return da(n,t)}if(0<Nn.length){da(Nn[0],t);for(var r=1;r<Nn.length;r++){var a=Nn[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Es!==null&&da(Es,t),Ls!==null&&da(Ls,t),Fs!==null&&da(Fs,t),$a.forEach(s),Oa.forEach(s),r=0;r<Cs.length;r++)a=Cs[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Cs.length&&(r=Cs[0],r.blockedOn===null);)Om(r),r.blockedOn===null&&Cs.shift()}var qr=vs.ReactCurrentBatchConfig,al=!0;function lp(t,s,r,a){var n=Se,l=qr.transition;qr.transition=null;try{Se=1,ac(t,s,r,a)}finally{Se=n,qr.transition=l}}function ip(t,s,r,a){var n=Se,l=qr.transition;qr.transition=null;try{Se=4,ac(t,s,r,a)}finally{Se=n,qr.transition=l}}function ac(t,s,r,a){if(al){var n=Yi(t,s,r,a);if(n===null)pi(t,s,a,nl,r),od(t,a);else if(ap(n,t,s,r,a))a.stopPropagation();else if(od(t,a),s&4&&-1<rp.indexOf(t)){for(;n!==null;){var l=ln(n);if(l!==null&&Fm(l),l=Yi(t,s,r,a),l===null&&pi(t,s,a,nl,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else pi(t,s,a,null,r)}}var nl=null;function Yi(t,s,r,a){if(nl=null,t=ec(a),t=er(t),t!==null)if(s=fr(t),s===null)t=null;else if(r=s.tag,r===13){if(t=km(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return nl=t,null}function Im(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jh()){case tc:return 1;case Tm:return 4;case sl:case Qh:return 16;case Am:return 536870912;default:return 16}default:return 16}}var Ps=null,nc=null,In=null;function qm(){if(In)return In;var t,s=nc,r=s.length,a,n="value"in Ps?Ps.value:Ps.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var i=r-t;for(a=1;a<=i&&s[r-a]===n[l-a];a++);return In=n.slice(t,1<a?1-a:void 0)}function qn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function wn(){return!0}function dd(){return!1}function Tt(t){function s(r,a,n,l,i){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?wn:dd,this.isPropagationStopped=dd,this}return De(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),s}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Tt(ea),nn=De({},ea,{view:0,detail:0}),op=Tt(nn),li,ii,ua,Tl=De({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ua&&(ua&&t.type==="mousemove"?(li=t.screenX-ua.screenX,ii=t.screenY-ua.screenY):ii=li=0,ua=t),li)},movementY:function(t){return"movementY"in t?t.movementY:ii}}),ud=Tt(Tl),cp=De({},Tl,{dataTransfer:0}),dp=Tt(cp),up=De({},nn,{relatedTarget:0}),oi=Tt(up),mp=De({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),xp=Tt(mp),hp=De({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pp=Tt(hp),gp=De({},ea,{data:0}),md=Tt(gp),fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jp(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=bp[t])?!!s[t]:!1}function ic(){return jp}var vp=De({},nn,{key:function(t){if(t.key){var s=fp[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=qn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(t){return t.type==="keypress"?qn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Np=Tt(vp),wp=De({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Tt(wp),Sp=De({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),_p=Tt(Sp),kp=De({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cp=Tt(kp),Rp=De({},Tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pp=Tt(Rp),Tp=[9,13,27,32],oc=ps&&"CompositionEvent"in window,Sa=null;ps&&"documentMode"in document&&(Sa=document.documentMode);var Ap=ps&&"TextEvent"in window&&!Sa,zm=ps&&(!oc||Sa&&8<Sa&&11>=Sa),hd=" ",pd=!1;function Bm(t,s){switch(t){case"keyup":return Tp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _r=!1;function Ep(t,s){switch(t){case"compositionend":return Um(s);case"keypress":return s.which!==32?null:(pd=!0,hd);case"textInput":return t=s.data,t===hd&&pd?null:t;default:return null}}function Lp(t,s){if(_r)return t==="compositionend"||!oc&&Bm(t,s)?(t=qm(),In=nc=Ps=null,_r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zm&&s.locale!=="ko"?null:s.data;default:return null}}var Fp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Fp[t.type]:s==="textarea"}function Hm(t,s,r,a){vm(a),s=ll(s,"onChange"),0<s.length&&(r=new lc("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var _a=null,qa=null;function Mp(t){tx(t,0)}function Al(t){var s=Rr(t);if(hm(s))return t}function Dp(t,s){if(t==="change")return s}var Wm=!1;if(ps){var ci;if(ps){var di="oninput"in document;if(!di){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),di=typeof fd.oninput=="function"}ci=di}else ci=!1;Wm=ci&&(!document.documentMode||9<document.documentMode)}function yd(){_a&&(_a.detachEvent("onpropertychange",Vm),qa=_a=null)}function Vm(t){if(t.propertyName==="value"&&Al(qa)){var s=[];Hm(s,qa,t,ec(t)),_m(Mp,s)}}function $p(t,s,r){t==="focusin"?(yd(),_a=s,qa=r,_a.attachEvent("onpropertychange",Vm)):t==="focusout"&&yd()}function Op(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(qa)}function Ip(t,s){if(t==="click")return Al(s)}function qp(t,s){if(t==="input"||t==="change")return Al(s)}function zp(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Kt=typeof Object.is=="function"?Object.is:zp;function za(t,s){if(Kt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Fi.call(s,n)||!Kt(t[n],s[n]))return!1}return!0}function bd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jd(t,s){var r=bd(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bd(r)}}function Gm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Gm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Jm(){for(var t=window,s=Xn();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Xn(t.document)}return s}function cc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Bp(t){var s=Jm(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Gm(r.ownerDocument.documentElement,r)){if(a!==null&&cc(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=jd(r,l);var i=jd(r,a);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Up=ps&&"documentMode"in document&&11>=document.documentMode,kr=null,Xi=null,ka=null,eo=!1;function vd(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eo||kr==null||kr!==Xn(a)||(a=kr,"selectionStart"in a&&cc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ka&&za(ka,a)||(ka=a,a=ll(Xi,"onSelect"),0<a.length&&(s=new lc("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=kr)))}function Sn(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Cr={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionend:Sn("Transition","TransitionEnd")},ui={},Qm={};ps&&(Qm=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function El(t){if(ui[t])return ui[t];if(!Cr[t])return t;var s=Cr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Qm)return ui[t]=s[r];return t}var Km=El("animationend"),Zm=El("animationiteration"),Ym=El("animationstart"),Xm=El("transitionend"),ex=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(t,s){ex.set(t,s),gr(s,[t])}for(var mi=0;mi<Nd.length;mi++){var xi=Nd[mi],Hp=xi.toLowerCase(),Wp=xi[0].toUpperCase()+xi.slice(1);Vs(Hp,"on"+Wp)}Vs(Km,"onAnimationEnd");Vs(Zm,"onAnimationIteration");Vs(Ym,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(Xm,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vp=new Set("cancel close invalid load scroll toggle".split(" ").concat(va));function wd(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,Hh(a,s,void 0,t),t.currentTarget=null}function tx(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var i=a.length-1;0<=i;i--){var c=a[i],o=c.instance,u=c.currentTarget;if(c=c.listener,o!==l&&n.isPropagationStopped())break e;wd(n,c,u),l=o}else for(i=0;i<a.length;i++){if(c=a[i],o=c.instance,u=c.currentTarget,c=c.listener,o!==l&&n.isPropagationStopped())break e;wd(n,c,u),l=o}}}if(tl)throw t=Qi,tl=!1,Qi=null,t}function Re(t,s){var r=s[no];r===void 0&&(r=s[no]=new Set);var a=t+"__bubble";r.has(a)||(sx(s,t,2,!1),r.add(a))}function hi(t,s,r){var a=0;s&&(a|=4),sx(r,t,a,s)}var _n="_reactListening"+Math.random().toString(36).slice(2);function Ba(t){if(!t[_n]){t[_n]=!0,cm.forEach(function(r){r!=="selectionchange"&&(Vp.has(r)||hi(r,!1,t),hi(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[_n]||(s[_n]=!0,hi("selectionchange",!1,s))}}function sx(t,s,r,a){switch(Im(s)){case 1:var n=lp;break;case 4:n=ip;break;default:n=ac}r=n.bind(null,s,r,t),n=void 0,!Ji||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function pi(t,s,r,a,n){var l=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var c=a.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;i=i.return}for(;c!==null;){if(i=er(c),i===null)return;if(o=i.tag,o===5||o===6){a=l=i;continue e}c=c.parentNode}}a=a.return}_m(function(){var u=l,p=ec(r),y=[];e:{var f=ex.get(t);if(f!==void 0){var h=lc,g=t;switch(t){case"keypress":if(qn(r)===0)break e;case"keydown":case"keyup":h=Np;break;case"focusin":g="focus",h=oi;break;case"focusout":g="blur",h=oi;break;case"beforeblur":case"afterblur":h=oi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=_p;break;case Km:case Zm:case Ym:h=xp;break;case Xm:h=Cp;break;case"scroll":h=op;break;case"wheel":h=Pp;break;case"copy":case"cut":case"paste":h=pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xd}var j=(s&4)!==0,b=!j&&t==="scroll",m=j?f!==null?f+"Capture":null:f;j=[];for(var x=u,v;x!==null;){v=x;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,m!==null&&(w=Da(x,m),w!=null&&j.push(Ua(x,w,v)))),b)break;x=x.return}0<j.length&&(f=new h(f,g,null,r,p),y.push({event:f,listeners:j}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==Vi&&(g=r.relatedTarget||r.fromElement)&&(er(g)||g[gs]))break e;if((h||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=r.relatedTarget||r.toElement,h=u,g=g?er(g):null,g!==null&&(b=fr(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(j=ud,w="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(j=xd,w="onPointerLeave",m="onPointerEnter",x="pointer"),b=h==null?f:Rr(h),v=g==null?f:Rr(g),f=new j(w,x+"leave",h,r,p),f.target=b,f.relatedTarget=v,w=null,er(p)===u&&(j=new j(m,x+"enter",g,r,p),j.target=v,j.relatedTarget=b,w=j),b=w,h&&g)t:{for(j=h,m=g,x=0,v=j;v;v=vr(v))x++;for(v=0,w=m;w;w=vr(w))v++;for(;0<x-v;)j=vr(j),x--;for(;0<v-x;)m=vr(m),v--;for(;x--;){if(j===m||m!==null&&j===m.alternate)break t;j=vr(j),m=vr(m)}j=null}else j=null;h!==null&&Sd(y,f,h,j,!1),g!==null&&b!==null&&Sd(y,b,g,j,!0)}}e:{if(f=u?Rr(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=Dp;else if(gd(f))if(Wm)_=qp;else{_=Op;var R=$p}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Ip);if(_&&(_=_(t,u))){Hm(y,_,r,p);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&zi(f,"number",f.value)}switch(R=u?Rr(u):window,t){case"focusin":(gd(R)||R.contentEditable==="true")&&(kr=R,Xi=u,ka=null);break;case"focusout":ka=Xi=kr=null;break;case"mousedown":eo=!0;break;case"contextmenu":case"mouseup":case"dragend":eo=!1,vd(y,r,p);break;case"selectionchange":if(Up)break;case"keydown":case"keyup":vd(y,r,p)}var S;if(oc)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _r?Bm(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(zm&&r.locale!=="ko"&&(_r||I!=="onCompositionStart"?I==="onCompositionEnd"&&_r&&(S=qm()):(Ps=p,nc="value"in Ps?Ps.value:Ps.textContent,_r=!0)),R=ll(u,I),0<R.length&&(I=new md(I,t,null,r,p),y.push({event:I,listeners:R}),S?I.data=S:(S=Um(r),S!==null&&(I.data=S)))),(S=Ap?Ep(t,r):Lp(t,r))&&(u=ll(u,"onBeforeInput"),0<u.length&&(p=new md("onBeforeInput","beforeinput",null,r,p),y.push({event:p,listeners:u}),p.data=S))}tx(y,s)})}function Ua(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ll(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Da(t,r),l!=null&&a.unshift(Ua(t,l,n)),l=Da(t,s),l!=null&&a.push(Ua(t,l,n))),t=t.return}return a}function vr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sd(t,s,r,a,n){for(var l=s._reactName,i=[];r!==null&&r!==a;){var c=r,o=c.alternate,u=c.stateNode;if(o!==null&&o===a)break;c.tag===5&&u!==null&&(c=u,n?(o=Da(r,l),o!=null&&i.unshift(Ua(r,o,c))):n||(o=Da(r,l),o!=null&&i.push(Ua(r,o,c)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var Gp=/\r\n?/g,Jp=/\u0000|\uFFFD/g;function _d(t){return(typeof t=="string"?t:""+t).replace(Gp,`
`).replace(Jp,"")}function kn(t,s,r){if(s=_d(s),_d(t)!==s&&r)throw Error(ae(425))}function il(){}var to=null,so=null;function ro(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ao=typeof setTimeout=="function"?setTimeout:void 0,Qp=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,Kp=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(Zp)}:ao;function Zp(t){setTimeout(function(){throw t})}function gi(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Ia(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Ia(s)}function Ms(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Cd(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),ss="__reactFiber$"+ta,Ha="__reactProps$"+ta,gs="__reactContainer$"+ta,no="__reactEvents$"+ta,Yp="__reactListeners$"+ta,Xp="__reactHandles$"+ta;function er(t){var s=t[ss];if(s)return s;for(var r=t.parentNode;r;){if(s=r[gs]||r[ss]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Cd(t);t!==null;){if(r=t[ss])return r;t=Cd(t)}return s}t=r,r=t.parentNode}return null}function ln(t){return t=t[ss]||t[gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Ll(t){return t[Ha]||null}var lo=[],Pr=-1;function Gs(t){return{current:t}}function Te(t){0>Pr||(t.current=lo[Pr],lo[Pr]=null,Pr--)}function _e(t,s){Pr++,lo[Pr]=t.current,t.current=s}var Hs={},ot=Gs(Hs),yt=Gs(!1),or=Hs;function Vr(t,s){var r=t.type.contextTypes;if(!r)return Hs;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function bt(t){return t=t.childContextTypes,t!=null}function ol(){Te(yt),Te(ot)}function Rd(t,s,r){if(ot.current!==Hs)throw Error(ae(168));_e(ot,s),_e(yt,r)}function rx(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(ae(108,$h(t)||"Unknown",n));return De({},r,a)}function cl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hs,or=ot.current,_e(ot,t),_e(yt,yt.current),!0}function Pd(t,s,r){var a=t.stateNode;if(!a)throw Error(ae(169));r?(t=rx(t,s,or),a.__reactInternalMemoizedMergedChildContext=t,Te(yt),Te(ot),_e(ot,t)):Te(yt),_e(yt,r)}var ds=null,Fl=!1,fi=!1;function ax(t){ds===null?ds=[t]:ds.push(t)}function eg(t){Fl=!0,ax(t)}function Js(){if(!fi&&ds!==null){fi=!0;var t=0,s=Se;try{var r=ds;for(Se=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}ds=null,Fl=!1}catch(n){throw ds!==null&&(ds=ds.slice(t+1)),Pm(tc,Js),n}finally{Se=s,fi=!1}}return null}var Tr=[],Ar=0,dl=null,ul=0,Lt=[],Ft=0,cr=null,ms=1,xs="";function Zs(t,s){Tr[Ar++]=ul,Tr[Ar++]=dl,dl=t,ul=s}function nx(t,s,r){Lt[Ft++]=ms,Lt[Ft++]=xs,Lt[Ft++]=cr,cr=t;var a=ms;t=xs;var n=32-Vt(a)-1;a&=~(1<<n),r+=1;var l=32-Vt(s)+n;if(30<l){var i=n-n%5;l=(a&(1<<i)-1).toString(32),a>>=i,n-=i,ms=1<<32-Vt(s)+n|r<<n|a,xs=l+t}else ms=1<<l|r<<n|a,xs=t}function dc(t){t.return!==null&&(Zs(t,1),nx(t,1,0))}function uc(t){for(;t===dl;)dl=Tr[--Ar],Tr[Ar]=null,ul=Tr[--Ar],Tr[Ar]=null;for(;t===cr;)cr=Lt[--Ft],Lt[Ft]=null,xs=Lt[--Ft],Lt[Ft]=null,ms=Lt[--Ft],Lt[Ft]=null}var kt=null,_t=null,Ee=!1,Ht=null;function lx(t,s){var r=Dt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Td(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,kt=t,_t=Ms(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,kt=t,_t=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=cr!==null?{id:ms,overflow:xs}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Dt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,kt=t,_t=null,!0):!1;default:return!1}}function io(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oo(t){if(Ee){var s=_t;if(s){var r=s;if(!Td(t,s)){if(io(t))throw Error(ae(418));s=Ms(r.nextSibling);var a=kt;s&&Td(t,s)?lx(a,r):(t.flags=t.flags&-4097|2,Ee=!1,kt=t)}}else{if(io(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Ee=!1,kt=t}}}function Ad(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function Cn(t){if(t!==kt)return!1;if(!Ee)return Ad(t),Ee=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ro(t.type,t.memoizedProps)),s&&(s=_t)){if(io(t))throw ix(),Error(ae(418));for(;s;)lx(t,s),s=Ms(s.nextSibling)}if(Ad(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){_t=Ms(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}_t=null}}else _t=kt?Ms(t.stateNode.nextSibling):null;return!0}function ix(){for(var t=_t;t;)t=Ms(t.nextSibling)}function Gr(){_t=kt=null,Ee=!1}function mc(t){Ht===null?Ht=[t]:Ht.push(t)}var tg=vs.ReactCurrentBatchConfig;function ma(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var a=r.stateNode}if(!a)throw Error(ae(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var c=n.refs;i===null?delete c[l]:c[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Rn(t,s){throw t=Object.prototype.toString.call(s),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Ed(t){var s=t._init;return s(t._payload)}function ox(t){function s(m,x){if(t){var v=m.deletions;v===null?(m.deletions=[x],m.flags|=16):v.push(x)}}function r(m,x){if(!t)return null;for(;x!==null;)s(m,x),x=x.sibling;return null}function a(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function n(m,x){return m=Is(m,x),m.index=0,m.sibling=null,m}function l(m,x,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<x?(m.flags|=2,x):v):(m.flags|=2,x)):(m.flags|=1048576,x)}function i(m){return t&&m.alternate===null&&(m.flags|=2),m}function c(m,x,v,w){return x===null||x.tag!==6?(x=Si(v,m.mode,w),x.return=m,x):(x=n(x,v),x.return=m,x)}function o(m,x,v,w){var _=v.type;return _===Sr?p(m,x,v.props.children,w,v.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_s&&Ed(_)===x.type)?(w=n(x,v.props),w.ref=ma(m,x,v),w.return=m,w):(w=Gn(v.type,v.key,v.props,null,m.mode,w),w.ref=ma(m,x,v),w.return=m,w)}function u(m,x,v,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=_i(v,m.mode,w),x.return=m,x):(x=n(x,v.children||[]),x.return=m,x)}function p(m,x,v,w,_){return x===null||x.tag!==7?(x=nr(v,m.mode,w,_),x.return=m,x):(x=n(x,v),x.return=m,x)}function y(m,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Si(""+x,m.mode,v),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fn:return v=Gn(x.type,x.key,x.props,null,m.mode,v),v.ref=ma(m,null,x),v.return=m,v;case wr:return x=_i(x,m.mode,v),x.return=m,x;case _s:var w=x._init;return y(m,w(x._payload),v)}if(ba(x)||ia(x))return x=nr(x,m.mode,v,null),x.return=m,x;Rn(m,x)}return null}function f(m,x,v,w){var _=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:c(m,x,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fn:return v.key===_?o(m,x,v,w):null;case wr:return v.key===_?u(m,x,v,w):null;case _s:return _=v._init,f(m,x,_(v._payload),w)}if(ba(v)||ia(v))return _!==null?null:p(m,x,v,w,null);Rn(m,v)}return null}function h(m,x,v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(v)||null,c(x,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fn:return m=m.get(w.key===null?v:w.key)||null,o(x,m,w,_);case wr:return m=m.get(w.key===null?v:w.key)||null,u(x,m,w,_);case _s:var R=w._init;return h(m,x,v,R(w._payload),_)}if(ba(w)||ia(w))return m=m.get(v)||null,p(x,m,w,_,null);Rn(x,w)}return null}function g(m,x,v,w){for(var _=null,R=null,S=x,I=x=0,M=null;S!==null&&I<v.length;I++){S.index>I?(M=S,S=null):M=S.sibling;var A=f(m,S,v[I],w);if(A===null){S===null&&(S=M);break}t&&S&&A.alternate===null&&s(m,S),x=l(A,x,I),R===null?_=A:R.sibling=A,R=A,S=M}if(I===v.length)return r(m,S),Ee&&Zs(m,I),_;if(S===null){for(;I<v.length;I++)S=y(m,v[I],w),S!==null&&(x=l(S,x,I),R===null?_=S:R.sibling=S,R=S);return Ee&&Zs(m,I),_}for(S=a(m,S);I<v.length;I++)M=h(S,m,I,v[I],w),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?I:M.key),x=l(M,x,I),R===null?_=M:R.sibling=M,R=M);return t&&S.forEach(function(P){return s(m,P)}),Ee&&Zs(m,I),_}function j(m,x,v,w){var _=ia(v);if(typeof _!="function")throw Error(ae(150));if(v=_.call(v),v==null)throw Error(ae(151));for(var R=_=null,S=x,I=x=0,M=null,A=v.next();S!==null&&!A.done;I++,A=v.next()){S.index>I?(M=S,S=null):M=S.sibling;var P=f(m,S,A.value,w);if(P===null){S===null&&(S=M);break}t&&S&&P.alternate===null&&s(m,S),x=l(P,x,I),R===null?_=P:R.sibling=P,R=P,S=M}if(A.done)return r(m,S),Ee&&Zs(m,I),_;if(S===null){for(;!A.done;I++,A=v.next())A=y(m,A.value,w),A!==null&&(x=l(A,x,I),R===null?_=A:R.sibling=A,R=A);return Ee&&Zs(m,I),_}for(S=a(m,S);!A.done;I++,A=v.next())A=h(S,m,I,A.value,w),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?I:A.key),x=l(A,x,I),R===null?_=A:R.sibling=A,R=A);return t&&S.forEach(function(C){return s(m,C)}),Ee&&Zs(m,I),_}function b(m,x,v,w){if(typeof v=="object"&&v!==null&&v.type===Sr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case fn:e:{for(var _=v.key,R=x;R!==null;){if(R.key===_){if(_=v.type,_===Sr){if(R.tag===7){r(m,R.sibling),x=n(R,v.props.children),x.return=m,m=x;break e}}else if(R.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_s&&Ed(_)===R.type){r(m,R.sibling),x=n(R,v.props),x.ref=ma(m,R,v),x.return=m,m=x;break e}r(m,R);break}else s(m,R);R=R.sibling}v.type===Sr?(x=nr(v.props.children,m.mode,w,v.key),x.return=m,m=x):(w=Gn(v.type,v.key,v.props,null,m.mode,w),w.ref=ma(m,x,v),w.return=m,m=w)}return i(m);case wr:e:{for(R=v.key;x!==null;){if(x.key===R)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){r(m,x.sibling),x=n(x,v.children||[]),x.return=m,m=x;break e}else{r(m,x);break}else s(m,x);x=x.sibling}x=_i(v,m.mode,w),x.return=m,m=x}return i(m);case _s:return R=v._init,b(m,x,R(v._payload),w)}if(ba(v))return g(m,x,v,w);if(ia(v))return j(m,x,v,w);Rn(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(r(m,x.sibling),x=n(x,v),x.return=m,m=x):(r(m,x),x=Si(v,m.mode,w),x.return=m,m=x),i(m)):r(m,x)}return b}var Jr=ox(!0),cx=ox(!1),ml=Gs(null),xl=null,Er=null,xc=null;function hc(){xc=Er=xl=null}function pc(t){var s=ml.current;Te(ml),t._currentValue=s}function co(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function zr(t,s){xl=t,xc=Er=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(ft=!0),t.firstContext=null)}function It(t){var s=t._currentValue;if(xc!==t)if(t={context:t,memoizedValue:s,next:null},Er===null){if(xl===null)throw Error(ae(308));Er=t,xl.dependencies={lanes:0,firstContext:t}}else Er=Er.next=t;return s}var tr=null;function gc(t){tr===null?tr=[t]:tr.push(t)}function dx(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,gc(s)):(r.next=n.next,n.next=r),s.interleaved=r,fs(t,a)}function fs(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ks=!1;function fc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ux(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ds(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,ve&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,fs(t,r)}return n=a.interleaved,n===null?(s.next=s,gc(a)):(s.next=n.next,n.next=s),a.interleaved=s,fs(t,r)}function zn(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,sc(t,r)}}function Ld(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function hl(t,s,r,a){var n=t.updateQueue;ks=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var o=c,u=o.next;o.next=null,i===null?l=u:i.next=u,i=o;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==i&&(c===null?p.firstBaseUpdate=u:c.next=u,p.lastBaseUpdate=o))}if(l!==null){var y=n.baseState;i=0,p=u=o=null,c=l;do{var f=c.lane,h=c.eventTime;if((a&f)===f){p!==null&&(p=p.next={eventTime:h,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=t,j=c;switch(f=s,h=r,j.tag){case 1:if(g=j.payload,typeof g=="function"){y=g.call(h,y,f);break e}y=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=j.payload,f=typeof g=="function"?g.call(h,y,f):g,f==null)break e;y=De({},y,f);break e;case 2:ks=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[c]:f.push(c))}else h={eventTime:h,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(u=p=h,o=y):p=p.next=h,i|=f;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;f=c,c=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(p===null&&(o=y),n.baseState=o,n.firstBaseUpdate=u,n.lastBaseUpdate=p,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);ur|=i,t.lanes=i,t.memoizedState=y}}function Fd(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ae(191,n));n.call(a)}}}var on={},as=Gs(on),Wa=Gs(on),Va=Gs(on);function sr(t){if(t===on)throw Error(ae(174));return t}function yc(t,s){switch(_e(Va,s),_e(Wa,t),_e(as,on),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ui(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ui(s,t)}Te(as),_e(as,s)}function Qr(){Te(as),Te(Wa),Te(Va)}function mx(t){sr(Va.current);var s=sr(as.current),r=Ui(s,t.type);s!==r&&(_e(Wa,t),_e(as,r))}function bc(t){Wa.current===t&&(Te(as),Te(Wa))}var Fe=Gs(0);function pl(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yi=[];function jc(){for(var t=0;t<yi.length;t++)yi[t]._workInProgressVersionPrimary=null;yi.length=0}var Bn=vs.ReactCurrentDispatcher,bi=vs.ReactCurrentBatchConfig,dr=0,Me=null,Ge=null,Ye=null,gl=!1,Ca=!1,Ga=0,sg=0;function at(){throw Error(ae(321))}function vc(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Kt(t[r],s[r]))return!1;return!0}function Nc(t,s,r,a,n,l){if(dr=l,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Bn.current=t===null||t.memoizedState===null?lg:ig,t=r(a,n),Ca){l=0;do{if(Ca=!1,Ga=0,25<=l)throw Error(ae(301));l+=1,Ye=Ge=null,s.updateQueue=null,Bn.current=og,t=r(a,n)}while(Ca)}if(Bn.current=fl,s=Ge!==null&&Ge.next!==null,dr=0,Ye=Ge=Me=null,gl=!1,s)throw Error(ae(300));return t}function wc(){var t=Ga!==0;return Ga=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Me.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function qt(){if(Ge===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var s=Ye===null?Me.memoizedState:Ye.next;if(s!==null)Ye=s,Ge=t;else{if(t===null)throw Error(ae(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ye===null?Me.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Ja(t,s){return typeof s=="function"?s(t):s}function ji(t){var s=qt(),r=s.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var a=Ge,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var c=i=null,o=null,u=l;do{var p=u.lane;if((dr&p)===p)o!==null&&(o=o.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:t(a,u.action);else{var y={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};o===null?(c=o=y,i=a):o=o.next=y,Me.lanes|=p,ur|=p}u=u.next}while(u!==null&&u!==l);o===null?i=a:o.next=c,Kt(a,s.memoizedState)||(ft=!0),s.memoizedState=a,s.baseState=i,s.baseQueue=o,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,Me.lanes|=l,ur|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function vi(t){var s=qt(),r=s.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);Kt(l,s.memoizedState)||(ft=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function xx(){}function hx(t,s){var r=Me,a=qt(),n=s(),l=!Kt(a.memoizedState,n);if(l&&(a.memoizedState=n,ft=!0),a=a.queue,Sc(fx.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,Qa(9,gx.bind(null,r,a,n,s),void 0,null),Xe===null)throw Error(ae(349));dr&30||px(r,s,n)}return n}function px(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Me.updateQueue,s===null?(s={lastEffect:null,stores:null},Me.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function gx(t,s,r,a){s.value=r,s.getSnapshot=a,yx(s)&&bx(t)}function fx(t,s,r){return r(function(){yx(s)&&bx(t)})}function yx(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Kt(t,r)}catch{return!0}}function bx(t){var s=fs(t,1);s!==null&&Gt(s,t,1,-1)}function Md(t){var s=ts();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},s.queue=t,t=t.dispatch=ng.bind(null,Me,t),[s.memoizedState,t]}function Qa(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Me.updateQueue,s===null?(s={lastEffect:null,stores:null},Me.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function jx(){return qt().memoizedState}function Un(t,s,r,a){var n=ts();Me.flags|=t,n.memoizedState=Qa(1|s,r,void 0,a===void 0?null:a)}function Ml(t,s,r,a){var n=qt();a=a===void 0?null:a;var l=void 0;if(Ge!==null){var i=Ge.memoizedState;if(l=i.destroy,a!==null&&vc(a,i.deps)){n.memoizedState=Qa(s,r,l,a);return}}Me.flags|=t,n.memoizedState=Qa(1|s,r,l,a)}function Dd(t,s){return Un(8390656,8,t,s)}function Sc(t,s){return Ml(2048,8,t,s)}function vx(t,s){return Ml(4,2,t,s)}function Nx(t,s){return Ml(4,4,t,s)}function wx(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Sx(t,s,r){return r=r!=null?r.concat([t]):null,Ml(4,4,wx.bind(null,s,t),r)}function _c(){}function _x(t,s){var r=qt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&vc(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function kx(t,s){var r=qt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&vc(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function Cx(t,s,r){return dr&21?(Kt(r,s)||(r=Em(),Me.lanes|=r,ur|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=r)}function rg(t,s){var r=Se;Se=r!==0&&4>r?r:4,t(!0);var a=bi.transition;bi.transition={};try{t(!1),s()}finally{Se=r,bi.transition=a}}function Rx(){return qt().memoizedState}function ag(t,s,r){var a=Os(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Px(t))Tx(s,r);else if(r=dx(t,s,r,a),r!==null){var n=mt();Gt(r,t,a,n),Ax(r,s,a)}}function ng(t,s,r){var a=Os(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Px(t))Tx(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,c=l(i,r);if(n.hasEagerState=!0,n.eagerState=c,Kt(c,i)){var o=s.interleaved;o===null?(n.next=n,gc(s)):(n.next=o.next,o.next=n),s.interleaved=n;return}}catch{}finally{}r=dx(t,s,n,a),r!==null&&(n=mt(),Gt(r,t,a,n),Ax(r,s,a))}}function Px(t){var s=t.alternate;return t===Me||s!==null&&s===Me}function Tx(t,s){Ca=gl=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Ax(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,sc(t,r)}}var fl={readContext:It,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},lg={readContext:It,useCallback:function(t,s){return ts().memoizedState=[t,s===void 0?null:s],t},useContext:It,useEffect:Dd,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Un(4194308,4,wx.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Un(4194308,4,t,s)},useInsertionEffect:function(t,s){return Un(4,2,t,s)},useMemo:function(t,s){var r=ts();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=ts();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=ag.bind(null,Me,t),[a.memoizedState,t]},useRef:function(t){var s=ts();return t={current:t},s.memoizedState=t},useState:Md,useDebugValue:_c,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=Md(!1),s=t[0];return t=rg.bind(null,t[1]),ts().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Me,n=ts();if(Ee){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=s(),Xe===null)throw Error(ae(349));dr&30||px(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,Dd(fx.bind(null,a,l,t),[t]),a.flags|=2048,Qa(9,gx.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=ts(),s=Xe.identifierPrefix;if(Ee){var r=xs,a=ms;r=(a&~(1<<32-Vt(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=Ga++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=sg++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},ig={readContext:It,useCallback:_x,useContext:It,useEffect:Sc,useImperativeHandle:Sx,useInsertionEffect:vx,useLayoutEffect:Nx,useMemo:kx,useReducer:ji,useRef:jx,useState:function(){return ji(Ja)},useDebugValue:_c,useDeferredValue:function(t){var s=qt();return Cx(s,Ge.memoizedState,t)},useTransition:function(){var t=ji(Ja)[0],s=qt().memoizedState;return[t,s]},useMutableSource:xx,useSyncExternalStore:hx,useId:Rx,unstable_isNewReconciler:!1},og={readContext:It,useCallback:_x,useContext:It,useEffect:Sc,useImperativeHandle:Sx,useInsertionEffect:vx,useLayoutEffect:Nx,useMemo:kx,useReducer:vi,useRef:jx,useState:function(){return vi(Ja)},useDebugValue:_c,useDeferredValue:function(t){var s=qt();return Ge===null?s.memoizedState=t:Cx(s,Ge.memoizedState,t)},useTransition:function(){var t=vi(Ja)[0],s=qt().memoizedState;return[t,s]},useMutableSource:xx,useSyncExternalStore:hx,useId:Rx,unstable_isNewReconciler:!1};function Bt(t,s){if(t&&t.defaultProps){s=De({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function uo(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:De({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Dl={isMounted:function(t){return(t=t._reactInternals)?fr(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=mt(),n=Os(t),l=hs(a,n);l.payload=s,r!=null&&(l.callback=r),s=Ds(t,l,n),s!==null&&(Gt(s,t,n,a),zn(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=mt(),n=Os(t),l=hs(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Ds(t,l,n),s!==null&&(Gt(s,t,n,a),zn(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=mt(),a=Os(t),n=hs(r,a);n.tag=2,s!=null&&(n.callback=s),s=Ds(t,n,a),s!==null&&(Gt(s,t,a,r),zn(s,t,a))}};function $d(t,s,r,a,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,i):s.prototype&&s.prototype.isPureReactComponent?!za(r,a)||!za(n,l):!0}function Ex(t,s,r){var a=!1,n=Hs,l=s.contextType;return typeof l=="object"&&l!==null?l=It(l):(n=bt(s)?or:ot.current,a=s.contextTypes,l=(a=a!=null)?Vr(t,n):Hs),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Dl,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function Od(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Dl.enqueueReplaceState(s,s.state,null)}function mo(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},fc(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=It(l):(l=bt(s)?or:ot.current,n.context=Vr(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(uo(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Dl.enqueueReplaceState(n,n.state,null),hl(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Kr(t,s){try{var r="",a=s;do r+=Dh(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function Ni(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function xo(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var cg=typeof WeakMap=="function"?WeakMap:Map;function Lx(t,s,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){bl||(bl=!0,wo=a),xo(t,s)},r}function Fx(t,s,r){r=hs(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){xo(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){xo(t,s),typeof a!="function"&&($s===null?$s=new Set([this]):$s.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Id(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new cg;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=wg.bind(null,t,s,r),s.then(t,t))}function qd(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function zd(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=hs(-1,1),s.tag=2,Ds(r,s,1))),r.lanes|=1),t)}var dg=vs.ReactCurrentOwner,ft=!1;function ut(t,s,r,a){s.child=t===null?cx(s,null,r,a):Jr(s,t.child,r,a)}function Bd(t,s,r,a,n){r=r.render;var l=s.ref;return zr(s,n),a=Nc(t,s,r,a,l,n),r=wc(),t!==null&&!ft?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,ys(t,s,n)):(Ee&&r&&dc(s),s.flags|=1,ut(t,s,a,n),s.child)}function Ud(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!Lc(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Mx(t,s,l,a,n)):(t=Gn(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:za,r(i,a)&&t.ref===s.ref)return ys(t,s,n)}return s.flags|=1,t=Is(l,a),t.ref=s.ref,t.return=s,s.child=t}function Mx(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(za(l,a)&&t.ref===s.ref)if(ft=!1,s.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(ft=!0);else return s.lanes=t.lanes,ys(t,s,n)}return ho(t,s,r,a,n)}function Dx(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Fr,St),St|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,_e(Fr,St),St|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,_e(Fr,St),St|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,_e(Fr,St),St|=a;return ut(t,s,n,r),s.child}function $x(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function ho(t,s,r,a,n){var l=bt(r)?or:ot.current;return l=Vr(s,l),zr(s,n),r=Nc(t,s,r,a,l,n),a=wc(),t!==null&&!ft?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,ys(t,s,n)):(Ee&&a&&dc(s),s.flags|=1,ut(t,s,r,n),s.child)}function Hd(t,s,r,a,n){if(bt(r)){var l=!0;cl(s)}else l=!1;if(zr(s,n),s.stateNode===null)Hn(t,s),Ex(s,r,a),mo(s,r,a,n),a=!0;else if(t===null){var i=s.stateNode,c=s.memoizedProps;i.props=c;var o=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=It(u):(u=bt(r)?or:ot.current,u=Vr(s,u));var p=r.getDerivedStateFromProps,y=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==a||o!==u)&&Od(s,i,a,u),ks=!1;var f=s.memoizedState;i.state=f,hl(s,a,i,n),o=s.memoizedState,c!==a||f!==o||yt.current||ks?(typeof p=="function"&&(uo(s,r,p,a),o=s.memoizedState),(c=ks||$d(s,r,c,a,f,o,u))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=o),i.props=a,i.state=o,i.context=u,a=c):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,ux(t,s),c=s.memoizedProps,u=s.type===s.elementType?c:Bt(s.type,c),i.props=u,y=s.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=It(o):(o=bt(r)?or:ot.current,o=Vr(s,o));var h=r.getDerivedStateFromProps;(p=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==y||f!==o)&&Od(s,i,a,o),ks=!1,f=s.memoizedState,i.state=f,hl(s,a,i,n);var g=s.memoizedState;c!==y||f!==g||yt.current||ks?(typeof h=="function"&&(uo(s,r,h,a),g=s.memoizedState),(u=ks||$d(s,r,u,a,f,g,o)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,g,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,g,o)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=g),i.props=a,i.state=g,i.context=o,a=u):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),a=!1)}return po(t,s,r,a,l,n)}function po(t,s,r,a,n,l){$x(t,s);var i=(s.flags&128)!==0;if(!a&&!i)return n&&Pd(s,r,!1),ys(t,s,l);a=s.stateNode,dg.current=s;var c=i&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&i?(s.child=Jr(s,t.child,null,l),s.child=Jr(s,null,c,l)):ut(t,s,c,l),s.memoizedState=a.state,n&&Pd(s,r,!0),s.child}function Ox(t){var s=t.stateNode;s.pendingContext?Rd(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Rd(t,s.context,!1),yc(t,s.containerInfo)}function Wd(t,s,r,a,n){return Gr(),mc(n),s.flags|=256,ut(t,s,r,a),s.child}var go={dehydrated:null,treeContext:null,retryLane:0};function fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ix(t,s,r){var a=s.pendingProps,n=Fe.current,l=!1,i=(s.flags&128)!==0,c;if((c=i)||(c=t!==null&&t.memoizedState===null?!1:(n&2)!==0),c?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),_e(Fe,n&1),t===null)return oo(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=a.children,t=a.fallback,l?(a=s.mode,l=s.child,i={mode:"hidden",children:i},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Il(i,a,0,null),t=nr(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=fo(r),s.memoizedState=go,t):kc(s,i));if(n=t.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return ug(t,s,i,a,c,n,r);if(l){l=a.fallback,i=s.mode,n=t.child,c=n.sibling;var o={mode:"hidden",children:a.children};return!(i&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=o,s.deletions=null):(a=Is(n,o),a.subtreeFlags=n.subtreeFlags&14680064),c!==null?l=Is(c,l):(l=nr(l,i,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,i=t.child.memoizedState,i=i===null?fo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=go,a}return l=t.child,t=l.sibling,a=Is(l,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function kc(t,s){return s=Il({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Pn(t,s,r,a){return a!==null&&mc(a),Jr(s,t.child,null,r),t=kc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function ug(t,s,r,a,n,l,i){if(r)return s.flags&256?(s.flags&=-257,a=Ni(Error(ae(422))),Pn(t,s,i,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=Il({mode:"visible",children:a.children},n,0,null),l=nr(l,n,i,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,s.mode&1&&Jr(s,t.child,null,i),s.child.memoizedState=fo(i),s.memoizedState=go,l);if(!(s.mode&1))return Pn(t,s,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(ae(419)),a=Ni(l,a,void 0),Pn(t,s,i,a)}if(c=(i&t.childLanes)!==0,ft||c){if(a=Xe,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,fs(t,n),Gt(a,t,n,-1))}return Ec(),a=Ni(Error(ae(421))),Pn(t,s,i,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Sg.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,_t=Ms(n.nextSibling),kt=s,Ee=!0,Ht=null,t!==null&&(Lt[Ft++]=ms,Lt[Ft++]=xs,Lt[Ft++]=cr,ms=t.id,xs=t.overflow,cr=s),s=kc(s,a.children),s.flags|=4096,s)}function Vd(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),co(t.return,s,r)}function wi(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function qx(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(ut(t,s,a.children,r),a=Fe.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vd(t,r,s);else if(t.tag===19)Vd(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(_e(Fe,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&pl(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),wi(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&pl(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}wi(s,!0,r,null,l);break;case"together":wi(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hn(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ys(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ur|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ae(153));if(s.child!==null){for(t=s.child,r=Is(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Is(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function mg(t,s,r){switch(s.tag){case 3:Ox(s),Gr();break;case 5:mx(s);break;case 1:bt(s.type)&&cl(s);break;case 4:yc(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;_e(ml,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(_e(Fe,Fe.current&1),s.flags|=128,null):r&s.child.childLanes?Ix(t,s,r):(_e(Fe,Fe.current&1),t=ys(t,s,r),t!==null?t.sibling:null);_e(Fe,Fe.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return qx(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),_e(Fe,Fe.current),a)break;return null;case 22:case 23:return s.lanes=0,Dx(t,s,r)}return ys(t,s,r)}var zx,yo,Bx,Ux;zx=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yo=function(){};Bx=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,sr(as.current);var l=null;switch(r){case"input":n=Ii(t,n),a=Ii(t,a),l=[];break;case"select":n=De({},n,{value:void 0}),a=De({},a,{value:void 0}),l=[];break;case"textarea":n=Bi(t,n),a=Bi(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=il)}Hi(r,a);var i;r=null;for(u in n)if(!a.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var c=n[u];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fa.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in a){var o=a[u];if(c=n!=null?n[u]:void 0,a.hasOwnProperty(u)&&o!==c&&(o!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(l||(l=[]),l.push(u,r)),r=o;else u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(l=l||[]).push(u,o)):u==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(u,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(u)?(o!=null&&u==="onScroll"&&Re("scroll",t),l||c===o||(l=[])):(l=l||[]).push(u,o))}r&&(l=l||[]).push("style",r);var u=l;(s.updateQueue=u)&&(s.flags|=4)}};Ux=function(t,s,r,a){r!==a&&(s.flags|=4)};function xa(t,s){if(!Ee)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function nt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function xg(t,s,r){var a=s.pendingProps;switch(uc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(s),null;case 1:return bt(s.type)&&ol(),nt(s),null;case 3:return a=s.stateNode,Qr(),Te(yt),Te(ot),jc(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Cn(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ht!==null&&(ko(Ht),Ht=null))),yo(t,s),nt(s),null;case 5:bc(s);var n=sr(Va.current);if(r=s.type,t!==null&&s.stateNode!=null)Bx(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(ae(166));return nt(s),null}if(t=sr(as.current),Cn(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[ss]=s,a[Ha]=l,t=(s.mode&1)!==0,r){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(n=0;n<va.length;n++)Re(va[n],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":td(a,l),Re("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Re("invalid",a);break;case"textarea":rd(a,l),Re("invalid",a)}Hi(r,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&kn(a.textContent,c,t),n=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&kn(a.textContent,c,t),n=["children",""+c]):Fa.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Re("scroll",a)}switch(r){case"input":yn(a),sd(a,l,!0);break;case"textarea":yn(a),ad(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=il)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=i.createElement(r,{is:a.is}):(t=i.createElement(r),r==="select"&&(i=t,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):t=i.createElementNS(t,r),t[ss]=s,t[Ha]=a,zx(t,s,!1,!1),s.stateNode=t;e:{switch(i=Wi(r,a),r){case"dialog":Re("cancel",t),Re("close",t),n=a;break;case"iframe":case"object":case"embed":Re("load",t),n=a;break;case"video":case"audio":for(n=0;n<va.length;n++)Re(va[n],t);n=a;break;case"source":Re("error",t),n=a;break;case"img":case"image":case"link":Re("error",t),Re("load",t),n=a;break;case"details":Re("toggle",t),n=a;break;case"input":td(t,a),n=Ii(t,a),Re("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=De({},a,{value:void 0}),Re("invalid",t);break;case"textarea":rd(t,a),n=Bi(t,a),Re("invalid",t);break;default:n=a}Hi(r,n),c=n;for(l in c)if(c.hasOwnProperty(l)){var o=c[l];l==="style"?jm(t,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&ym(t,o)):l==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ma(t,o):typeof o=="number"&&Ma(t,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fa.hasOwnProperty(l)?o!=null&&l==="onScroll"&&Re("scroll",t):o!=null&&Ko(t,l,o,i))}switch(r){case"input":yn(t),sd(t,a,!1);break;case"textarea":yn(t),ad(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Us(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?$r(t,!!a.multiple,l,!1):a.defaultValue!=null&&$r(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=il)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nt(s),null;case 6:if(t&&s.stateNode!=null)Ux(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(ae(166));if(r=sr(Va.current),sr(as.current),Cn(s)){if(a=s.stateNode,r=s.memoizedProps,a[ss]=s,(l=a.nodeValue!==r)&&(t=kt,t!==null))switch(t.tag){case 3:kn(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kn(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ss]=s,s.stateNode=a}return nt(s),null;case 13:if(Te(Fe),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&_t!==null&&s.mode&1&&!(s.flags&128))ix(),Gr(),s.flags|=98560,l=!1;else if(l=Cn(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(ae(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ae(317));l[ss]=s}else Gr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;nt(s),l=!1}else Ht!==null&&(ko(Ht),Ht=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Fe.current&1?Je===0&&(Je=3):Ec())),s.updateQueue!==null&&(s.flags|=4),nt(s),null);case 4:return Qr(),yo(t,s),t===null&&Ba(s.stateNode.containerInfo),nt(s),null;case 10:return pc(s.type._context),nt(s),null;case 17:return bt(s.type)&&ol(),nt(s),null;case 19:if(Te(Fe),l=s.memoizedState,l===null)return nt(s),null;if(a=(s.flags&128)!==0,i=l.rendering,i===null)if(a)xa(l,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=pl(t),i!==null){for(s.flags|=128,xa(l,!1),a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _e(Fe,Fe.current&1|2),s.child}t=t.sibling}l.tail!==null&&Oe()>Zr&&(s.flags|=128,a=!0,xa(l,!1),s.lanes=4194304)}else{if(!a)if(t=pl(i),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),xa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ee)return nt(s),null}else 2*Oe()-l.renderingStartTime>Zr&&r!==1073741824&&(s.flags|=128,a=!0,xa(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Oe(),s.sibling=null,r=Fe.current,_e(Fe,a?r&1|2:r&1),s):(nt(s),null);case 22:case 23:return Ac(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?St&1073741824&&(nt(s),s.subtreeFlags&6&&(s.flags|=8192)):nt(s),null;case 24:return null;case 25:return null}throw Error(ae(156,s.tag))}function hg(t,s){switch(uc(s),s.tag){case 1:return bt(s.type)&&ol(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qr(),Te(yt),Te(ot),jc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return bc(s),null;case 13:if(Te(Fe),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ae(340));Gr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Te(Fe),null;case 4:return Qr(),null;case 10:return pc(s.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var Tn=!1,lt=!1,pg=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Lr(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){$e(t,s,a)}else r.current=null}function bo(t,s,r){try{r()}catch(a){$e(t,s,a)}}var Gd=!1;function gg(t,s){if(to=al,t=Jm(),cc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,c=-1,o=-1,u=0,p=0,y=t,f=null;t:for(;;){for(var h;y!==r||n!==0&&y.nodeType!==3||(c=i+n),y!==l||a!==0&&y.nodeType!==3||(o=i+a),y.nodeType===3&&(i+=y.nodeValue.length),(h=y.firstChild)!==null;)f=y,y=h;for(;;){if(y===t)break t;if(f===r&&++u===n&&(c=i),f===l&&++p===a&&(o=i),(h=y.nextSibling)!==null)break;y=f,f=y.parentNode}y=h}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(so={focusedElem:t,selectionRange:r},al=!1,ce=s;ce!==null;)if(s=ce,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ce=t;else for(;ce!==null;){s=ce;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var j=g.memoizedProps,b=g.memoizedState,m=s.stateNode,x=m.getSnapshotBeforeUpdate(s.elementType===s.type?j:Bt(s.type,j),b);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(w){$e(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,ce=t;break}ce=s.return}return g=Gd,Gd=!1,g}function Ra(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&bo(s,r,l)}n=n.next}while(n!==a)}}function $l(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function jo(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Hx(t){var s=t.alternate;s!==null&&(t.alternate=null,Hx(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ss],delete s[Ha],delete s[no],delete s[Yp],delete s[Xp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wx(t){return t.tag===5||t.tag===3||t.tag===4}function Jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vo(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=il));else if(a!==4&&(t=t.child,t!==null))for(vo(t,s,r),t=t.sibling;t!==null;)vo(t,s,r),t=t.sibling}function No(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(No(t,s,r),t=t.sibling;t!==null;)No(t,s,r),t=t.sibling}var et=null,Ut=!1;function ws(t,s,r){for(r=r.child;r!==null;)Vx(t,s,r),r=r.sibling}function Vx(t,s,r){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Pl,r)}catch{}switch(r.tag){case 5:lt||Lr(r,s);case 6:var a=et,n=Ut;et=null,ws(t,s,r),et=a,Ut=n,et!==null&&(Ut?(t=et,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(Ut?(t=et,r=r.stateNode,t.nodeType===8?gi(t.parentNode,r):t.nodeType===1&&gi(t,r),Ia(t)):gi(et,r.stateNode));break;case 4:a=et,n=Ut,et=r.stateNode.containerInfo,Ut=!0,ws(t,s,r),et=a,Ut=n;break;case 0:case 11:case 14:case 15:if(!lt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&bo(r,s,i),n=n.next}while(n!==a)}ws(t,s,r);break;case 1:if(!lt&&(Lr(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){$e(r,s,c)}ws(t,s,r);break;case 21:ws(t,s,r);break;case 22:r.mode&1?(lt=(a=lt)||r.memoizedState!==null,ws(t,s,r),lt=a):ws(t,s,r);break;default:ws(t,s,r)}}function Qd(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new pg),s.forEach(function(a){var n=_g.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function zt(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,i=s,c=i;e:for(;c!==null;){switch(c.tag){case 5:et=c.stateNode,Ut=!1;break e;case 3:et=c.stateNode.containerInfo,Ut=!0;break e;case 4:et=c.stateNode.containerInfo,Ut=!0;break e}c=c.return}if(et===null)throw Error(ae(160));Vx(l,i,n),et=null,Ut=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(u){$e(n,s,u)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Gx(s,t),s=s.sibling}function Gx(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(s,t),Yt(t),a&4){try{Ra(3,t,t.return),$l(3,t)}catch(j){$e(t,t.return,j)}try{Ra(5,t,t.return)}catch(j){$e(t,t.return,j)}}break;case 1:zt(s,t),Yt(t),a&512&&r!==null&&Lr(r,r.return);break;case 5:if(zt(s,t),Yt(t),a&512&&r!==null&&Lr(r,r.return),t.flags&32){var n=t.stateNode;try{Ma(n,"")}catch(j){$e(t,t.return,j)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&pm(n,l),Wi(c,i);var u=Wi(c,l);for(i=0;i<o.length;i+=2){var p=o[i],y=o[i+1];p==="style"?jm(n,y):p==="dangerouslySetInnerHTML"?ym(n,y):p==="children"?Ma(n,y):Ko(n,p,y,u)}switch(c){case"input":qi(n,l);break;case"textarea":gm(n,l);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var h=l.value;h!=null?$r(n,!!l.multiple,h,!1):f!==!!l.multiple&&(l.defaultValue!=null?$r(n,!!l.multiple,l.defaultValue,!0):$r(n,!!l.multiple,l.multiple?[]:"",!1))}n[Ha]=l}catch(j){$e(t,t.return,j)}}break;case 6:if(zt(s,t),Yt(t),a&4){if(t.stateNode===null)throw Error(ae(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(j){$e(t,t.return,j)}}break;case 3:if(zt(s,t),Yt(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Ia(s.containerInfo)}catch(j){$e(t,t.return,j)}break;case 4:zt(s,t),Yt(t);break;case 13:zt(s,t),Yt(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Pc=Oe())),a&4&&Qd(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(lt=(u=lt)||p,zt(s,t),lt=u):zt(s,t),Yt(t),a&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(ce=t,p=t.child;p!==null;){for(y=ce=p;ce!==null;){switch(f=ce,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ra(4,f,f.return);break;case 1:Lr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){a=f,r=f.return;try{s=a,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(j){$e(a,r,j)}}break;case 5:Lr(f,f.return);break;case 22:if(f.memoizedState!==null){Zd(y);continue}}h!==null?(h.return=f,ce=h):Zd(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{n=y.stateNode,u?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=y.stateNode,o=y.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=bm("display",i))}catch(j){$e(t,t.return,j)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(j){$e(t,t.return,j)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:zt(s,t),Yt(t),a&4&&Qd(t);break;case 21:break;default:zt(s,t),Yt(t)}}function Yt(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Wx(r)){var a=r;break e}r=r.return}throw Error(ae(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Ma(n,""),a.flags&=-33);var l=Jd(t);No(t,l,n);break;case 3:case 4:var i=a.stateNode.containerInfo,c=Jd(t);vo(t,c,i);break;default:throw Error(ae(161))}}catch(o){$e(t,t.return,o)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function fg(t,s,r){ce=t,Jx(t)}function Jx(t,s,r){for(var a=(t.mode&1)!==0;ce!==null;){var n=ce,l=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||Tn;if(!i){var c=n.alternate,o=c!==null&&c.memoizedState!==null||lt;c=Tn;var u=lt;if(Tn=i,(lt=o)&&!u)for(ce=n;ce!==null;)i=ce,o=i.child,i.tag===22&&i.memoizedState!==null?Yd(n):o!==null?(o.return=i,ce=o):Yd(n);for(;l!==null;)ce=l,Jx(l),l=l.sibling;ce=n,Tn=c,lt=u}Kd(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,ce=l):Kd(t)}}function Kd(t){for(;ce!==null;){var s=ce;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:lt||$l(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!lt)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Bt(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Fd(s,l,a);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Fd(s,i,r)}break;case 5:var c=s.stateNode;if(r===null&&s.flags&4){r=c;var o=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var u=s.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Ia(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}lt||s.flags&512&&jo(s)}catch(f){$e(s,s.return,f)}}if(s===t){ce=null;break}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}}function Zd(t){for(;ce!==null;){var s=ce;if(s===t){ce=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ce=r;break}ce=s.return}}function Yd(t){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{$l(4,s)}catch(o){$e(s,r,o)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(o){$e(s,n,o)}}var l=s.return;try{jo(s)}catch(o){$e(s,l,o)}break;case 5:var i=s.return;try{jo(s)}catch(o){$e(s,i,o)}}}catch(o){$e(s,s.return,o)}if(s===t){ce=null;break}var c=s.sibling;if(c!==null){c.return=s.return,ce=c;break}ce=s.return}}var yg=Math.ceil,yl=vs.ReactCurrentDispatcher,Cc=vs.ReactCurrentOwner,$t=vs.ReactCurrentBatchConfig,ve=0,Xe=null,Be=null,tt=0,St=0,Fr=Gs(0),Je=0,Ka=null,ur=0,Ol=0,Rc=0,Pa=null,gt=null,Pc=0,Zr=1/0,cs=null,bl=!1,wo=null,$s=null,An=!1,Ts=null,jl=0,Ta=0,So=null,Wn=-1,Vn=0;function mt(){return ve&6?Oe():Wn!==-1?Wn:Wn=Oe()}function Os(t){return t.mode&1?ve&2&&tt!==0?tt&-tt:tg.transition!==null?(Vn===0&&(Vn=Em()),Vn):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Im(t.type)),t):1}function Gt(t,s,r,a){if(50<Ta)throw Ta=0,So=null,Error(ae(185));an(t,r,a),(!(ve&2)||t!==Xe)&&(t===Xe&&(!(ve&2)&&(Ol|=r),Je===4&&Rs(t,tt)),jt(t,a),r===1&&ve===0&&!(s.mode&1)&&(Zr=Oe()+500,Fl&&Js()))}function jt(t,s){var r=t.callbackNode;tp(t,s);var a=rl(t,t===Xe?tt:0);if(a===0)r!==null&&id(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&id(r),s===1)t.tag===0?eg(Xd.bind(null,t)):ax(Xd.bind(null,t)),Kp(function(){!(ve&6)&&Js()}),r=null;else{switch(Lm(a)){case 1:r=tc;break;case 4:r=Tm;break;case 16:r=sl;break;case 536870912:r=Am;break;default:r=sl}r=s0(r,Qx.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Qx(t,s){if(Wn=-1,Vn=0,ve&6)throw Error(ae(327));var r=t.callbackNode;if(Br()&&t.callbackNode!==r)return null;var a=rl(t,t===Xe?tt:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=vl(t,a);else{s=a;var n=ve;ve|=2;var l=Zx();(Xe!==t||tt!==s)&&(cs=null,Zr=Oe()+500,ar(t,s));do try{vg();break}catch(c){Kx(t,c)}while(!0);hc(),yl.current=l,ve=n,Be!==null?s=0:(Xe=null,tt=0,s=Je)}if(s!==0){if(s===2&&(n=Ki(t),n!==0&&(a=n,s=_o(t,n))),s===1)throw r=Ka,ar(t,0),Rs(t,a),jt(t,Oe()),r;if(s===6)Rs(t,a);else{if(n=t.current.alternate,!(a&30)&&!bg(n)&&(s=vl(t,a),s===2&&(l=Ki(t),l!==0&&(a=l,s=_o(t,l))),s===1))throw r=Ka,ar(t,0),Rs(t,a),jt(t,Oe()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(ae(345));case 2:Ys(t,gt,cs);break;case 3:if(Rs(t,a),(a&130023424)===a&&(s=Pc+500-Oe(),10<s)){if(rl(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){mt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ao(Ys.bind(null,t,gt,cs),s);break}Ys(t,gt,cs);break;case 4:if(Rs(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var i=31-Vt(a);l=1<<i,i=s[i],i>n&&(n=i),a&=~l}if(a=n,a=Oe()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*yg(a/1960))-a,10<a){t.timeoutHandle=ao(Ys.bind(null,t,gt,cs),a);break}Ys(t,gt,cs);break;case 5:Ys(t,gt,cs);break;default:throw Error(ae(329))}}}return jt(t,Oe()),t.callbackNode===r?Qx.bind(null,t):null}function _o(t,s){var r=Pa;return t.current.memoizedState.isDehydrated&&(ar(t,s).flags|=256),t=vl(t,s),t!==2&&(s=gt,gt=r,s!==null&&ko(s)),t}function ko(t){gt===null?gt=t:gt.push.apply(gt,t)}function bg(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!Kt(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rs(t,s){for(s&=~Rc,s&=~Ol,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Vt(s),a=1<<r;t[r]=-1,s&=~a}}function Xd(t){if(ve&6)throw Error(ae(327));Br();var s=rl(t,0);if(!(s&1))return jt(t,Oe()),null;var r=vl(t,s);if(t.tag!==0&&r===2){var a=Ki(t);a!==0&&(s=a,r=_o(t,a))}if(r===1)throw r=Ka,ar(t,0),Rs(t,s),jt(t,Oe()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ys(t,gt,cs),jt(t,Oe()),null}function Tc(t,s){var r=ve;ve|=1;try{return t(s)}finally{ve=r,ve===0&&(Zr=Oe()+500,Fl&&Js())}}function mr(t){Ts!==null&&Ts.tag===0&&!(ve&6)&&Br();var s=ve;ve|=1;var r=$t.transition,a=Se;try{if($t.transition=null,Se=1,t)return t()}finally{Se=a,$t.transition=r,ve=s,!(ve&6)&&Js()}}function Ac(){St=Fr.current,Te(Fr)}function ar(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Qp(r)),Be!==null)for(r=Be.return;r!==null;){var a=r;switch(uc(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ol();break;case 3:Qr(),Te(yt),Te(ot),jc();break;case 5:bc(a);break;case 4:Qr();break;case 13:Te(Fe);break;case 19:Te(Fe);break;case 10:pc(a.type._context);break;case 22:case 23:Ac()}r=r.return}if(Xe=t,Be=t=Is(t.current,null),tt=St=s,Je=0,Ka=null,Rc=Ol=ur=0,gt=Pa=null,tr!==null){for(s=0;s<tr.length;s++)if(r=tr[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var i=l.next;l.next=n,a.next=i}r.pending=a}tr=null}return t}function Kx(t,s){do{var r=Be;try{if(hc(),Bn.current=fl,gl){for(var a=Me.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}gl=!1}if(dr=0,Ye=Ge=Me=null,Ca=!1,Ga=0,Cc.current=null,r===null||r.return===null){Je=1,Ka=s,Be=null;break}e:{var l=t,i=r.return,c=r,o=s;if(s=tt,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=o,p=c,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=qd(i);if(h!==null){h.flags&=-257,zd(h,i,c,l,s),h.mode&1&&Id(l,u,s),s=h,o=u;var g=s.updateQueue;if(g===null){var j=new Set;j.add(o),s.updateQueue=j}else g.add(o);break e}else{if(!(s&1)){Id(l,u,s),Ec();break e}o=Error(ae(426))}}else if(Ee&&c.mode&1){var b=qd(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zd(b,i,c,l,s),mc(Kr(o,c));break e}}l=o=Kr(o,c),Je!==4&&(Je=2),Pa===null?Pa=[l]:Pa.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var m=Lx(l,o,s);Ld(l,m);break e;case 1:c=o;var x=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($s===null||!$s.has(v)))){l.flags|=65536,s&=-s,l.lanes|=s;var w=Fx(l,c,s);Ld(l,w);break e}}l=l.return}while(l!==null)}Xx(r)}catch(_){s=_,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function Zx(){var t=yl.current;return yl.current=fl,t===null?fl:t}function Ec(){(Je===0||Je===3||Je===2)&&(Je=4),Xe===null||!(ur&268435455)&&!(Ol&268435455)||Rs(Xe,tt)}function vl(t,s){var r=ve;ve|=2;var a=Zx();(Xe!==t||tt!==s)&&(cs=null,ar(t,s));do try{jg();break}catch(n){Kx(t,n)}while(!0);if(hc(),ve=r,yl.current=a,Be!==null)throw Error(ae(261));return Xe=null,tt=0,Je}function jg(){for(;Be!==null;)Yx(Be)}function vg(){for(;Be!==null&&!Vh();)Yx(Be)}function Yx(t){var s=t0(t.alternate,t,St);t.memoizedProps=t.pendingProps,s===null?Xx(t):Be=s,Cc.current=null}function Xx(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=hg(r,s),r!==null){r.flags&=32767,Be=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Be=null;return}}else if(r=xg(r,s,St),r!==null){Be=r;return}if(s=s.sibling,s!==null){Be=s;return}Be=s=t}while(s!==null);Je===0&&(Je=5)}function Ys(t,s,r){var a=Se,n=$t.transition;try{$t.transition=null,Se=1,Ng(t,s,r,a)}finally{$t.transition=n,Se=a}return null}function Ng(t,s,r,a){do Br();while(Ts!==null);if(ve&6)throw Error(ae(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(sp(t,l),t===Xe&&(Be=Xe=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||An||(An=!0,s0(sl,function(){return Br(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=$t.transition,$t.transition=null;var i=Se;Se=1;var c=ve;ve|=4,Cc.current=null,gg(t,r),Gx(r,t),Bp(so),al=!!to,so=to=null,t.current=r,fg(r),Gh(),ve=c,Se=i,$t.transition=l}else t.current=r;if(An&&(An=!1,Ts=t,jl=n),l=t.pendingLanes,l===0&&($s=null),Kh(r.stateNode),jt(t,Oe()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(bl)throw bl=!1,t=wo,wo=null,t;return jl&1&&t.tag!==0&&Br(),l=t.pendingLanes,l&1?t===So?Ta++:(Ta=0,So=t):Ta=0,Js(),null}function Br(){if(Ts!==null){var t=Lm(jl),s=$t.transition,r=Se;try{if($t.transition=null,Se=16>t?16:t,Ts===null)var a=!1;else{if(t=Ts,Ts=null,jl=0,ve&6)throw Error(ae(331));var n=ve;for(ve|=4,ce=t.current;ce!==null;){var l=ce,i=l.child;if(ce.flags&16){var c=l.deletions;if(c!==null){for(var o=0;o<c.length;o++){var u=c[o];for(ce=u;ce!==null;){var p=ce;switch(p.tag){case 0:case 11:case 15:Ra(8,p,l)}var y=p.child;if(y!==null)y.return=p,ce=y;else for(;ce!==null;){p=ce;var f=p.sibling,h=p.return;if(Hx(p),p===u){ce=null;break}if(f!==null){f.return=h,ce=f;break}ce=h}}}var g=l.alternate;if(g!==null){var j=g.child;if(j!==null){g.child=null;do{var b=j.sibling;j.sibling=null,j=b}while(j!==null)}}ce=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,ce=i;else e:for(;ce!==null;){if(l=ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ra(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,ce=m;break e}ce=l.return}}var x=t.current;for(ce=x;ce!==null;){i=ce;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ce=v;else e:for(i=x;ce!==null;){if(c=ce,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$l(9,c)}}catch(_){$e(c,c.return,_)}if(c===i){ce=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,ce=w;break e}ce=c.return}}if(ve=n,Js(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Pl,t)}catch{}a=!0}return a}finally{Se=r,$t.transition=s}}return!1}function eu(t,s,r){s=Kr(r,s),s=Lx(t,s,1),t=Ds(t,s,1),s=mt(),t!==null&&(an(t,1,s),jt(t,s))}function $e(t,s,r){if(t.tag===3)eu(t,t,r);else for(;s!==null;){if(s.tag===3){eu(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&($s===null||!$s.has(a))){t=Kr(r,t),t=Fx(s,t,1),s=Ds(s,t,1),t=mt(),s!==null&&(an(s,1,t),jt(s,t));break}}s=s.return}}function wg(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=mt(),t.pingedLanes|=t.suspendedLanes&r,Xe===t&&(tt&r)===r&&(Je===4||Je===3&&(tt&130023424)===tt&&500>Oe()-Pc?ar(t,0):Rc|=r),jt(t,s)}function e0(t,s){s===0&&(t.mode&1?(s=vn,vn<<=1,!(vn&130023424)&&(vn=4194304)):s=1);var r=mt();t=fs(t,s),t!==null&&(an(t,s,r),jt(t,r))}function Sg(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),e0(t,r)}function _g(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(ae(314))}a!==null&&a.delete(s),e0(t,r)}var t0;t0=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||yt.current)ft=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return ft=!1,mg(t,s,r);ft=!!(t.flags&131072)}else ft=!1,Ee&&s.flags&1048576&&nx(s,ul,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Hn(t,s),t=s.pendingProps;var n=Vr(s,ot.current);zr(s,r),n=Nc(null,s,a,t,n,r);var l=wc();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,bt(a)?(l=!0,cl(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,fc(s),n.updater=Dl,s.stateNode=n,n._reactInternals=s,mo(s,a,t,r),s=po(null,s,a,!0,l,r)):(s.tag=0,Ee&&l&&dc(s),ut(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Hn(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Cg(a),t=Bt(a,t),n){case 0:s=ho(null,s,a,t,r);break e;case 1:s=Hd(null,s,a,t,r);break e;case 11:s=Bd(null,s,a,t,r);break e;case 14:s=Ud(null,s,a,Bt(a.type,t),r);break e}throw Error(ae(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Bt(a,n),ho(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Bt(a,n),Hd(t,s,a,n,r);case 3:e:{if(Ox(s),t===null)throw Error(ae(387));a=s.pendingProps,l=s.memoizedState,n=l.element,ux(t,s),hl(s,a,null,r);var i=s.memoizedState;if(a=i.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Kr(Error(ae(423)),s),s=Wd(t,s,a,r,n);break e}else if(a!==n){n=Kr(Error(ae(424)),s),s=Wd(t,s,a,r,n);break e}else for(_t=Ms(s.stateNode.containerInfo.firstChild),kt=s,Ee=!0,Ht=null,r=cx(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gr(),a===n){s=ys(t,s,r);break e}ut(t,s,a,r)}s=s.child}return s;case 5:return mx(s),t===null&&oo(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,ro(a,n)?i=null:l!==null&&ro(a,l)&&(s.flags|=32),$x(t,s),ut(t,s,i,r),s.child;case 6:return t===null&&oo(s),null;case 13:return Ix(t,s,r);case 4:return yc(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Jr(s,null,a,r):ut(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Bt(a,n),Bd(t,s,a,n,r);case 7:return ut(t,s,s.pendingProps,r),s.child;case 8:return ut(t,s,s.pendingProps.children,r),s.child;case 12:return ut(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,_e(ml,a._currentValue),a._currentValue=i,l!==null)if(Kt(l.value,i)){if(l.children===n.children&&!yt.current){s=ys(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var c=l.dependencies;if(c!==null){i=l.child;for(var o=c.firstContext;o!==null;){if(o.context===a){if(l.tag===1){o=hs(-1,r&-r),o.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?o.next=o:(o.next=p.next,p.next=o),u.pending=o}}l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),co(l.return,r,s),c.lanes|=r;break}o=o.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(ae(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),co(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ut(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,zr(s,r),n=It(n),a=a(n),s.flags|=1,ut(t,s,a,r),s.child;case 14:return a=s.type,n=Bt(a,s.pendingProps),n=Bt(a.type,n),Ud(t,s,a,n,r);case 15:return Mx(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Bt(a,n),Hn(t,s),s.tag=1,bt(a)?(t=!0,cl(s)):t=!1,zr(s,r),Ex(s,a,n),mo(s,a,n,r),po(null,s,a,!0,t,r);case 19:return qx(t,s,r);case 22:return Dx(t,s,r)}throw Error(ae(156,s.tag))};function s0(t,s){return Pm(t,s)}function kg(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,s,r,a){return new kg(t,s,r,a)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cg(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yo)return 11;if(t===Xo)return 14}return 2}function Is(t,s){var r=t.alternate;return r===null?(r=Dt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Gn(t,s,r,a,n,l){var i=2;if(a=t,typeof t=="function")Lc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Sr:return nr(r.children,n,l,s);case Zo:i=8,n|=8;break;case Mi:return t=Dt(12,r,s,n|2),t.elementType=Mi,t.lanes=l,t;case Di:return t=Dt(13,r,s,n),t.elementType=Di,t.lanes=l,t;case $i:return t=Dt(19,r,s,n),t.elementType=$i,t.lanes=l,t;case mm:return Il(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dm:i=10;break e;case um:i=9;break e;case Yo:i=11;break e;case Xo:i=14;break e;case _s:i=16,a=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return s=Dt(i,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function nr(t,s,r,a){return t=Dt(7,t,a,s),t.lanes=r,t}function Il(t,s,r,a){return t=Dt(22,t,a,s),t.elementType=mm,t.lanes=r,t.stateNode={isHidden:!1},t}function Si(t,s,r){return t=Dt(6,t,null,s),t.lanes=r,t}function _i(t,s,r){return s=Dt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Rg(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ni(0),this.expirationTimes=ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Fc(t,s,r,a,n,l,i,c,o){return t=new Rg(t,s,r,c,o),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Dt(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(l),t}function Pg(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wr,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function r0(t){if(!t)return Hs;t=t._reactInternals;e:{if(fr(t)!==t||t.tag!==1)throw Error(ae(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(bt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(bt(r))return rx(t,r,s)}return s}function a0(t,s,r,a,n,l,i,c,o){return t=Fc(r,a,!0,t,n,l,i,c,o),t.context=r0(null),r=t.current,a=mt(),n=Os(r),l=hs(a,n),l.callback=s??null,Ds(r,l,n),t.current.lanes=n,an(t,n,a),jt(t,a),t}function ql(t,s,r,a){var n=s.current,l=mt(),i=Os(n);return r=r0(r),s.context===null?s.context=r:s.pendingContext=r,s=hs(l,i),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Ds(n,s,i),t!==null&&(Gt(t,n,i,l),zn(t,n,i)),i}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tu(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Mc(t,s){tu(t,s),(t=t.alternate)&&tu(t,s)}function Tg(){return null}var n0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dc(t){this._internalRoot=t}zl.prototype.render=Dc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ae(409));ql(t,s,null,null)};zl.prototype.unmount=Dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;mr(function(){ql(null,t,null,null)}),s[gs]=null}};function zl(t){this._internalRoot=t}zl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Dm();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Cs.length&&s!==0&&s<Cs[r].priority;r++);Cs.splice(r,0,t),r===0&&Om(t)}};function $c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function su(){}function Ag(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var u=Nl(i);l.call(u)}}var i=a0(s,a,t,0,null,!1,!1,"",su);return t._reactRootContainer=i,t[gs]=i.current,Ba(t.nodeType===8?t.parentNode:t),mr(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var c=a;a=function(){var u=Nl(o);c.call(u)}}var o=Fc(t,0,!1,null,null,!1,!1,"",su);return t._reactRootContainer=o,t[gs]=o.current,Ba(t.nodeType===8?t.parentNode:t),mr(function(){ql(s,o,r,a)}),o}function Ul(t,s,r,a,n){var l=r._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var c=n;n=function(){var o=Nl(i);c.call(o)}}ql(s,i,t,n)}else i=Ag(r,s,t,n,a);return Nl(i)}Fm=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=ja(s.pendingLanes);r!==0&&(sc(s,r|1),jt(s,Oe()),!(ve&6)&&(Zr=Oe()+500,Js()))}break;case 13:mr(function(){var a=fs(t,1);if(a!==null){var n=mt();Gt(a,t,1,n)}}),Mc(t,1)}};rc=function(t){if(t.tag===13){var s=fs(t,134217728);if(s!==null){var r=mt();Gt(s,t,134217728,r)}Mc(t,134217728)}};Mm=function(t){if(t.tag===13){var s=Os(t),r=fs(t,s);if(r!==null){var a=mt();Gt(r,t,s,a)}Mc(t,s)}};Dm=function(){return Se};$m=function(t,s){var r=Se;try{return Se=t,s()}finally{Se=r}};Gi=function(t,s,r){switch(s){case"input":if(qi(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Ll(a);if(!n)throw Error(ae(90));hm(a),qi(a,n)}}}break;case"textarea":gm(t,r);break;case"select":s=r.value,s!=null&&$r(t,!!r.multiple,s,!1)}};wm=Tc;Sm=mr;var Eg={usingClientEntryPoint:!1,Events:[ln,Rr,Ll,vm,Nm,Tc]},ha={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cm(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||Tg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var En=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!En.isDisabled&&En.supportsFiber)try{Pl=En.inject(Lg),rs=En}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;Pt.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(s))throw Error(ae(200));return Pg(t,s,null,r)};Pt.createRoot=function(t,s){if(!$c(t))throw Error(ae(299));var r=!1,a="",n=n0;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=Fc(t,1,!1,null,null,r,!1,a,n),t[gs]=s.current,Ba(t.nodeType===8?t.parentNode:t),new Dc(s)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=Cm(s),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return mr(t)};Pt.hydrate=function(t,s,r){if(!Bl(s))throw Error(ae(200));return Ul(null,t,s,!0,r)};Pt.hydrateRoot=function(t,s,r){if(!$c(t))throw Error(ae(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",i=n0;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=a0(s,null,t,1,r??null,n,!1,l,i),t[gs]=s.current,Ba(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new zl(s)};Pt.render=function(t,s,r){if(!Bl(s))throw Error(ae(200));return Ul(null,t,s,!1,r)};Pt.unmountComponentAtNode=function(t){if(!Bl(t))throw Error(ae(40));return t._reactRootContainer?(mr(function(){Ul(null,null,t,!1,function(){t._reactRootContainer=null,t[gs]=null})}),!0):!1};Pt.unstable_batchedUpdates=Tc;Pt.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Bl(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Ul(t,s,r,!1,a)};Pt.version="18.3.1-next-f1338f8080-20240426";function l0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l0)}catch(t){console.error(t)}}l0(),lm.exports=Pt;var Fg=lm.exports,ru=Fg;Li.createRoot=ru.createRoot,Li.hydrateRoot=ru.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Za.apply(this,arguments)}var As;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(As||(As={}));const au="popstate";function Mg(t){t===void 0&&(t={});function s(a,n){let{pathname:l,search:i,hash:c}=a.location;return Co("",{pathname:l,search:i,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:wl(n)}return $g(s,r,null,t)}function Ie(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function i0(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Dg(){return Math.random().toString(36).substr(2,8)}function nu(t,s){return{usr:t.state,key:t.key,idx:s}}function Co(t,s,r,a){return r===void 0&&(r=null),Za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?sa(s):s,{state:r,key:s&&s.key||a||Dg()})}function wl(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function sa(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function $g(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,c=As.Pop,o=null,u=p();u==null&&(u=0,i.replaceState(Za({},i.state,{idx:u}),""));function p(){return(i.state||{idx:null}).idx}function y(){c=As.Pop;let b=p(),m=b==null?null:b-u;u=b,o&&o({action:c,location:j.location,delta:m})}function f(b,m){c=As.Push;let x=Co(j.location,b,m);u=p()+1;let v=nu(x,u),w=j.createHref(x);try{i.pushState(v,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(w)}l&&o&&o({action:c,location:j.location,delta:1})}function h(b,m){c=As.Replace;let x=Co(j.location,b,m);u=p();let v=nu(x,u),w=j.createHref(x);i.replaceState(v,"",w),l&&o&&o({action:c,location:j.location,delta:0})}function g(b){let m=n.location.origin!=="null"?n.location.origin:n.location.href,x=typeof b=="string"?b:wl(b);return x=x.replace(/ $/,"%20"),Ie(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let j={get action(){return c},get location(){return t(n,i)},listen(b){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(au,y),o=b,()=>{n.removeEventListener(au,y),o=null}},createHref(b){return s(n,b)},createURL:g,encodeLocation(b){let m=g(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(b){return i.go(b)}};return j}var lu;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lu||(lu={}));function Og(t,s,r){return r===void 0&&(r="/"),Ig(t,s,r)}function Ig(t,s,r,a){let n=typeof s=="string"?sa(s):s,l=Oc(n.pathname||"/",r);if(l==null)return null;let i=o0(t);qg(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let u=Yg(l);c=Qg(i[o],u)}return c}function o0(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(l,i,c)=>{let o={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};o.relativePath.startsWith("/")&&(Ie(o.relativePath.startsWith(a),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(a.length));let u=qs([a,o.relativePath]),p=r.concat(o);l.children&&l.children.length>0&&(Ie(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),o0(l.children,s,p,u)),!(l.path==null&&!l.index)&&s.push({path:u,score:Gg(u,l.index),routesMeta:p})};return t.forEach((l,i)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))n(l,i);else for(let o of c0(l.path))n(l,i,o)}),s}function c0(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let i=c0(a.join("/")),c=[];return c.push(...i.map(o=>o===""?l:[l,o].join("/"))),n&&c.push(...i),c.map(o=>t.startsWith("/")&&o===""?"/":o)}function qg(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:Jg(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const zg=/^:[\w-]+$/,Bg=3,Ug=2,Hg=1,Wg=10,Vg=-2,iu=t=>t==="*";function Gg(t,s){let r=t.split("/"),a=r.length;return r.some(iu)&&(a+=Vg),s&&(a+=Ug),r.filter(n=>!iu(n)).reduce((n,l)=>n+(zg.test(l)?Bg:l===""?Hg:Wg),a)}function Jg(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function Qg(t,s,r){let{routesMeta:a}=t,n={},l="/",i=[];for(let c=0;c<a.length;++c){let o=a[c],u=c===a.length-1,p=l==="/"?s:s.slice(l.length)||"/",y=Kg({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},p),f=o.route;if(!y)return null;Object.assign(n,y.params),i.push({params:n,pathname:qs([l,y.pathname]),pathnameBase:sf(qs([l,y.pathnameBase])),route:f}),y.pathnameBase!=="/"&&(l=qs([l,y.pathnameBase]))}return i}function Kg(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=Zg(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((u,p,y)=>{let{paramName:f,isOptional:h}=p;if(f==="*"){let j=c[y]||"";i=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const g=c[y];return h&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:t}}function Zg(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),i0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(a.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function Yg(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return i0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Oc(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function Xg(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?sa(t):t;return{pathname:r?r.startsWith("/")?r:ef(r,s):s,search:rf(a),hash:af(n)}}function ef(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ki(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tf(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Ic(t,s){let r=tf(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function qc(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=sa(t):(n=Za({},t),Ie(!n.pathname||!n.pathname.includes("?"),ki("?","pathname","search",n)),Ie(!n.pathname||!n.pathname.includes("#"),ki("#","pathname","hash",n)),Ie(!n.search||!n.search.includes("#"),ki("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,c;if(i==null)c=r;else{let y=s.length-1;if(!a&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),y-=1;n.pathname=f.join("/")}c=y>=0?s[y]:"/"}let o=Xg(n,c),u=i&&i!=="/"&&i.endsWith("/"),p=(l||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(u||p)&&(o.pathname+="/"),o}const qs=t=>t.join("/").replace(/\/\/+/g,"/"),sf=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rf=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,af=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const d0=["post","put","patch","delete"];new Set(d0);const lf=["get",...d0];new Set(lf);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ya.apply(this,arguments)}const zc=d.createContext(null),of=d.createContext(null),Qs=d.createContext(null),Hl=d.createContext(null),Ns=d.createContext({outlet:null,matches:[],isDataRoute:!1}),u0=d.createContext(null);function cf(t,s){let{relative:r}=s===void 0?{}:s;ra()||Ie(!1);let{basename:a,navigator:n}=d.useContext(Qs),{hash:l,pathname:i,search:c}=x0(t,{relative:r}),o=i;return a!=="/"&&(o=i==="/"?a:qs([a,i])),n.createHref({pathname:o,search:c,hash:l})}function ra(){return d.useContext(Hl)!=null}function yr(){return ra()||Ie(!1),d.useContext(Hl).location}function m0(t){d.useContext(Qs).static||d.useLayoutEffect(t)}function br(){let{isDataRoute:t}=d.useContext(Ns);return t?Nf():df()}function df(){ra()||Ie(!1);let t=d.useContext(zc),{basename:s,future:r,navigator:a}=d.useContext(Qs),{matches:n}=d.useContext(Ns),{pathname:l}=yr(),i=JSON.stringify(Ic(n,r.v7_relativeSplatPath)),c=d.useRef(!1);return m0(()=>{c.current=!0}),d.useCallback(function(u,p){if(p===void 0&&(p={}),!c.current)return;if(typeof u=="number"){a.go(u);return}let y=qc(u,JSON.parse(i),l,p.relative==="path");t==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:qs([s,y.pathname])),(p.replace?a.replace:a.push)(y,p.state,p)},[s,a,i,l,t])}function Ro(){let{matches:t}=d.useContext(Ns),s=t[t.length-1];return s?s.params:{}}function x0(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=d.useContext(Qs),{matches:n}=d.useContext(Ns),{pathname:l}=yr(),i=JSON.stringify(Ic(n,a.v7_relativeSplatPath));return d.useMemo(()=>qc(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function uf(t,s){return mf(t,s)}function mf(t,s,r,a){ra()||Ie(!1);let{navigator:n}=d.useContext(Qs),{matches:l}=d.useContext(Ns),i=l[l.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let u=yr(),p;if(s){var y;let b=typeof s=="string"?sa(s):s;o==="/"||(y=b.pathname)!=null&&y.startsWith(o)||Ie(!1),p=b}else p=u;let f=p.pathname||"/",h=f;if(o!=="/"){let b=o.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=Og(t,{pathname:h}),j=ff(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:qs([o,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?o:qs([o,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,r,a);return s&&j?d.createElement(Hl.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:As.Pop}},j):j}function xf(){let t=vf(),s=nf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},s),r?d.createElement("pre",{style:n},r):null,null)}const hf=d.createElement(xf,null);class pf extends d.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?d.createElement(Ns.Provider,{value:this.props.routeContext},d.createElement(u0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gf(t){let{routeContext:s,match:r,children:a}=t,n=d.useContext(zc);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(Ns.Provider,{value:s},a)}function ff(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,c=(n=r)==null?void 0:n.errors;if(c!=null){let p=i.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);p>=0||Ie(!1),i=i.slice(0,Math.min(i.length,p+1))}let o=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let p=0;p<i.length;p++){let y=i[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(u=p),y.route.id){let{loaderData:f,errors:h}=r,g=y.route.loader&&f[y.route.id]===void 0&&(!h||h[y.route.id]===void 0);if(y.route.lazy||g){o=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((p,y,f)=>{let h,g=!1,j=null,b=null;r&&(h=c&&y.route.id?c[y.route.id]:void 0,j=y.route.errorElement||hf,o&&(u<0&&f===0?(wf("route-fallback"),g=!0,b=null):u===f&&(g=!0,b=y.route.hydrateFallbackElement||null)));let m=s.concat(i.slice(0,f+1)),x=()=>{let v;return h?v=j:g?v=b:y.route.Component?v=d.createElement(y.route.Component,null):y.route.element?v=y.route.element:v=p,d.createElement(gf,{match:y,routeContext:{outlet:p,matches:m,isDataRoute:r!=null},children:v})};return r&&(y.route.ErrorBoundary||y.route.errorElement||f===0)?d.createElement(pf,{location:r.location,revalidation:r.revalidation,component:j,error:h,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var h0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(h0||{}),p0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(p0||{});function yf(t){let s=d.useContext(zc);return s||Ie(!1),s}function bf(t){let s=d.useContext(of);return s||Ie(!1),s}function jf(t){let s=d.useContext(Ns);return s||Ie(!1),s}function g0(t){let s=jf(),r=s.matches[s.matches.length-1];return r.route.id||Ie(!1),r.route.id}function vf(){var t;let s=d.useContext(u0),r=bf(),a=g0();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function Nf(){let{router:t}=yf(h0.UseNavigateStable),s=g0(p0.UseNavigateStable),r=d.useRef(!1);return m0(()=>{r.current=!0}),d.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Ya({fromRouteId:s},l)))},[t,s])}const ou={};function wf(t,s,r){ou[t]||(ou[t]=!0)}function Sf(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qe(t){let{to:s,replace:r,state:a,relative:n}=t;ra()||Ie(!1);let{future:l,static:i}=d.useContext(Qs),{matches:c}=d.useContext(Ns),{pathname:o}=yr(),u=br(),p=qc(s,Ic(c,l.v7_relativeSplatPath),o,n==="path"),y=JSON.stringify(p);return d.useEffect(()=>u(JSON.parse(y),{replace:r,state:a,relative:n}),[u,y,n,r,a]),null}function Ae(t){Ie(!1)}function _f(t){let{basename:s="/",children:r=null,location:a,navigationType:n=As.Pop,navigator:l,static:i=!1,future:c}=t;ra()&&Ie(!1);let o=s.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:o,navigator:l,static:i,future:Ya({v7_relativeSplatPath:!1},c)}),[o,c,l,i]);typeof a=="string"&&(a=sa(a));let{pathname:p="/",search:y="",hash:f="",state:h=null,key:g="default"}=a,j=d.useMemo(()=>{let b=Oc(p,o);return b==null?null:{location:{pathname:b,search:y,hash:f,state:h,key:g},navigationType:n}},[o,p,y,f,h,g,n]);return j==null?null:d.createElement(Qs.Provider,{value:u},d.createElement(Hl.Provider,{children:r,value:j}))}function kf(t){let{children:s,location:r}=t;return uf(Po(s),r)}new Promise(()=>{});function Po(t,s){s===void 0&&(s=[]);let r=[];return d.Children.forEach(t,(a,n)=>{if(!d.isValidElement(a))return;let l=[...s,n];if(a.type===d.Fragment){r.push.apply(r,Po(a.props.children,l));return}a.type!==Ae&&Ie(!1),!a.props.index||!a.props.children||Ie(!1);let i={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Po(a.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},To.apply(this,arguments)}function Cf(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Rf(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Pf(t,s){return t.button===0&&(!s||s==="_self")&&!Rf(t)}const Tf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Af="6";try{window.__reactRouterVersion=Af}catch{}const Ef="startTransition",cu=wh[Ef];function Lf(t){let{basename:s,children:r,future:a,window:n}=t,l=d.useRef();l.current==null&&(l.current=Mg({window:n,v5Compat:!0}));let i=l.current,[c,o]=d.useState({action:i.action,location:i.location}),{v7_startTransition:u}=a||{},p=d.useCallback(y=>{u&&cu?cu(()=>o(y)):o(y)},[o,u]);return d.useLayoutEffect(()=>i.listen(p),[i,p]),d.useEffect(()=>Sf(a),[a]),d.createElement(_f,{basename:s,children:r,location:c.location,navigationType:c.action,navigator:i,future:a})}const Ff=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xr=d.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:l,replace:i,state:c,target:o,to:u,preventScrollReset:p,viewTransition:y}=s,f=Cf(s,Tf),{basename:h}=d.useContext(Qs),g,j=!1;if(typeof u=="string"&&Mf.test(u)&&(g=u,Ff))try{let v=new URL(window.location.href),w=u.startsWith("//")?new URL(v.protocol+u):new URL(u),_=Oc(w.pathname,h);w.origin===v.origin&&_!=null?u=_+w.search+w.hash:j=!0}catch{}let b=cf(u,{relative:n}),m=Df(u,{replace:i,state:c,target:o,preventScrollReset:p,relative:n,viewTransition:y});function x(v){a&&a(v),v.defaultPrevented||m(v)}return d.createElement("a",To({},f,{href:g||b,onClick:j||l?a:x,ref:r,target:o}))});var du;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(du||(du={}));var uu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uu||(uu={}));function Df(t,s){let{target:r,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:c}=s===void 0?{}:s,o=br(),u=yr(),p=x0(t,{relative:i});return d.useCallback(y=>{if(Pf(y,r)){y.preventDefault();let f=a!==void 0?a:wl(u)===wl(p);o(t,{replace:f,state:n,preventScrollReset:l,relative:i,viewTransition:c})}},[u,o,p,a,n,r,t,l,i,c])}function f0(t,s){return function(){return t.apply(s,arguments)}}const{toString:$f}=Object.prototype,{getPrototypeOf:Bc}=Object,{iterator:Wl,toStringTag:y0}=Symbol,Vl=(t=>s=>{const r=$f.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Zt=t=>(t=t.toLowerCase(),s=>Vl(s)===t),Gl=t=>s=>typeof s===t,{isArray:aa}=Array,Yr=Gl("undefined");function cn(t){return t!==null&&!Yr(t)&&t.constructor!==null&&!Yr(t.constructor)&&vt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const b0=Zt("ArrayBuffer");function Of(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&b0(t.buffer),s}const If=Gl("string"),vt=Gl("function"),j0=Gl("number"),dn=t=>t!==null&&typeof t=="object",qf=t=>t===!0||t===!1,Jn=t=>{if(Vl(t)!=="object")return!1;const s=Bc(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(y0 in t)&&!(Wl in t)},zf=t=>{if(!dn(t)||cn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Bf=Zt("Date"),Uf=Zt("File"),Hf=Zt("Blob"),Wf=Zt("FileList"),Vf=t=>dn(t)&&vt(t.pipe),Gf=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||vt(t.append)&&((s=Vl(t))==="formdata"||s==="object"&&vt(t.toString)&&t.toString()==="[object FormData]"))},Jf=Zt("URLSearchParams"),[Qf,Kf,Zf,Yf]=["ReadableStream","Request","Response","Headers"].map(Zt),Xf=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function un(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),aa(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(cn(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let c;for(a=0;a<i;a++)c=l[a],s.call(null,t[c],c,t)}}function v0(t,s){if(cn(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,N0=t=>!Yr(t)&&t!==rr;function Ao(){const{caseless:t,skipUndefined:s}=N0(this)&&this||{},r={},a=(n,l)=>{const i=t&&v0(r,l)||l;Jn(r[i])&&Jn(n)?r[i]=Ao(r[i],n):Jn(n)?r[i]=Ao({},n):aa(n)?r[i]=n.slice():(!s||!Yr(n))&&(r[i]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&un(arguments[n],a);return r}const ey=(t,s,r,{allOwnKeys:a}={})=>(un(s,(n,l)=>{r&&vt(n)?t[l]=f0(n,r):t[l]=n},{allOwnKeys:a}),t),ty=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),sy=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},ry=(t,s,r,a)=>{let n,l,i;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),l=n.length;l-- >0;)i=n[l],(!a||a(i,t,s))&&!c[i]&&(s[i]=t[i],c[i]=!0);t=r!==!1&&Bc(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},ay=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},ny=t=>{if(!t)return null;if(aa(t))return t;let s=t.length;if(!j0(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},ly=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Bc(Uint8Array)),iy=(t,s)=>{const a=(t&&t[Wl]).call(t);let n;for(;(n=a.next())&&!n.done;){const l=n.value;s.call(t,l[0],l[1])}},oy=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},cy=Zt("HTMLFormElement"),dy=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),mu=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),uy=Zt("RegExp"),w0=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};un(r,(n,l)=>{let i;(i=s(n,l,t))!==!1&&(a[l]=i||n)}),Object.defineProperties(t,a)},my=t=>{w0(t,(s,r)=>{if(vt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(vt(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xy=(t,s)=>{const r={},a=n=>{n.forEach(l=>{r[l]=!0})};return aa(t)?a(t):a(String(t).split(s)),r},hy=()=>{},py=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function gy(t){return!!(t&&vt(t.append)&&t[y0]==="FormData"&&t[Wl])}const fy=t=>{const s=new Array(10),r=(a,n)=>{if(dn(a)){if(s.indexOf(a)>=0)return;if(cn(a))return a;if(!("toJSON"in a)){s[n]=a;const l=aa(a)?[]:{};return un(a,(i,c)=>{const o=r(i,n+1);!Yr(o)&&(l[c]=o)}),s[n]=void 0,l}}return a};return r(t,0)},yy=Zt("AsyncFunction"),by=t=>t&&(dn(t)||vt(t))&&vt(t.then)&&vt(t.catch),S0=((t,s)=>t?setImmediate:s?((r,a)=>(rr.addEventListener("message",({source:n,data:l})=>{n===rr&&l===r&&a.length&&a.shift()()},!1),n=>{a.push(n),rr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",vt(rr.postMessage)),jy=typeof queueMicrotask<"u"?queueMicrotask.bind(rr):typeof process<"u"&&process.nextTick||S0,vy=t=>t!=null&&vt(t[Wl]),J={isArray:aa,isArrayBuffer:b0,isBuffer:cn,isFormData:Gf,isArrayBufferView:Of,isString:If,isNumber:j0,isBoolean:qf,isObject:dn,isPlainObject:Jn,isEmptyObject:zf,isReadableStream:Qf,isRequest:Kf,isResponse:Zf,isHeaders:Yf,isUndefined:Yr,isDate:Bf,isFile:Uf,isBlob:Hf,isRegExp:uy,isFunction:vt,isStream:Vf,isURLSearchParams:Jf,isTypedArray:ly,isFileList:Wf,forEach:un,merge:Ao,extend:ey,trim:Xf,stripBOM:ty,inherits:sy,toFlatObject:ry,kindOf:Vl,kindOfTest:Zt,endsWith:ay,toArray:ny,forEachEntry:iy,matchAll:oy,isHTMLForm:cy,hasOwnProperty:mu,hasOwnProp:mu,reduceDescriptors:w0,freezeMethods:my,toObjectSet:xy,toCamelCase:dy,noop:hy,toFiniteNumber:py,findKey:v0,global:rr,isContextDefined:N0,isSpecCompliantForm:gy,toJSONObject:fy,isAsyncFn:yy,isThenable:by,setImmediate:S0,asap:jy,isIterable:vy};function pe(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}J.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const _0=pe.prototype,k0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{k0[t]={value:t}});Object.defineProperties(pe,k0);Object.defineProperty(_0,"isAxiosError",{value:!0});pe.from=(t,s,r,a,n,l)=>{const i=Object.create(_0);J.toFlatObject(t,i,function(p){return p!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",o=s==null&&t?t.code:s;return pe.call(i,c,o,r,a,n),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",l&&Object.assign(i,l),i};const Ny=null;function Eo(t){return J.isPlainObject(t)||J.isArray(t)}function C0(t){return J.endsWith(t,"[]")?t.slice(0,-2):t}function xu(t,s,r){return t?t.concat(s).map(function(n,l){return n=C0(n),!r&&l?"["+n+"]":n}).join(r?".":""):s}function wy(t){return J.isArray(t)&&!t.some(Eo)}const Sy=J.toFlatObject(J,{},null,function(s){return/^is[A-Z]/.test(s)});function Jl(t,s,r){if(!J.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=J.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,b){return!J.isUndefined(b[j])});const a=r.metaTokens,n=r.visitor||p,l=r.dots,i=r.indexes,o=(r.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(s);if(!J.isFunction(n))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(J.isDate(g))return g.toISOString();if(J.isBoolean(g))return g.toString();if(!o&&J.isBlob(g))throw new pe("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(g)||J.isTypedArray(g)?o&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function p(g,j,b){let m=g;if(g&&!b&&typeof g=="object"){if(J.endsWith(j,"{}"))j=a?j:j.slice(0,-2),g=JSON.stringify(g);else if(J.isArray(g)&&wy(g)||(J.isFileList(g)||J.endsWith(j,"[]"))&&(m=J.toArray(g)))return j=C0(j),m.forEach(function(v,w){!(J.isUndefined(v)||v===null)&&s.append(i===!0?xu([j],w,l):i===null?j:j+"[]",u(v))}),!1}return Eo(g)?!0:(s.append(xu(b,j,l),u(g)),!1)}const y=[],f=Object.assign(Sy,{defaultVisitor:p,convertValue:u,isVisitable:Eo});function h(g,j){if(!J.isUndefined(g)){if(y.indexOf(g)!==-1)throw Error("Circular reference detected in "+j.join("."));y.push(g),J.forEach(g,function(m,x){(!(J.isUndefined(m)||m===null)&&n.call(s,m,J.isString(x)?x.trim():x,j,f))===!0&&h(m,j?j.concat(x):[x])}),y.pop()}}if(!J.isObject(t))throw new TypeError("data must be an object");return h(t),s}function hu(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Uc(t,s){this._pairs=[],t&&Jl(t,this,s)}const R0=Uc.prototype;R0.append=function(s,r){this._pairs.push([s,r])};R0.toString=function(s){const r=s?function(a){return s.call(this,a,hu)}:hu;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function _y(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function P0(t,s,r){if(!s)return t;const a=r&&r.encode||_y;J.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(s,r):l=J.isURLSearchParams(s)?s.toString():new Uc(s,r).toString(a),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class pu{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){J.forEach(this.handlers,function(a){a!==null&&s(a)})}}const T0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ky=typeof URLSearchParams<"u"?URLSearchParams:Uc,Cy=typeof FormData<"u"?FormData:null,Ry=typeof Blob<"u"?Blob:null,Py={isBrowser:!0,classes:{URLSearchParams:ky,FormData:Cy,Blob:Ry},protocols:["http","https","file","blob","url","data"]},Hc=typeof window<"u"&&typeof document<"u",Lo=typeof navigator=="object"&&navigator||void 0,Ty=Hc&&(!Lo||["ReactNative","NativeScript","NS"].indexOf(Lo.product)<0),Ay=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ey=Hc&&window.location.href||"http://localhost",Ly=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hc,hasStandardBrowserEnv:Ty,hasStandardBrowserWebWorkerEnv:Ay,navigator:Lo,origin:Ey},Symbol.toStringTag,{value:"Module"})),it={...Ly,...Py};function Fy(t,s){return Jl(t,new it.classes.URLSearchParams,{visitor:function(r,a,n,l){return it.isNode&&J.isBuffer(r)?(this.append(a,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function My(t){return J.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Dy(t){const s={},r=Object.keys(t);let a;const n=r.length;let l;for(a=0;a<n;a++)l=r[a],s[l]=t[l];return s}function A0(t){function s(r,a,n,l){let i=r[l++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),o=l>=r.length;return i=!i&&J.isArray(n)?n.length:i,o?(J.hasOwnProp(n,i)?n[i]=[n[i],a]:n[i]=a,!c):((!n[i]||!J.isObject(n[i]))&&(n[i]=[]),s(r,a,n[i],l)&&J.isArray(n[i])&&(n[i]=Dy(n[i])),!c)}if(J.isFormData(t)&&J.isFunction(t.entries)){const r={};return J.forEachEntry(t,(a,n)=>{s(My(a),n,r,0)}),r}return null}function $y(t,s,r){if(J.isString(t))try{return(s||JSON.parse)(t),J.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const mn={transitional:T0,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,l=J.isObject(s);if(l&&J.isHTMLForm(s)&&(s=new FormData(s)),J.isFormData(s))return n?JSON.stringify(A0(s)):s;if(J.isArrayBuffer(s)||J.isBuffer(s)||J.isStream(s)||J.isFile(s)||J.isBlob(s)||J.isReadableStream(s))return s;if(J.isArrayBufferView(s))return s.buffer;if(J.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Fy(s,this.formSerializer).toString();if((c=J.isFileList(s))||a.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Jl(c?{"files[]":s}:s,o&&new o,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),$y(s)):s}],transformResponse:[function(s){const r=this.transitional||mn.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(J.isResponse(s)||J.isReadableStream(s))return s;if(s&&J.isString(s)&&(a&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?pe.from(c,pe.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],t=>{mn.headers[t]={}});const Oy=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Iy=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),a=i.substring(n+1).trim(),!(!r||s[r]&&Oy[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},gu=Symbol("internals");function pa(t){return t&&String(t).trim().toLowerCase()}function Qn(t){return t===!1||t==null?t:J.isArray(t)?t.map(Qn):String(t)}function qy(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const zy=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ci(t,s,r,a,n){if(J.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!J.isString(s)){if(J.isString(a))return s.indexOf(a)!==-1;if(J.isRegExp(a))return a.test(s)}}function By(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function Uy(t,s){const r=J.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,l,i){return this[a].call(this,s,n,l,i)},configurable:!0})})}let Nt=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function l(c,o,u){const p=pa(o);if(!p)throw new Error("header name must be a non-empty string");const y=J.findKey(n,p);(!y||n[y]===void 0||u===!0||u===void 0&&n[y]!==!1)&&(n[y||o]=Qn(c))}const i=(c,o)=>J.forEach(c,(u,p)=>l(u,p,o));if(J.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(J.isString(s)&&(s=s.trim())&&!zy(s))i(Iy(s),r);else if(J.isObject(s)&&J.isIterable(s)){let c={},o,u;for(const p of s){if(!J.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[u=p[0]]=(o=c[u])?J.isArray(o)?[...o,p[1]]:[o,p[1]]:p[1]}i(c,r)}else s!=null&&l(r,s,a);return this}get(s,r){if(s=pa(s),s){const a=J.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return qy(n);if(J.isFunction(r))return r.call(this,n,a);if(J.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=pa(s),s){const a=J.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Ci(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function l(i){if(i=pa(i),i){const c=J.findKey(a,i);c&&(!r||Ci(a,a[c],c,r))&&(delete a[c],n=!0)}}return J.isArray(s)?s.forEach(l):l(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const l=r[a];(!s||Ci(this,this[l],l,s,!0))&&(delete this[l],n=!0)}return n}normalize(s){const r=this,a={};return J.forEach(this,(n,l)=>{const i=J.findKey(a,l);if(i){r[i]=Qn(n),delete r[l];return}const c=s?By(l):String(l).trim();c!==l&&delete r[l],r[c]=Qn(n),a[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return J.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&J.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[gu]=this[gu]={accessors:{}}).accessors,n=this.prototype;function l(i){const c=pa(i);a[c]||(Uy(n,i),a[c]=!0)}return J.isArray(s)?s.forEach(l):l(s),this}};Nt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(Nt.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});J.freezeMethods(Nt);function Ri(t,s){const r=this||mn,a=s||r,n=Nt.from(a.headers);let l=a.data;return J.forEach(t,function(c){l=c.call(r,l,n.normalize(),s?s.status:void 0)}),n.normalize(),l}function E0(t){return!!(t&&t.__CANCEL__)}function na(t,s,r){pe.call(this,t??"canceled",pe.ERR_CANCELED,s,r),this.name="CanceledError"}J.inherits(na,pe,{__CANCEL__:!0});function L0(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new pe("Request failed with status code "+r.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Hy(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Wy(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,l=0,i;return s=s!==void 0?s:1e3,function(o){const u=Date.now(),p=a[l];i||(i=u),r[n]=o,a[n]=u;let y=l,f=0;for(;y!==n;)f+=r[y++],y=y%t;if(n=(n+1)%t,n===l&&(l=(l+1)%t),u-i<s)return;const h=p&&u-p;return h?Math.round(f*1e3/h):void 0}}function Vy(t,s){let r=0,a=1e3/s,n,l;const i=(u,p=Date.now())=>{r=p,n=null,l&&(clearTimeout(l),l=null),t(...u)};return[(...u)=>{const p=Date.now(),y=p-r;y>=a?i(u,p):(n=u,l||(l=setTimeout(()=>{l=null,i(n)},a-y)))},()=>n&&i(n)]}const Sl=(t,s,r=3)=>{let a=0;const n=Wy(50,250);return Vy(l=>{const i=l.loaded,c=l.lengthComputable?l.total:void 0,o=i-a,u=n(o),p=i<=c;a=i;const y={loaded:i,total:c,progress:c?i/c:void 0,bytes:o,rate:u||void 0,estimated:u&&c&&p?(c-i)/u:void 0,event:l,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(y)},r)},fu=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},yu=t=>(...s)=>J.asap(()=>t(...s)),Gy=it.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,it.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(it.origin),it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent)):()=>!0,Jy=it.hasStandardBrowserEnv?{write(t,s,r,a,n,l){const i=[t+"="+encodeURIComponent(s)];J.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),J.isString(a)&&i.push("path="+a),J.isString(n)&&i.push("domain="+n),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qy(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ky(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function F0(t,s,r){let a=!Qy(s);return t&&(a||r==!1)?Ky(t,s):s}const bu=t=>t instanceof Nt?{...t}:t;function hr(t,s){s=s||{};const r={};function a(u,p,y,f){return J.isPlainObject(u)&&J.isPlainObject(p)?J.merge.call({caseless:f},u,p):J.isPlainObject(p)?J.merge({},p):J.isArray(p)?p.slice():p}function n(u,p,y,f){if(J.isUndefined(p)){if(!J.isUndefined(u))return a(void 0,u,y,f)}else return a(u,p,y,f)}function l(u,p){if(!J.isUndefined(p))return a(void 0,p)}function i(u,p){if(J.isUndefined(p)){if(!J.isUndefined(u))return a(void 0,u)}else return a(void 0,p)}function c(u,p,y){if(y in s)return a(u,p);if(y in t)return a(void 0,u)}const o={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(u,p,y)=>n(bu(u),bu(p),y,!0)};return J.forEach(Object.keys({...t,...s}),function(p){const y=o[p]||n,f=y(t[p],s[p],p);J.isUndefined(f)&&y!==c||(r[p]=f)}),r}const M0=t=>{const s=hr({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:l,headers:i,auth:c}=s;if(s.headers=i=Nt.from(i),s.url=P0(F0(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),J.isFormData(r)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(J.isFunction(r.getHeaders)){const o=r.getHeaders(),u=["content-type","content-length"];Object.entries(o).forEach(([p,y])=>{u.includes(p.toLowerCase())&&i.set(p,y)})}}if(it.hasStandardBrowserEnv&&(a&&J.isFunction(a)&&(a=a(s)),a||a!==!1&&Gy(s.url))){const o=n&&l&&Jy.read(l);o&&i.set(n,o)}return s},Zy=typeof XMLHttpRequest<"u",Yy=Zy&&function(t){return new Promise(function(r,a){const n=M0(t);let l=n.data;const i=Nt.from(n.headers).normalize();let{responseType:c,onUploadProgress:o,onDownloadProgress:u}=n,p,y,f,h,g;function j(){h&&h(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(p),n.signal&&n.signal.removeEventListener("abort",p)}let b=new XMLHttpRequest;b.open(n.method.toUpperCase(),n.url,!0),b.timeout=n.timeout;function m(){if(!b)return;const v=Nt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),_={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:v,config:t,request:b};L0(function(S){r(S),j()},function(S){a(S),j()},_),b=null}"onloadend"in b?b.onloadend=m:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(m)},b.onabort=function(){b&&(a(new pe("Request aborted",pe.ECONNABORTED,t,b)),b=null)},b.onerror=function(w){const _=w&&w.message?w.message:"Network Error",R=new pe(_,pe.ERR_NETWORK,t,b);R.event=w||null,a(R),b=null},b.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const _=n.transitional||T0;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),a(new pe(w,_.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,t,b)),b=null},l===void 0&&i.setContentType(null),"setRequestHeader"in b&&J.forEach(i.toJSON(),function(w,_){b.setRequestHeader(_,w)}),J.isUndefined(n.withCredentials)||(b.withCredentials=!!n.withCredentials),c&&c!=="json"&&(b.responseType=n.responseType),u&&([f,g]=Sl(u,!0),b.addEventListener("progress",f)),o&&b.upload&&([y,h]=Sl(o),b.upload.addEventListener("progress",y),b.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(p=v=>{b&&(a(!v||v.type?new na(null,t,b):v),b.abort(),b=null)},n.cancelToken&&n.cancelToken.subscribe(p),n.signal&&(n.signal.aborted?p():n.signal.addEventListener("abort",p)));const x=Hy(n.url);if(x&&it.protocols.indexOf(x)===-1){a(new pe("Unsupported protocol "+x+":",pe.ERR_BAD_REQUEST,t));return}b.send(l||null)})},Xy=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const l=function(u){if(!n){n=!0,c();const p=u instanceof Error?u:this.reason;a.abort(p instanceof pe?p:new na(p instanceof Error?p.message:p))}};let i=s&&setTimeout(()=>{i=null,l(new pe(`timeout ${s} of ms exceeded`,pe.ETIMEDOUT))},s);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),t=null)};t.forEach(u=>u.addEventListener("abort",l));const{signal:o}=a;return o.unsubscribe=()=>J.asap(c),o}},eb=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},tb=async function*(t,s){for await(const r of sb(t))yield*eb(r,s)},sb=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},ju=(t,s,r,a)=>{const n=tb(t,s);let l=0,i,c=o=>{i||(i=!0,a&&a(o))};return new ReadableStream({async pull(o){try{const{done:u,value:p}=await n.next();if(u){c(),o.close();return}let y=p.byteLength;if(r){let f=l+=y;r(f)}o.enqueue(new Uint8Array(p))}catch(u){throw c(u),u}},cancel(o){return c(o),n.return()}},{highWaterMark:2})},vu=64*1024,{isFunction:Ln}=J,rb=(({Request:t,Response:s})=>({Request:t,Response:s}))(J.global),{ReadableStream:Nu,TextEncoder:wu}=J.global,Su=(t,...s)=>{try{return!!t(...s)}catch{return!1}},ab=t=>{t=J.merge.call({skipUndefined:!0},rb,t);const{fetch:s,Request:r,Response:a}=t,n=s?Ln(s):typeof fetch=="function",l=Ln(r),i=Ln(a);if(!n)return!1;const c=n&&Ln(Nu),o=n&&(typeof wu=="function"?(g=>j=>g.encode(j))(new wu):async g=>new Uint8Array(await new r(g).arrayBuffer())),u=l&&c&&Su(()=>{let g=!1;const j=new r(it.origin,{body:new Nu,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!j}),p=i&&c&&Su(()=>J.isReadableStream(new a("").body)),y={stream:p&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!y[g]&&(y[g]=(j,b)=>{let m=j&&j[g];if(m)return m.call(j);throw new pe(`Response type '${g}' is not supported`,pe.ERR_NOT_SUPPORT,b)})});const f=async g=>{if(g==null)return 0;if(J.isBlob(g))return g.size;if(J.isSpecCompliantForm(g))return(await new r(it.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(J.isArrayBufferView(g)||J.isArrayBuffer(g))return g.byteLength;if(J.isURLSearchParams(g)&&(g=g+""),J.isString(g))return(await o(g)).byteLength},h=async(g,j)=>{const b=J.toFiniteNumber(g.getContentLength());return b??f(j)};return async g=>{let{url:j,method:b,data:m,signal:x,cancelToken:v,timeout:w,onDownloadProgress:_,onUploadProgress:R,responseType:S,headers:I,withCredentials:M="same-origin",fetchOptions:A}=M0(g),P=s||fetch;S=S?(S+"").toLowerCase():"text";let C=Xy([x,v&&v.toAbortSignal()],w),k=null;const E=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let W;try{if(R&&u&&b!=="get"&&b!=="head"&&(W=await h(I,m))!==0){let U=new r(j,{method:"POST",body:m,duplex:"half"}),ee;if(J.isFormData(m)&&(ee=U.headers.get("content-type"))&&I.setContentType(ee),U.body){const[te,de]=fu(W,Sl(yu(R)));m=ju(U.body,vu,te,de)}}J.isString(M)||(M=M?"include":"omit");const N=l&&"credentials"in r.prototype,H={...A,signal:C,method:b.toUpperCase(),headers:I.normalize().toJSON(),body:m,duplex:"half",credentials:N?M:void 0};k=l&&new r(j,H);let T=await(l?P(k,A):P(j,H));const F=p&&(S==="stream"||S==="response");if(p&&(_||F&&E)){const U={};["status","statusText","headers"].forEach(K=>{U[K]=T[K]});const ee=J.toFiniteNumber(T.headers.get("content-length")),[te,de]=_&&fu(ee,Sl(yu(_),!0))||[];T=new a(ju(T.body,vu,te,()=>{de&&de(),E&&E()}),U)}S=S||"text";let G=await y[J.findKey(y,S)||"text"](T,g);return!F&&E&&E(),await new Promise((U,ee)=>{L0(U,ee,{data:G,headers:Nt.from(T.headers),status:T.status,statusText:T.statusText,config:g,request:k})})}catch(N){throw E&&E(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,g,k),{cause:N.cause||N}):pe.from(N,N&&N.code,g,k)}}},nb=new Map,D0=t=>{let s=t?t.env:{};const{fetch:r,Request:a,Response:n}=s,l=[a,n,r];let i=l.length,c=i,o,u,p=nb;for(;c--;)o=l[c],u=p.get(o),u===void 0&&p.set(o,u=c?new Map:ab(s)),p=u;return u};D0();const Fo={http:Ny,xhr:Yy,fetch:{get:D0}};J.forEach(Fo,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const _u=t=>`- ${t}`,lb=t=>J.isFunction(t)||t===null||t===!1,$0={getAdapter:(t,s)=>{t=J.isArray(t)?t:[t];const{length:r}=t;let a,n;const l={};for(let i=0;i<r;i++){a=t[i];let c;if(n=a,!lb(a)&&(n=Fo[(c=String(a)).toLowerCase()],n===void 0))throw new pe(`Unknown adapter '${c}'`);if(n&&(J.isFunction(n)||(n=n.get(s))))break;l[c||"#"+i]=n}if(!n){const i=Object.entries(l).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(_u).join(`
`):" "+_u(i[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:Fo};function Pi(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new na(null,t)}function ku(t){return Pi(t),t.headers=Nt.from(t.headers),t.data=Ri.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$0.getAdapter(t.adapter||mn.adapter,t)(t).then(function(a){return Pi(t),a.data=Ri.call(t,t.transformResponse,a),a.headers=Nt.from(a.headers),a},function(a){return E0(a)||(Pi(t),a&&a.response&&(a.response.data=Ri.call(t,t.transformResponse,a.response),a.response.headers=Nt.from(a.response.headers))),Promise.reject(a)})}const O0="1.12.2",Ql={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Ql[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Cu={};Ql.transitional=function(s,r,a){function n(l,i){return"[Axios v"+O0+"] Transitional option '"+l+"'"+i+(a?". "+a:"")}return(l,i,c)=>{if(s===!1)throw new pe(n(i," has been removed"+(r?" in "+r:"")),pe.ERR_DEPRECATED);return r&&!Cu[i]&&(Cu[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,c):!0}};Ql.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function ib(t,s,r){if(typeof t!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const l=a[n],i=s[l];if(i){const c=t[l],o=c===void 0||i(c,l,t);if(o!==!0)throw new pe("option "+l+" must be "+o,pe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new pe("Unknown option "+l,pe.ERR_BAD_OPTION)}}const Kn={assertOptions:ib,validators:Ql},Xt=Kn.validators;let lr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new pu,response:new pu}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=hr(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:l}=r;a!==void 0&&Kn.assertOptions(a,{silentJSONParsing:Xt.transitional(Xt.boolean),forcedJSONParsing:Xt.transitional(Xt.boolean),clarifyTimeoutError:Xt.transitional(Xt.boolean)},!1),n!=null&&(J.isFunction(n)?r.paramsSerializer={serialize:n}:Kn.assertOptions(n,{encode:Xt.function,serialize:Xt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Kn.assertOptions(r,{baseUrl:Xt.spelling("baseURL"),withXsrfToken:Xt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&J.merge(l.common,l[r.method]);l&&J.forEach(["delete","get","head","post","put","patch","common"],g=>{delete l[g]}),r.headers=Nt.concat(i,l);const c=[];let o=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(o=o&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let p,y=0,f;if(!o){const g=[ku.bind(this),void 0];for(g.unshift(...c),g.push(...u),f=g.length,p=Promise.resolve(r);y<f;)p=p.then(g[y++],g[y++]);return p}f=c.length;let h=r;for(;y<f;){const g=c[y++],j=c[y++];try{h=g(h)}catch(b){j.call(this,b);break}}try{p=ku.call(this,h)}catch(g){return Promise.reject(g)}for(y=0,f=u.length;y<f;)p=p.then(u[y++],u[y++]);return p}getUri(s){s=hr(this.defaults,s);const r=F0(s.baseURL,s.url,s.allowAbsoluteUrls);return P0(r,s.params,s.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(s){lr.prototype[s]=function(r,a){return this.request(hr(a||{},{method:s,url:r,data:(a||{}).data}))}});J.forEach(["post","put","patch"],function(s){function r(a){return function(l,i,c){return this.request(hr(c||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}lr.prototype[s]=r(),lr.prototype[s+"Form"]=r(!0)});let ob=class I0{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const a=this;this.promise.then(n=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](n);a._listeners=null}),this.promise.then=n=>{let l;const i=new Promise(c=>{a.subscribe(c),l=c}).then(n);return i.cancel=function(){a.unsubscribe(l)},i},s(function(l,i,c){a.reason||(a.reason=new na(l,i,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new I0(function(n){s=n}),cancel:s}}};function cb(t){return function(r){return t.apply(null,r)}}function db(t){return J.isObject(t)&&t.isAxiosError===!0}const Mo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mo).forEach(([t,s])=>{Mo[s]=t});function q0(t){const s=new lr(t),r=f0(lr.prototype.request,s);return J.extend(r,lr.prototype,s,{allOwnKeys:!0}),J.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return q0(hr(t,n))},r}const ze=q0(mn);ze.Axios=lr;ze.CanceledError=na;ze.CancelToken=ob;ze.isCancel=E0;ze.VERSION=O0;ze.toFormData=Jl;ze.AxiosError=pe;ze.Cancel=ze.CanceledError;ze.all=function(s){return Promise.all(s)};ze.spread=cb;ze.isAxiosError=db;ze.mergeConfig=hr;ze.AxiosHeaders=Nt;ze.formToJSON=t=>A0(J.isHTMLForm(t)?new FormData(t):t);ze.getAdapter=$0.getAdapter;ze.HttpStatusCode=Mo;ze.default=ze;const{Axios:yv,AxiosError:bv,CanceledError:jv,isCancel:vv,CancelToken:Nv,VERSION:wv,all:Sv,Cancel:_v,isAxiosError:kv,spread:Cv,toFormData:Rv,AxiosHeaders:Pv,HttpStatusCode:Tv,formToJSON:Av,getAdapter:Ev,mergeConfig:Lv}=ze,ub=()=>"/api",z=ze.create({baseURL:ub(),headers:{"Content-Type":"application/json"}});z.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));z.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(t)});const Do={getStatus:()=>z.get("/math-game/status"),startGame:t=>z.post("/math-game/start",t),submitGame:t=>z.post("/math-game/submit",t)},Zn={getStatus:()=>z.get("/wordle-game/status"),startGame:()=>z.post("/wordle-game/start",{}),guess:(t,s)=>z.post("/wordle-game/guess",{session_id:t,guess:s}),complete:t=>z.post("/wordle-game/complete",{session_id:t})},$o={getStatus:()=>z.get("/architect-game/status"),startGame:t=>z.post("/architect-game/start",t),submitGame:t=>z.post("/architect-game/submit",t),getQuestion:t=>Promise.resolve({data:{question:"",answer:0}})},Oo={getStatus:()=>z.get("/accountant-game/status"),startGame:t=>z.post("/accountant-game/start",t),submitGame:t=>z.post("/accountant-game/submit",t)},Io={getStatus:()=>z.get("/software-engineer-game/status"),startGame:t=>z.post("/software-engineer-game/start",t),submitGame:t=>z.post("/software-engineer-game/submit",t)},qo={getStatus:()=>z.get("/marketing-manager-game/status"),startGame:t=>z.post("/marketing-manager-game/start",t),submitGame:t=>z.post("/marketing-manager-game/submit",t)},pt={getJobs:()=>z.get("/jobs"),getJob:t=>z.get(`/jobs/${t}`),applyToJob:(t,s)=>z.post(`/jobs/${t}/apply`,{answers:s}),getApplications:t=>{const s=new URLSearchParams;t!=null&&t.status&&s.append("status",t.status),t!=null&&t.job_id&&s.append("job_id",t.job_id.toString()),t!=null&&t.user_id&&s.append("user_id",t.user_id.toString());const r=s.toString();return z.get(`/jobs/applications${r?`?${r}`:""}`)},getApplication:t=>z.get(`/jobs/applications/${t}`),updateApplicationStatus:(t,s)=>z.put(`/jobs/applications/${t}`,{status:s}),getJobAssignmentsOverview:t=>{const s=t?`?class=${t}`:"";return z.get(`/jobs/assignments/overview${s}`)},assignJobToStudent:(t,s)=>z.post("/jobs/assign",{user_id:t,job_id:s}),removeJobFromStudent:t=>z.delete(`/jobs/assign/${t}`),updateJob:(t,s)=>z.put(`/jobs/${t}`,s),getMyApplicationCount:()=>z.get("/jobs/my-applications/count"),awardXP:(t,s)=>z.post("/jobs/award-xp",{user_id:t,xp_amount:s})},Wt={getParcels:t=>{const s=new URLSearchParams;(t==null?void 0:t.minRow)!==void 0&&s.append("minRow",t.minRow.toString()),(t==null?void 0:t.maxRow)!==void 0&&s.append("maxRow",t.maxRow.toString()),(t==null?void 0:t.minCol)!==void 0&&s.append("minCol",t.minCol.toString()),(t==null?void 0:t.maxCol)!==void 0&&s.append("maxCol",t.maxCol.toString()),(t==null?void 0:t.owned)!==void 0&&s.append("owned",t.owned.toString()),t!=null&&t.biome&&s.append("biome",t.biome);const r=s.toString();return z.get(`/land/parcels${r?`?${r}`:""}`)},getParcel:t=>z.get(`/land/parcels/${t}`),getMyProperties:()=>z.get("/land/my-properties"),submitPurchaseRequest:(t,s)=>z.post("/land/purchase-request",{parcel_id:t,offered_price:s}),getPurchaseRequests:t=>{const s=t?`?status=${t}`:"";return z.get(`/land/purchase-requests${s}`)},updatePurchaseRequest:(t,s,r)=>z.put(`/land/purchase-requests/${t}`,{status:s,denial_reason:r}),seedLandData:()=>z.post("/land/seed"),getStats:()=>z.get("/land/stats"),getBiomeConfig:()=>z.get("/land/biome-config"),swapParcels:(t,s)=>z.post("/land/swap",{parcel_id_a:t,parcel_id_b:s}),recalculateValues:()=>z.post("/land/recalculate-values")},os={getTreasuryInfo:t=>z.get(`/town/treasury/${t}`),depositToTreasury:(t,s,r)=>z.post(`/town/treasury/${t}/deposit`,{amount:s,description:r}),withdrawFromTreasury:(t,s,r)=>z.post(`/town/treasury/${t}/withdraw`,{amount:s,description:r}),getTaxBrackets:()=>z.get("/town/tax-brackets"),getTaxReport:(t,s)=>{const r=s?`?period=${s}`:"";return z.get(`/town/tax-report/${t}${r}`)},paySalaries:t=>z.post(`/town/pay-salaries/${t}`),payBasicSalary:(t,s)=>z.post(`/town/pay-basic-salary/${t}`,s?{amount:s}:{}),toggleTax:(t,s)=>z.post(`/town/toggle-tax/${t}`,{enabled:s})},Ss={getAllItems:()=>z.get("/winkel/items/all"),createItem:t=>z.post("/winkel/items",t),updateItem:(t,s)=>z.put(`/winkel/items/${t}`,s),deleteItem:t=>z.delete(`/winkel/items/${t}`),getStats:()=>z.get("/winkel/stats"),getPurchases:()=>z.get("/winkel/purchases"),getSettings:()=>z.get("/winkel/settings"),updateSettings:t=>z.put("/winkel/settings",t),canPurchase:()=>z.get("/winkel/can-purchase"),markPurchasePaid:t=>z.put(`/winkel/purchases/${t}/paid`)},Xs={getTenders:t=>{const s=t?`?town_class=${t}`:"";return z.get(`/tenders${s}`)},createTender:t=>z.post("/tenders",t),applyToTender:t=>z.post(`/tenders/${t}/apply`),getTenderApplications:t=>z.get(`/tenders/${t}/applications`),updateTenderApplicationStatus:(t,s)=>z.put(`/tenders/applications/${t}`,{status:s}),payTender:t=>z.post(`/tenders/${t}/pay`)},mb={getEngagement:t=>{const s=new URLSearchParams;t!=null&&t.time_range&&s.append("time_range",t.time_range),t!=null&&t.scope&&s.append("scope",t.scope),t!=null&&t.class&&s.append("class",t.class);const r=s.toString();return z.get(`/teacher-analytics/engagement${r?`?${r}`:""}`)}},z0=d.createContext(void 0),Le=()=>{const t=d.useContext(z0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},xb=({children:t})=>{const[s,r]=d.useState(null),[a,n]=d.useState(null),[l,i]=d.useState(!0);d.useEffect(()=>{const h=localStorage.getItem("token");h?(z.defaults.headers.common.Authorization=`Bearer ${h}`,c()):i(!1)},[]);const c=async()=>{try{const h=await z.get("/auth/profile");r(h.data.user),n(h.data.account)}catch(h){console.error("Failed to fetch profile:",h),localStorage.removeItem("token"),delete z.defaults.headers.common.Authorization}finally{i(!1)}},f={user:s,account:a,login:async(h,g,j)=>{var b,m;try{console.log("Attempting login for:",h,"school:",j);const x=await z.post("/auth/login",{username:h,password:g,...j&&{school_id:j}});console.log("Login response:",x.data);const{token:v,user:w,account:_}=x.data;localStorage.setItem("token",v),z.defaults.headers.common.Authorization=`Bearer ${v}`,console.log("Setting user state:",w),r(w),n(_),console.log("User state set, should redirect to dashboard"),window.location.href="/"}catch(x){throw console.error("Login error:",x),new Error(((m=(b=x.response)==null?void 0:b.data)==null?void 0:m.error)||"Login failed")}},register:async(h,g,j,b,m,x,v,w)=>{var _,R,S,I,M;try{console.log("Attempting registration for:",h,j,"school:",b);const A=await z.post("/auth/register",{username:h,password:g,confirmPassword:g,role:j,school_id:b,first_name:m,last_name:x,class:v,email:w});if(console.log("Registration response:",A.data),A.data.requires_approval)return A.data;const{token:P,user:C,account:k}=A.data;localStorage.setItem("token",P),z.defaults.headers.common.Authorization=`Bearer ${P}`,r(C),n(k),window.location.href="/"}catch(A){if(console.error("Registration error:",A),console.error("Error response data:",(_=A.response)==null?void 0:_.data),(S=(R=A.response)==null?void 0:R.data)!=null&&S.errors&&Array.isArray(A.response.data.errors)){const P=A.response.data.errors[0];throw new Error(P.msg||P.message||"Validation failed")}throw new Error(((M=(I=A.response)==null?void 0:I.data)==null?void 0:M.error)||"Registration failed")}},logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("student_header_color_index"),delete z.defaults.headers.common.Authorization,r(null),n(null)},refreshProfile:async()=>{localStorage.getItem("token")&&await c()},loading:l};return e.jsx(z0.Provider,{value:f,children:t})},B0=d.createContext(void 0),rt=()=>{const t=d.useContext(B0);if(t===void 0)throw new Error("usePlugins must be used within a PluginProvider");return t},He=({children:t})=>{const[s,r]=d.useState([]),[a,n]=d.useState(!0),l=async()=>{try{const o=await z.get("/plugins");r(o.data)}catch(o){console.error("Failed to fetch plugins:",o)}finally{n(!1)}};d.useEffect(()=>{localStorage.getItem("token")?l():n(!1)},[]);const i=s.filter(o=>o.enabled),c={plugins:s,enabledPlugins:i,loading:a,refreshPlugins:l};return e.jsx(B0.Provider,{value:c,children:t})},U0=d.createContext(void 0),ls=()=>{const t=d.useContext(U0);if(t===void 0)throw new Error("useTown must be used within a TownProvider");return t},We=({children:t})=>{const{user:s}=Le(),[r,a]=d.useState(null),[n,l]=d.useState(null),[i,c]=d.useState([]),[o,u]=d.useState([]),[p,y]=d.useState(!0);d.useEffect(()=>{s&&(s.class&&["6A","6B","6C"].includes(s.class)?l(s.class):s.role==="teacher"&&o.length>0&&!n&&l(o[0].class))},[s,o,n]),d.useEffect(()=>{n&&s&&(f(),g())},[n,s]),d.useEffect(()=>{(s==null?void 0:s.role)==="teacher"&&h()},[s]);const f=async()=>{if(!(!n||!s))try{const x=await z.get(`/town/settings?class=${n}`);a(x.data)}catch(x){console.error("Failed to fetch town settings:",x)}finally{y(!1)}},h=async()=>{if(s)try{const x=await z.get("/town/settings?all=true");u(x.data)}catch(x){console.error("Failed to fetch all towns:",x)}},g=async()=>{if(!(!n||!s))try{const x=await z.get(`/announcements?town_class=${n}`);c(x.data)}catch(x){console.error("Failed to fetch announcements:",x)}},m={currentTown:r,currentTownClass:n,announcements:i,allTowns:o,loading:p,setCurrentTownClass:x=>{l(x),y(!0)},refreshTown:async()=>{await f(),(s==null?void 0:s.role)==="teacher"&&await h()},refreshAnnouncements:g};return e.jsx(U0.Provider,{value:m,children:t})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,s)=>{const r=d.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,...u},p)=>d.createElement("svg",{ref:p,...hb,width:n,height:n,stroke:a,strokeWidth:i?Number(l)*24/Number(n):l,className:["lucide",`lucide-${pb(t)}`,c].join(" "),...u},[...s.map(([y,f])=>d.createElement(y,f)),...Array.isArray(o)?o:[o]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=re("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=re("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=re("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=re("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=re("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=re("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=re("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=re("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=re("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=re("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=re("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=re("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=re("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=re("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=re("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=re("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=re("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=re("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=re("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=re("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=re("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=re("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=re("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=re("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=re("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=re("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=re("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=re("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Du=({user:t,size:s="md",className:r=""})=>{if(!t)return null;const a=()=>t.first_name&&t.last_name?`${t.first_name[0]}${t.last_name[0]}`.toUpperCase():t.username?t.username.substring(0,2).toUpperCase():"??",n={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},l={sm:"text-lg",md:"text-2xl",lg:"text-3xl"};return e.jsx("div",{className:`${n[s]} rounded-full flex items-center justify-center font-semibold ${r}`,style:t.profile_emoji?{}:{backgroundColor:"#9CA3AF",color:"white"},children:t.profile_emoji?e.jsx("span",{className:l[s],children:t.profile_emoji}):e.jsx("span",{children:a()})})},qb=({children:t})=>{const{user:s,logout:r}=Le(),a=yr(),[n,l]=d.useState(!1),i=()=>{r()},c=[{name:"Dashboard",href:"/",icon:Hr}],o=u=>u==="/"?a.pathname==="/":a.pathname.startsWith(u);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-lg",children:e.jsx("img",{src:"/logo.png",alt:"Town Hub",className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Town Hub"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Game of Life Control Center"})]})]}),e.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:c.map(u=>{const p=u.icon;return e.jsxs(xr,{to:u.href,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o(u.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:u.name})]},u.name)})}),s&&e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(Du,{user:s,size:"md"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.username}),e.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:s.role==="teacher"?" Teacher":" Student"})]})]}),e.jsxs("button",{onClick:i,className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx(Fu,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]}),e.jsx("button",{onClick:()=>l(!n),className:"md:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:n?e.jsx(Ze,{className:"h-6 w-6"}):e.jsx(Rb,{className:"h-6 w-6"})})]})}),n&&e.jsx("div",{className:"md:hidden border-t border-gray-200",children:e.jsxs("div",{className:"px-4 py-3 space-y-1",children:[c.map(u=>{const p=u.icon;return e.jsxs(xr,{to:u.href,onClick:()=>l(!1),className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-base font-medium transition-colors ${o(u.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:u.name})]},u.name)}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Du,{user:s,size:"md"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.username})]}),e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium inline-block",children:s.role==="teacher"?" Teacher":" Student"})]}),e.jsxs("button",{onClick:()=>{i(),l(!1)},className:"flex items-center space-x-2 w-full px-4 py-2 rounded-lg text-base font-medium text-gray-600 hover:bg-gray-100",children:[e.jsx(Fu,{className:"h-5 w-5"}),e.jsx("span",{children:"Logout"})]})]})]})})]}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative",children:[t,(s==null?void 0:s.role)==="student"&&(s==null?void 0:s.account_frozen)&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center shadow-2xl",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Account Temporarily Frozen"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Due to suspicious activity, your account is temporarily frozen. Please see a teacher."}),e.jsx("button",{onClick:i,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Logout"})]})})]})]})},zb=({value:t,onChange:s,required:r=!0,error:a,showOptional:n})=>{const[l,i]=d.useState([]),[c,o]=d.useState(!0),[u,p]=d.useState(""),[y,f]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{(async()=>{var m,x,v;try{o(!0);const w=await z.get("/auth/schools");console.log("Schools API response:",w),console.log("Schools data:",w.data);const _=Array.isArray(w.data)?w.data:((m=w.data)==null?void 0:m.data)||[];console.log(` Loaded ${_.length} schools`),i(_)}catch(w){console.error(" Failed to fetch schools:",w),console.error("Error response:",w.response),console.error("Error details:",(x=w.response)==null?void 0:x.data),(w.code==="ERR_NETWORK"||(v=w.message)!=null&&v.includes("ERR_CONNECTION_REFUSED"))&&console.warn(" Backend server appears to be offline. Please ensure the server is running on port 5000."),i([])}finally{o(!1)}})()},[]),d.useEffect(()=>{const b=m=>{h.current&&!h.current.contains(m.target)&&f(!1)};return y&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[y]);const g=l.filter(b=>b.name.toLowerCase().includes(u.toLowerCase())||b.code.toLowerCase().includes(u.toLowerCase())),j=l.find(b=>b.id===t);return e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("label",{className:"label",children:[e.jsx(Lb,{className:"h-4 w-4 inline mr-1"}),"School ",!r&&e.jsx("span",{className:"text-gray-500 text-xs",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>f(!y),className:`input-field w-full text-left flex items-center justify-between ${a?"border-red-500":""}`,children:[e.jsx("span",{className:j?"text-gray-900":"text-gray-500",children:j?j.name:"Select your school..."}),e.jsx("svg",{className:`h-5 w-5 text-gray-400 transition-transform ${y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&e.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:c?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading schools..."}):l.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:c?"Loading schools...":e.jsxs("div",{children:[e.jsx("div",{className:"mb-2",children:"No schools available"}),e.jsx("div",{className:"text-xs text-gray-400",children:!1})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-2 border-b border-gray-200 sticky top-0 bg-white z-10",children:e.jsxs("div",{className:"relative",children:[e.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:u,onChange:b=>p(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",onClick:b=>b.stopPropagation()})]})}),e.jsx("div",{className:"py-1",children:g.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No schools found matching "',u,'"']}):g.map(b=>e.jsxs("button",{type:"button",onClick:()=>{s(b.id),f(!1),p("")},className:`w-full text-left px-4 py-2 hover:bg-primary-50 ${t===b.id?"bg-primary-100 font-medium":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-sm text-gray-500",children:b.code})]},b.id))})]})})]}),a&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),r&&!t&&!a&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please select your school"})]})},Bb=()=>{const{login:t,register:s}=Le(),[r,a]=d.useState(!0),[n,l]=d.useState(!1),[i,c]=d.useState(!1),[o,u]=d.useState({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),[p,y]=d.useState(""),[f,h]=d.useState(""),[g,j]=d.useState(""),[b,m]=d.useState(!1),x=async w=>{if(w.preventDefault(),h(""),y(""),!r&&!o.school_id){y("Please select your school");return}if(!r&&o.password!==o.confirmPassword){h("Passwords do not match");return}m(!0);try{if(r){const _=o.school_id??void 0;await t(o.username,o.password,_)}else{const _=await s(o.username,o.password,o.role,o.school_id,o.first_name,o.last_name,o.class,o.email);if(_&&_.requires_approval){h(""),j("Registration successful! Your account is pending teacher approval. You will be able to log in once a teacher approves your account."),u({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),setTimeout(()=>{a(!0),j("")},5e3);return}}}catch(_){h(_.message)}finally{m(!1)}},v=w=>{u({...o,[w.target.name]:w.target.value})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"mx-auto flex items-center justify-center",children:e.jsx("img",{src:"/logo.png",alt:"SP Prep Schools",className:"max-w-[240px] max-h-[180px] w-auto h-auto object-contain mx-auto"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r?"Game of Life Town Hub":"Join the Game!"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Sign in to your account":"Create your classroom account"})]}),e.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:e.jsxs("form",{className:"space-y-6",onSubmit:x,children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),g&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:g}),e.jsxs("div",{children:[e.jsx(zb,{value:o.school_id,onChange:w=>{u({...o,school_id:w}),y("")},error:p,required:!r}),r&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Super admin can login without selecting a school"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"label",children:[e.jsx(Ks,{className:"h-4 w-4 inline mr-1"}),"Username"]}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"input-field",placeholder:"Enter your username",value:o.username,onChange:v})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"label",children:[e.jsx(Eu,{className:"h-4 w-4 inline mr-1"}),"Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Enter your password",value:o.password,onChange:v}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!n),children:n?e.jsx(Pu,{className:"h-4 w-4 text-gray-400"}):e.jsx(en,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"label",children:[e.jsx(Eu,{className:"h-4 w-4 inline mr-1"}),"Confirm Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Confirm your password",value:o.confirmPassword,onChange:v}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!i),children:i?e.jsx(Pu,{className:"h-4 w-4 text-gray-400"}):e.jsx(en,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"label",children:"I am a..."}),e.jsxs("select",{id:"role",name:"role",className:"input-field",value:o.role,onChange:v,children:[e.jsx("option",{value:"student",children:" Student"}),e.jsx("option",{value:"teacher",children:" Teacher"})]})]}),o.role==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"label",children:"First Name"}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,className:"input-field",placeholder:"Enter first name",value:o.first_name,onChange:v})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"label",children:"Last Name"}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,className:"input-field",placeholder:"Enter last name",value:o.last_name,onChange:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"class",className:"label",children:"Class"}),e.jsxs("select",{id:"class",name:"class",required:!0,className:"input-field",value:o.class,onChange:v,children:[e.jsx("option",{value:"",children:"Select your class"}),e.jsx("option",{value:"6A",children:"6A"}),e.jsx("option",{value:"6B",children:"6B"}),e.jsx("option",{value:"6C",children:"6C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"input-field",placeholder:"yourname@stpeters.co.za",value:o.email,onChange:v}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must end with @stpeters.co.za"})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:b,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Please wait...":r?"Sign In":"Create Account"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{a(!r),u({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),h("")},className:"text-primary-600 hover:text-primary-500 font-medium",children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:" Welcome to your Town Hub - Manage your virtual life!"}),e.jsxs(xr,{to:"/showcase",className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:[e.jsx(_b,{className:"h-4 w-4 mr-1"}),"Learn more about features"]})]}),e.jsx("div",{className:"text-center mt-8 pt-6 border-t border-gray-300",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Created by"," ",e.jsx("a",{href:"https://www.katalystlabs.co.za",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline transition-colors",children:"Katalyst Labs"})]})})]})})},eh=({plugin:t,needsAttention:s})=>e.jsx(xr,{to:t.route_path,className:`block bg-white rounded-xl shadow-sm border p-6 transition-all transform hover:scale-105 ${s?"border-amber-400 bank-attention hover:border-amber-500 hover:shadow-lg":"border-gray-200 hover:shadow-md hover:border-primary-300"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center text-2xl",children:t.icon||""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]}),e.jsx("div",{className:"flex-shrink-0",children:s?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:"Needs attention"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Active"})})]})}),th=({announcements:t,maxItems:s=5})=>{const r=t.slice(0,s),a=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=l=>{switch(l){case"green":return{border:"border-green-500",bg:"bg-green-50",text:"text-green-900"};case"yellow":return{border:"border-yellow-500",bg:"bg-yellow-50",text:"text-yellow-900"};case"red":return{border:"border-red-500",bg:"bg-red-50",text:"text-red-900"};case"purple":return{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-900"};case"blue":default:return{border:"border-primary-500",bg:"bg-primary-50",text:"text-gray-900"}}};return t.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ti,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ti,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No announcements yet"}),e.jsx("p",{className:"text-sm",children:"Check back later for town updates"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ti,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"}),t.length>s&&e.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length-s," more"]})]}),e.jsx("div",{className:"space-y-4",children:r.map(l=>{const i=n(l.background_color);return e.jsxs("div",{className:`border-l-4 ${i.border} pl-4 py-2 ${i.bg} rounded-r-lg ${l.enable_wiggle?"announcement-wiggle":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:`font-semibold ${i.text}`,children:l.title}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 ml-2",children:[e.jsx(Ce,{className:"h-3 w-3"}),e.jsx("span",{children:a(l.created_at)})]})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:l.content}),l.created_by_username&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Posted by ",l.created_by_username]})]},l.id)})})]})},sh=({town:t,readOnly:s=!0,showTreasury:r=!1})=>{const a=n=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(n);return t?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ot,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Information"}),!s&&e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["Class ",t.class]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ot,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Name"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.town_name})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ks,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mayor"})]}),e.jsx("p",{className:"text-base text-gray-900",children:t.mayor_name||"TBD"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Tb,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Tax Rate"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-base text-gray-900",children:[t.tax_rate,"%"]}),t.tax_enabled!==void 0&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.tax_enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:t.tax_enabled?"Active":"Disabled"})]})]}),r&&t.treasury_balance!==void 0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Jt,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Treasury"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:a(t.treasury_balance)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for paying student salaries"})]})]})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ot,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No town information available"})]})})};function $u(t){return t<=1?0:t===2?100:100*t*(t+1)/2-100}function Jc(t,s){if(t>=10)return{current:0,needed:0,percentage:100};const r=$u(t),a=$u(t+1),n=s-r,l=a-r,i=Math.min(100,n/l*100);return{current:n,needed:l,percentage:i}}function kl(t){return!t||!t.trim()?"":t.replace(/(?:One|Two|Three|\d+)\s+positions?\s+available\.?\s*/gi,"").replace(/\n\s*\n\s*\n/g,`

`).trim()}const Ub=({user:t})=>{var y;const s=br();if(!(t.job_id&&t.job_name))return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Qe,{className:"h-5 w-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Qe,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No job assigned yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Apply for jobs in the Jobs system"})]})]});const a=f=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(f),n=((y=t.job_description)==null?void 0:y.split(`
`).filter(f=>f.trim()))||[],i=(()=>{const f=t.job_base_salary||2e3,h=t.job_level||1,g=t.job_is_contractual||!1,j=1+(h-1)*.7222,b=g?1.5:1,m=f*j*b;return t.job_salary&&Math.abs(t.job_salary-m)/m<.1?t.job_salary:m})(),c=t.job_level||1,o=t.job_base_salary||2e3,u=t.job_is_contractual||!1,p=()=>{t.job_id&&s(`/my-job/${t.job_id}`)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:p,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),e.jsx(_l,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"border-l-4 border-amber-500 pl-4 py-3 bg-amber-50 rounded-r-lg mb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5 text-amber-600"}),t.job_name]}),t.job_company_name&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),t.job_company_name]}),t.job_location&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Ct,{className:"h-4 w-4 mr-1"}),t.job_location]})]})})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[t.job_level&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ws,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job Level"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-700",children:["Level ",t.job_level]}),t.job_experience_points!==void 0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",t.job_experience_points," XP)"]})]})]}),c<10&&(()=>{const f=Jc(c,t.job_experience_points||0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsxs("span",{children:["Progress to Level ",c+1]}),e.jsxs("span",{children:[f.current," / ",f.needed," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${f.percentage}%`}})})]})})()]}),e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Salary per Period"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xl font-bold text-green-700",children:i?a(i):"N/A"}),c<10&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Max: ",a(o*7.5*(u?1.5:1))," at Level 10"]})]})]})]}),n.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Xa,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:"Responsibilities"})]}),e.jsxs("ul",{className:"space-y-2",children:[n.slice(0,5).map((f,h)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-amber-400 mt-1.5 mr-2 flex-shrink-0"}),e.jsx("span",{children:f})]},h)),n.length>5&&e.jsxs("li",{className:"text-xs text-gray-400 pl-4",children:["+",n.length-5," more responsibilities"]})]})]}),(()=>{const f=kl(t.job_requirements);return f&&f!==kl(t.job_description)?e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-sm text-gray-600",children:f})]}):null})()]})},Qt={Savanna:{baseValue:4e4,risk:"medium",color:"#c4a747",lightColor:"#e8d999",pros:["Good grazing land","Wildlife tourism potential","Moderate rainfall"],cons:["Seasonal droughts","Fire risk","Limited water sources"]},Grassland:{baseValue:3e4,risk:"low",color:"#7cb342",lightColor:"#aed581",pros:["Excellent farming potential","Easy to develop","Stable ecosystem"],cons:["Soil erosion risk","Limited shade","Overgrazing concerns"]},Forest:{baseValue:7e4,risk:"medium",color:"#2e7d32",lightColor:"#66bb6a",pros:["Rich biodiversity","Timber resources","Carbon credits potential"],cons:["Fire risk","Clearing restrictions","Difficult access"]},Fynbos:{baseValue:9e4,risk:"high",color:"#9c27b0",lightColor:"#ce93d8",pros:["Unique biodiversity","Eco-tourism value","Protected species habitat"],cons:["Fire-dependent ecosystem","Strict conservation laws","Limited development"]},"Nama Karoo":{baseValue:2e4,risk:"medium",color:"#8d6e63",lightColor:"#bcaaa4",pros:["Sheep farming suited","Low land cost","Unique landscape"],cons:["Very dry climate","Limited water","Remote location"]},"Succulent Karoo":{baseValue:9e3,risk:"high",color:"#ff7043",lightColor:"#ffab91",pros:["Rare plant species","Research value","Mining potential"],cons:["Extreme temperatures","Water scarcity","Conservation restrictions"]},Desert:{baseValue:16e3,risk:"high",color:"#ffd54f",lightColor:"#ffee58",pros:["Solar energy potential","Low land price","Mineral deposits"],cons:["Extreme conditions","No water","Uninhabitable without infrastructure"]},Thicket:{baseValue:5e4,risk:"low",color:"#558b2f",lightColor:"#8bc34a",pros:["Carbon storage","Game farming potential","Drought resistant"],cons:["Dense vegetation","Clearing needed","Elephant damage risk"]},"Indian Ocean Coastal Belt":{baseValue:12e4,risk:"medium",color:"#0288d1",lightColor:"#4fc3f7",pros:["High property value","Tourism potential","Port access"],cons:["Coastal erosion","Cyclone risk","High development costs"]}},Cl={low:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},medium:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},high:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"}},Ue=t=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),js={Savanna:"",Grassland:"",Forest:"",Fynbos:"","Nama Karoo":"","Succulent Karoo":"",Desert:"",Thicket:"","Indian Ocean Coastal Belt":""},Hb=.02,rh=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/(7*24*60*60*1e3));return Math.max(0,n)},Uo=(t,s)=>{const r=rh(s);if(r===0)return t;const a=t*Math.pow(1+Hb,r);return Math.round(a)},Wb=()=>{const t=br(),[s,r]=d.useState(null),[a,n]=d.useState(!0),[l,i]=d.useState(!1);d.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await Wt.getMyProperties();r(p.data)}catch{i(!0)}finally{n(!1)}},{totalCurrentValue:o,totalAppreciation:u}=d.useMemo(()=>{if(!s||s.total_count===0)return{totalCurrentValue:0,totalAppreciation:0};let p=0,y=0;return s.parcels.forEach(f=>{const h=Number(f.value);y+=h,f.purchased_at?p+=Uo(h,f.purchased_at):p+=h}),{totalCurrentValue:p,totalAppreciation:p-y}},[s]);return a?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(be,{className:"h-8 w-8 text-primary-600 animate-spin"})})}):l?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ct,{className:"h-5 w-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"My Properties"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Unable to load properties"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wc,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"My Properties"})]}),e.jsxs("button",{onClick:()=>t("/land"),className:"text-xs bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"View All"}),e.jsx(_l,{className:"h-3 w-3"})]})]})}),e.jsx("div",{className:"p-4",children:s&&s.total_count===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ct,{className:"h-10 w-10 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No properties owned yet"}),e.jsx("button",{onClick:()=>t("/land"),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Explore Land Registry "})]}):s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[e.jsx(Ct,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Plots"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.total_count})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Current Value"})]}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:Ue(o)}),u>0&&e.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-1",children:[e.jsx(Ke,{className:"h-3 w-3 text-emerald-500"}),e.jsxs("span",{className:"text-xs text-emerald-600",children:["+",Ue(u)]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Recent Purchases"}),s.parcels.slice(0,3).map(p=>{const y=Number(p.value),f=p.purchased_at?Uo(y,p.purchased_at):y,h=f>y;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>t("/land"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-sm",style:{backgroundColor:Qt[p.biome_type].lightColor},children:js[p.biome_type]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.grid_code}),e.jsx("p",{className:"text-xs text-gray-500",children:p.biome_type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:Ue(f)}),h&&e.jsxs("p",{className:"text-xs text-emerald-500 flex items-center justify-end",children:[e.jsx(Ke,{className:"h-2 w-2 mr-0.5"}),"+",Ue(f-y)]})]})]},p.id)}),s.total_count>3&&e.jsxs("p",{className:"text-xs text-center text-gray-400 pt-1",children:["+",s.total_count-3," more plots"]})]})]})})]})},Vb=()=>{const[t,s]=d.useState([]),[r,a]=d.useState(!0);d.useEffect(()=>{(async()=>{try{a(!0);const c=await Xs.getTenders();s(c.data)}finally{a(!1)}})()},[]);const n=d.useMemo(()=>t.filter(i=>i.my_application_status==="approved"),[t]),l=d.useMemo(()=>n.slice(0,5),[n]);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xa,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Tenders"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:n.length})]}),r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(be,{className:"h-6 w-6 text-primary-600 animate-spin"})}):n.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"No tenders yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Apply for a tender to see it here."})]}):e.jsxs("div",{className:"space-y-3",children:[l.map(i=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:i.name}),i.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-0.5 line-clamp-2",children:i.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[i.status==="awarded"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:[e.jsx(Ne,{className:"h-3.5 w-3.5"}),"AWARDED"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-100 text-amber-800",children:[e.jsx(Ce,{className:"h-3.5 w-3.5"}),"APPROVED"]}),i.status==="awarded"&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${i.paid?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-700"}`,children:[e.jsx(Aa,{className:"h-3.5 w-3.5"}),i.paid?"PAID":"UNPAID"]})]})]})})},i.id)),n.length>l.length&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",n.length-l.length," more"]})]})]})},Fn=[{gradient:"bg-gradient-to-r from-red-500 to-red-700",text:"text-white",subtext:"text-red-100"},{gradient:"bg-gradient-to-r from-blue-500 to-blue-700",text:"text-white",subtext:"text-blue-100"},{gradient:"bg-gradient-to-r from-yellow-400 to-yellow-600",text:"text-gray-900",subtext:"text-yellow-900"}],Gb=()=>{const t=sessionStorage.getItem("student_header_color_index");if(t!==null){const r=parseInt(t,10);if(r>=0&&r<Fn.length)return Fn[r]}const s=Math.floor(Math.random()*Fn.length);return sessionStorage.setItem("student_header_color_index",String(s)),Fn[s]},Jb=()=>{const{user:t}=Le(),{enabledPlugins:s,loading:r}=rt(),a=!!(t!=null&&t.rules_agreed_at),n=(t==null?void 0:t.role)!=="student"||a,l=n?s:s.filter(b=>b.route_path==="/town-rules"),{currentTown:i,announcements:c,loading:o}=ls(),[u]=d.useState(Gb),p=t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name} ${t.last_name}`:(t==null?void 0:t.username)||"Student",y=(t==null?void 0:t.job_name)||"No job assigned",[f,h]=d.useState(()=>{const b=Number(localStorage.getItem("dismissed_tender_announcement_id")||"0");return Number.isFinite(b)?b:0}),g=d.useMemo(()=>c.filter(m=>m.title.toLowerCase().includes("tender")).slice().sort((m,x)=>new Date(x.created_at).getTime()-new Date(m.created_at).getTime())[0],[c]),j=d.useMemo(()=>g?Date.now()-new Date(g.created_at).getTime()<1e3*60*60*48&&g.id>f:!1,[g,f]);return r||o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${u.gradient} rounded-2xl p-6`,children:[e.jsxs("h1",{className:`text-2xl font-bold mb-2 ${u.text}`,children:["Welcome, ",p,"! "]}),e.jsxs("p",{className:u.subtext,children:[i?`Welcome to ${i.town_name}!`:"Welcome to Town Hub!",y!=="No job assigned"&&`  Your job: ${y}`]})]}),n&&s.some(b=>b.route_path==="/tenders")&&j&&g&&e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-amber-400 bg-gradient-to-r from-amber-300 via-orange-300 to-red-300 p-5 animate-pulse",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_30%_20%,white,transparent_55%)]"}),e.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/40 rounded-xl p-2",children:e.jsx(jr,{className:"h-6 w-6 text-red-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-extrabold text-red-900 tracking-wide uppercase",children:"New Tender Available"}),e.jsx("p",{className:"text-lg font-bold text-red-950",children:g.title}),e.jsx("p",{className:"text-sm text-red-900 mt-1 line-clamp-2",children:g.content}),e.jsx("div",{className:"mt-3",children:e.jsx(xr,{to:"/tenders",className:"inline-flex items-center px-4 py-2 rounded-lg bg-red-700 text-white font-bold hover:bg-red-800 transition-colors shadow",children:"View & Apply Now"})})]})]}),e.jsx("button",{onClick:()=>{localStorage.setItem("dismissed_tender_announcement_id",String(g.id)),h(g.id)},className:"flex-shrink-0 bg-white/40 hover:bg-white/60 rounded-lg p-2 transition-colors","aria-label":"Dismiss tender alert",children:e.jsx(Ze,{className:"h-5 w-5 text-red-900"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ea,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Available Systems"})]}),l.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Ea,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(t==null?void 0:t.role)==="student"&&!(t!=null&&t.rules_agreed_at)&&s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"You must agree to the app rules before using the town systems."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ask your teacher to enable the Rules system so you can agree and get started."})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500",children:"No systems available at this time"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later for updates"})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(b=>e.jsx(eh,{plugin:b},b.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(sh,{town:i,readOnly:!0}),e.jsx(th,{announcements:c}),n&&s.some(b=>b.route_path==="/jobs")&&t&&e.jsx(Ub,{user:t}),n&&s.some(b=>b.route_path==="/land")&&e.jsx(Wb,{})]}),n&&s.some(b=>b.route_path==="/tenders")&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsx(Vb,{})})]})},Qb=({plugins:t,onUpdate:s})=>{const[r,a]=d.useState(null),n=async l=>{a(l);try{await z.put(`/plugins/${l}/toggle`),s()}catch(i){console.error("Failed to toggle plugin:",i),alert("Failed to toggle plugin. Please try again.")}finally{a(null)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Plugin Management"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enable or disable plugins for all towns. Changes affect all classes (6A, 6B, 6C)."})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center text-xl",children:l.icon||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Route: ",l.route_path]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`text-sm font-medium ${l.enabled?"text-success-600":"text-gray-400"}`,children:l.enabled?"Enabled":"Disabled"}),e.jsx("button",{onClick:()=>n(l.id),disabled:r===l.id,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${l.enabled?"bg-primary-600":"bg-gray-200"} ${r===l.id?"opacity-50 cursor-not-allowed":""}`,children:r===l.id?e.jsx(Q0,{className:"h-4 w-4 text-white animate-spin absolute left-1"}):e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.enabled?"translate-x-6":"translate-x-1"}`})})]})]},l.id))})})]})},Kb=({announcements:t,onUpdate:s})=>{const{currentTownClass:r,allTowns:a}=ls(),[n,l]=d.useState(!1),[i,c]=d.useState(null),[o,u]=d.useState({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),[p,y]=d.useState(!1);d.useEffect(()=>{i&&(u({title:i.title,content:i.content,town_class:i.town_class,post_to_all:!1,background_color:i.background_color||"blue",enable_wiggle:i.enable_wiggle||!1}),l(!0))},[i]);const f=async g=>{var j,b;g.preventDefault(),y(!0);try{if(i)await z.put(`/announcements/${i.id}`,{title:o.title,content:o.content,town_class:o.town_class,background_color:o.background_color,enable_wiggle:o.enable_wiggle});else if(o.post_to_all){const m=["6A","6B","6C"];await Promise.all(m.map(x=>z.post("/announcements",{title:o.title,content:o.content,town_class:x,background_color:o.background_color,enable_wiggle:o.enable_wiggle})))}else await z.post("/announcements",{title:o.title,content:o.content,town_class:o.town_class,background_color:o.background_color,enable_wiggle:o.enable_wiggle});l(!1),c(null),u({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),s()}catch(m){console.error("Failed to save announcement:",m),alert(((b=(j=m.response)==null?void 0:j.data)==null?void 0:b.error)||"Failed to save announcement")}finally{y(!1)}},h=async g=>{var j,b;if(confirm("Are you sure you want to delete this announcement?"))try{await z.delete(`/announcements/${g}`),s()}catch(m){console.error("Failed to delete announcement:",m),alert(((b=(j=m.response)==null?void 0:j.data)==null?void 0:b.error)||"Failed to delete announcement")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Announcement Management"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Post and manage town announcements"})]}),e.jsxs("button",{onClick:()=>{l(!0),c(null),u({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-primary flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"New Announcement"})]})]}),n&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:i?"Edit Announcement":"New Announcement"}),e.jsx("button",{onClick:()=>{l(!1),c(null),u({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[!i&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.post_to_all,onChange:g=>u({...o,post_to_all:g.target.checked}),className:"mt-0.5 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Post to All Classes"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"This will create the same announcement for all three classes (6A, 6B, and 6C)"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o.post_to_all?"Target Classes":"Town"}),o.post_to_all?e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"All Classes:"})," 6A Town, 6B Town, 6C Town"]}):e.jsxs("select",{value:o.town_class,onChange:g=>u({...o,town_class:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0,children:[e.jsx("option",{value:"6A",children:"6A Town"}),e.jsx("option",{value:"6B",children:"6B Town"}),e.jsx("option",{value:"6C",children:"6C Town"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:o.title,onChange:g=>u({...o,title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),e.jsx("textarea",{value:o.content,onChange:g=>u({...o,content:g.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:[{value:"blue",label:"Blue",bgClass:"bg-blue-500",hoverClass:"hover:bg-blue-600"},{value:"green",label:"Green",bgClass:"bg-green-500",hoverClass:"hover:bg-green-600"},{value:"yellow",label:"Yellow",bgClass:"bg-yellow-500",hoverClass:"hover:bg-yellow-600"},{value:"red",label:"Red",bgClass:"bg-red-500",hoverClass:"hover:bg-red-600"},{value:"purple",label:"Purple",bgClass:"bg-purple-500",hoverClass:"hover:bg-purple-600"}].map(g=>e.jsxs("button",{type:"button",onClick:()=>u({...o,background_color:g.value}),className:`relative p-4 rounded-lg transition-all ${g.bgClass} ${g.hoverClass} ${o.background_color===g.value?"ring-4 ring-primary-600 ring-offset-2 scale-105":"opacity-70 hover:opacity-100"}`,children:[o.background_color===g.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.jsx("span",{className:"text-xs font-medium text-white opacity-0",children:g.label})]},g.value))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",e.jsx("span",{className:"font-medium capitalize",children:o.background_color})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.enable_wiggle,onChange:g=>u({...o,enable_wiggle:g.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable wiggle animation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Adds a subtle wiggle effect for extra attention"})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:p,className:"btn-primary flex-1",children:p?"Saving...":i?"Update":"Create"}),e.jsx("button",{type:"button",onClick:()=>{l(!1),c(null),u({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-secondary",children:"Cancel"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No announcements yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement above"})]}):t.map(g=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:g.title}),e.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:g.town_class})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:g.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Posted by ",g.created_by_username]}),e.jsx("span",{children:new Date(g.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>c(g),className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(g.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Gc,{className:"h-4 w-4"})})]})]})},g.id))})})]})},Zb=()=>{var A;const{allTowns:t,refreshTown:s}=ls(),[r,a]=d.useState(((A=t[0])==null?void 0:A.id)||null),[n,l]=d.useState({}),[i,c]=d.useState(!1),[o,u]=d.useState(!1),[p,y]=d.useState(""),[f,h]=d.useState(!1),[g,j]=d.useState({}),[b,m]=d.useState(!0),[x,v]=d.useState(!1),w=t.find(P=>P.id===r);d.useEffect(()=>{(async()=>{try{const C=await z.get("/transactions/bank-settings");j(C.data)}catch(C){console.error("Failed to fetch bank settings:",C)}finally{m(!1)}})()},[]),d.useEffect(()=>{w&&l({town_name:w.town_name,mayor_name:w.mayor_name||"",tax_rate:w.tax_rate,tax_enabled:w.tax_enabled,job_game_daily_limit:w.job_game_daily_limit??3})},[w]);const _=async(P,C)=>{var k,E;v(!0);try{await z.put(`/transactions/bank-settings/${P}`,{value:C}),j({...g,[P]:C})}catch(W){console.error("Failed to update bank setting:",W),alert(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to update setting")}finally{v(!1)}},R=async()=>{var P,C;if(w){c(!0);try{await os.toggleTax(w.class,!w.tax_enabled),await s()}catch(k){console.error("Failed to toggle tax:",k),alert(((C=(P=k.response)==null?void 0:P.data)==null?void 0:C.error)||"Failed to toggle tax")}finally{c(!1)}}},S=P=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(P),I=async P=>{var C,k;if(P.preventDefault(),!!r){c(!0);try{await z.put(`/town/settings/${r}`,n),await s(),alert("Town settings updated successfully!")}catch(E){console.error("Failed to update town settings:",E),alert(((k=(C=E.response)==null?void 0:C.data)==null?void 0:k.error)||"Failed to update town settings")}finally{c(!1)}}},M=async()=>{var C,k;if(p!=="RESET"){alert("Type RESET to confirm the factory reset.");return}if(window.confirm(`This will DELETE ALL students, loans, tenders, land ownership, transactions, announcements, and reset treasury/settings for ALL towns.

This cannot be undone.

Click OK to proceed.`)){h(!0);try{await z.post("/admin/factory-reset",{confirm:"RESET"}),y(""),await s(),alert("Factory reset completed. You may need to refresh the page."),window.location.reload()}catch(E){console.error("Factory reset failed:",E),alert(((k=(C=E.response)==null?void 0:C.data)==null?void 0:k.error)||"Factory reset failed")}finally{h(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage settings for each town"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Town"}),e.jsx("select",{value:r||"",onChange:P=>a(parseInt(P.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:t.map(P=>e.jsxs("option",{value:P.id,children:[P.town_name," (Class ",P.class,")"]},P.id))})]}),w&&e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town Name"}),e.jsx("input",{type:"text",value:n.town_name||"",onChange:P=>l({...n,town_name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mayor Name"}),e.jsx("input",{type:"text",value:n.mayor_name||"",onChange:P=>l({...n,mayor_name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter mayor name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:n.tax_rate||0,onChange:P=>l({...n,tax_rate:parseFloat(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Collection"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, progressive tax is deducted from salaries"})]}),e.jsx("button",{type:"button",onClick:R,disabled:i,className:"focus:outline-none",children:w!=null&&w.tax_enabled?e.jsx(sn,{className:"h-10 w-10 text-green-600"}):e.jsx(tn,{className:"h-10 w-10 text-gray-400"})})]})}),w&&e.jsxs("div",{className:"border border-emerald-200 rounded-lg p-4 bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Town Treasury"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:S(w.treasury_balance||1e7)}),e.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"Used for paying student salaries"})]}),e.jsxs("button",{type:"submit",disabled:i,className:"btn-primary flex items-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:i?"Saving...":"Save Settings"})]})]})]}),w&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-100",children:e.jsx(Yn,{className:"h-5 w-5 text-amber-700"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Job Game Settings"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["For ",e.jsx("span",{className:"font-medium",children:w.town_name})," (Class ",w.class,"): daily limit for job challenge games (e.g. Design Approval, Financial Audit)"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job game daily limit"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Number of job challenge plays (Architect reviews, Accountant audit cases) each student in this town can do per day (resets at 6 AM SAST)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"number",min:"0",max:"50",value:n.job_game_daily_limit??3,onChange:P=>l({...n,job_game_daily_limit:parseInt(P.target.value,10)||0}),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"plays per day"}),e.jsxs("button",{type:"button",onClick:async()=>{var P,C;if(r!=null){u(!0);try{await z.put(`/town/settings/${r}`,{job_game_daily_limit:n.job_game_daily_limit??3}),await s(),alert("Job game settings saved.")}catch(k){alert(((C=(P=k.response)==null?void 0:P.data)==null?void 0:C.error)||"Failed to save")}finally{u(!1)}}},disabled:o,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:o?"Saving...":"Save"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Set to 0 to disable job challenge games for this town. Default is 3."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:e.jsx(Hr,{className:"h-5 w-5 text-purple-700"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Chores Game Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure the chores game settings for all students"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Game Limit"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Number of chores games each student can play per day (resets at 6 AM)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:g.math_game_daily_limit||"3",onChange:P=>j({...g,math_game_daily_limit:P.target.value}),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"games per day"}),e.jsxs("button",{onClick:()=>_("math_game_daily_limit",g.math_game_daily_limit||"3"),disabled:x,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:x?"Saving...":"Save"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Set to 0 to disable chores games entirely"})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100",children:e.jsx(jr,{className:"h-5 w-5 text-red-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Factory Reset (Danger)"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This resets the game to a clean state: deletes all students, loans, tenders, land ownership & requests, transactions, and announcements. It also resets town treasury/settings for ALL towns."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-bold text-red-700",children:"RESET"})," to confirm"]}),e.jsx("input",{value:p,onChange:P=>y(P.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-red-500 focus:border-red-500",placeholder:"RESET"})]}),e.jsx("button",{type:"button",onClick:M,disabled:f||p!=="RESET",className:"w-full px-4 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 transition-colors disabled:opacity-50",children:f?"Resetting...":"Factory Reset"})]})]})]})})]})},Yb=()=>{const{currentTownClass:t,allTowns:s,currentTown:r,refreshTown:a}=ls(),[n,l]=d.useState("jobs"),[i,c]=d.useState(t||"all"),[o,u]=d.useState("6A"),[p,y]=d.useState([]),[f,h]=d.useState([]),[g,j]=d.useState([]),[b,m]=d.useState(!0),[x,v]=d.useState(null),[w,_]=d.useState(null),[R,S]=d.useState(!1),[I,M]=d.useState(null),[A,P]=d.useState({}),[C,k]=d.useState(!1),[E,W]=d.useState(null),[N,H]=d.useState("10");d.useEffect(()=>{T()},[i,n,o]);const T=async()=>{var V,ue;try{if(m(!0),v(null),n==="jobs"){const $=await pt.getJobAssignmentsOverview();y($.data.jobs),h($.data.students)}else{const $=i==="all"?void 0:i,q={status:"pending"};let ne=(await pt.getApplications(q)).data;if($&&$!=="all"){const D=(await pt.getJobAssignmentsOverview($)).data.students.map(ge=>ge.id);ne=ne.filter(ge=>D.includes(ge.user_id))}j(ne)}}catch($){v(((ue=(V=$.response)==null?void 0:V.data)==null?void 0:ue.error)||"Failed to load data")}finally{m(!1)}},F=async(V,ue)=>{var $,q;try{v(null),await pt.assignJobToStudent(V,ue),_("Job assigned successfully"),T(),setTimeout(()=>_(null),3e3)}catch(Z){v(((q=($=Z.response)==null?void 0:$.data)==null?void 0:q.error)||"Failed to assign job")}},G=async V=>{var ue,$;if(confirm("Are you sure you want to remove this job assignment?"))try{v(null),await pt.removeJobFromStudent(V),_("Job assignment removed successfully"),T(),setTimeout(()=>_(null),3e3)}catch(q){v((($=(ue=q.response)==null?void 0:ue.data)==null?void 0:$.error)||"Failed to remove job assignment")}},U=async V=>{var $,q;const ue=parseInt(N);if(isNaN(ue)||ue<=0){v("Please enter a valid XP amount");return}try{v(null);const Z=await pt.awardXP(V,ue);_(Z.data.message),W(null),H("10"),T(),setTimeout(()=>_(null),3e3)}catch(Z){v(((q=($=Z.response)==null?void 0:$.data)==null?void 0:q.error)||"Failed to award XP")}},ee=async V=>{var ue,$;try{v(null),await pt.updateApplicationStatus(V,"approved"),_("Application approved and job assigned"),T(),setTimeout(()=>_(null),3e3)}catch(q){v((($=(ue=q.response)==null?void 0:ue.data)==null?void 0:$.error)||"Failed to approve application")}},te=async V=>{var ue,$;try{v(null),await pt.updateApplicationStatus(V,"denied"),_("Application denied"),T(),setTimeout(()=>_(null),3e3)}catch(q){v((($=(ue=q.response)==null?void 0:ue.data)==null?void 0:$.error)||"Failed to deny application")}},de=async()=>{var V,ue;if(r){S(!0),v(null);try{await z.put(`/town/settings/${r.id}`,{job_applications_enabled:!r.job_applications_enabled}),await a(),_(`Job applications ${r.job_applications_enabled?"disabled":"enabled"}`),setTimeout(()=>_(null),3e3)}catch($){v(((ue=(V=$.response)==null?void 0:V.data)==null?void 0:ue.error)||"Failed to toggle job applications")}finally{S(!1)}}},K=V=>{M(V),P({name:V.name,description:V.description||"",base_salary:Q(V),is_contractual:V.is_contractual||!1,company_name:V.company_name||"",location:V.location||"",requirements:V.requirements||""})},se=()=>{M(null),P({})},ie=async()=>{var V,ue;if(I){k(!0),v(null);try{await pt.updateJob(I.id,A),_("Job updated successfully"),T(),se(),setTimeout(()=>_(null),3e3)}catch($){v(((ue=(V=$.response)==null?void 0:V.data)==null?void 0:ue.error)||"Failed to update job")}finally{k(!1)}}},O=V=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(V),Q=V=>{const ue=(V==null?void 0:V.base_salary)||2e3;return ue===4e3?2e3:ue},B=V=>{if(!V)return null;const ue=V.match(/(\d+)\s+positions?/i);return ue?parseInt(ue[1]):null};return b&&p.length===0&&g.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[r&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Job Applications"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.job_applications_enabled!==!1?"Students can currently apply for jobs":"Job applications are currently disabled"})]}),e.jsx("button",{onClick:de,disabled:R,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${r.job_applications_enabled!==!1?"bg-primary-600":"bg-gray-300"} ${R?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.job_applications_enabled!==!1?"translate-x-6":"translate-x-1"}`})})]})}),n==="applications"&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Class:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),s.map(V=>e.jsx("button",{onClick:()=>c(V.class),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i===V.class?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:V.class},V.class))]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>l("jobs"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${n==="jobs"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Job Assignments"})]}),e.jsxs("button",{onClick:()=>l("applications"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${n==="applications"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Pending Applications"}),g.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:g.length})]})]})}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),w&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:w}),n==="jobs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-4",children:["6A","6B","6C"].map(V=>{const ue=f.filter($=>$.class===V);return e.jsxs("button",{onClick:()=>u(V),className:`py-3 px-4 border-b-2 font-medium text-sm transition-colors ${o===V?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[V," (",ue.length," students)"]},V)})})}),e.jsx("div",{className:"space-y-4",children:p.map(V=>{const ue=f.filter(le=>le.class===o),$=ue.filter(le=>le.job_id===V.id),q=ue.filter(le=>!le.job_id||le.job_id!==V.id),Z=B(V.requirements),ne=Z?$.length>=Z:!1;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V.name}),V.company_name&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(",V.company_name,")"]}),e.jsx("button",{onClick:()=>K(V),className:"text-gray-400 hover:text-primary-600 transition-colors",title:"Edit job",children:e.jsx(hn,{className:"h-4 w-4"})})]}),V.location&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",V.location]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm font-medium text-primary-600",children:[O(Q(V))," starting"]}),V.is_contractual&&e.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs font-semibold",children:"CONTRACTUAL"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Grows with job level"})]}),Z&&e.jsxs("p",{className:"text-sm text-gray-600",children:[Z," position",Z>1?"s":""," available",$.length>0&&e.jsxs("span",{className:"ml-2",children:["(",$.length," assigned in ",o,")"]})]})]})}),$.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Assigned Students:"}),e.jsx("div",{className:"space-y-3",children:$.map(le=>{const D=le.job_level||1,ge=le.job_experience_points||0,X=Jc(D,ge),oe=E===le.id;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[le.first_name," ",le.last_name]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",le.username,")"]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs font-semibold",children:["Level ",D]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[ge," XP"]})]}),D<10&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsxs("span",{children:["Progress to Level ",D+1]}),e.jsxs("span",{children:[X.current," / ",X.needed," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${X.percentage}%`}})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:oe?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:N,onChange:Y=>H(Y.target.value),min:"1",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"XP",autoFocus:!0}),e.jsx("button",{onClick:()=>U(le.id),className:"bg-primary-600 text-white px-3 py-1 rounded text-sm hover:bg-primary-700",children:"Award"}),e.jsx("button",{onClick:()=>{W(null),H("10")},className:"text-gray-600 hover:text-gray-700 text-sm",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>W(le.id),className:"text-primary-600 hover:text-primary-700 flex items-center space-x-1 text-sm",title:"Award XP",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Award XP"})]}),e.jsxs("button",{onClick:()=>G(le.id),className:"text-red-600 hover:text-red-700 flex items-center space-x-1 text-sm",children:[e.jsx($b,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]})})]})},le.id)})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Assign Student:"}),e.jsxs("select",{value:"",onChange:le=>{const D=le.target.value?parseInt(le.target.value):null;D&&(F(D,V.id),le.target.value="")},disabled:ne||q.length===0,className:`flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm ${ne||q.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:ne?"All positions filled":q.length===0?"No unassigned students":"Select a student..."}),q.map(le=>e.jsxs("option",{value:le.id,children:[le.first_name," ",le.last_name," (",le.username,")",le.job_name&&` - Currently: ${le.job_name}`]},le.id))]})]})})]},V.id)})})]}),n==="applications"&&e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx(Ce,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-600",children:"No pending applications"})]}):g.map(V=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:V.job_name}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Applicant:"})," ",V.applicant_first_name," ",V.applicant_last_name," (",V.applicant_username,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Applied:"})," ",new Date(V.created_at).toLocaleDateString()]}),V.job_salary&&e.jsxs("p",{children:[e.jsx("strong",{children:"Salary:"})," ",O(V.job_salary)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>ee(V.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>te(V.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"Deny"})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Application Answers:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(V.answers||{}).map(([ue,$])=>{const Z={interest:"Why are you interested in this position?",experience:"What relevant experience do you have?",availability:"Are you available to work during school hours?",skills:"What skills make you a good fit?",hours:"How many hours per week can you commit?"}[ue]||ue;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:Z}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:Array.isArray($)?$.join(", "):$})]},ue)})})]})]},V.id))}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Job"}),e.jsx("button",{onClick:se,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Name *"}),e.jsx("input",{type:"text",value:A.name||"",onChange:V=>P({...A,name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:A.company_name||"",onChange:V=>P({...A,company_name:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:A.location||"",onChange:V=>P({...A,location:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Salary (ZAR) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:A.base_salary||2e3,onChange:V=>P({...A,base_salary:parseFloat(V.target.value)||2e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Starting salary. Increases with job level progression."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_contractual",checked:A.is_contractual||!1,onChange:V=>P({...A,is_contractual:V.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_contractual",className:"ml-2 block text-sm text-gray-700",children:"Contractual Job (earns 1.5x more)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:A.description||"",onChange:V=>P({...A,description:V.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Job description and responsibilities..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirements"}),e.jsx("textarea",{value:A.requirements||"",onChange:V=>P({...A,requirements:V.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Job requirements, qualifications, number of positions..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{onClick:ie,disabled:C||!A.name||!A.base_salary,className:"flex-1 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:C?"Saving...":"Save Changes"})]}),e.jsx("button",{onClick:se,className:"px-4 py-2 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})})]})},Xb=()=>{const{currentTownClass:t,refreshTown:s}=ls(),[r,a]=d.useState(null),[n,l]=d.useState(null),[i,c]=d.useState([]),[o,u]=d.useState(!0),[p,y]=d.useState("overview"),[f,h]=d.useState(""),[g,j]=d.useState(""),[b,m]=d.useState(""),[x,v]=d.useState(""),[w,_]=d.useState("1500"),[R,S]=d.useState(!1),[I,M]=d.useState(null),[A,P]=d.useState("month");d.useEffect(()=>{t&&C()},[t,A]);const C=async()=>{if(t){u(!0);try{const[F,G,U]=await Promise.all([os.getTreasuryInfo(t),os.getTaxReport(t,A),os.getTaxBrackets()]);a(F.data),l(G.data),c(U.data)}catch(F){console.error("Failed to fetch treasury data:",F)}finally{u(!1)}}},k=F=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(F),E=async()=>{if(!(!t||!r)){S(!0);try{await os.toggleTax(t,!r.tax_enabled),await C(),await s()}catch(F){console.error("Failed to toggle tax:",F),alert("Failed to toggle tax")}finally{S(!1)}}},W=async F=>{var G,U;if(F.preventDefault(),!(!t||!f)){S(!0);try{await os.depositToTreasury(t,parseFloat(f),g),h(""),j(""),await C(),await s(),alert("Deposit successful!")}catch(ee){console.error("Failed to deposit:",ee),alert(((U=(G=ee.response)==null?void 0:G.data)==null?void 0:U.error)||"Failed to deposit")}finally{S(!1)}}},N=async F=>{var G,U;if(F.preventDefault(),!(!t||!b)){S(!0);try{await os.withdrawFromTreasury(t,parseFloat(b),x),m(""),v(""),await C(),await s(),alert("Withdrawal successful!")}catch(ee){console.error("Failed to withdraw:",ee),alert(((U=(G=ee.response)==null?void 0:G.data)==null?void 0:U.error)||"Failed to withdraw")}finally{S(!1)}}},H=async()=>{var F,G;if(t&&confirm("Are you sure you want to pay salaries to all employed students? Tax will be automatically deducted.")){S(!0);try{const U=await os.paySalaries(t);M(U.data),await C(),await s()}catch(U){console.error("Failed to pay salaries:",U),alert(((G=(F=U.response)==null?void 0:F.data)==null?void 0:G.error)||"Failed to pay salaries")}finally{S(!1)}}},T=async()=>{var F,G;if(t&&confirm("Are you sure you want to pay basic salary to all unemployed students?")){S(!0);try{const U=parseFloat(w)||void 0,ee=await os.payBasicSalary(t,U);alert(`Basic salary paid to ${ee.data.paid_count} students. Total: ${k(ee.data.total_paid)}`),await C(),await s()}catch(U){console.error("Failed to pay basic salary:",U),alert(((G=(F=U.response)==null?void 0:F.data)==null?void 0:G.error)||"Failed to pay basic salary")}finally{S(!1)}}};return t?o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Treasury"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Manage finances for Class ",t]})]}),e.jsx("button",{onClick:C,disabled:o,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(pr,{className:`h-5 w-5 ${o?"animate-spin":""}`})})]}),r&&e.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm font-medium",children:"Treasury Balance"}),e.jsx("p",{className:"text-4xl font-bold mt-1",children:k(r.treasury_balance)}),e.jsx("p",{className:"text-emerald-100 text-sm mt-2",children:"Starting balance: R10,000,000"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-emerald-100 text-sm",children:"Tax Collection"}),e.jsx("button",{onClick:E,disabled:R,className:"focus:outline-none",title:r.tax_enabled?"Click to disable tax":"Click to enable tax",children:r.tax_enabled?e.jsx(sn,{className:"h-8 w-8 text-white"}):e.jsx(tn,{className:"h-8 w-8 text-emerald-200"})})]}),e.jsx("p",{className:`text-sm font-medium ${r.tax_enabled?"text-white":"text-emerald-200"}`,children:r.tax_enabled?"Progressive Tax Active":"Tax Disabled"})]})]})}),r&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Tax Collected"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(r.stats.total_tax_collected)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-1",children:[e.jsx(Dr,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Salaries Paid"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(Math.abs(r.stats.total_salaries_paid))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-1",children:[e.jsx(Mu,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Deposits"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(r.stats.total_deposits)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 mb-1",children:[e.jsx(Ru,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Withdrawals"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(Math.abs(r.stats.total_withdrawals))})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:Jt},{id:"pay-salaries",label:"Pay Salaries",icon:we},{id:"tax-report",label:"Tax Report",icon:xn},{id:"transactions",label:"Transactions",icon:Eb}].map(({id:F,label:G,icon:U})=>e.jsxs("button",{onClick:()=>y(F),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===F?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:G})]},F))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Progressive Tax Brackets"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:i.map((F,G)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[k(F.min_salary)," - ",F.max_salary?k(F.max_salary):""]}),e.jsxs("span",{className:`font-semibold ${F.tax_rate===0?"text-green-600":"text-gray-900"}`,children:[F.tax_rate,"% tax"]})]},F.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[e.jsx(Mu,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Deposit to Treasury"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:f,onChange:F=>h(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:g,onChange:F=>j(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Donation from event"})]}),e.jsx("button",{type:"submit",disabled:R||!f,className:"w-full btn-primary",children:R?"Processing...":"Deposit"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[e.jsx(Ru,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{children:"Withdraw from Treasury"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:b,onChange:F=>m(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:x,onChange:F=>v(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Town infrastructure"})]}),e.jsx("button",{type:"submit",disabled:R||!b,className:"w-full bg-amber-500 text-white py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50",children:R?"Processing...":"Withdraw"})]})]})]})]}),p==="pay-salaries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Pay Employed Students"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Pay all employed students their job salary. ",r!=null&&r.tax_enabled?"Progressive tax will be automatically deducted.":"Tax is currently disabled."]}),e.jsx("button",{onClick:H,disabled:R,className:"btn-primary",children:R?"Processing...":"Pay Salaries Now"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Pay Basic Salary (Unemployed)"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pay a basic salary to all unemployed students. This is tax-exempt."}),e.jsxs("div",{className:"flex items-end space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount per student (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:w,onChange:F=>_(F.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 w-40"})]}),e.jsx("button",{onClick:T,disabled:R,className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:R?"Processing...":"Pay Basic Salary"})]})]}),I&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:"Payment Complete!"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Students Paid"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:I.paid_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Gross Salaries"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:k(I.total_gross)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Tax Collected"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:k(I.total_tax)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Net Paid"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:k(I.total_net)})]})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-green-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Job"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Gross"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Tax"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Net"})]})}),e.jsx("tbody",{children:I.payment_details.map((F,G)=>e.jsxs("tr",{className:G%2===0?"bg-white":"bg-green-50",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:F.first_name&&F.last_name?`${F.first_name} ${F.last_name}`:F.username}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:F.job_name}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:k(F.gross_salary)}),e.jsxs("td",{className:"px-3 py-2 text-right text-red-600",children:["-",k(F.tax_amount)," (",F.tax_rate,"%)"]}),e.jsx("td",{className:"px-3 py-2 text-right font-medium text-green-600",children:k(F.net_salary)})]},F.id))})]})})]})]}),p==="tax-report"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Tax Report"}),e.jsxs("select",{value:A,onChange:F=>P(F.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"week",children:"Last 7 days"}),e.jsx("option",{value:"month",children:"Last 30 days"}),e.jsx("option",{value:"all",children:"All time"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(n.summary.total_gross)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tax"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:k(n.summary.total_tax)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Net"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:k(n.summary.total_net)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Tax Rate"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[n.summary.avg_tax_rate.toFixed(1),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Tax by Student"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Student"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Gross Earnings"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Tax Paid"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Net Received"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Payments"})]})}),e.jsxs("tbody",{children:[n.student_taxes.map((F,G)=>e.jsxs("tr",{className:G%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-gray-900",children:F.first_name&&F.last_name?`${F.first_name} ${F.last_name}`:F.username}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:k(F.total_gross)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600 font-medium",children:k(F.total_tax_paid)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:k(F.total_net)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:F.payment_count})]},F.user_id)),n.student_taxes.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No tax transactions in this period"})})]})]})})]})]}),p==="transactions"&&r&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Recent Treasury Transactions"}),e.jsxs("div",{className:"space-y-2",children:[r.transactions.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${F.amount>0?"bg-green-100":"bg-red-100"}`,children:F.amount>0?e.jsx(Ke,{className:"h-4 w-4 text-green-600"}):e.jsx(Dr,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[F.transaction_type.replace("_"," "),"  ",new Date(F.created_at).toLocaleString(),F.created_by_username&&`  by ${F.created_by_username}`]})]})]}),e.jsxs("span",{className:`font-semibold ${F.amount>0?"text-green-600":"text-red-600"}`,children:[F.amount>0?"+":"",k(F.amount)]})]},F.id)),r.transactions.length===0&&e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Jt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Select a town to manage treasury"})]})},ej=()=>{const[t,s]=d.useState([]),[r,a]=d.useState(!0),[n,l]=d.useState(null),[i,c]=d.useState(null),[o,u]=d.useState(null),[p,y]=d.useState(!1),[f,h]=d.useState(!1),[g,j]=d.useState("all"),[b,m]=d.useState(1),[x,v]=d.useState(!1),[w,_]=d.useState({name:"",category:"consumable",price:0,description:"",notes:"",available:!0,event_day_only:!1});d.useEffect(()=>{R(),S()},[]);const R=async()=>{var N,H;try{a(!0),l(null);const F=(await Ss.getAllItems()).data.map(G=>({...G,price:parseFloat(G.price)||0}));s(F)}catch(T){l(((H=(N=T.response)==null?void 0:N.data)==null?void 0:H.error)||"Failed to load shop items")}finally{a(!1)}},S=async()=>{try{const N=await Ss.getSettings();m(N.data.weekly_purchase_limit)}catch(N){console.error("Failed to fetch shop settings:",N)}},I=async N=>{var H,T;try{v(!0),l(null),await Ss.updateSettings({weekly_purchase_limit:N}),m(N),c(`Weekly purchase limit updated to ${N}`),setTimeout(()=>c(null),3e3)}catch(F){l(((T=(H=F.response)==null?void 0:H.data)==null?void 0:T.error)||"Failed to update settings")}finally{v(!1)}},M=async()=>{var N,H;if(!w.name.trim()||w.price<0){l("Please provide a valid name and price");return}try{h(!0),l(null),await Ss.createItem({...w,description:w.description||void 0,notes:w.notes||void 0}),c("Item created successfully"),y(!1),_({name:"",category:"consumable",price:0,description:"",notes:"",available:!0,event_day_only:!1}),R(),setTimeout(()=>c(null),3e3)}catch(T){l(((H=(N=T.response)==null?void 0:N.data)==null?void 0:H.error)||"Failed to create item")}finally{h(!1)}},A=async()=>{var N,H;if(o)try{h(!0),l(null),await Ss.updateItem(o.id,{name:o.name,category:o.category,price:o.price,description:o.description,notes:o.notes,available:o.available,event_day_only:o.event_day_only}),c("Item updated successfully"),u(null),R(),setTimeout(()=>c(null),3e3)}catch(T){l(((H=(N=T.response)==null?void 0:N.data)==null?void 0:H.error)||"Failed to update item")}finally{h(!1)}},P=async N=>{var H,T;try{l(null),await Ss.updateItem(N.id,{available:!N.available}),c(`Item ${N.available?"disabled":"enabled"} successfully`),R(),setTimeout(()=>c(null),3e3)}catch(F){l(((T=(H=F.response)==null?void 0:H.data)==null?void 0:T.error)||"Failed to toggle item availability")}},C=async N=>{var H,T;if(confirm(`Are you sure you want to delete "${N.name}"? If this item has purchase history, it will be disabled instead.`))try{l(null),(await Ss.deleteItem(N.id)).data.marked_unavailable?c("Item has purchase history and was disabled instead of deleted"):c("Item deleted successfully"),R(),setTimeout(()=>c(null),3e3)}catch(F){l(((T=(H=F.response)==null?void 0:H.data)==null?void 0:T.error)||"Failed to delete item")}},k=N=>{switch(N){case"consumable":return" Consumable";case"privilege":return" Privilege";case"profile":return" Profile Emoji";default:return N}},E=N=>{switch(N){case"consumable":return"bg-purple-100 text-purple-800";case"privilege":return"bg-yellow-100 text-yellow-800";case"profile":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},W=t.filter(N=>g==="all"||N.category===g);return r&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Shop Items Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage products, prices, and availability in The Winkel"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Item"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-amber-500 rounded-full p-3",children:e.jsx(pn,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Weekly Purchase Limit"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Students can make up to ",e.jsx("span",{className:"font-bold text-amber-700",children:b})," purchase",b!==1?"s":""," per week"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(Profile emojis are excluded from this limit)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Limit:"}),e.jsx("select",{value:b,onChange:N=>I(parseInt(N.target.value)),disabled:x,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:opacity-50",children:[1,2,3,4,5,6,7,8,9,10].map(N=>e.jsxs("option",{value:N,children:[N," purchase",N!==1?"s":""," per week"]},N))}),x&&e.jsx(be,{className:"h-5 w-5 animate-spin text-amber-600"})]})]})}),n&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700",children:n}),e.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(Ze,{className:"h-4 w-4"})})]}),i&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx("p",{className:"text-green-700",children:i})]}),p&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:w.name,onChange:N=>_({...w,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g.,  Candy Bar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{value:w.category,onChange:N=>_({...w,category:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"consumable",children:" Consumable"}),e.jsx("option",{value:"privilege",children:" Privilege"}),e.jsx("option",{value:"profile",children:" Profile Emoji"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (R) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:w.price,onChange:N=>_({...w,price:parseFloat(N.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:w.description,onChange:N=>_({...w,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Brief description"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (internal)"}),e.jsx("input",{type:"text",value:w.notes,onChange:N=>_({...w,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Internal notes (shown to students)"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w.available,onChange:N=>_({...w,available:N.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Available for purchase"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w.event_day_only,onChange:N=>_({...w,event_day_only:N.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Event day only"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:M,disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[f?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Item"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsx("div",{className:"flex space-x-2",children:["all","consumable","privilege","profile"].map(N=>e.jsx("button",{onClick:()=>j(N),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${g===N?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N==="all"?"All":k(N)},N))})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx(X0,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Items"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(N=>N.available).length})]}),e.jsx(Ne,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Disabled Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:t.filter(N=>!N.available).length})]}),e.jsx(Ze,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Price"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:["R",t.length>0?(t.reduce((N,H)=>N+H.price,0)/t.length).toFixed(0):0]})]}),e.jsx(we,{className:"h-8 w-8 text-primary-400"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(N=>e.jsxs("tr",{className:N.available?"":"bg-gray-50 opacity-70",children:[e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:o.name,onChange:H=>u({...o,name:H.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",value:o.description||"",onChange:H=>u({...o,description:H.target.value||null}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Description"}),e.jsx("input",{type:"text",value:o.notes||"",onChange:H=>u({...o,notes:H.target.value||null}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Notes"})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),N.description&&e.jsx("p",{className:"text-xs text-gray-500",children:N.description}),N.notes&&e.jsx("p",{className:"text-xs text-gray-400 italic",children:N.notes})]})}),e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsxs("select",{value:o.category,onChange:H=>u({...o,category:H.target.value}),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"consumable",children:"Consumable"}),e.jsx("option",{value:"privilege",children:"Privilege"}),e.jsx("option",{value:"profile",children:"Profile"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${E(N.category)}`,children:k(N.category)})}),e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsx("input",{type:"number",min:"0",step:"0.01",value:o.price,onChange:H=>u({...o,price:parseFloat(H.target.value)||0}),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"}):e.jsxs("span",{className:"text-sm font-semibold text-primary-600",children:["R",N.price.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>P(N),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${N.available?"bg-green-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${N.available?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm ${N.available?"text-green-600":"text-gray-500"}`,children:N.available?"Active":"Disabled"}),N.event_day_only&&e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full",children:"Event Only"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:(o==null?void 0:o.id)===N.id?e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:A,disabled:f,className:"p-1.5 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Save",children:f?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(ir,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(null),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Cancel",children:e.jsx(Ze,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>u({...N}),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(N),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:e.jsx(Gc,{className:"h-4 w-4"})})]})})]},N.id))})]})}),W.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bs,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:t.length===0?"No shop items yet. Add your first item!":"No items match the current filter."})]})]})]})},tj=({students:t,onUpdate:s})=>{const r=br(),[a,n]=d.useState(null),[l,i]=d.useState(!1),[c,o]=d.useState(!1),[u,p]=d.useState(!1),[y,f]=d.useState(null),[h,g]=d.useState({amount:"",description:""}),[j,b]=d.useState(!1),[m,x]=d.useState(""),[v,w]=d.useState(""),[_,R]=d.useState(""),[S,I]=d.useState("all"),[M,A]=d.useState("surname"),[P,C]=d.useState("asc"),[k,E]=d.useState(new Set),[W,N]=d.useState({}),[H,T]=d.useState(null),[F,G]=d.useState(null),U=d.useMemo(()=>{const $=t.reduce((Z,ne)=>{const le=ne.class||"Unassigned";return Z[le]||(Z[le]=[]),Z[le].push(ne),Z},{}),q=Object.keys($).sort((Z,ne)=>Z==="Unassigned"?1:ne==="Unassigned"?-1:Z.localeCompare(ne));return{grouped:$,sortedClasses:q}},[t]),te=($=>$==="all"?t:U.grouped[$]||[])(S).filter($=>$.username.toLowerCase().includes(_.toLowerCase())||$.first_name&&$.first_name.toLowerCase().includes(_.toLowerCase())||$.last_name&&$.last_name.toLowerCase().includes(_.toLowerCase())),de=d.useMemo(()=>{const $=P==="asc"?1:-1;return te.map((q,Z)=>({s:q,idx:Z})).sort((q,Z)=>{if(M==="balance"){const ne=Number(q.s.balance)||0,le=Number(Z.s.balance)||0,D=ne-le;if(D!==0)return D*$}else{const ne=(q.s.last_name||"").toLowerCase(),le=(Z.s.last_name||"").toLowerCase();if(ne!==le)return ne.localeCompare(le)*$;const D=(q.s.first_name||"").toLowerCase(),ge=(Z.s.first_name||"").toLowerCase();if(D!==ge)return D.localeCompare(ge)*$;const X=(q.s.username||"").toLowerCase(),oe=(Z.s.username||"").toLowerCase();if(X!==oe)return X.localeCompare(oe)*$}return q.idx-Z.idx}).map(({s:q})=>q)},[te,M,P]),K=async $=>{var q,Z;if($.preventDefault(),!!a){x(""),w(""),b(!0);try{await z.post("/transactions/deposit",{username:a.username,amount:parseFloat(h.amount),description:h.description||"Deposit by teacher"}),w("Deposit successful!"),g({amount:"",description:""}),i(!1),s()}catch(ne){x(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Deposit failed")}finally{b(!1)}}},se=async $=>{var q,Z;if($.preventDefault(),!!a){x(""),w(""),b(!0);try{await z.post("/transactions/withdraw",{username:a.username,amount:parseFloat(h.amount),description:h.description||"Withdrawal by teacher"}),w("Withdrawal successful!"),g({amount:"",description:""}),o(!1),s()}catch(ne){x(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Withdrawal failed")}finally{b(!1)}}},ie=async()=>{var $,q,Z;if(y){x(""),w(""),b(!0);try{try{await z.delete(`/students/${y.username}`),w(`Student ${y.username} has been deleted successfully`),p(!1),f(null),s()}catch(ne){if((($=ne.response)==null?void 0:$.status)===404&&y.account_number)await z.delete(`/students/account/${y.account_number}`),w(`Account ${y.account_number} has been deleted successfully`),p(!1),f(null),s();else throw ne}}catch(ne){x(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Failed to delete student")}finally{b(!1)}}},O=$=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format($),Q=$=>{const q=$.id,Z=k.has(q),ne=new Set(k);if(Z){ne.delete(q),E(ne);return}ne.add(q),E(ne)},B=async $=>{var q,Z;T($.id),x(""),w("");try{const le=(await z.post(`/students/${$.username}/reset-password`,{reveal:!0})).data.temporary_password;if(!le){w(`Password reset for ${$.username}. (Password not returned by server)`);return}N(D=>({...D,[$.id]:le})),w(`Password reset for ${$.username}. Share the new password with the student.`),k.has($.id)||E(D=>new Set(D).add($.id))}catch(ne){x(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Failed to reset password")}finally{T(null)}},V=async $=>{var Z,ne;G($.id),x(""),w("");const q=!$.account_frozen;try{await z.post(`/students/${$.username}/freeze`,{frozen:q}),w(q?`Account frozen for ${$.username}`:`Account unfrozen for ${$.username}`),s()}catch(le){x(((ne=(Z=le.response)==null?void 0:Z.data)==null?void 0:ne.error)||"Failed to update freeze status")}finally{G(null)}},ue=$=>{navigator.clipboard.writeText($).then(()=>{w("Copied to clipboard!"),setTimeout(()=>w(""),2e3)}).catch(()=>{x("Failed to copy to clipboard")})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students by name or username...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:_,onChange:$=>R($.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Sort by"}),e.jsxs("select",{value:M,onChange:$=>A($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"surname",children:"Surname"}),e.jsx("option",{value:"balance",children:"Bank balance"})]}),e.jsx("button",{type:"button",onClick:()=>C($=>$==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",title:P==="asc"?"Ascending":"Descending",children:P==="asc"?"AZ":"ZA"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>I("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Pe,{className:"h-4 w-4 inline mr-2"}),"All Students (",t.length,")"]}),U.sortedClasses.map($=>e.jsxs("button",{onClick:()=>I($),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S===$?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[$==="Unassigned"?"":""," ",$," (",U.grouped[$].length,")"]},$))]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),v&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:v}),S==="all"&&U.sortedClasses.length>1&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Class Summary"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.sortedClasses.map($=>{const q=U.grouped[$],Z=q.reduce((ne,le)=>ne+(Number(le.balance)||0),0);return e.jsx("div",{className:"bg-white rounded-lg p-3 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[$==="Unassigned"?"":""," ",$]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[q.length," students"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-success-600",children:O(Z)})})]})},$)})})]}),de.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:_?"No students found":`No students in ${S==="all"?"any class":S}`}),e.jsx("p",{className:"text-gray-500",children:_?"Try adjusting your search terms":S==="all"?"Students will appear here once they register":"Students in this class will appear here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map($=>{const q=k.has($.id),Z=W[$.id];return e.jsxs("div",{className:`card transition-all duration-200 ${(a==null?void 0:a.id)===$.id?"ring-2 ring-primary-500 bg-primary-50":"hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"bg-primary-100 p-2 rounded-full flex-shrink-0",children:e.jsx(Ks,{className:"h-5 w-5 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:$.first_name&&$.last_name?`${$.first_name} ${$.last_name}`:$.username}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",$.username]}),e.jsx("div",{className:"flex items-center space-x-2 mt-1 flex-wrap",children:e.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:$.class||"Unassigned"})})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2 flex flex-col items-end gap-1",children:[e.jsx("p",{className:"text-lg font-bold text-success-600",children:O($.balance)}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",title:$.account_frozen?"Unfreeze account":"Freeze account",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Freeze"}),e.jsx("button",{type:"button",role:"switch","aria-checked":!!$.account_frozen,disabled:F===$.id,onClick:ne=>{ne.preventDefault(),V($)},className:`relative inline-flex h-5 w-9 flex-shrink-0 rounded-full transition-colors disabled:opacity-50 ${$.account_frozen?"bg-amber-500":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform mt-0.5 ${$.account_frozen?"translate-x-4 ml-0.5":"translate-x-0.5"}`})})]})]})]}),e.jsxs("div",{className:"mb-3 space-y-1",children:[$.email&&e.jsx("p",{className:"text-xs text-gray-600 truncate",title:$.email,children:$.email}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",title:`Account: ${$.account_number}`,children:["Account: ",$.account_number]})]}),e.jsxs("div",{className:"mb-3 border-t border-gray-200 pt-3",children:[e.jsx("button",{onClick:()=>Q($),className:"w-full flex items-center justify-between text-sm text-gray-700 hover:text-primary-600 transition-colors",children:e.jsxs("span",{className:"flex items-center",children:[q?e.jsx(J0,{className:"h-4 w-4 mr-1"}):e.jsx(G0,{className:"h-4 w-4 mr-1"}),"Credentials"]})}),q&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Username"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:$.username,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:ne=>ne.currentTarget.select()}),e.jsx("button",{onClick:()=>ue($.username),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy username",children:e.jsx(Ai,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Password"}),Z?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:Z,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:ne=>ne.currentTarget.select()}),e.jsx("button",{onClick:()=>ue(Z),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy password",children:e.jsx(Ai,{className:"h-4 w-4"})})]}):H===$.id?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-white border border-gray-300 rounded",children:[e.jsx(pr,{className:"h-4 w-4 animate-spin text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading password"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 px-3 py-2 bg-amber-50 border border-amber-200 rounded text-sm text-amber-800",children:"Password not loaded yet. Click Reset to generate a new one."}),e.jsxs("button",{onClick:()=>B($),disabled:H===$.id,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-primary-100 text-primary-700 hover:bg-primary-200 rounded text-sm transition-colors disabled:opacity-50",children:[e.jsx(pr,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]})]})]}),Z&&e.jsxs("button",{onClick:()=>ue(`Username: ${$.username}
Password: ${Z}`),className:"w-full px-3 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded text-sm transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ai,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy username and password"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:ne=>{ne.stopPropagation(),$.username?r(`/student/${$.username}`):console.error("Student has no username:",$)},className:"flex-1 bg-primary-100 text-primary-700 hover:bg-primary-200 px-3 py-2 rounded-lg transition-colors text-sm flex items-center justify-center space-x-1",title:"View detailed profile",children:[e.jsx(en,{className:"h-4 w-4"}),e.jsx("span",{children:"View Details"})]}),e.jsxs("button",{onClick:ne=>{ne.stopPropagation(),n($),i(!0)},className:"flex-1 btn-success text-sm",children:[e.jsx(ns,{className:"h-4 w-4 inline mr-1"}),"Add Money"]}),e.jsxs("button",{onClick:ne=>{ne.stopPropagation(),n($),o(!0)},className:"flex-1 btn-warning text-sm",children:[e.jsx(Z0,{className:"h-4 w-4 inline mr-1"}),"Remove Money"]}),e.jsx("button",{onClick:ne=>{ne.stopPropagation(),f($),p(!0)},className:"px-3 py-2 bg-red-100 text-red-600 hover:bg-red-200 rounded-lg transition-colors text-sm",title:"Delete Student",children:e.jsx(Gc,{className:"h-4 w-4"})})]})]},$.id)})}),l&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add Money to ",a.username]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(we,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:h.amount,onChange:$=>g({...h,amount:$.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Salary, Bonus, Reward",value:h.description,onChange:$=>g({...h,description:$.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:j,className:"flex-1 btn-success disabled:opacity-50",children:j?"Adding...":"Add Money"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),c&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Remove Money from ",a.username]}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(we,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:a.balance,required:!0,className:"input-field",placeholder:"0.00",value:h.amount,onChange:$=>g({...h,amount:$.target.value})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",O(a.balance)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Fine, Expense, Penalty",value:h.description,onChange:$=>g({...h,description:$.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:j,className:"flex-1 btn-warning disabled:opacity-50",children:j?"Removing...":"Remove Money"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),u&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(jr,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Student"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Are you sure you want to delete the following student? This action cannot be undone."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:y.first_name&&y.last_name?`${y.first_name} ${y.last_name}`:y.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",y.username]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Class: ",y.class||"Unassigned"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: ",O(y.balance)]})]}),e.jsxs("p",{className:"text-sm text-red-600 mt-3",children:[e.jsx("strong",{children:"Warning:"})," All associated data including transactions, loans, job applications, and land ownership will be removed."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:ie,disabled:j,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:j?"Deleting...":"Delete Student"}),e.jsx("button",{onClick:()=>{p(!1),f(null)},className:"flex-1 btn-secondary",children:"Cancel"})]})]})})]})},sj=({onUpdate:t})=>{const[s,r]=d.useState([]),[a,n]=d.useState(!0),[l,i]=d.useState(""),[c,o]=d.useState(""),[u,p]=d.useState(null);d.useEffect(()=>{y()},[]);const y=async()=>{var j,b;try{n(!0),i("");const m=await z.get("/students/pending");r(m.data)}catch(m){i(((b=(j=m.response)==null?void 0:j.data)==null?void 0:b.error)||"Failed to fetch pending students")}finally{n(!1)}},f=async j=>{var b,m;p(j.id),i(""),o("");try{await z.post(`/students/${j.username}/approve`),o(`Student ${j.username} has been approved successfully`),await y(),t()}catch(x){i(((m=(b=x.response)==null?void 0:b.data)==null?void 0:m.error)||"Failed to approve student")}finally{p(null)}},h=async j=>{var b,m;if(confirm(`Are you sure you want to deny ${j.username}? This action cannot be undone.`)){p(j.id),i(""),o("");try{await z.post(`/students/${j.username}/deny`),o(`Student ${j.username} has been denied`),await y(),t()}catch(x){i(((m=(b=x.response)==null?void 0:b.data)==null?void 0:m.error)||"Failed to deny student")}finally{p(null)}}},g=j=>new Date(j).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:e.jsx(Ce,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"New Student Registrations"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," ",s.length===1?"student":"students"," waiting for approval"]})]})]}),e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors",children:[e.jsx(pr,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]}),l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsx("span",{children:l})]}),c&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:c}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Ce,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Students"}),e.jsx("p",{className:"text-gray-500",children:"All new student registrations have been processed."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(j=>e.jsxs("div",{className:"bg-white rounded-xl border-2 border-amber-200 shadow-sm p-5 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-full flex-shrink-0",children:e.jsx(Ks,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:j.first_name&&j.last_name?`${j.first_name} ${j.last_name}`:j.username}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",j.username]})]})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[j.class&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:j.class})}),j.email&&e.jsx("p",{className:"text-xs text-gray-600 truncate",title:j.email,children:j.email}),j.account_number&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",j.account_number]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",g(j.created_at)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(j),disabled:u===j.id,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-success-600 text-white rounded-lg hover:bg-success-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u===j.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(jb,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]})}),e.jsx("button",{onClick:()=>h(j),disabled:u===j.id,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Ze,{className:"h-4 w-4"})})]})]},j.id))})]})},Ou="teacherDashboardTileOrder",rj=()=>{const{user:t}=Le(),{enabledPlugins:s,plugins:r,loading:a,refreshPlugins:n}=rt(),{currentTown:l,currentTownClass:i,allTowns:c,announcements:o,loading:u,setCurrentTownClass:p,refreshAnnouncements:y}=ls(),[f,h]=d.useState("dashboard"),[g,j]=d.useState(0),[b,m]=d.useState(0),[x,v]=d.useState([]),[w,_]=d.useState(null),[R,S]=d.useState(null),[I,M]=d.useState([]),[A,P]=d.useState([]),[C,k]=d.useState(!0);d.useEffect(()=>{if(s.length===0)return;const K=`${Ou}_${(t==null?void 0:t.id)??"default"}`;try{const se=localStorage.getItem(K);if(se){const ie=JSON.parse(se);if(Array.isArray(ie)&&ie.length>0){const O=s.map(B=>B.id),Q=ie.filter(B=>O.includes(B));O.forEach(B=>{Q.includes(B)||Q.push(B)}),v(Q.length?Q:O);return}}}catch{}v(s.map(se=>se.id))},[t==null?void 0:t.id,s.length===0?"":s.map(K=>K.id).join(",")]),d.useEffect(()=>{if(x.length!==0)try{const K=`${Ou}_${(t==null?void 0:t.id)??"default"}`;localStorage.setItem(K,JSON.stringify(x))}catch{}},[x,t==null?void 0:t.id]);const E=d.useMemo(()=>{const K=new Map(x.map((se,ie)=>[se,ie]));return[...s].sort((se,ie)=>{const O=K.get(se.id)??999,Q=K.get(ie.id)??999;return O-Q})},[s,x]),W=d.useCallback((K,se)=>{_(se),K.dataTransfer.effectAllowed="move",K.dataTransfer.setData("text/plain",String(se)),K.dataTransfer.setData("application/x-plugin-id",String(se))},[]),N=d.useCallback(()=>{_(null),S(null)},[]),H=d.useCallback((K,se)=>{K.preventDefault(),K.dataTransfer.dropEffect="move",w!=null&&w!==se&&S(se)},[w]),T=d.useCallback(()=>{S(null)},[]),F=d.useCallback((K,se)=>{K.preventDefault(),S(null);const ie=K.dataTransfer.getData("application/x-plugin-id")||K.dataTransfer.getData("text/plain"),O=ie?parseInt(ie,10):null;if(O==null||O===se||!x.includes(O)||!x.includes(se)){_(null);return}const Q=x.indexOf(O),B=x.indexOf(se);if(Q===-1||B===-1)return;const V=[...x];V.splice(Q,1),V.splice(B,0,O),v(V),_(null)},[x]),G=t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name} ${t.last_name}`:(t==null?void 0:t.username)||"Teacher";d.useEffect(()=>{U()},[]);const U=async()=>{var K;try{const[se,ie,O,Q]=await Promise.all([z.get("/students"),z.get("/loans"),z.get("/students/pending").catch(()=>({data:[]})),z.get("/transactions/pending-transfers").catch(()=>({data:[]}))]);M(se.data),P(ie.data),j(((K=O.data)==null?void 0:K.length)||0);const B=Q.data||[];m(B.filter(V=>V.status==="pending").length)}catch(se){console.error("Failed to fetch data:",se)}finally{k(!1)}},ee=d.useMemo(()=>{const K={};return c.forEach(se=>{const ie=I.filter(Q=>Q.class===se.class),O=A.filter(Q=>{const B=I.find(V=>V.username===Q.borrower_username);return(B==null?void 0:B.class)===se.class});K[se.class]={studentCount:ie.length,totalBalance:ie.reduce((Q,B)=>Q+(Number(B.balance)||0),0),employedCount:ie.filter(Q=>Q.job_id).length,unemployedCount:ie.filter(Q=>!Q.job_id).length,activeLoans:O.filter(Q=>Q.status==="active").length,pendingLoans:O.filter(Q=>Q.status==="pending").length}}),K},[I,A,c]),te=i?ee[i]:null,de=K=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(K);return a||u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",G,"! "]}),e.jsx("p",{className:"text-primary-100",children:"Town Hub Control Center"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Managing"}),e.jsxs("p",{className:"text-xl font-bold",children:[c.length," Towns"]})]})]})}),g>0&&f!=="pending"&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[g," new student",g!==1?"s":""," waiting for approval"]}),e.jsx("p",{className:"text-xs text-amber-600",children:'Click "New Students" tab to review and approve'})]})]}),e.jsx("button",{onClick:()=>h("pending"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium",children:"Review Now"})]})}),c.length>0&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-3 divide-x divide-gray-200",children:c.map(K=>{const se=ee[K.class],ie=i===K.class;return e.jsxs("button",{onClick:()=>p(K.class),className:`p-4 text-left transition-all ${ie?"bg-gradient-to-br from-primary-50 to-primary-100 border-b-4 border-primary-500":"hover:bg-gray-50 border-b-4 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${ie?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"}`,children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${ie?"text-primary-700":"text-gray-900"}`,children:K.town_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Class ",K.class]})]})]}),se&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pe,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[se.studentCount," students"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Jt,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:`${se.totalBalance>=0?"text-green-600":"text-red-600"}`,children:de(se.totalBalance)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qe,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[se.employedCount," employed"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Au,{className:"h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"text-emerald-600",children:de(K.treasury_balance||1e7)})]})]})]},K.id)})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ea,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Available Systems"}),e.jsx("span",{className:"text-xs text-gray-500 ml-2 hidden sm:inline",children:"Drag the handle to reorder tiles to match your classroom board"})]}),x.length>0&&e.jsx("button",{type:"button",onClick:()=>v(s.map(K=>K.id)),className:"text-xs text-primary-600 hover:text-primary-700 hover:underline",children:"Reset to default order"})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Ea,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No systems available at this time"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:E.map(K=>{const se=w===K.id,ie=R===K.id;return e.jsxs("div",{className:`relative group rounded-xl transition-all ${se?"opacity-50 scale-95":""} ${ie?"ring-2 ring-primary-500 ring-offset-2 bg-primary-50/50":""}`,onDragOver:O=>H(O,K.id),onDragLeave:T,onDrop:O=>F(O,K.id),children:[e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 cursor-grab active:cursor-grabbing p-1 rounded hover:bg-gray-200 text-gray-400 hover:text-gray-600 touch-none",draggable:!0,onDragStart:O=>W(O,K.id),onDragEnd:N,title:"Drag to reorder",onClick:O=>{O.preventDefault(),O.stopPropagation()},children:e.jsx(Sb,{className:"h-5 w-5"})}),e.jsx("div",{className:"pl-10",children:e.jsx(eh,{plugin:K,needsAttention:K.route_path==="/bank"&&b>0})})]},K.id)})})]}),l&&te&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.studentCount}),e.jsxs("p",{className:"text-xs text-gray-500",children:[te.employedCount," employed"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),e.jsx("p",{className:`text-2xl font-bold ${te.totalBalance>=0?"text-green-600":"text-red-600"}`,children:de(te.totalBalance)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",de(te.studentCount>0?te.totalBalance/te.studentCount:0)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Employment"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[te.studentCount>0?Math.round(te.employedCount/te.studentCount*100):0,"%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[te.unemployedCount," unemployed"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:te.activeLoans}),e.jsx("p",{className:"text-xs text-amber-600",children:te.pendingLoans>0?`${te.pendingLoans} pending approval`:"No pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"dashboard",label:"Overview",icon:Ea},{id:"pending",label:"New Students",icon:Ce,badge:g},{id:"students",label:"Students",icon:Pe},{id:"treasury",label:"Treasury",icon:Au},{id:"jobs",label:"Jobs",icon:Qe},{id:"shop",label:"Shop",icon:Bs},{id:"plugins",label:"Plugins",icon:Vc},{id:"announcements",label:"Announcements",icon:K0},{id:"town",label:"Town Settings",icon:Ot}].map(({id:K,label:se,icon:ie,badge:O})=>e.jsxs("button",{onClick:()=>h(K),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 relative ${f===K?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:se}),O!==void 0&&O>0&&e.jsx("span",{className:"ml-1 bg-amber-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center",children:O})]},K))})}),e.jsxs("div",{className:"p-6",children:[f==="dashboard"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(sh,{town:l,readOnly:!0,showTreasury:!0}),e.jsx(th,{announcements:o})]})}),f==="pending"&&e.jsx(sj,{onUpdate:U}),f==="students"&&e.jsx(tj,{students:I,onUpdate:U}),f==="treasury"&&e.jsx(Xb,{}),f==="plugins"&&e.jsx(Qb,{plugins:r,onUpdate:n}),f==="announcements"&&e.jsx(Kb,{announcements:o,onUpdate:y}),f==="jobs"&&e.jsx(Yb,{}),f==="shop"&&e.jsx(ej,{}),f==="town"&&e.jsx(Zb,{})]})]})]})},Iu=()=>{const{username:t}=Ro(),{accountNumber:s}=Ro(),r=s||t||"",a=br(),[n,l]=d.useState(null),[i,c]=d.useState(!0),[o,u]=d.useState(""),[p,y]=d.useState("overview");d.useEffect(()=>{f()},[r]);const f=async()=>{var N,H,T;try{c(!0),u("");const F=s||(r==null?void 0:r.startsWith("ACC"));let G;if(F)try{G=await z.get(`/students/account/${r}/details`)}catch{G=await z.get(`/students/${r}/details`)}else try{G=await z.get(`/students/${r}/details`)}catch(U){if(((N=U.response)==null?void 0:N.status)===404)G=await z.get(`/students/account/${r}/details`);else throw U}l(G.data)}catch(F){u(((T=(H=F.response)==null?void 0:H.data)==null?void 0:T.error)||"Failed to load student details")}finally{c(!1)}},h=N=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(N),g=N=>new Date(N).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=N=>new Date(N).toLocaleDateString("en-ZA",{month:"short",day:"numeric",year:"numeric"}),b=(N,H)=>{const T="text-xs px-2 py-1 rounded-full flex items-center space-x-1";return N==="approved"||N==="verified"?e.jsxs("span",{className:`${T} bg-green-100 text-green-700`,children:[e.jsx(Ne,{className:"h-3 w-3"}),e.jsx("span",{children:H?"Approved  Paid":"Approved"})]}):N==="denied"?e.jsxs("span",{className:`${T} bg-red-100 text-red-700`,children:[e.jsx(ct,{className:"h-3 w-3"}),e.jsx("span",{children:"Denied"})]}):e.jsxs("span",{className:`${T} bg-yellow-100 text-yellow-700`,children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsx("span",{children:"Pending"})]})},m=N=>N?N.first_name&&N.last_name?`${N.first_name} ${N.last_name}`:N.username||N.account_number||"Unknown":"Unknown",x=(N,H)=>N.from_username===H&&N.to_username===H?"Internal":N.from_username===H?`To ${N.to_first_name&&N.to_last_name?`${N.to_first_name} ${N.to_last_name}`:N.to_username||"Unknown"}`:N.to_username===H?`From ${N.from_first_name&&N.from_last_name?`${N.from_first_name} ${N.from_last_name}`:N.from_username||"Unknown"}`:N.transaction_type;if(i)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q0,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading student details..."})]})});if(o||!n)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 mb-4",children:o||"Failed to load student details"}),e.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Back to Dashboard"})]})});const{account:v,student:w,transactions:_,loans:R,landParcels:S,mathGameSessions:I,pizzaContributions:M,shopPurchases:A,jobApplications:P,suggestions:C,bugReports:k,stats:E}=n,W=w||(v?{account_number:v.account_number,balance:v.balance,username:v.account_number,first_name:void 0,last_name:void 0}:null);return W?e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(zo,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to Dashboard"})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-4 rounded-full",children:e.jsx(Ks,{className:"h-12 w-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",children:m(W)}),e.jsxs("p",{className:"text-primary-100 mb-2",children:["@",W.username||W.account_number]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[W.class&&e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:["Class ",W.class]}),W.email&&e.jsx("span",{className:"text-sm text-primary-100",children:W.email}),(v==null?void 0:v.orphaned)&&e.jsx("span",{className:"bg-yellow-500/20 px-3 py-1 rounded-full text-sm text-yellow-200",children:"Orphaned Account"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-primary-100 text-sm mb-1",children:"Current Balance"}),e.jsx("p",{className:`text-4xl font-bold ${Number(W.balance)<0?"text-red-300":"text-white"}`,children:h(W.balance)}),e.jsxs("p",{className:"text-xs text-primary-200 mt-1",children:["Account: ",W.account_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Earned"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h(E.total_deposits+E.total_math_earnings)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(Dr,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Spent"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h(E.total_withdrawals+E.shop_purchases_total+E.pizza_contributions_total)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(Hr,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Property Value"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h(E.land_value_total)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[E.land_parcels_owned," parcels"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Loan Debt"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h(E.total_loan_debt)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[E.active_loans," active"]})]})]}),W.job_name&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Qe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Current Job"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Employment Details"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Position"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.job_name})]}),w.job_company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.job_company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Salary"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:h(W.job_salary||0)})]}),W.job_description&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:W.job_description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:xn},{id:"transactions",label:"Transactions",icon:we},{id:"loans",label:"Loans",icon:us},{id:"property",label:"Property",icon:Hr},{id:"activities",label:"Activities",icon:Yn}].map(({id:N,label:H,icon:T})=>e.jsxs("button",{onClick:()=>y(N),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===N?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:H})]},N))})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("span",{className:"font-semibold text-gray-900",children:E.total_transactions})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Chores Games Played"}),e.jsx("span",{className:"font-semibold text-gray-900",children:E.math_games_played})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Chores Game Earnings"}),e.jsx("span",{className:"font-semibold text-green-600",children:h(E.total_math_earnings)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pizza Contributions"}),e.jsx("span",{className:"font-semibold text-orange-600",children:h(E.pizza_contributions_total)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Shop Purchases"}),e.jsx("span",{className:"font-semibold text-blue-600",children:h(E.shop_purchases_total)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Sent to Students"})]}),e.jsx("span",{className:"font-semibold text-green-600",children:h(E.total_transfers_sent)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Received from Students"})]}),e.jsx("span",{className:"font-semibold text-blue-600",children:h(E.total_transfers_received)})]}),e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Net Transfer"}),e.jsx("span",{className:`font-bold ${E.total_transfers_received-E.total_transfers_sent>=0?"text-green-600":"text-red-600"}`,children:h(E.total_transfers_received-E.total_transfers_sent)})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:_.slice(0,5).map(N=>{const H=N.from_username===(W.username||W.account_number);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${H?"bg-red-100":"bg-green-100"}`,children:H?e.jsx(Dr,{className:"h-4 w-4 text-red-600"}):e.jsx(Ke,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(N,W.username||W.account_number||"")}),e.jsx("p",{className:"text-xs text-gray-500",children:N.description||N.transaction_type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${H?"text-red-600":"text-green-600"}`,children:[H?"-":"+",h(N.amount)]}),e.jsx("p",{className:"text-xs text-gray-500",children:j(N.created_at)})]})]},N.id)})})]})]}),p==="transactions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["All Transactions (",_.length,")"]})}),_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(we,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]}):e.jsx("div",{className:"space-y-2",children:_.map(N=>{const H=N.from_username===(W.username||W.account_number);return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full mt-1 ${H?"bg-red-100":"bg-green-100"}`,children:H?e.jsx(Dr,{className:"h-4 w-4 text-red-600"}):e.jsx(Ke,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(N,W.username||W.account_number||"")}),e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:N.transaction_type})]}),N.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:N.description}),e.jsx("p",{className:"text-xs text-gray-500",children:g(N.created_at)})]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("p",{className:`text-lg font-bold ${H?"text-red-600":"text-green-600"}`,children:[H?"-":"+",h(N.amount)]})})]})},N.id)})})]}),p==="loans"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Loans (",R.length,")"]})}),R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(us,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No loans"})]}):e.jsx("div",{className:"grid gap-4",children:R.map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-purple-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:h(N.amount)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.status==="active"?"bg-green-100 text-green-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":N.status==="paid_off"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:N.status})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[N.term_months," months  ",N.interest_rate,"% interest"]})]}),N.status==="active"&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:h(N.outstanding_balance)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold text-gray-900",children:h(N.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Paid"}),e.jsx("p",{className:"font-semibold text-green-600",children:h(N.total_paid)})]}),N.status==="active"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Payments Left"}),e.jsx("p",{className:"font-semibold text-gray-900",children:N.payments_remaining})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Created: ",j(N.created_at),N.approved_at&&`  Approved: ${j(N.approved_at)}`]})]},N.id))})]}),p==="property"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Land Parcels (",S.length,")"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:h(E.land_value_total)})]})]}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hr,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No land parcels owned"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:S.map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N.grid_code}),e.jsx("p",{className:"text-sm text-gray-600",children:N.biome_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:h(N.value)}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${N.risk_level==="low"?"bg-green-100 text-green-700":N.risk_level==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[N.risk_level," risk"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Purchased: ",j(N.purchased_at)]})]},N.id))})]}),p==="activities"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Chores Game Sessions (",I.length,")"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Earnings"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:h(E.total_math_earnings)})]})]}),I.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(Yn,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No chores games played yet"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:I.slice(0,10).map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yn,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${N.difficulty==="easy"?"bg-green-100 text-green-700":N.difficulty==="medium"?"bg-yellow-100 text-yellow-700":N.difficulty==="hard"?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:N.difficulty})]}),e.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+",h(N.earnings)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Score: ",N.score]}),e.jsxs("span",{className:"text-gray-600",children:[N.correct_answers,"/",N.total_problems," correct"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g(N.played_at)})]},N.id))})]}),M.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pizza Contributions"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:h(E.pizza_contributions_total)})]}),e.jsx("div",{className:"space-y-2",children:M.map((N,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(La,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:h(N.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:j(N.created_at)})]})]},H))})]}),A.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Shop Purchases"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:h(E.shop_purchases_total)})]}),e.jsx("div",{className:"space-y-2",children:A.map((N,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:h(N.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:j(N.created_at)})]})]},H))})]}),P.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Job Applications"}),e.jsx("div",{className:"space-y-2",children:P.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ot,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.job_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Salary: ",h(N.job_salary)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.status==="approved"?"bg-green-100 text-green-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:N.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j(N.created_at)})]})]},N.id))})]}),(C.length>0||k.length>0)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suggestions & Bugs"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Suggestions"}),e.jsx("p",{className:"text-xs text-gray-500",children:C.length})]}),C.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions submitted."}):e.jsx("div",{className:"space-y-2",children:C.map(N=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[b(N.status,N.reward_paid),e.jsx("span",{className:"text-xs text-gray-500",children:j(N.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:N.content})]},N.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Bug Reports"}),e.jsx("p",{className:"text-xs text-gray-500",children:k.length})]}),k.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No bugs reported."}):e.jsx("div",{className:"space-y-2",children:k.map(N=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[b(N.status,N.reward_paid),e.jsx("span",{className:"text-xs text-gray-500",children:j(N.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:N.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:N.description})]},N.id))})]})]})]})]})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 mb-4",children:"No account or student data found"}),e.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Back to Dashboard"})]})})},aj=({onSuccess:t})=>{const[s,r]=d.useState({to_username:"",amount:"",description:""}),[a,n]=d.useState(!1),[l,i]=d.useState(""),[c,o]=d.useState(""),[u,p]=d.useState([]),[y,f]=d.useState(!0),[h,g]=d.useState(null),[j,b]=d.useState(!0),[m,x]=d.useState([]),v=d.useCallback(async()=>{try{const R=await z.get("/transactions/my-pending-transfers");x(R.data)}catch{x([])}},[]);d.useEffect(()=>{(async()=>{try{const[S,I]=await Promise.all([z.get("/students/transfer-recipients"),z.get("/transactions/can-transact")]);p(S.data),g(I.data),await v()}catch(S){console.error("Failed to load data:",S),i("Failed to load data. Please refresh the page.")}finally{f(!1),b(!1)}})()},[v]);const w=async R=>{var S,I;R.preventDefault(),i(""),o(""),n(!0);try{await z.post("/transactions/transfer",{to_username:s.to_username,amount:parseFloat(s.amount),description:s.description||void 0}),o("Transfer request submitted. Awaiting teacher approval."),r({to_username:"",amount:"",description:""}),v(),t()}catch(M){i(((I=(S=M.response)==null?void 0:S.data)==null?void 0:I.error)||"Transfer failed")}finally{n(!1)}},_=R=>{r({...s,[R.target.name]:R.target.value})};return j?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):h&&!h.canTransact?e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ct,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfers Blocked"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx(ke,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-800 font-medium mb-2",children:"You cannot make transfers at this time"}),e.jsx("p",{className:"text-red-700 text-sm",children:h.reason})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:" How to resolve:"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:" If you have a negative balance, deposit money to clear it"}),e.jsx("li",{children:" If you have an overdue loan payment, make a loan payment first"}),e.jsx("li",{children:" Contact your teacher if you need assistance"})]})]})]}):e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Mt,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfer Money"}),e.jsx("p",{className:"text-gray-600",children:"Request a transfer to another student. Your teacher must approve it."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),c&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:c}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"to_username",className:"label",children:[e.jsx(Ks,{className:"h-4 w-4 inline mr-1"}),"Send to (Student)"]}),y?e.jsx("div",{className:"input-field text-gray-500",children:"Loading students..."}):e.jsxs("select",{id:"to_username",name:"to_username",required:!0,className:"input-field",value:s.to_username,onChange:_,children:[e.jsx("option",{value:"",children:"Select a student"}),u.map(R=>e.jsx("option",{value:R.username,children:R.first_name&&R.last_name?`${R.first_name} ${R.last_name} (${R.class||"?"})  ${R.username}`:`${R.username} (${R.class||"?"})`},R.id))]}),!y&&u.length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No other students found."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"label",children:[e.jsx(we,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:s.amount,onChange:_})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"label",children:[e.jsx(Pb,{className:"h-4 w-4 inline mr-1"}),"Description"]}),e.jsx("input",{id:"description",name:"description",type:"text",required:!0,className:"input-field",placeholder:"What's this for? (e.g. lunch money, payment for services)",value:s.description,onChange:_})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Submitting...":"Request Transfer"})]}),m.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:" Your Pending Transfer Requests"}),e.jsx("ul",{className:"text-sm text-amber-800 space-y-2",children:m.filter(R=>R.status==="pending").map(R=>e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["R",Number(R.amount).toFixed(2)," to ",R.to_first_name&&R.to_last_name?`${R.to_first_name} ${R.to_last_name}`:R.to_username,"  ",R.description]}),e.jsx("span",{className:"text-amber-600 text-xs font-medium",children:"Awaiting approval"})]},R.id))})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Transfer Tips:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Make sure you have enough money in your account"}),e.jsx("li",{children:" Select a student from any class to send money to"}),e.jsx("li",{children:" Add a description (required) so both parties know what the transfer is for"}),e.jsx("li",{children:" Transfer requests require teacher approval before the money moves"}),e.jsx("li",{children:" Pay off any outstanding loans before making transfers"})]})]})]})},nj=({onSuccess:t})=>{const[s,r]=d.useState([]),[a,n]=d.useState(null),[l,i]=d.useState(!1),[c,o]=d.useState({amount:"",term_weeks:"4"}),[u,p]=d.useState(!0),[y,f]=d.useState(!1),[h,g]=d.useState(""),[j,b]=d.useState("");d.useEffect(()=>{m()},[]);const m=async()=>{try{const[P,C]=await Promise.all([z.get("/loans"),z.get("/loans/eligibility")]);r(P.data),n(C.data)}catch(P){console.error("Failed to fetch data:",P)}finally{p(!1)}},x=()=>{const P=parseFloat(c.amount)||0,C=parseInt(c.term_weeks)||4;let k;C<=4?k=.05:C<=8?k=.08:k=.1;const E=P*(1+k),W=E/C;return{interestRate:k,totalAmount:E,weeklyPayment:W,interestAmount:E-P}},v=async P=>{var C,k,E;P.preventDefault(),g(""),b(""),f(!0);try{const W=await z.post("/loans/apply",{amount:parseFloat(c.amount),term_weeks:parseInt(c.term_weeks)});b("Loan application submitted successfully! Weekly payment: R"+((C=W.data.weeklyPayment)==null?void 0:C.toFixed(2))),o({amount:"",term_weeks:"4"}),i(!1),m(),t()}catch(W){g(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Loan application failed")}finally{f(!1)}},w=async(P,C)=>{var k,E;try{await z.post("/loans/pay",{loan_id:P,amount:C}),b("Payment successful!"),m(),t()}catch(W){g(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Payment failed")}},_=P=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(P),R=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S=P=>{switch(P){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};s.some(P=>P.status==="pending");const I=s.some(P=>P.status==="approved");s.some(P=>P.status==="active");const M=s.find(P=>P.status==="active"),A=x();return u?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(we,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Center"}),e.jsx("p",{className:"text-gray-600",children:"Apply for loans and manage your payments"})]}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),h]}),j&&e.jsxs("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"}),j]}),e.jsx("div",{className:`rounded-xl p-4 ${a!=null&&a.hasJob?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:`h-6 w-6 ${a!=null&&a.hasJob?"text-green-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${a!=null&&a.hasJob?"text-green-900":"text-yellow-900"}`,children:a!=null&&a.hasJob?`Job: ${a.jobName}`:"No Job Assigned"}),a!=null&&a.hasJob?e.jsxs("p",{className:"text-sm text-green-700",children:["Weekly Salary: ",_(a.salary),"  Max Loan: ",_(a.maxLoanAmount)]}):e.jsx("p",{className:"text-sm text-yellow-700",children:"You need a job to apply for a loan. Apply for a job in the Jobs section."})]})]})}),(a==null?void 0:a.eligible)&&!l&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>i(!0),className:"btn-primary",children:"Apply for a Loan"})}),a&&!a.eligible&&a.reason&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Cannot Apply for Loan"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.reason})]})]})}),I&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900",children:"Loan Approved!"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved and the money is being processed. Payments will start next Monday."})]})]})}),M&&M.next_payment_date&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Next Payment Due"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[R(M.next_payment_date),"  ",_(M.weekly_payment||M.monthly_payment/4.33)]})]})]}),e.jsx("button",{onClick:()=>w(M.id,M.weekly_payment||M.monthly_payment/4.33),className:"btn-success text-sm",children:"Pay Now"})]})}),l&&(a==null?void 0:a.eligible)&&e.jsxs("div",{className:"card max-w-md mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Apply for a Loan"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"label",children:[e.jsx(we,{className:"h-4 w-4 inline mr-1"}),"Loan Amount (Max: ",_(a.maxLoanAmount),")"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"1",max:a.maxLoanAmount,required:!0,className:"input-field",placeholder:"0.00",value:c.amount,onChange:P=>o({...c,amount:P.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"term_weeks",className:"label",children:[e.jsx(V0,{className:"h-4 w-4 inline mr-1"}),"Repayment Term (Weeks)"]}),e.jsxs("select",{id:"term_weeks",name:"term_weeks",className:"input-field",value:c.term_weeks,onChange:P=>o({...c,term_weeks:P.target.value}),children:[e.jsx("option",{value:"2",children:"2 weeks (5% interest)"}),e.jsx("option",{value:"4",children:"4 weeks (5% interest)"}),e.jsx("option",{value:"6",children:"6 weeks (8% interest)"}),e.jsx("option",{value:"8",children:"8 weeks (8% interest)"}),e.jsx("option",{value:"10",children:"10 weeks (10% interest)"}),e.jsx("option",{value:"12",children:"12 weeks (10% interest)"})]})]}),parseFloat(c.amount)>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Loan Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Principal:"}),e.jsx("div",{className:"font-medium",children:_(parseFloat(c.amount))}),e.jsxs("div",{className:"text-gray-500",children:["Interest (",(A.interestRate*100).toFixed(0),"%):"]}),e.jsx("div",{className:"font-medium",children:_(A.interestAmount)}),e.jsx("div",{className:"text-gray-500",children:"Total Repayment:"}),e.jsx("div",{className:"font-medium text-primary-600",children:_(A.totalAmount)}),e.jsx("div",{className:"text-gray-500",children:"Weekly Payment:"}),e.jsx("div",{className:"font-medium text-primary-600",children:_(A.weeklyPayment)})]}),a.maxWeeklyPayment&&A.weeklyPayment>a.maxWeeklyPayment&&e.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded text-red-700 text-sm",children:" Weekly payment exceeds 50% of your salary. Please reduce the amount or extend the term."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:y||a.maxWeeklyPayment&&A.weeklyPayment>a.maxWeeklyPayment,className:"flex-1 btn-primary disabled:opacity-50",children:y?"Applying...":"Apply"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Loans"}),s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(we,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No loans yet. Apply for your first loan to get started!"})]}):e.jsx("div",{className:"space-y-4",children:s.map(P=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",P.id]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",R(P.created_at)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(P.status)}`,children:P.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold text-gray-900",children:_(P.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Weekly Payment"}),e.jsx("p",{className:"font-semibold text-gray-900",children:_(P.weekly_payment||P.monthly_payment/4.33)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding Balance"}),e.jsx("p",{className:"font-semibold text-gray-900",children:_(P.outstanding_balance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsx("p",{className:"font-semibold text-gray-900",children:P.term_weeks?`${P.term_weeks} weeks`:`${P.term_months} months`})]})]}),P.status==="active"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Payments Remaining"}),e.jsx("p",{className:"font-semibold text-gray-900",children:P.payments_remaining||0}),P.next_payment_date&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Next payment: ",R(P.next_payment_date)]})]}),e.jsx("button",{onClick:()=>w(P.id,P.weekly_payment||P.monthly_payment/4.33),className:"btn-success",children:"Make Payment"})]})}),P.status==="pending"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 text-yellow-600 mr-2"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Your loan application is pending teacher approval."})]})}),P.status==="approved"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved! The money will be disbursed to your account shortly."})]})})]},P.id))})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Loan Information:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Job Required:"})," You must have a job to apply for a loan"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Loan Amount:"})," Based on your salary (max loan = up to 6x weekly salary)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Interest rates:"})," 5% (1-4 weeks), 8% (5-8 weeks), 10% (9-12 weeks)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Payments:"})," Automatic weekly payments every Monday"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Payment Limit:"})," Weekly payment cannot exceed 50% of your salary"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Important:"})," If you don't have enough funds, payment still goes through (negative balance)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Restrictions:"})," Clear any negative balance before new loans or transfers"]})]})]})]})},lj=({bankPlugin:t})=>{var Et;const[s,r]=d.useState("payments"),[a,n]=d.useState([]),[l,i]=d.useState([]),[c,o]=d.useState([]),[u,p]=d.useState([]),[y,f]=d.useState(!0),[h,g]=d.useState("all"),[j,b]=d.useState(null),[m,x]=d.useState(""),[v,w]=d.useState(!1),[_,R]=d.useState(!1),[S,I]=d.useState("deposit"),[M,A]=d.useState({amount:"",description:""}),[P,C]=d.useState({amount:"",description:""}),[k,E]=d.useState(null),[W,N]=d.useState(!1),[H,T]=d.useState(""),[F,G]=d.useState(""),[U,ee]=d.useState(!1),[te,de]=d.useState({}),[K,se]=d.useState(0),[ie,O]=d.useState(!1);d.useEffect(()=>{Q(),B()},[]);const Q=async()=>{try{const[L,me,xe,ye]=await Promise.all([z.get("/students"),z.get("/loans"),z.get("/transactions/history"),z.get("/transactions/pending-transfers")]);n(L.data),i(me.data),o(xe.data),p(ye.data)}catch(L){console.error("Failed to fetch data:",L)}finally{f(!1)}},B=async()=>{try{const[L,me]=await Promise.all([z.get("/transactions/bank-settings"),z.get("/transactions/unemployed-students")]);de(L.data),se(me.data.count)}catch(L){console.error("Failed to fetch bank settings:",L)}},V=async()=>{var L,me;O(!0),T(""),G("");try{const xe=te.basic_salary_enabled==="true"?"false":"true";await z.put("/transactions/bank-settings/basic_salary_enabled",{value:xe}),de({...te,basic_salary_enabled:xe}),G(`Auto basic salary ${xe==="true"?"enabled":"disabled"}`)}catch(xe){T(((me=(L=xe.response)==null?void 0:L.data)==null?void 0:me.error)||"Failed to update setting")}finally{O(!1)}},ue=async()=>{var L,me;ee(!0),T(""),G("");try{const xe=await z.post("/transactions/pay-basic-salary",{});G(`Paid basic salary to ${xe.data.updated_count} unemployed students (R${xe.data.amount} each)`),Q(),B()}catch(xe){T(((me=(L=xe.response)==null?void 0:L.data)==null?void 0:me.error)||"Failed to pay basic salary")}finally{ee(!1)}},$=d.useMemo(()=>{const L=a.reduce((xe,ye)=>{const wt=ye.class||"Unassigned";return xe[wt]||(xe[wt]=[]),xe[wt].push(ye),xe},{}),me=Object.keys(L).sort((xe,ye)=>xe==="Unassigned"?1:ye==="Unassigned"?-1:xe.localeCompare(ye));return{grouped:L,sortedClasses:me}},[a]),q=d.useMemo(()=>{let L=h==="all"?a:$.grouped[h]||[];return m&&(L=L.filter(me=>{var xe,ye;return me.username.toLowerCase().includes(m.toLowerCase())||((xe=me.first_name)==null?void 0:xe.toLowerCase().includes(m.toLowerCase()))||((ye=me.last_name)==null?void 0:ye.toLowerCase().includes(m.toLowerCase()))})),L},[a,h,m,$]),Z=d.useMemo(()=>{let L=l;if(h!=="all"){const me=($.grouped[h]||[]).map(xe=>xe.id);L=L.filter(xe=>{const ye=a.find(wt=>wt.username===xe.borrower_username);return ye&&me.includes(ye.id)})}return j&&(L=L.filter(me=>me.borrower_username===j.username)),L},[l,h,j,$,a]),ne=d.useMemo(()=>{let L=c;if(h!=="all"){const me=($.grouped[h]||[]).map(xe=>xe.username);L=L.filter(xe=>me.includes(xe.from_username||"")||me.includes(xe.to_username||""))}return j&&(L=L.filter(me=>me.from_username===j.username||me.to_username===j.username)),L},[c,h,j,$]),le=d.useMemo(()=>{const L=h==="all"?a:$.grouped[h]||[],me=L.reduce((is,Xl)=>is+(Number(Xl.balance)||0),0),xe=Z.filter(is=>is.status==="pending").length,ye=Z.filter(is=>is.status==="active").length,wt=u.filter(is=>is.status==="pending").length,nh=ne.filter(is=>{const Xl=new Date(is.created_at);return new Date().getTime()-Xl.getTime()<7*24*60*60*1e3}).length;return{totalBalance:me,pendingLoans:xe,activeLoans:ye,pendingTransfersCount:wt,recentTransactions:nh,studentCount:L.length}},[a,Z,ne,h,$,u]),D=L=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(L),ge=L=>new Date(L).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),X=async L=>{var me,xe;if(L.preventDefault(),!!j){T(""),G(""),ee(!0);try{const ye=S==="deposit"?"/transactions/deposit":"/transactions/withdraw";await z.post(ye,{username:j.username,amount:parseFloat(M.amount),description:M.description||`${S==="deposit"?"Payment":"Withdrawal"} by teacher`}),G(`${S==="deposit"?"Payment":"Withdrawal"} successful!`),A({amount:"",description:""}),w(!1),Q()}catch(ye){T(((xe=(me=ye.response)==null?void 0:me.data)==null?void 0:xe.error)||"Operation failed")}finally{ee(!1)}}},oe=async(L,me)=>{var xe,ye;if(L.preventDefault(),h==="all"){T("Please select a specific class for bulk payments");return}T(""),G(""),ee(!0);try{const wt=me==="deposit"?"/transactions/bulk-payment":"/transactions/bulk-removal";await z.post(wt,{class_name:h,amount:parseFloat(P.amount),description:P.description||`Bulk ${me==="deposit"?"payment":"withdrawal"} by teacher`}),G(`Bulk ${me==="deposit"?"payment":"withdrawal"} successful!`),C({amount:"",description:""}),R(!1),Q()}catch(wt){T(((ye=(xe=wt.response)==null?void 0:xe.data)==null?void 0:ye.error)||"Bulk operation failed")}finally{ee(!1)}},Y=async(L,me)=>{var xe,ye;T(""),G(""),ee(!0);try{await z.post("/loans/approve",{loan_id:L,approved:me}),G(`Loan ${me?"approved":"denied"} successfully!`),N(!1),E(null),Q()}catch(wt){T(((ye=(xe=wt.response)==null?void 0:xe.data)==null?void 0:ye.error)||"Failed to update loan status")}finally{ee(!1)}},he=async L=>{var me,xe;T(""),G(""),ee(!0);try{await z.post(`/loans/activate/${L}`),G("Loan activated successfully!"),Q()}catch(ye){T(((xe=(me=ye.response)==null?void 0:me.data)==null?void 0:xe.error)||"Failed to activate loan")}finally{ee(!1)}},fe=(L,me,xe)=>{switch(L){case"deposit":case"salary":return e.jsx(yb,{className:"h-4 w-4 text-green-600"});case"withdrawal":case"fine":return e.jsx(bb,{className:"h-4 w-4 text-red-600"});case"transfer":return e.jsx(Mt,{className:"h-4 w-4 text-blue-600"});case"loan_disbursement":return e.jsx(Aa,{className:"h-4 w-4 text-amber-600"});case"loan_repayment":return e.jsx(us,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(we,{className:"h-4 w-4 text-gray-600"})}},At=L=>{switch(L){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Bank Management"}),e.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.studentCount})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:D(le.totalBalance)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:le.pendingLoans})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Active Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:le.activeLoans})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm cursor-pointer hover:border-emerald-300 transition-colors",onClick:()=>r("transfers"),children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Transfers"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:le.pendingTransfersCount})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"This Week"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:le.recentTransactions})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Kl,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Filters"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("button",{onClick:()=>{g("all"),b(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${h==="all"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),$.sortedClasses.map(L=>e.jsxs("button",{onClick:()=>{g(L),b(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${h===L?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[L," (",$.grouped[L].length,")"]},L))]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:m,onChange:L=>x(L.target.value)})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:(j==null?void 0:j.id)||"",onChange:L=>{const me=q.find(xe=>xe.id===parseInt(L.target.value));b(me||null)},children:[e.jsx("option",{value:"",children:"All Students"}),q.map(L=>e.jsx("option",{value:L.id,children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username},L.id))]})}),j&&e.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 underline",children:"Clear Student Filter"})]})]}),le.pendingTransfersCount>0&&s!=="transfers"&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Mt,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[le.pendingTransfersCount," student transfer",le.pendingTransfersCount!==1?"s":""," waiting for approval"]}),e.jsx("p",{className:"text-xs text-amber-600",children:"Students have requested transfers to classmates. Review and approve or deny each request."})]})]}),e.jsx("button",{onClick:()=>r("transfers"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium",children:"Review Now"})]})}),H&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(ct,{className:"h-5 w-5"}),e.jsx("span",{children:H})]}),F&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:F})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"payments",label:"Payments",icon:Aa},{id:"loans",label:"Loans",icon:us},{id:"transfers",label:"Pending Transfers",icon:Mt,badge:le.pendingTransfersCount},{id:"activity",label:"Activity",icon:zs}].map(({id:L,label:me,icon:xe,badge:ye})=>e.jsxs("button",{onClick:()=>r(L),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 relative ${s===L?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:me}),ye!==void 0&&ye>0&&e.jsx("span",{className:"ml-1 bg-amber-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center",children:ye})]},L))})}),e.jsxs("div",{className:"p-6",children:[s==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vc,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Basic Salary Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Unemployed students receive R1,500/week on Mondays at 07:00"})]})]}),e.jsxs("button",{onClick:V,disabled:ie,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${te.basic_salary_enabled==="true"?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:[te.basic_salary_enabled==="true"?e.jsx(sn,{className:"h-5 w-5"}):e.jsx(tn,{className:"h-5 w-5"}),e.jsx("span",{children:te.basic_salary_enabled==="true"?"Auto Pay ON":"Auto Pay OFF"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[K," Unemployed Students"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Will receive basic salary when paid"})]})]}),e.jsxs("button",{onClick:ue,disabled:U||K===0,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{children:U?"Paying...":"Pay Basic Salary Now"})]})]}),te.last_basic_salary_run&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Last auto-payment: ",new Date(te.last_basic_salary_run).toLocaleString()]})]}),h!=="all"&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Bulk Actions for ",h]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Pay All Students"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(L=>{const me=Number(L.balance)<0;return e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition-all ${me?"border-red-400 bg-red-50":(j==null?void 0:j.id)===L.id?"border-emerald-500 shadow-lg":"border-gray-200 hover:border-emerald-300 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${me?"bg-red-100":"bg-emerald-100"}`,children:e.jsx(Ks,{className:`h-5 w-5 ${me?"text-red-600":"text-emerald-600"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",L.username]})]})]}),e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:L.class||"N/A"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:`text-2xl font-bold ${me?"text-red-600":"text-emerald-600"}`,children:D(L.balance)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",L.account_number]}),me&&e.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:" Negative balance"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{b(L),I("deposit"),w(!0)},className:"flex-1 px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Add"})]}),e.jsxs("button",{onClick:()=>{b(L),I("withdraw"),w(!0)},className:"flex-1 px-3 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[e.jsx(Z0,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]})]},L.id)})}),q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No students found"})]})]}),s==="transfers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Student Transfer Requests"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Students request transfers to classmates. Approve or deny each request."}),u.filter(L=>L.status==="pending").length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsx(Mt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No pending transfer requests"})]}):e.jsx("div",{className:"space-y-4",children:u.filter(L=>L.status==="pending").map(L=>e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[L.from_first_name&&L.from_last_name?`${L.from_first_name} ${L.from_last_name}`:L.from_username,"  ",L.to_first_name&&L.to_last_name?`${L.to_first_name} ${L.to_last_name}`:L.to_username]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[D(L.amount),"  ",L.description,"  ",ge(L.created_at)]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-amber-200 text-amber-800",children:"PENDING"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{var me,xe;T(""),G(""),ee(!0);try{await z.post(`/transactions/pending-transfers/${L.id}/approve`),G("Transfer approved"),Q()}catch(ye){T(((xe=(me=ye.response)==null?void 0:me.data)==null?void 0:xe.error)||"Failed to approve")}finally{ee(!1)}},disabled:U,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:async()=>{var me,xe;T(""),G(""),ee(!0);try{await z.post(`/transactions/pending-transfers/${L.id}/deny`),G("Transfer denied"),Q()}catch(ye){T(((xe=(me=ye.response)==null?void 0:me.data)==null?void 0:xe.error)||"Failed to deny")}finally{ee(!1)}},disabled:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"Deny"})]})]})]},L.id))})]}),s==="loans"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2 text-blue-600"}),"Weekly Payment Processing"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Process automatic loan payments for all students with active loans. Payments are normally processed every Monday."}),e.jsx("button",{onClick:async()=>{var L,me,xe;T(""),G(""),ee(!0);try{const ye=await z.post("/loans/process-weekly-payments",{force:!0});G(`Processed ${((L=ye.data.results)==null?void 0:L.length)||0} loan payments`),Q()}catch(ye){T(((xe=(me=ye.response)==null?void 0:me.data)==null?void 0:xe.error)||"Failed to process payments")}finally{ee(!1)}},disabled:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:U?"Processing...":"Process Weekly Payments Now"})]}),Z.filter(L=>L.status==="pending").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 text-amber-600 mr-2"}),"Pending Approval (",Z.filter(L=>L.status==="pending").length,")"]}),e.jsx("div",{className:"space-y-4",children:Z.filter(L=>L.status==="pending").map(L=>e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",L.id," - ",L.borrower_username]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",ge(L.created_at)]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${At(L.status)}`,children:L.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold",children:D(L.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold",children:D(L.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsxs("p",{className:"font-semibold",children:[L.term_months," months"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Interest Rate"}),e.jsxs("p",{className:"font-semibold",children:[(L.interest_rate*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>Y(L.id,!0),disabled:U,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:"Approve"}),e.jsx("button",{onClick:()=>Y(L.id,!1),disabled:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:"Deny"})]})]},L.id))})]}),Z.filter(L=>["active","approved"].includes(L.status)).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(us,{className:"h-5 w-5 text-blue-600 mr-2"}),"Active Loans (",Z.filter(L=>["active","approved"].includes(L.status)).length,")"]}),e.jsx("div",{className:"space-y-4",children:Z.filter(L=>["active","approved"].includes(L.status)).map(L=>e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",L.id," - ",L.borrower_username]}),e.jsx("p",{className:"text-sm text-gray-500",children:L.approved_at?`Approved on ${ge(L.approved_at)}`:"Awaiting activation"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${At(L.status)}`,children:L.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"font-semibold",children:D(L.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),e.jsx("p",{className:"font-semibold",children:D(L.outstanding_balance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold",children:D(L.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Remaining"}),e.jsxs("p",{className:"font-semibold",children:[L.payments_remaining||0," payments"]})]})]}),L.total_paid&&Number(L.total_paid)>0&&e.jsx("div",{className:"mt-4 bg-white rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Paid"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:D(L.total_paid)})]})}),L.status==="approved"&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>he(L.id),disabled:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Activate Loan"})})]},L.id))})]}),Z.filter(L=>["paid_off","denied"].includes(L.status)).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 text-gray-600 mr-2"}),"Completed/Denied (",Z.filter(L=>["paid_off","denied"].includes(L.status)).length,")"]}),e.jsx("div",{className:"space-y-4",children:Z.filter(L=>["paid_off","denied"].includes(L.status)).map(L=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",L.id," - ",L.borrower_username]}),e.jsx("p",{className:"text-sm text-gray-500",children:ge(L.created_at)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${At(L.status)}`,children:L.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold",children:D(L.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsxs("p",{className:"font-semibold",children:[L.term_months," months"]})]}),L.total_paid&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Paid"}),e.jsx("p",{className:"font-semibold",children:D(L.total_paid)})]})]})]},L.id))})]}),Z.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(us,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No loan applications found"})]})]}),s==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[ne.length," transactions"]})]}),ne.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):e.jsx("div",{className:"space-y-2",children:ne.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-full shadow-sm",children:fe(L.transaction_type,L.from_username,L.to_username)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:L.description||L.transaction_type.replace(/_/g," ")}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("span",{children:ge(L.created_at)}),L.from_username&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:["From: ",L.from_username]}),L.to_username&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["To: ",L.to_username]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${["deposit","salary","loan_disbursement"].includes(L.transaction_type)?"text-emerald-600":["withdrawal","fine","loan_repayment"].includes(L.transaction_type)?"text-red-600":"text-blue-600"}`,children:[["withdrawal","fine","loan_repayment"].includes(L.transaction_type)?"-":"+",D(L.amount)]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:L.transaction_type.replace(/_/g," ")})]})]},L.id))})]})]})]}),v&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[S==="deposit"?"Add Money to":"Remove Money from"," ",j.first_name||j.username]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:S==="withdraw"?j.balance:void 0,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:M.amount,onChange:L=>A({...M,amount:L.target.value})})]}),S==="withdraw"&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",D(j.balance)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:S==="deposit"?"e.g., Salary, Bonus, Reward":"e.g., Fine, Expense",value:M.description,onChange:L=>A({...M,description:L.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:U,className:`flex-1 py-2 text-white rounded-lg transition-colors disabled:opacity-50 ${S==="deposit"?"bg-emerald-600 hover:bg-emerald-700":"bg-amber-600 hover:bg-amber-700"}`,children:U?"Processing...":S==="deposit"?"Add Money":"Remove Money"}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),_&&h!=="all"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Bulk Payment to ",h]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["This will add money to all ",((Et=$.grouped[h])==null?void 0:Et.length)||0," students in ",h]}),e.jsxs("form",{onSubmit:L=>oe(L,"deposit"),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount per student"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:P.amount,onChange:L=>C({...P,amount:L.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Weekly allowance, Class bonus",value:P.description,onChange:L=>C({...P,description:L.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:U,className:"flex-1 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:U?"Processing...":"Pay All Students"}),e.jsx("button",{type:"button",onClick:()=>R(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})})]})},ij=({bankPlugin:t})=>{const{user:s,account:r}=Le(),[a,n]=d.useState([]),[l,i]=d.useState([]),[c,o]=d.useState(!0),[u,p]=d.useState("overview");d.useEffect(()=>{y()},[]);const y=async()=>{try{const[b,m]=await Promise.all([z.get("/transactions/history"),z.get("/loans")]);n(b.data),i(m.data)}catch(b){console.error("Failed to fetch data:",b)}finally{o(!1)}},f=b=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(b),h=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),g=b=>{switch(b){case"deposit":case"salary":return e.jsx(Ke,{className:"h-4 w-4 text-success-600"});case"withdrawal":case"fine":return e.jsx(ke,{className:"h-4 w-4 text-red-600"});case"transfer":return e.jsx(Mt,{className:"h-4 w-4 text-primary-600"});case"loan_disbursement":return e.jsx(we,{className:"h-4 w-4 text-warning-600"});case"loan_repayment":return e.jsx(Jt,{className:"h-4 w-4 text-blue-600"});default:return e.jsx(we,{className:"h-4 w-4 text-gray-600"})}},j=b=>b.transaction_type==="transfer"?b.from_username===(s==null?void 0:s.username)?`Sent to ${b.to_username}`:`Received from ${b.from_username}`:b.description||b.transaction_type;return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Bank"}),e.jsx("p",{className:"text-primary-100",children:"Financial Services System"})]})]})}),e.jsx("div",{className:`card ${((r==null?void 0:r.balance)||0)<0?"border-2 border-red-500 bg-red-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Account Balance"}),e.jsx("p",{className:`text-3xl font-bold ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`,children:f((r==null?void 0:r.balance)||0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Account: ",r==null?void 0:r.account_number]}),((r==null?void 0:r.balance)||0)<0&&e.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Negative balance! Pay off your debt to make transactions."]})})]}),e.jsx("div",{className:`p-4 rounded-full ${((r==null?void 0:r.balance)||0)<0?"bg-red-100":"bg-primary-100"}`,children:e.jsx(Jt,{className:`h-8 w-8 ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:Jt},{id:"transfer",label:"Transfer Money",icon:Mt},{id:"loans",label:"Loans",icon:we},{id:"history",label:"History",icon:zs}].map(({id:b,label:m,icon:x})=>e.jsxs("button",{onClick:()=>p(b),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${u===b?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:m})]},b))})}),e.jsxs("div",{className:"p-6",children:[u==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-success-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 text-success-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-success-800",children:"Total Deposits"})]}),e.jsx("p",{className:"text-2xl font-bold text-success-600 mt-1",children:f(a.filter(b=>["deposit","salary"].includes(b.transaction_type)).reduce((b,m)=>b+m.amount,0))})]}),e.jsxs("div",{className:"bg-warning-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-warning-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-warning-800",children:"Active Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-warning-600 mt-1",children:l.filter(b=>b.status==="active").length})]}),e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mt,{className:"h-5 w-5 text-primary-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-primary-800",children:"Transfers Made"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:a.filter(b=>b.transaction_type==="transfer"&&b.from_username===(s==null?void 0:s.username)).length})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(b.transaction_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:j(b)}),e.jsx("p",{className:"text-sm text-gray-500",children:h(b.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${b.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[b.from_username===(s==null?void 0:s.username)?"-":"+",f(b.amount)]})})]},b.id))})]})]}),u==="transfer"&&e.jsx(aj,{onSuccess:y}),u==="loans"&&e.jsx(nj,{onSuccess:y}),u==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(zs,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Your transaction history will appear here"})]}):e.jsx("div",{className:"space-y-2",children:a.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(b.transaction_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:j(b)}),e.jsx("p",{className:"text-sm text-gray-500",children:h(b.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${b.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[b.from_username===(s==null?void 0:s.username)?"-":"+",f(b.amount)]})})]},b.id))})]})]})]})]})},oj=()=>{const{user:t}=Le(),{plugins:s,loading:r}=rt(),a=s.find(n=>n.route_path==="/bank");return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(t==null?void 0:t.role)==="teacher"?e.jsx(lj,{bankPlugin:a}):e.jsx(ij,{bankPlugin:a})},cj=({parcel:t,position:s,containerRef:r})=>{const a=Qt[t.biome_type],n=Cl[t.risk_level],l=js[t.biome_type],i=Number(t.value),c=t.purchased_at?rh(t.purchased_at):0,o=t.owner_id&&t.purchased_at?Uo(i,t.purchased_at):i,u=o-i,p=t.owner_first_name&&t.owner_last_name?`${t.owner_first_name} ${t.owner_last_name}`:t.owner_username||"Unknown",y=320,f=400,h=10;let g=s.x+15,j=s.y+15;if(r.current){const b=r.current.getBoundingClientRect();g+y>b.right-h&&(g=s.x-y-15),j+f>b.bottom-h&&(j=s.y-f-15),g=Math.max(b.left+h,g),j=Math.max(b.top+h,j)}return e.jsxs("div",{className:"fixed z-50 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",style:{left:`${g}px`,top:`${j}px`,width:`${y}px`,maxHeight:`${f}px`},children:[e.jsx("div",{className:"p-4 text-white",style:{backgroundColor:a.color},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:l}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:t.grid_code}),e.jsx("p",{className:"text-sm opacity-90",children:t.biome_type})]})]}),e.jsxs("div",{className:"text-right",children:[t.owner_id&&u>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold",children:Ue(o)}),e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx(Ke,{className:"h-3 w-3 text-green-300"}),e.jsxs("span",{className:"text-xs text-green-300",children:["+",Ue(u)]})]})]}):e.jsx("p",{className:"text-xl font-bold",children:Ue(i)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.owner_id?"bg-red-500/30":"bg-green-500/30"}`,children:t.owner_id?"Owned":"Available"})]})]})}),e.jsxs("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jr,{className:`h-4 w-4 ${n.text}`}),e.jsx("span",{className:"text-sm text-gray-600",children:"Risk Level:"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${n.bg} ${n.text} font-medium capitalize`,children:t.risk_level})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsxs("span",{children:["Grid Position: Row ",t.row_index+1,", Col ",t.col_index+1]})]}),t.owner_id&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ks,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Owner:"}),e.jsx("span",{className:"font-medium",children:p})]}),t.purchased_at&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Purchased:"}),e.jsx("span",{children:new Date(t.purchased_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ke,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-gray-600",children:"Ownership:"}),e.jsxs("span",{children:[c," ",c===1?"week":"weeks"," (2% weekly interest)"]})]}),u>0&&e.jsxs("div",{className:"bg-green-50 rounded p-2 mt-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Original Value:"}),e.jsx("span",{children:Ue(i)})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-700",children:[e.jsx("span",{children:"Current Value:"}),e.jsx("span",{children:Ue(o)})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(Db,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Advantages"})]}),e.jsx("ul",{className:"space-y-1",children:(t.pros||a.pros).map((b,m)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-1",children:"+"}),b]},m))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(Mb,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Disadvantages"})]}),e.jsx("ul",{className:"space-y-1",children:(t.cons||a.cons).map((b,m)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-1",children:"-"}),b]},m))})]})]}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:t.owner_id?`This plot is already owned by ${p}`:"Click to purchase this plot"})})]})},dj=({parcel:t,onClose:s,onSuccess:r})=>{const{account:a}=Le(),[n,l]=d.useState(!1),[i,c]=d.useState(""),[o,u]=d.useState(!1),p=Qt[t.biome_type],y=js[t.biome_type],f=Cl[t.risk_level],h=Number(a==null?void 0:a.balance)||0,g=Number(t.value)||0,j=h>=g,b=async()=>{var m,x;if(j){l(!0),c("");try{await Wt.submitPurchaseRequest(t.id,g),u(!0),setTimeout(()=>{r(),s()},2e3)}catch(v){c(((x=(m=v.response)==null?void 0:m.data)==null?void 0:x.error)||"Failed to submit purchase request")}finally{l(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"p-6 text-white relative",style:{backgroundColor:p.color},children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-5xl",children:y}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.grid_code}),e.jsx("p",{className:"text-white/80",children:t.biome_type})]})]})]}),e.jsx("div",{className:"p-6 space-y-6",children:o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request Submitted!"}),e.jsx("p",{className:"text-gray-600",children:"Your purchase request has been submitted for teacher approval. You'll be notified once it's reviewed."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Plot Price"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ue(g)})]}),e.jsxs("div",{className:`rounded-xl p-4 ${j?"bg-green-50":"bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Your Balance"})]}),e.jsx("p",{className:`text-2xl font-bold ${j?"text-green-600":"text-red-600"}`,children:Ue(h)})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsxs("span",{children:["Row ",t.row_index+1,", Col ",t.col_index+1]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jr,{className:`h-4 w-4 ${f.text}`}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full ${f.bg} ${f.text} font-medium capitalize`,children:[t.risk_level," risk"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-green-800 mb-2",children:"Advantages"}),e.jsx("ul",{className:"space-y-1",children:p.pros.slice(0,2).map((m,x)=>e.jsxs("li",{className:"text-green-700 text-xs",children:["+ ",m]},x))})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-red-800 mb-2",children:"Disadvantages"}),e.jsx("ul",{className:"space-y-1",children:p.cons.slice(0,2).map((m,x)=>e.jsxs("li",{className:"text-red-700 text-xs",children:["- ",m]},x))})]})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[e.jsx(ke,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:i})]}),!j&&e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 bg-amber-50 p-3 rounded-lg",children:[e.jsx(ke,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm",children:["You need ",Ue(g-h)," more to purchase this plot."]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 text-sm text-blue-700",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Plot purchases require teacher approval. The purchase amount will be deducted from your balance once approved."]})})]})}),!o&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex space-x-3",children:[e.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:b,disabled:!j||n,className:`flex-1 px-4 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 transition-colors ${j?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(pn,{className:"h-5 w-5"}),e.jsx("span",{children:n?"Submitting...":"Request Purchase"})]})]})]})})},Mn=10,uj=20,mj=80,qu=50,ah=({onParcelSelect:t,readOnly:s=!1,canRearrange:r=!1})=>{const[a,n]=d.useState([]),[l,i]=d.useState(!0),[c,o]=d.useState(""),[u,p]=d.useState(qu),[y,f]=d.useState(null),[h,g]=d.useState({x:0,y:0}),[j,b]=d.useState(null),[m,x]=d.useState(!1),[v,w]=d.useState(""),[_,R]=d.useState("all"),[S,I]=d.useState(!1),[M,A]=d.useState(null),[P,C]=d.useState(null),[k,E]=d.useState(!1),[W,N]=d.useState(!1),[H,T]=d.useState(!1),F=d.useRef(null),G=d.useRef(null);d.useEffect(()=>{U()},[]);const U=async()=>{var X,oe;i(!0),o("");try{const Y=await Wt.getParcels();n(Y.data)}catch(Y){o(((oe=(X=Y.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to load land plots")}finally{i(!1)}},ee=d.useMemo(()=>{const X=new Map;return a.forEach(oe=>{X.set(`${oe.row_index}-${oe.col_index}`,oe)}),X},[a]),te=d.useCallback((X,oe)=>ee.get(`${X}-${oe}`),[ee]),de=d.useCallback(X=>X?!(v&&X.biome_type!==v||_==="available"&&X.owner_id||_==="owned"&&!X.owner_id):!0,[v,_]),K=d.useCallback(X=>{g({x:X.clientX,y:X.clientY})},[]),se=d.useCallback((X,oe)=>{const Y=te(X,oe);Y&&de(Y)?f(Y):f(null)},[te,de]),ie=d.useCallback((X,oe)=>{const Y=te(X,oe);Y&&!Y.owner_id&&!s&&(b(Y),x(!0)),t&&Y&&t(Y)},[te,s,t]),O=d.useCallback((X,oe)=>{r&&(A(oe),X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("application/x-parcel-id",String(oe.id)),X.dataTransfer.setData("text/plain",oe.grid_code))},[r]),Q=d.useCallback(()=>{A(null),C(null)},[]),B=d.useCallback((X,oe,Y)=>{if(!r||!M)return;X.preventDefault(),X.dataTransfer.dropEffect="move";const he=te(oe,Y);he&&he.id!==M.id&&C(`${oe}-${Y}`)},[r,M,te]),V=d.useCallback(()=>{C(null)},[]),ue=d.useCallback(async(X,oe,Y)=>{var At,Et;if(X.preventDefault(),C(null),!X.dataTransfer.getData("application/x-parcel-id")||!M){A(null);return}const fe=te(oe,Y);if(!fe||fe.id===M.id){A(null);return}E(!0);try{await Wt.swapParcels(M.id,fe.id),await U()}catch(L){o(((Et=(At=L.response)==null?void 0:At.data)==null?void 0:Et.error)||"Failed to swap tiles")}finally{E(!1),A(null)}},[r,M,te]),$=d.useCallback(async()=>{var X,oe;N(!0),o(""),T(!1);try{const Y=await Wt.recalculateValues();await U(),o(""),f(null),T(!0),setTimeout(()=>T(!1),4e3)}catch(Y){o(((oe=(X=Y.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to recalculate prices")}finally{N(!1)}},[]),q=()=>p(X=>Math.min(X+2,mj)),Z=()=>p(X=>Math.max(X-2,uj)),ne=()=>p(qu),le=d.useCallback((X,oe)=>{const Y=te(X,oe);if(!Y)return{backgroundColor:"#e5e7eb"};if(!de(Y))return{backgroundColor:"#f3f4f6",opacity:.3};const he=Qt[Y.biome_type],fe=!!Y.owner_id;return{backgroundColor:fe?he.lightColor:he.color,border:fe?`1px solid ${he.color}`:"none"}},[te,de]),D=d.useMemo(()=>{const X=[];for(let oe=0;oe<Mn;oe++)for(let Y=0;Y<Mn;Y++){const he=te(oe,Y),fe=(y==null?void 0:y.row_index)===oe&&(y==null?void 0:y.col_index)===Y,At=r&&(M==null?void 0:M.row_index)===oe&&(M==null?void 0:M.col_index)===Y,Et=r&&P===`${oe}-${Y}`;X.push(e.jsx("div",{className:`transition-all rounded-sm ${r?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${fe?"ring-2 ring-white z-10 scale-110 shadow-lg":"hover:brightness-110"} ${At?"opacity-50 scale-95":""} ${Et?"ring-2 ring-primary-500 ring-offset-1 z-20":""}`,style:{...le(oe,Y),width:`${u}px`,height:`${u}px`,minWidth:`${u}px`,minHeight:`${u}px`},draggable:r&&!!he,onDragStart:r&&he?L=>O(L,he):void 0,onDragEnd:r?Q:void 0,onDragOver:r?L=>B(L,oe,Y):void 0,onDragLeave:r?V:void 0,onDrop:r?L=>ue(L,oe,Y):void 0,onMouseEnter:()=>se(oe,Y),onMouseLeave:()=>f(null),onClick:()=>ie(oe,Y),title:he?r?`Drag to swap  ${he.grid_code}`:he.grid_code:`Empty ${oe}-${Y}`},`${oe}-${Y}`))}return X},[u,y,M,P,r,te,le,se,ie,O,Q,B,V,ue]),ge=Object.keys(Qt);return l?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-xl",children:[e.jsx(be,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading land plots..."})]}):c?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-red-600 mb-4",children:c}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-amber-50 rounded-xl border-2 border-amber-200",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("p",{className:"text-amber-800 font-medium mb-2",children:"No land plots found"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ask your teacher to seed the land data first"}),e.jsx("p",{className:"text-xs text-amber-500 mt-2",children:'(Teacher: Go to Land Registry  click "Seed Land Data")'})]}):e.jsxs("div",{className:"space-y-4",ref:F,children:[r&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-amber-50 border border-amber-200 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-800",children:'Drag any tile onto another to swap positions and match your classroom board. Use "Recalculate prices" so hover prices match the legend ranges.'}),H&&e.jsx("p",{className:"text-sm text-green-700 font-medium mt-2",children:"Prices updated. Hover over tiles to see values within the legend range."})]}),e.jsxs("button",{type:"button",onClick:$,disabled:W||a.length===0,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[W?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(pr,{className:"h-4 w-4"}),"Recalculate prices"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Zoom:"}),e.jsx("button",{onClick:Z,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom Out",children:e.jsx(Ib,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium w-12 text-center",children:[u,"px"]}),e.jsx("button",{onClick:q,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom In",children:e.jsx(Ob,{className:"h-4 w-4"})}),e.jsx("button",{onClick:ne,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Reset Zoom",children:e.jsx(Cb,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>I(!S),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${S?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Kl,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),(v||_!=="all")&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-2 py-0.5 rounded-full",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Total: ",e.jsx("strong",{children:a.length.toLocaleString()})]}),e.jsxs("span",{children:["Available: ",e.jsx("strong",{children:a.filter(X=>!X.owner_id).length.toLocaleString()})]}),e.jsxs("span",{children:["Owned: ",e.jsx("strong",{children:a.filter(X=>X.owner_id).length.toLocaleString()})]})]})]}),S&&e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Filter Plots"}),e.jsx("button",{onClick:()=>{w(""),R("all")},className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Biome Type"}),e.jsxs("select",{value:v,onChange:X=>w(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Biomes"}),ge.map(X=>e.jsxs("option",{value:X,children:[js[X]," ",X]},X))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Ownership"}),e.jsxs("select",{value:_,onChange:X=>R(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Plots"}),e.jsx("option",{value:"available",children:"Available Only"}),e.jsx("option",{value:"owned",children:"Owned Only"})]})]})]})]}),e.jsxs("div",{className:"relative bg-gray-200 rounded-xl overflow-auto border-2 border-gray-400 p-4",style:{minHeight:"200px"},onMouseMove:K,children:[e.jsx("div",{ref:G,className:"inline-grid gap-1 bg-gray-300 p-2 rounded-lg",style:{gridTemplateColumns:`repeat(${Mn}, ${u}px)`,gridTemplateRows:`repeat(${Mn}, ${u}px)`},children:D}),y&&e.jsx(cj,{parcel:y,position:h,containerRef:F})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Biome Legend"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Plot prices vary 20% within each biome range. Hover a square to see its exact price."}),e.jsx("div",{className:"flex flex-wrap gap-3",children:ge.map(X=>{const oe=Qt[X],Y=Math.round(oe.baseValue*.8),he=Math.round(oe.baseValue*1.2);return e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-2 py-1 rounded",onClick:()=>w(v===X?"":X),children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:oe.color}}),e.jsxs("span",{className:"text-xs text-gray-600",children:[js[X]," ",X]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",Ue(Y),"  ",Ue(he),")"]})]},X)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-green-600"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-green-200 border border-green-600"}),e.jsx("span",{children:"Owned"})]})]})]}),m&&j&&e.jsx(dj,{parcel:j,onClose:()=>{x(!1),b(null)},onSuccess:()=>{U()}})]})},xj=({landPlugin:t})=>{const[s,r]=d.useState("grid"),[a,n]=d.useState([]),[l,i]=d.useState(null),[c,o]=d.useState(!0),[u,p]=d.useState(null),[y,f]=d.useState(""),[h,g]=d.useState(""),[j,b]=d.useState("pending"),[m,x]=d.useState(!1);d.useEffect(()=>{v()},[j]);const v=async()=>{o(!0);try{const[S,I]=await Promise.all([Wt.getPurchaseRequests(j||void 0),Wt.getStats()]);n(S.data),i(I.data)}catch(S){console.error("Failed to fetch land data:",S)}finally{o(!1)}},w=async(S,I,M)=>{var A,P;p(S),f(""),g("");try{await Wt.updatePurchaseRequest(S,I,M),g(`Request ${I} successfully`),v()}catch(C){f(((P=(A=C.response)==null?void 0:A.data)==null?void 0:P.error)||`Failed to ${I} request`)}finally{p(null)}},_=async()=>{var S,I;x(!0),f(""),g("");try{const M=await Wt.seedLandData();g(`${M.data.message} - ${M.data.count} parcels created`),v()}catch(M){f(((I=(S=M.response)==null?void 0:S.data)==null?void 0:I.error)||"Failed to seed land data")}finally{x(!1)}},R=S=>{switch(S){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry Management"}),e.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]}),e.jsxs("button",{onClick:_,disabled:m||l!==null&&l.total_parcels>0,className:`px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors ${l&&l.total_parcels>0?"bg-white/10 text-white/50 cursor-not-allowed":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx(Ei,{className:"h-4 w-4"}),e.jsx("span",{children:m?"Seeding...":l&&l.total_parcels>0?"Data Seeded":"Seed Land Data"})]})]})}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Plots"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Available"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.available_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Owned"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.owned_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.pending_requests})]})]}),y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(ct,{className:"h-5 w-5"}),e.jsx("span",{children:y})]}),h&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:h})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"grid",label:"Land Grid",icon:Wc},{id:"requests",label:"Purchase Requests",icon:Ce,badge:l==null?void 0:l.pending_requests},{id:"stats",label:"Statistics",icon:we}].map(({id:S,label:I,icon:M,badge:A})=>e.jsxs("button",{onClick:()=>r(S),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===S?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:I}),A!==void 0&&A>0&&e.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-0.5 rounded-full",children:A})]},S))})}),e.jsxs("div",{className:"p-6",children:[s==="grid"&&e.jsxs(e.Fragment,{children:[l&&l.total_parcels===0&&e.jsxs("div",{className:"mb-6 bg-amber-50 border-2 border-amber-200 rounded-xl p-6 text-center",children:[e.jsx(Ei,{className:"h-12 w-12 mx-auto mb-4 text-amber-500"}),e.jsx("h3",{className:"text-lg font-semibold text-amber-800 mb-2",children:"No Land Data Yet"}),e.jsx("p",{className:"text-amber-600 mb-4",children:"Click the button below to generate 100 land plots (10x10 grid)"}),e.jsxs("button",{onClick:_,disabled:m,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-medium flex items-center space-x-2 mx-auto",children:[e.jsx(Ei,{className:"h-5 w-5"}),e.jsx("span",{children:m?"Seeding Land Data...":"Seed Land Data Now"})]})]}),e.jsx(ah,{readOnly:!0,canRearrange:!0})]}),s==="requests"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Kl,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:j,onChange:S=>b(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"All Requests"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"denied",children:"Denied"})]}),e.jsx("button",{onClick:v,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:e.jsx(pr,{className:`h-4 w-4 ${c?"animate-spin":""}`})})]}),c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 text-emerald-600 animate-spin"})}):a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ce,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsxs("p",{children:["No ",j||""," purchase requests found"]})]}):e.jsx("div",{className:"space-y-4",children:a.map(S=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:S.parcel_biome_type?Qt[S.parcel_biome_type].lightColor:"#e5e7eb"},children:S.parcel_biome_type?js[S.parcel_biome_type]:""}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Plot ",S.parcel_grid_code]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${R(S.status)}`,children:S.status.toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by: ",e.jsx("strong",{children:S.applicant_first_name&&S.applicant_last_name?`${S.applicant_first_name} ${S.applicant_last_name}`:S.applicant_username}),S.applicant_class&&` (${S.applicant_class})`]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.parcel_biome_type,"  Offered: ",Ue(S.offered_price)]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Submitted: ",new Date(S.created_at).toLocaleString()]}),S.denial_reason&&e.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Reason: ",S.denial_reason]})]})]}),S.status.toLowerCase()==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>w(S.id,"approved"),disabled:u!==null,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[u===S.id?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:u===S.id?"Processing...":"Approve"})]}),e.jsxs("button",{onClick:()=>{const I=prompt("Reason for denial (optional):");w(S.id,"denied",I||void 0)},disabled:u!==null,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[u===S.id?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"Deny"})]})]})]})},S.id))})]}),s==="stats"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Biome Distribution"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.biome_stats.map(S=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2",style:{borderColor:Qt[S.biome_type].color},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:js[S.biome_type]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:S.biome_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.count," plots"]})]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Owned:"}),e.jsxs("span",{className:"font-medium",children:[S.owned_count," (",(S.owned_count/S.count*100).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Avg Value:"}),e.jsx("span",{className:"font-medium",children:Ue(S.avg_value)})]})]}),e.jsx("div",{className:"mt-3 h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all",style:{width:`${S.owned_count/S.count*100}%`,backgroundColor:Qt[S.biome_type].color}})})]},S.biome_type))})]}),l.top_owners.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Land Owners"}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Owner"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Plots"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Value"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.top_owners.map((S,I)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`font-bold ${I===0?"text-amber-500":I===1?"text-gray-400":I===2?"text-amber-700":"text-gray-500"}`,children:["#",I+1]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:S.first_name&&S.last_name?`${S.first_name} ${S.last_name}`:S.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",S.username]})]}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-900",children:[S.parcel_count," plots"]}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:Ue(S.total_value)})]},S.username))})]})})]})]})]})]})]})},hj=({landPlugin:t})=>{const[s,r]=d.useState("explore"),[a,n]=d.useState(null),[l,i]=d.useState([]),[c,o]=d.useState(!0),[u,p]=d.useState(null);d.useEffect(()=>{y()},[]);const y=async()=>{o(!0);try{const[h,g]=await Promise.all([Wt.getMyProperties(),Wt.getPurchaseRequests()]);n(h.data),i(g.data)}catch(h){console.error("Failed to fetch land data:",h)}finally{o(!1)}},f=h=>{switch(h){case"pending":return"bg-amber-100 text-amber-800 border-amber-300";case"approved":return"bg-green-100 text-green-800 border-green-300";case"denied":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry"}),e.jsx("p",{className:"text-primary-100",children:"Explore and purchase land parcels"})]})]})}),a&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"My Plots"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:a.total_count})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Portfolio Value"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ue(a.total_value)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.filter(h=>h.status==="pending").length})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"explore",label:"Explore Land",icon:Wc},{id:"my-properties",label:"My Plots",icon:Ct,badge:a==null?void 0:a.total_count},{id:"requests",label:"My Requests",icon:Ce,badge:l.filter(h=>h.status==="pending").length}].map(({id:h,label:g,icon:j,badge:b})=>e.jsxs("button",{onClick:()=>r(h),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===h?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:g}),b!==void 0&&b>0&&e.jsx("span",{className:"bg-primary-500 text-white text-xs px-2 py-0.5 rounded-full",children:b})]},h))})}),e.jsxs("div",{className:"p-6",children:[s==="explore"&&e.jsx(ah,{onParcelSelect:h=>console.log("Selected:",h)}),s==="my-properties"&&(c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 text-primary-600 animate-spin"})}):a&&a.parcels.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ct,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"You don't own any land yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Explore the grid and purchase your first plot!"})]}):a&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.parcels.map(h=>e.jsxs("div",{className:"bg-white rounded-xl border-2 overflow-hidden hover:shadow-lg transition-shadow",style:{borderColor:Qt[h.biome_type].color},children:[e.jsx("div",{className:"p-4 text-white",style:{backgroundColor:Qt[h.biome_type].color},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:js[h.biome_type]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:h.grid_code}),e.jsx("p",{className:"text-sm opacity-80",children:h.biome_type})]})]}),e.jsx("p",{className:"text-lg font-bold",children:Ue(h.value)})]})}),e.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"Location:"}),e.jsxs("span",{className:"font-medium",children:["Row ",h.row_index+1,", Col ",h.col_index+1]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Risk:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${Cl[h.risk_level].bg} ${Cl[h.risk_level].text} capitalize`,children:h.risk_level})]}),h.purchased_at&&e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"Purchased:"}),e.jsx("span",{className:"font-medium",children:new Date(h.purchased_at).toLocaleDateString()})]})]})]},h.id))})),s==="requests"&&(c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 text-primary-600 animate-spin"})}):l.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ce,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No purchase requests yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Your purchase requests will appear here"})]}):e.jsx("div",{className:"space-y-4",children:l.map(h=>e.jsxs("div",{className:`rounded-xl border ${f(h.status)} overflow-hidden`,children:[e.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>p(u===h.id?null:h.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:h.parcel_biome_type?js[h.parcel_biome_type]:""}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:["Parcel ",h.parcel_grid_code]}),e.jsxs("p",{className:"text-sm opacity-80",children:[h.parcel_biome_type,"  ",Ue(h.offered_price)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium uppercase",children:h.status}),u===h.id?e.jsx(J0,{className:"h-4 w-4"}):e.jsx(G0,{className:"h-4 w-4"})]})]})}),u===h.id&&e.jsxs("div",{className:"px-4 pb-4 pt-2 border-t space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Submitted:"}),e.jsx("span",{children:new Date(h.created_at).toLocaleString()})]}),h.reviewed_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Reviewed:"}),e.jsx("span",{children:new Date(h.reviewed_at).toLocaleString()})]}),h.reviewer_username&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Reviewed by:"}),e.jsx("span",{children:h.reviewer_username})]}),h.denial_reason&&e.jsxs("div",{className:"mt-2 p-2 bg-white/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Reason:"}),e.jsx("p",{className:"text-sm",children:h.denial_reason})]})]})]},h.id))}))]})]})]})},pj=()=>{const{user:t}=Le(),{plugins:s,loading:r}=rt(),a=s.find(n=>n.route_path==="/land");return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(t==null?void 0:t.role)==="teacher"?e.jsx(xj,{landPlugin:a}):e.jsx(hj,{landPlugin:a})},gj=({job:t,onClick:s,rotation:r=0,isFulfilled:a=!1})=>{const[n,l]=d.useState(!1),[i,c]=d.useState(!1),o=a||t.is_fulfilled,p=((m,x)=>{if(!m)return"bg-blue-50 border-blue-200";const v=m.toLowerCase();return x!=null&&x.toLowerCase(),v.includes("government")?"bg-green-50 border-green-200":v.includes("finance")?"bg-blue-50 border-blue-200":v.includes("police")?"bg-pink-50 border-pink-200":v.includes("infrastructure")||v.includes("design")?"bg-orange-50 border-orange-200":v.includes("education")?"bg-yellow-50 border-yellow-200":v.includes("health")?"bg-red-50 border-red-200":v.includes("retail")||v.includes("events")||v.includes("business")?"bg-purple-50 border-purple-200":v.includes("media")||v.includes("news")?"bg-cyan-50 border-cyan-200":"bg-gray-50 border-gray-200"})(t.company_name,t.name),f=(()=>{if(!t.requirements)return null;const m=t.requirements.match(/(\d+)\s+positions?/i)||t.requirements.match(/(\d+)\s+position/i);return m?parseInt(m[1]):null})(),h=m=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),j=(()=>{const m=t.base_salary||2e3;return m===4e3?2e3:m})(),b=d.useRef(null);return d.useEffect(()=>{const m=()=>{if(b.current){const x=b.current.getBoundingClientRect(),v=b.current.closest(".pin-board");if(v){const w=v.getBoundingClientRect(),_=x.top-w.top;c(_<w.height*.3)}}};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),e.jsxs("div",{ref:b,className:`job-flyer relative cursor-pointer transition-all duration-300 ${n?"wiggle-subtle":""}`,style:{transform:`rotate(${r}deg)`},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:s,children:[e.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full border-2 border-red-700 shadow-md z-10"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full border-2 border-blue-700 shadow-md z-10"}),e.jsxs("div",{className:`${p} border-2 rounded-lg p-4 shadow-lg hover:shadow-xl transition-shadow min-h-[180px] flex flex-col relative overflow-hidden`,children:[o&&e.jsxs("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-60 flex flex-col items-center justify-center z-20 rounded-lg",children:[e.jsx(Ne,{className:"h-10 w-10 text-green-400 mb-2"}),e.jsx("div",{className:"text-white font-bold text-lg text-center px-2",children:"Position Fulfilled"}),t.assigned_to_name&&e.jsxs("div",{className:"text-green-200 text-sm text-center px-2 mt-1",children:["by ",t.assigned_to_name]})]}),e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(Qe,{className:"h-6 w-6 text-gray-700 flex-shrink-0"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:h(j)}),e.jsxs("div",{className:"text-xs text-gray-600",children:[t.is_contractual&&e.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-[10px] font-semibold mb-1",children:"CONTRACTUAL"}),e.jsx("div",{className:"mt-0.5",children:"starts at  grows with level"})]})]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:t.name}),t.company_name&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:t.company_name}),t.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-3 flex-grow",children:t.description}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 border-opacity-50",children:e.jsxs("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[e.jsx("div",{className:"font-semibold text-gray-600",children:"Salary Progression:"}),e.jsxs("div",{children:["Level 1: ",h(j)]}),t.is_contractual&&e.jsxs("div",{className:"text-purple-600 font-medium",children:["Level 10: ",h(j*7.5*1.5)," (contractual)"]}),!t.is_contractual&&e.jsxs("div",{children:["Level 10: ",h(j*7.5)]})]})}),t.location&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" ",t.location]}),n&&e.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl z-50 pointer-events-none whitespace-nowrap ${i?"top-full mt-2":"-top-24"}`,children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsxs("div",{className:"text-gray-300",children:["Starts: ",h(j),t.is_contractual&&e.jsx("span",{className:"text-purple-300 ml-1",children:"(Contractual)"})]}),e.jsx("div",{className:"text-gray-400 text-[10px] mt-1",children:"Grows with performance level"}),f&&e.jsxs("div",{className:"text-gray-400 mt-1 text-center border-t border-gray-700 pt-1",children:[f," position",f>1?"s":""," available"]}),e.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 ${i?"bottom-full mb-0":"top-full mt-0"}`,children:e.jsx("div",{className:`border-4 border-transparent ${i?"border-b-gray-900":"border-t-gray-900"}`})})]})]})]})},fj=({isOpen:t,onClose:s,job:r,onApply:a,userHasJob:n=!1,userJobName:l,applicationsEnabled:i=!0,applicationCount:c=null,isTeacher:o=!1,onSaveJob:u})=>{const[p,y]=d.useState(!1),[f,h]=d.useState({}),[g,j]=d.useState(!1),[b,m]=d.useState(null);if(d.useEffect(()=>{r&&p&&(h({name:r.name,description:r.description??"",base_salary:A,is_contractual:r.is_contractual??!1,company_name:r.company_name??"",location:r.location??"",requirements:r.requirements??""}),m(null)),p||m(null)},[r,p]),!t||!r)return null;const x=r.is_fulfilled,v=c!==null&&!c.canApply,w=!n&&!x&&i&&!v,_=()=>y(!0),R=()=>y(!1),S=async()=>{var C,k;if(!(!u||!f.name||f.base_salary==null)){j(!0),m(null);try{await u(r.id,f),y(!1)}catch(E){m(((k=(C=E.response)==null?void 0:C.data)==null?void 0:k.error)||"Failed to update job")}finally{j(!1)}}},I=C=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(C),A=(()=>{if(!r)return 2e3;const C=r.base_salary||2e3;return C===4e3?2e3:C})(),P=C=>new Date(C).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"h-6 w-6"}),e.jsx("h2",{className:"text-2xl font-bold",children:p?"Edit Job":"Job Details"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&!p&&e.jsxs("button",{onClick:_,className:"text-white hover:text-gray-200 transition-colors p-2 hover:bg-white hover:bg-opacity-20 rounded-lg flex items-center space-x-1",title:"Edit job",children:[e.jsx(hn,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Edit"})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6"})})]})]}),e.jsx("div",{className:"p-6 space-y-6",children:p?e.jsxs(e.Fragment,{children:[b&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Name *"}),e.jsx("input",{type:"text",value:f.name||"",onChange:C=>h({...f,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company / Department"}),e.jsx("input",{type:"text",value:f.company_name||"",onChange:C=>h({...f,company_name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:f.location||"",onChange:C=>h({...f,location:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Salary (ZAR) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:f.base_salary??2e3,onChange:C=>h({...f,base_salary:parseFloat(C.target.value)||2e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Starting salary. Increases with job level progression."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_contractual",checked:f.is_contractual??!1,onChange:C=>h({...f,is_contractual:C.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_contractual",className:"ml-2 block text-sm text-gray-700",children:"Contractual Job (earns 1.5x more)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description||"",onChange:C=>h({...f,description:C.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Daily and weekly responsibilities..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirements"}),e.jsx("textarea",{value:f.requirements||"",onChange:C=>h({...f,requirements:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g. Two positions available."})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsxs("button",{onClick:S,disabled:g||!f.name||f.base_salary==null,className:"flex-1 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:g?"Saving...":"Save Changes"})]}),e.jsx("button",{onClick:R,className:"px-4 py-2 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.name}),r.company_name&&e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(H0,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-lg font-medium",children:r.company_name})]}),e.jsxs("div",{className:"flex items-center space-x-6 flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center text-primary-600",children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:I(A)}),r.is_contractual&&e.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs font-semibold",children:"CONTRACTUAL"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"starts at  grows with level"})]})]}),r.location&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ct,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:r.location})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Salary Progression"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:[1,2,3,4,5,6,7,8,9,10].map(C=>{const k=A,E=1+(C-1)*.7222,W=r.is_contractual?1.5:1,N=k*E*W;return e.jsxs("div",{className:"bg-white rounded p-2 border border-gray-200",children:[e.jsxs("div",{className:"font-semibold text-gray-700",children:["L",C]}),e.jsx("div",{className:"text-primary-600 font-medium",children:I(N)})]},C)})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Salary increases progressively to R15,000 at Level 10. ",r.is_contractual&&"Contractual jobs earn 1.5x more (Level 10: R22,500)."]})]})]}),r.description&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(xn,{className:"h-5 w-5 mr-2"}),"Job Description"]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.description})]}),(()=>{const C=kl(r.requirements);return C?e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:C})]}):null})(),e.jsxs("div",{className:"text-sm text-gray-500 border-t border-gray-200 pt-4",children:["Posted on ",P(r.created_at)]}),x&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Ne,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Position Fulfilled"}),e.jsxs("p",{className:"text-sm text-green-600",children:["This position has been filled",r.assigned_to_name?` by ${r.assigned_to_name}`:"","."]})]})]}),n&&!x&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(ke,{className:"h-6 w-6 text-amber-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-800",children:"You Already Have a Job"}),e.jsxs("p",{className:"text-sm text-amber-600",children:["You are currently employed as: ",l]})]})]}),!i&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(ke,{className:"h-6 w-6 text-gray-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Applications Currently Disabled"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Job applications are temporarily disabled. Please check back later."})]})]}),v&&i&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx(ke,{className:"h-6 w-6 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-800",children:"Application Limit Reached"}),e.jsxs("p",{className:"text-sm text-orange-600",children:["You have reached the maximum of ",(c==null?void 0:c.maxApplications)||2," job applications. Please wait for a response on your existing applications before applying to more jobs."]})]})]}),c&&c.count>0&&!v&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(ke,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-800",children:"Application Status"}),e.jsxs("p",{className:"text-sm text-blue-600",children:["You have ",c.count," active application",c.count!==1?"s":"","(",c.maxApplications-c.count," remaining)"]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[w?e.jsx("button",{onClick:a,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Apply Now"}):e.jsx("button",{disabled:!0,className:"flex-1 bg-gray-300 text-gray-500 font-semibold py-3 px-6 rounded-lg cursor-not-allowed",children:i?v?`Application Limit Reached (${(c==null?void 0:c.count)||0}/${(c==null?void 0:c.maxApplications)||2})`:x?"Position Filled":"Cannot Apply":"Applications Disabled"}),e.jsx("button",{onClick:s,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]})})]})})},zu=[{id:"interest",type:"long_answer",label:"Why are you interested in this position?",required:!0},{id:"experience",type:"long_answer",label:"What relevant experience do you have?",required:!0},{id:"availability",type:"yes_no",label:"Are you available to work during school hours?",required:!0},{id:"skills",type:"short_answer",label:"What skills make you a good fit?",required:!0},{id:"hours",type:"multiple_choice",label:"How many hours per week can you commit?",required:!0,options:["1-5 hours","6-10 hours","11-15 hours","16+ hours"]}],yj=({isOpen:t,onClose:s,jobId:r,jobName:a,onSuccess:n})=>{const[l,i]=d.useState({}),[c,o]=d.useState({}),[u,p]=d.useState(!1),[y,f]=d.useState(!1),h=(x,v)=>{i(w=>({...w,[x]:v})),c[x]&&o(w=>{const _={...w};return delete _[x],_})},g=()=>{const x={};return zu.forEach(v=>{if(v.required){const w=l[v.id];!w||typeof w=="string"&&w.trim()===""?x[v.id]="This field is required":v.type==="short_answer"&&typeof w=="string"&&w.length>200?x[v.id]="Answer must be 200 characters or less":v.type==="long_answer"&&typeof w=="string"&&w.length>1e3&&(x[v.id]="Answer must be 1000 characters or less")}}),o(x),Object.keys(x).length===0},j=async x=>{var v,w;if(x.preventDefault(),!!g()){p(!0);try{await pt.applyToJob(r,l),f(!0),setTimeout(()=>{n(),b()},2e3)}catch(_){console.error("Failed to submit application:",_),alert(((w=(v=_.response)==null?void 0:v.data)==null?void 0:w.error)||"Failed to submit application. Please try again.")}finally{p(!1)}}},b=()=>{i({}),o({}),f(!1),s()},m=x=>{var _;const v=l[x.id]||"",w=c[x.id];switch(x.type){case"short_answer":return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:typeof v=="string"?v:"",onChange:R=>h(x.id,R.target.value),maxLength:200,className:`input-field ${w?"border-red-500":""}`,placeholder:"Enter your answer..."}),e.jsxs("div",{className:"flex justify-between mt-1",children:[w&&e.jsx("span",{className:"text-sm text-red-600",children:w}),e.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/200 characters"]})]})]});case"long_answer":return e.jsxs("div",{children:[e.jsx("textarea",{value:typeof v=="string"?v:"",onChange:R=>h(x.id,R.target.value),maxLength:1e3,rows:5,className:`input-field ${w?"border-red-500":""}`,placeholder:"Enter your answer..."}),e.jsxs("div",{className:"flex justify-between mt-1",children:[w&&e.jsx("span",{className:"text-sm text-red-600",children:w}),e.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/1000 characters"]})]})]});case"multiple_choice":return e.jsxs("div",{className:"space-y-2",children:[(_=x.options)==null?void 0:_.map(R=>e.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:x.id,value:R,checked:v===R,onChange:S=>h(x.id,S.target.value),className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-gray-700",children:R})]},R)),w&&e.jsx("span",{className:"text-sm text-red-600",children:w})]});case"yes_no":return e.jsxs("div",{className:"space-y-2",children:[["Yes","No"].map(R=>e.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:x.id,value:R,checked:v===R,onChange:S=>h(x.id,S.target.value),className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-gray-700",children:R})]},R)),w&&e.jsx("span",{className:"text-sm text-red-600",children:w})]});default:return null}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Job Application"}),e.jsxs("p",{className:"text-primary-100 text-sm mt-1",children:["Applying for: ",a]})]}),e.jsx("button",{onClick:b,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ne,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-600",children:"Your application has been submitted successfully. A teacher will review it soon."})]}):e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Please fill out all required fields. Your application will be reviewed by a teacher."]})}),zu.map(x=>e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[x.label,x.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),m(x)]},x.id)),e.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Application"})]})}),e.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})})]})}):null},bj=()=>{const{plugins:t,loading:s}=rt(),{user:r}=Le(),{currentTown:a}=ls(),n=t.find(P=>P.route_path==="/jobs"),[l,i]=d.useState([]),[c,o]=d.useState(!0),[u,p]=d.useState(null),[y,f]=d.useState(!1),[h,g]=d.useState(!1),[j,b]=d.useState(null),m=(r==null?void 0:r.job_id)!==null&&(r==null?void 0:r.job_id)!==void 0,x=(a==null?void 0:a.job_applications_enabled)!==!1;d.useEffect(()=>{n&&n.enabled&&(v(),(r==null?void 0:r.role)==="student"&&!m&&w())},[n,r]);const v=async()=>{try{o(!0);const P=await pt.getJobs();i(P.data)}catch(P){console.error("Failed to fetch jobs:",P)}finally{o(!1)}},w=async()=>{try{const P=await pt.getMyApplicationCount();b(P.data)}catch(P){console.error("Failed to fetch application count:",P)}},_=P=>{p(P),f(!0)},R=()=>{f(!1),g(!0)},S=()=>{v(),w()},I=()=>{f(!1),p(null)},M=()=>{g(!1)},A=P=>P*7.3%11-5;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})}):!n||!n.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Jobs"}),e.jsx("p",{className:"text-primary-100",children:"Employment Board"})]})]}),m&&e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsxs("span",{className:"text-sm font-medium",children:["You are employed as: ",r==null?void 0:r.job_name]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Qe,{className:"h-5 w-5 mr-2 text-primary-600"}),"How Jobs & Salaries Work"]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Starting Salaries"}),e.jsxs("p",{className:"mb-2",children:["All jobs start at ",e.jsx("strong",{className:"text-primary-600",children:"R2,000 per period"})," when you're first assigned (Level 1)."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Salary Progression"}),e.jsx("p",{className:"mb-2",children:"As you improve in your job and gain experience, your salary increases:"}),e.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1 text-gray-600",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Level 1:"})," R2,000 (starting salary)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 2:"})," ~R3,444"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 3:"})," ~R4,889"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 4-9:"})," Progressive increases"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Level 10:"})," R15,000 (maximum level)"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Job Levels"}),e.jsxs("p",{className:"mb-2",children:["You start at ",e.jsx("strong",{children:"Level 1"})," when assigned to a job. Your level increases based on:"]}),e.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1 text-gray-600",children:[e.jsx("li",{children:"Job performance and quality of work"}),e.jsx("li",{children:"Experience points earned through completing job tasks"}),e.jsx("li",{children:"Consistency and reliability"})]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Levels range from ",e.jsx("strong",{children:"1 to 10"}),", with Level 10 being the highest achievement."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Contractual Jobs"}),e.jsxs("p",{className:"mb-2",children:["Some jobs are marked as ",e.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs font-semibold inline-block",children:"CONTRACTUAL"}),". These jobs earn ",e.jsx("strong",{children:"1.5x more"})," than regular jobs at the same level."]}),e.jsxs("p",{className:"text-gray-600",children:["For example, a Level 10 contractual job pays ",e.jsx("strong",{children:"R22,500"})," (R15,000  1.5)."]})]}),e.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-primary-800 font-medium",children:[" ",e.jsx("strong",{children:"Tip:"})," Focus on doing your job well! The better you perform, the faster you'll level up and earn more money."]})})]})]}),e.jsx("div",{className:"pin-board rounded-2xl p-8 min-h-[600px] relative overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Qe,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Jobs Available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for new job opportunities!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map((P,C)=>e.jsx(gj,{job:P,onClick:()=>_(P),rotation:A(C)},P.id))})}),e.jsx(fj,{isOpen:y,onClose:I,job:u,onApply:R,userHasJob:m,userJobName:r==null?void 0:r.job_name,applicationsEnabled:x,applicationCount:j,isTeacher:(r==null?void 0:r.role)==="teacher",onSaveJob:(r==null?void 0:r.role)==="teacher"?async(P,C)=>{const k=await pt.updateJob(P,C);return await v(),k!=null&&k.data&&p(E=>(E==null?void 0:E.id)===k.data.id?{...E,...k.data}:E),k==null?void 0:k.data}:void 0}),u&&e.jsx(yj,{isOpen:h,onClose:M,jobId:u.id,jobName:u.name,onSuccess:S})]})},jj=[{question:"A room is 6 m  4 m. What is the area in square meters?",answer:24,explanation:"Area = length  width = 6  4 = 24 m"},{question:"A garden fence surrounds a 5 m  3 m space. What is the perimeter in meters?",answer:16,explanation:"Perimeter = 2  (length + width) = 2  (5 + 3) = 16 m"},{question:"A rectangular office is 8 m long and 5 m wide. What is the area?",answer:40,explanation:"Area = 8  5 = 40 m"},{question:"A square room has sides of 7 m each. What is the perimeter?",answer:28,explanation:"Perimeter = 4  side = 4  7 = 28 m"},{question:"A rectangular plot is 12 m  9 m. What is the area?",answer:108,explanation:"Area = 12  9 = 108 m"},{question:"A room measures 10 m by 6 m. What is the perimeter?",answer:32,explanation:"Perimeter = 2  (10 + 6) = 32 m"},{question:"A square courtyard has an area of 64 m. What is the length of one side?",answer:8,explanation:"Area = side, so side = 64 = 8 m"},{question:"A rectangular hall is 15 m long and 8 m wide. What is the area?",answer:120,explanation:"Area = 15  8 = 120 m"},{question:"A square room has a perimeter of 36 m. What is the length of one side?",answer:9,explanation:"Perimeter = 4  side, so side = 36  4 = 9 m"},{question:"A rectangular garden is 11 m  7 m. What is the area?",answer:77,explanation:"Area = 11  7 = 77 m"},{question:"A room is 9 m long and 4 m wide. What is the perimeter?",answer:26,explanation:"Perimeter = 2  (9 + 4) = 26 m"},{question:"A square office has sides of 6 m. What is the area?",answer:36,explanation:"Area = 6  6 = 36 m"},{question:"A rectangular space is 14 m  5 m. What is the area?",answer:70,explanation:"Area = 14  5 = 70 m"},{question:"A square room has an area of 49 m. What is the perimeter?",answer:28,explanation:"Side = 49 = 7 m, Perimeter = 4  7 = 28 m"},{question:"A rectangular plot is 13 m  8 m. What is the perimeter?",answer:42,explanation:"Perimeter = 2  (13 + 8) = 42 m"},{question:"A room measures 7 m by 5 m. What is the area?",answer:35,explanation:"Area = 7  5 = 35 m"},{question:"A square courtyard has a perimeter of 40 m. What is the area?",answer:100,explanation:"Side = 40  4 = 10 m, Area = 10  10 = 100 m"},{question:"A rectangular hall is 16 m long and 9 m wide. What is the area?",answer:144,explanation:"Area = 16  9 = 144 m"},{question:"A room is 12 m long and 3 m wide. What is the perimeter?",answer:30,explanation:"Perimeter = 2  (12 + 3) = 30 m"},{question:"A square office has an area of 81 m. What is the length of one side?",answer:9,explanation:"Side = 81 = 9 m"}],vj=[{question:"Scale: 1 cm = 2 m. Draw 8 m length  how many cm?",answer:4,explanation:"8 m  2 m/cm = 4 cm"},{question:"Flooring costs R250 per m. Floor area = 60 m. Total cost?",answer:15e3,explanation:"Cost = 60  250 = R15,000"},{question:"Scale: 1 cm = 3 m. Draw 15 m length  how many cm?",answer:5,explanation:"15 m  3 m/cm = 5 cm"},{question:"Paint costs R180 per m. Wall area = 45 m. Total cost?",answer:8100,explanation:"Cost = 45  180 = R8,100"},{question:"Scale: 1 cm = 2.5 m. Draw 10 m length  how many cm?",answer:4,explanation:"10 m  2.5 m/cm = 4 cm"},{question:"Tiles cost R320 per m. Floor area = 35 m. Total cost?",answer:11200,explanation:"Cost = 35  320 = R11,200"},{question:"Scale: 1 cm = 4 m. Draw 20 m length  how many cm?",answer:5,explanation:"20 m  4 m/cm = 5 cm"},{question:"Carpet costs R450 per m. Floor area = 28 m. Total cost?",answer:12600,explanation:"Cost = 28  450 = R12,600"},{question:"Scale: 1 cm = 1.5 m. Draw 9 m length  how many cm?",answer:6,explanation:"9 m  1.5 m/cm = 6 cm"},{question:"Windows cost R850 per m. Window area = 12 m. Total cost?",answer:10200,explanation:"Cost = 12  850 = R10,200"},{question:"Scale: 1 cm = 5 m. Draw 25 m length  how many cm?",answer:5,explanation:"25 m  5 m/cm = 5 cm"},{question:"Roofing costs R380 per m. Roof area = 42 m. Total cost?",answer:15960,explanation:"Cost = 42  380 = R15,960"},{question:"Scale: 1 cm = 2 m. Draw 14 m length  how many cm?",answer:7,explanation:"14 m  2 m/cm = 7 cm"},{question:"Insulation costs R220 per m. Wall area = 55 m. Total cost?",answer:12100,explanation:"Cost = 55  220 = R12,100"},{question:"Scale: 1 cm = 3.5 m. Draw 21 m length  how many cm?",answer:6,explanation:"21 m  3.5 m/cm = 6 cm"},{question:"Doors cost R1,200 per m. Door area = 8 m. Total cost?",answer:9600,explanation:"Cost = 8  1200 = R9,600"},{question:"Scale: 1 cm = 2 m. Draw 18 m length  how many cm?",answer:9,explanation:"18 m  2 m/cm = 9 cm"},{question:"Plaster costs R95 per m. Wall area = 70 m. Total cost?",answer:6650,explanation:"Cost = 70  95 = R6,650"},{question:"Scale: 1 cm = 4 m. Draw 32 m length  how many cm?",answer:8,explanation:"32 m  4 m/cm = 8 cm"},{question:"Electrical work costs R150 per m. Floor area = 50 m. Total cost?",answer:7500,explanation:"Cost = 50  150 = R7,500"}],Nj=[{question:"Max budget: R120,000. Walls cost R600/m. Floor area must be 80 m. Perimeter must not exceed 50 m. If length=10m, what is max width?",answer:15,explanation:"Perimeter = 2(10+w)  50, so 10+w  25, w  15 m. Area = 1015 = 150 m  80 "},{question:"Budget: R80,000. Flooring R300/m. Walls R500/m. Floor area 60 m. Perimeter 40 m. If length=12m, max width?",answer:8,explanation:"Perimeter = 2(12+w)  40, so w  8 m. Area = 128 = 96 m  60 "},{question:"Budget: R150,000. Roof R400/m. Walls R700/m. Roof area 100 m. Perimeter 60 m. If length=15m, max width?",answer:15,explanation:"Perimeter = 2(15+w)  60, so w  15 m. Area = 1515 = 225 m  100 "},{question:"Budget: R90,000. Tiles R250/m. Fence R400/m. Floor area 50 m. Perimeter 45 m. If length=10m, max width?",answer:12.5,explanation:"Perimeter = 2(10+w)  45, so w  12.5 m. Area = 1012.5 = 125 m  50 "},{question:"Budget: R200,000. Paint R180/m. Structure R800/m. Wall area 120 m. Perimeter 70 m. If length=20m, max width?",answer:15,explanation:"Perimeter = 2(20+w)  70, so w  15 m. Area = 2015 = 300 m  120 "},{question:"Budget: R110,000. Carpet R350/m. Base R600/m. Floor area 70 m. Perimeter 50 m. If length=14m, max width?",answer:11,explanation:"Perimeter = 2(14+w)  50, so w  11 m. Area = 1411 = 154 m  70 "},{question:"Budget: R130,000. Windows R900/m. Frame R500/m. Window area 40 m. Perimeter 55 m. If length=16m, max width?",answer:11.5,explanation:"Perimeter = 2(16+w)  55, so w  11.5 m. Area = 1611.5 = 184 m  40 "},{question:"Budget: R95,000. Insulation R200/m. Walls R550/m. Wall area 65 m. Perimeter 48 m. If length=13m, max width?",answer:11,explanation:"Perimeter = 2(13+w)  48, so w  11 m. Area = 1311 = 143 m  65 "},{question:"Budget: R160,000. Roofing R380/m. Structure R750/m. Roof area 110 m. Perimeter 65 m. If length=18m, max width?",answer:14.5,explanation:"Perimeter = 2(18+w)  65, so w  14.5 m. Area = 1814.5 = 261 m  110 "},{question:"Budget: R85,000. Flooring R280/m. Base R580/m. Floor area 55 m. Perimeter 44 m. If length=11m, max width?",answer:11,explanation:"Perimeter = 2(11+w)  44, so w  11 m. Area = 1111 = 121 m  55 "},{question:"Budget: R140,000. Paint R190/m. Frame R650/m. Wall area 75 m. Perimeter 52 m. If length=15m, max width?",answer:11,explanation:"Perimeter = 2(15+w)  52, so w  11 m. Area = 1511 = 165 m  75 "},{question:"Budget: R100,000. Tiles R320/m. Structure R600/m. Floor area 65 m. Perimeter 46 m. If length=12m, max width?",answer:11,explanation:"Perimeter = 2(12+w)  46, so w  11 m. Area = 1211 = 132 m  65 "},{question:"Budget: R170,000. Windows R950/m. Base R700/m. Window area 90 m. Perimeter 68 m. If length=19m, max width?",answer:15,explanation:"Perimeter = 2(19+w)  68, so w  15 m. Area = 1915 = 285 m  90 "},{question:"Budget: R105,000. Carpet R340/m. Frame R590/m. Floor area 68 m. Perimeter 49 m. If length=13m, max width?",answer:11.5,explanation:"Perimeter = 2(13+w)  49, so w  11.5 m. Area = 1311.5 = 149.5 m  68 "},{question:"Budget: R125,000. Roofing R390/m. Walls R680/m. Roof area 85 m. Perimeter 58 m. If length=17m, max width?",answer:12,explanation:"Perimeter = 2(17+w)  58, so w  12 m. Area = 1712 = 204 m  85 "},{question:"Budget: R115,000. Insulation R210/m. Structure R620/m. Wall area 72 m. Perimeter 51 m. If length=14m, max width?",answer:11.5,explanation:"Perimeter = 2(14+w)  51, so w  11.5 m. Area = 1411.5 = 161 m  72 "},{question:"Budget: R180,000. Paint R195/m. Frame R720/m. Wall area 130 m. Perimeter 72 m. If length=21m, max width?",answer:15,explanation:"Perimeter = 2(21+w)  72, so w  15 m. Area = 2115 = 315 m  130 "},{question:"Budget: R88,000. Flooring R270/m. Base R570/m. Floor area 58 m. Perimeter 43 m. If length=10m, max width?",answer:11.5,explanation:"Perimeter = 2(10+w)  43, so w  11.5 m. Area = 1011.5 = 115 m  58 "},{question:"Budget: R135,000. Windows R880/m. Structure R640/m. Window area 80 m. Perimeter 56 m. If length=16m, max width?",answer:12,explanation:"Perimeter = 2(16+w)  56, so w  12 m. Area = 1612 = 192 m  80 "},{question:"Budget: R155,000. Roofing R410/m. Walls R690/m. Roof area 95 m. Perimeter 62 m. If length=18m, max width?",answer:13,explanation:"Perimeter = 2(18+w)  62, so w  13 m. Area = 1813 = 234 m  95 "}],wj=[{question:"Beam supports 400 kg. Roof load = 3,200 kg. Minimum safety margin = 20%. How many beams required?",answer:10,explanation:"Required capacity = 3200  1.2 = 3840 kg. Beams needed = 3840  400 = 9.6  10 beams"},{question:"Column holds 500 kg. Building load = 4,500 kg. Safety factor = 25%. How many columns?",answer:12,explanation:"Required capacity = 4500  1.25 = 5625 kg. Columns = 5625  500 = 11.25  12 columns"},{question:"Foundation supports 600 kg/m. Total building weight = 18,000 kg. Floor area = 25 m. Safety margin = 15%. Is foundation adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 18000  25 = 720 kg/m. Required = 720  1.15 = 828 kg/m. Foundation = 600 kg/m < 828, so NO (0)"},{question:"Steel beam: 350 kg capacity. Total load = 2,800 kg. Safety factor = 30%. How many beams?",answer:11,explanation:"Required capacity = 2800  1.3 = 3640 kg. Beams = 3640  350 = 10.4  11 beams"},{question:"Concrete slab: 450 kg/m capacity. Building weight = 12,000 kg. Area = 20 m. Safety margin = 20%. Is slab adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 12000  20 = 600 kg/m. Required = 600  1.2 = 720 kg/m. Slab = 450 < 720, so NO (0)"},{question:"Truss supports 550 kg. Roof weight = 4,400 kg. Safety factor = 25%. How many trusses?",answer:10,explanation:"Required capacity = 4400  1.25 = 5500 kg. Trusses = 5500  550 = 10"},{question:"Wall supports 300 kg/m. Total wall load = 2,700 kg. Wall length = 8 m. Safety margin = 20%. Is wall adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 2700  8 = 337.5 kg/m. Required = 337.5  1.2 = 405 kg/m. Wall = 300 < 405, so NO (0)"},{question:"Foundation: 700 kg capacity. Building = 5,600 kg. Safety factor = 30%. How many foundations?",answer:11,explanation:"Required capacity = 5600  1.3 = 7280 kg. Foundations = 7280  700 = 10.4  11"},{question:"Beam: 480 kg capacity. Load = 3,840 kg. Safety margin = 25%. How many beams?",answer:10,explanation:"Required capacity = 3840  1.25 = 4800 kg. Beams = 4800  480 = 10"},{question:"Column: 520 kg capacity. Building = 4,680 kg. Safety factor = 20%. How many columns?",answer:11,explanation:"Required capacity = 4680  1.2 = 5616 kg. Columns = 5616  520 = 10.8  11"},{question:"Slab: 380 kg/m capacity. Weight = 9,120 kg. Area = 18 m. Safety margin = 30%. Is slab adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 9120  18 = 506.7 kg/m. Required = 506.7  1.3 = 658.7 kg/m. Slab = 380 < 658.7, so NO (0)"},{question:"Truss: 600 kg capacity. Roof = 5,400 kg. Safety factor = 25%. How many trusses?",answer:12,explanation:"Required capacity = 5400  1.25 = 6750 kg. Trusses = 6750  600 = 11.25  12"},{question:"Foundation: 650 kg capacity. Building = 5,200 kg. Safety margin = 30%. How many foundations?",answer:11,explanation:"Required capacity = 5200  1.3 = 6760 kg. Foundations = 6760  650 = 10.4  11"},{question:"Beam: 420 kg capacity. Load = 3,360 kg. Safety factor = 20%. How many beams?",answer:10,explanation:"Required capacity = 3360  1.2 = 4032 kg. Beams = 4032  420 = 9.6  10"},{question:"Column: 580 kg capacity. Building = 5,220 kg. Safety margin = 25%. How many columns?",answer:12,explanation:"Required capacity = 5220  1.25 = 6525 kg. Columns = 6525  580 = 11.25  12"},{question:"Wall: 320 kg/m capacity. Load = 2,880 kg. Length = 9 m. Safety margin = 20%. Is wall adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 2880  9 = 320 kg/m. Required = 320  1.2 = 384 kg/m. Wall = 320 < 384, so NO (0)"},{question:"Truss: 550 kg capacity. Roof = 4,950 kg. Safety factor = 30%. How many trusses?",answer:12,explanation:"Required capacity = 4950  1.3 = 6435 kg. Trusses = 6435  550 = 11.7  12"},{question:"Foundation: 750 kg capacity. Building = 6,750 kg. Safety margin = 25%. How many foundations?",answer:12,explanation:"Required capacity = 6750  1.25 = 8437.5 kg. Foundations = 8437.5  750 = 11.25  12"},{question:"Beam: 460 kg capacity. Load = 4,140 kg. Safety factor = 20%. How many beams?",answer:11,explanation:"Required capacity = 4140  1.2 = 4968 kg. Beams = 4968  460 = 10.8  11"},{question:"Slab: 400 kg/m capacity. Weight = 10,800 kg. Area = 24 m. Safety margin = 25%. Is slab adequate? (1=yes, 0=no)",answer:0,explanation:"Load per m = 10800  24 = 450 kg/m. Required = 450  1.25 = 562.5 kg/m. Slab = 400 < 562.5, so NO (0)"}];function Bu(t){let s;switch(t){case"easy":s=jj;break;case"medium":s=vj;break;case"hard":s=Nj;break;case"extreme":s=wj;break}return s[Math.floor(Math.random()*s.length)]}const Sj=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=d.useState("difficulty"),[i,c]=d.useState("easy"),[o,u]=d.useState(null),[p,y]=d.useState(60),[f,h]=d.useState(0),[g,j]=d.useState(null),[b,m]=d.useState(""),[x,v]=d.useState([]),[w,_]=d.useState(0),[R,S]=d.useState(0),[I,M]=d.useState(null),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(!1),[N,H]=d.useState(null),[T,F]=d.useState(0),G=5,U=["Nice try, cheater! ","Nope! One answer per question!","Did you really think that would work? ","NO! Wait for the next question!","Spam detected! -0 points for effort ","Slow down there, speedster!","Patience, young architect ","Your keyboard is not a design approval machine!","Error 418: I'm a teapot, not a fool ","BONK! No cheating! "],ee=async O=>{var Q,B;try{c(O);const V=await $o.startGame({difficulty:O});u(V.data.session.id),l("playing"),y(60),h(0),v([]),_(0),S(0),m(""),F(0),j(Bu(O))}catch(V){console.error("Failed to start game:",V),alert(((B=(Q=V.response)==null?void 0:Q.data)==null?void 0:B.error)||"Failed to start game. Please try again.")}},te=()=>{if(A){const B=U[Math.floor(Math.random()*U.length)];H(B),setTimeout(()=>H(null),1500);return}if(!g||!b.trim())return;const O=parseFloat(b),Q=Math.abs(O-g.answer)<.01;if(M(Q),P(!0),v(B=>[...B,Q]),F(B=>B+1),Q){const B=w+1;_(B),S(V=>Math.max(V,B)),h(V=>V+1)}else _(0);if(T+1>=G){setTimeout(()=>{K()},1e3);return}setTimeout(()=>{m(""),j(Bu(i)),M(null),P(!1)},1e3)},de=O=>{O.key==="Enter"&&te()},K=d.useCallback(async()=>{var O,Q;if(!o){console.error("No session ID available");return}if(E){console.log("Already submitting, skipping...");return}W(!0),l("results");try{const B=await $o.submitGame({session_id:o,score:f,correct_answers:f,total_problems:x.length,answer_sequence:x});k({score:f,correctAnswers:f,totalProblems:x.length,earnings:B.data.earnings,experience_points:B.data.experience_points,new_level:B.data.new_level,isNewHighScore:B.data.isNewHighScore,accuracy:x.length>0?f/x.length*100:0}),r()}catch(B){console.error("Failed to submit game:",B);const V=((Q=(O=B.response)==null?void 0:O.data)==null?void 0:Q.error)||"Failed to submit game results";k({score:f,correctAnswers:f,totalProblems:x.length,earnings:0,experience_points:0,new_level:null,isNewHighScore:!1,accuracy:x.length>0?f/x.length*100:0,error:V})}finally{W(!1)}},[o,f,x,E,r]);d.useEffect(()=>{if(n==="playing"&&p>0&&T<G){const O=setTimeout(()=>{y(Q=>Q-1)},1e3);return()=>clearTimeout(O)}else n==="playing"&&(p===0||T>=G)&&K()},[n,p,T,K]);const se=()=>{l("difficulty"),u(null),y(60),h(0),j(null),m(""),v([]),_(0),S(0),M(null),P(!1),k(null),W(!1),H(null),F(0)},ie=()=>{se(),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 p-6 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ot,{className:"h-6 w-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Design Approval Challenges"})]}),e.jsx("button",{onClick:ie,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),n==="difficulty"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Review building designs and solve calculations"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[(a==null?void 0:a.remaining_plays)??0," / ",(a==null?void 0:a.daily_limit)??3," reviews remaining today"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["easy","medium","hard","extreme"].map(O=>{var Q;return e.jsxs("button",{onClick:()=>ee(O),disabled:!a||(a.remaining_plays??0)<=0,className:`p-4 rounded-lg border-2 transition-all ${!a||(a.remaining_plays??0)<=0?"border-gray-700 bg-gray-800 text-gray-500 cursor-not-allowed":"border-amber-500 bg-gray-800 text-white hover:bg-amber-600 hover:border-amber-400"}`,children:[e.jsx("div",{className:"text-lg font-semibold capitalize mb-1",children:O}),e.jsxs("div",{className:"text-xs text-gray-400",children:[O==="easy"&&"Room Planning",O==="medium"&&"Scale & Costing",O==="hard"&&"Budget Constraints",O==="extreme"&&"Optimization"]}),e.jsxs("div",{className:"text-xs mt-1",children:["High: ",((Q=a==null?void 0:a.high_scores)==null?void 0:Q[O])??0]})]},O)})}),a&&(a.remaining_plays??0)<=0&&e.jsx("div",{className:"text-center text-gray-400 text-sm mt-4",children:"No reviews remaining today. Try again tomorrow!"})]}),n==="playing"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-amber-400"}),e.jsxs("span",{className:"text-lg font-bold",children:[p,"s"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yl,{className:"h-5 w-5 text-blue-400"}),e.jsx("span",{className:"text-lg font-bold",children:f})]}),w>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-lg font-bold",children:w})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Problem ",T+1," / ",G]})]}),g&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[e.jsx("div",{className:"text-white text-lg mb-4 leading-relaxed",children:g.question}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx("input",{type:"number",value:b,onChange:O=>m(O.target.value),onKeyPress:de,placeholder:"Your answer",className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-amber-500 text-lg",autoFocus:!0,disabled:A})}),A&&e.jsx("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${I?"bg-green-900 border border-green-700":"bg-red-900 border border-red-700"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-6 w-6 text-green-400"}),e.jsxs("div",{className:"text-green-300",children:[e.jsx("div",{className:"font-semibold",children:"Correct! "}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-6 w-6 text-red-400"}),e.jsxs("div",{className:"text-red-300",children:[e.jsx("div",{className:"font-semibold",children:"Incorrect"}),e.jsxs("div",{className:"text-sm mt-1",children:["Correct answer: ",g.answer]}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]})}),N&&e.jsx("div",{className:"mt-2 text-center text-yellow-400 text-sm animate-pulse",children:N}),!A&&e.jsx("button",{onClick:te,disabled:!b.trim(),className:"w-full mt-4 bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-700 disabled:text-gray-500",children:"Submit Answer"})]})]}),n==="results"&&C&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-16 w-16 text-amber-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Review Complete!"}),C.error&&e.jsx("div",{className:"bg-red-900 border border-red-700 text-red-300 p-3 rounded-lg mb-4",children:C.error})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:C.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Accuracy"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(C.accuracy),"%"]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Experience Points Earned"}),e.jsxs("span",{className:"text-xl font-bold text-blue-400 flex items-center space-x-1",children:[e.jsx(Ws,{className:"h-5 w-5"}),e.jsxs("span",{children:["+",C.experience_points]})]})]}),C.new_level&&e.jsx("div",{className:"bg-green-900 border border-green-700 p-3 rounded-lg text-center",children:e.jsxs("div",{className:"text-green-300 font-semibold text-lg",children:[" Level Up! You're now Level ",C.new_level,"!"]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Earnings"}),e.jsxs("span",{className:"text-xl font-bold text-green-400",children:["R",C.earnings.toFixed(2)]})]}),C.isNewHighScore&&e.jsx("div",{className:"text-center text-amber-400 font-semibold mt-2",children:" New High Score!"})]})]}),e.jsx("button",{onClick:ie,className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Close"})]})]})}):null},_j=[{question:"A teacher earns R8,000. Expenses are R5,200. What is the net amount left?",answer:2800,explanation:"8000 - 5200 = R2,800"},{question:"A shop made R12,500 revenue and spent R9,000. What is the profit?",answer:3500,explanation:"12500 - 9000 = R3,500"},{question:"Income: R15,000. Expenses: R7,400. Net amount?",answer:7600,explanation:"15000 - 7400 = R7,600"},{question:"Revenue R22,000. Costs R14,500. Profit?",answer:7500,explanation:"22000 - 14500 = R7,500"},{question:"Salary R9,500. Spending R6,200. How much is left?",answer:3300,explanation:"9500 - 6200 = R3,300"},{question:"Sales R18,000. Expenses R11,300. Net profit?",answer:6700,explanation:"18000 - 11300 = R6,700"},{question:"Earnings R14,000. Bills R8,700. Savings?",answer:5300,explanation:"14000 - 8700 = R5,300"},{question:"Revenue R25,000. Expenses R16,400. Profit?",answer:8600,explanation:"25000 - 16400 = R8,600"},{question:"Income R11,200. Expenses R4,900. Net?",answer:6300,explanation:"11200 - 4900 = R6,300"},{question:"Sales R19,500. Costs R12,100. Profit?",answer:7400,explanation:"19500 - 12100 = R7,400"},{question:"Earnings R13,600. Spending R7,800. Amount left?",answer:5800,explanation:"13600 - 7800 = R5,800"},{question:"Revenue R27,000. Expenses R18,200. Net profit?",answer:8800,explanation:"27000 - 18200 = R8,800"},{question:"Income R10,400. Expenses R5,600. Net?",answer:4800,explanation:"10400 - 5600 = R4,800"},{question:"Shop revenue R16,200. Costs R9,400. Profit?",answer:6800,explanation:"16200 - 9400 = R6,800"},{question:"Salary R12,800. Bills R6,500. Left?",answer:6300,explanation:"12800 - 6500 = R6,300"},{question:"Revenue R21,400. Expenses R13,700. Net?",answer:7700,explanation:"21400 - 13700 = R7,700"},{question:"Income R17,000. Spending R10,200. Savings?",answer:6800,explanation:"17000 - 10200 = R6,800"},{question:"Sales R24,600. Costs R15,900. Profit?",answer:8700,explanation:"24600 - 15900 = R8,700"},{question:"Earnings R9,800. Expenses R4,100. Net?",answer:5700,explanation:"9800 - 4100 = R5,700"},{question:"Revenue R20,000. Expenses R12,300. Net profit?",answer:7700,explanation:"20000 - 12300 = R7,700"}],kj=[{question:"Salary: R15,000. Tax: 15%. How much tax is paid?",answer:2250,explanation:"15000  0.15 = R2,250"},{question:"Salary R15,000. Tax 15%. What is the net salary?",answer:12750,explanation:"15000 - 2250 = R12,750"},{question:"Loan R20,000. Interest 8%. Interest amount?",answer:1600,explanation:"20000  0.08 = R1,600"},{question:"Gross salary R24,000. Tax 20%. Net salary?",answer:19200,explanation:"24000  0.80 = R19,200"},{question:"Amount R10,000. VAT 15%. VAT amount?",answer:1500,explanation:"10000  0.15 = R1,500"},{question:"Salary R18,000. Tax 18%. Tax paid?",answer:3240,explanation:"18000  0.18 = R3,240"},{question:"Loan R25,000. Interest 10%. Interest?",answer:2500,explanation:"25000  0.10 = R2,500"},{question:"Gross R30,000. Deduction 22%. Net?",answer:23400,explanation:"30000  0.78 = R23,400"},{question:"Price R8,000. Discount 12%. Discount amount?",answer:960,explanation:"8000  0.12 = R960"},{question:"Salary R12,000. Tax 16%. Net salary?",answer:10080,explanation:"12000  0.84 = R10,080"},{question:"Principal R50,000. Interest 6%. Interest?",answer:3e3,explanation:"50000  0.06 = R3,000"},{question:"Gross R28,000. Tax 25%. Tax amount?",answer:7e3,explanation:"28000  0.25 = R7,000"},{question:"Amount R14,000. VAT 15%. Total including VAT?",answer:16100,explanation:"14000  1.15 = R16,100"},{question:"Salary R22,000. Tax 18%. Net?",answer:18040,explanation:"22000  0.82 = R18,040"},{question:"Loan R35,000. Interest 9%. Interest?",answer:3150,explanation:"35000  0.09 = R3,150"},{question:"Gross R16,000. Deduction 15%. Net?",answer:13600,explanation:"16000  0.85 = R13,600"},{question:"Price R11,000. Tax 15%. Tax amount?",answer:1650,explanation:"11000  0.15 = R1,650"},{question:"Salary R26,000. Tax 20%. Net salary?",answer:20800,explanation:"26000  0.80 = R20,800"},{question:"Principal R40,000. Rate 7%. Interest?",answer:2800,explanation:"40000  0.07 = R2,800"},{question:"Gross R32,000. Tax 24%. Tax paid?",answer:7680,explanation:"32000  0.24 = R7,680"}],Cj=[{question:"Town income: Tax R25,000, Business fees R10,000. Town expenses: Infrastructure R18,000, Salaries R12,000. Surplus or deficit? (surplus=positive, deficit=negative)",answer:5e3,explanation:"Income 35000 - Expenses 30000 = R5,000 surplus"},{question:"Expenses increased from R5,000 to R6,500. What is the percentage increase?",answer:30,explanation:"(6500-5000)/5000  100 = 30%"},{question:"Income: R40,000. Expenses: R28,000. Surplus amount?",answer:12e3,explanation:"40000 - 28000 = R12,000"},{question:"Revenue was R12,000, now R15,600. Percentage increase?",answer:30,explanation:"(15600-12000)/12000  100 = 30%"},{question:"Budget: Income R50,000. Spending R54,000. Deficit amount? (positive number)",answer:4e3,explanation:"54000 - 50000 = R4,000 deficit"},{question:"Sales dropped from R20,000 to R17,000. Percentage decrease?",answer:15,explanation:"(20000-17000)/20000  100 = 15%"},{question:"Income R35,000. Costs R22,000. Surplus?",answer:13e3,explanation:"35000 - 22000 = R13,000"},{question:"Price R8,000 increased by 25%. New price?",answer:1e4,explanation:"8000  1.25 = R10,000"},{question:"Total income R45,000. Total expenses R38,500. Net?",answer:6500,explanation:"45000 - 38500 = R6,500"},{question:"Expenses R9,000 to R10,800. Percentage increase?",answer:20,explanation:"(10800-9000)/9000  100 = 20%"},{question:"Income R60,000. Expenses R52,000. Surplus?",answer:8e3,explanation:"60000 - 52000 = R8,000"},{question:"Revenue R18,000 decreased by 15%. New revenue?",answer:15300,explanation:"18000  0.85 = R15,300"},{question:"Income R42,000. Expenses R47,000. Deficit amount? (positive number)",answer:5e3,explanation:"47000 - 42000 = R5,000 deficit"},{question:"Costs R6,000 to R7,200. Percentage increase?",answer:20,explanation:"(7200-6000)/6000  100 = 20%"},{question:"Income R55,000. Expenses R48,200. Surplus?",answer:6800,explanation:"55000 - 48200 = R6,800"},{question:"Salary R14,000 increased by 10%. New salary?",answer:15400,explanation:"14000  1.10 = R15,400"},{question:"Income R38,000. Expenses R41,500. Deficit? (positive)",answer:3500,explanation:"41500 - 38000 = R3,500"},{question:"Revenue R24,000 to R27,600. Percentage increase?",answer:15,explanation:"(27600-24000)/24000  100 = 15%"},{question:"Income R48,000. Expenses R44,600. Surplus?",answer:3400,explanation:"48000 - 44600 = R3,400"},{question:"Expenses R11,000 to R12,650. Percentage increase?",answer:15,explanation:"(12650-11000)/11000  100 = 15%"}],Rj=[{question:"Option A: Invest R50,000 at 5%. Option B: Invest R50,000 at 8% but pay 2% management fee. What is the profit from Option B (after fee)?",answer:3e3,explanation:"8% of 50000 = 4000, minus 2% fee 1000 = R3,000"},{question:"Fixed costs R30,000. Earn R150 per product. How many units to break even?",answer:200,explanation:"30000 / 150 = 200 units"},{question:"Fixed costs R45,000. Contribution R225 per unit. Break-even units?",answer:200,explanation:"45000 / 225 = 200 units"},{question:"Invest R100,000 at 6%. Year 1 interest?",answer:6e3,explanation:"100000  0.06 = R6,000"},{question:"Fixed costs R24,000. Price R120 per unit. Variable cost R40. Break-even units?",answer:300,explanation:"24000/(120-40) = 300 units"},{question:"Option A: R40,000 at 4%. Option B: R40,000 at 6% with 1.5% fee. What is the net profit from Option B (after fee)?",answer:1800,explanation:"6% of 40000 = 2400, minus 1.5% fee 600 = R1,800"},{question:"Fixed costs R60,000. Contribution per unit R300. Break-even?",answer:200,explanation:"60000 / 300 = 200 units"},{question:"Principal R80,000. Rate 5%. Simple interest for 1 year?",answer:4e3,explanation:"80000  0.05 = R4,000"},{question:"Fixed R36,000. Sell R180. Variable R60. Break-even units?",answer:300,explanation:"36000/(180-60) = 300 units"},{question:"Invest R60,000 at 7%. Management fee 2%. Net profit?",answer:3e3,explanation:"4200 - 1200 = R3,000"},{question:"Fixed costs R50,000. Contribution R250. Break-even?",answer:200,explanation:"50000 / 250 = 200 units"},{question:"Option A: R70,000 at 5%. Option B: R70,000 at 7% with 2% fee. What is the net profit from Option B (after fee)?",answer:3500,explanation:"7% of 70000 = 4900, minus 2% fee 1400 = R3,500"},{question:"Fixed R42,000. Price R210. Variable R70. Break-even?",answer:300,explanation:"42000/(210-70) = 300 units"},{question:"Principal R90,000 at 6%. Interest?",answer:5400,explanation:"90000  0.06 = R5,400"},{question:"Fixed R54,000. Contribution R270. Break-even units?",answer:200,explanation:"54000 / 270 = 200 units"},{question:"Invest R55,000 at 8%. Fee 2.5%. Net profit?",answer:3025,explanation:"4400 - 1375 = R3,025"},{question:"Fixed R48,000. Sell R160. Variable R64. Break-even?",answer:500,explanation:"48000/(160-64) = 500 units"},{question:"Fixed R66,000. Contribution R330. Break-even?",answer:200,explanation:"66000 / 330 = 200 units"},{question:"Principal R75,000 at 8%. Interest?",answer:6e3,explanation:"75000  0.08 = R6,000"},{question:"Fixed R39,000. Price R130. Variable R52. Break-even units?",answer:500,explanation:"39000/(130-52) = 500 units"}];function Uu(t){let s;switch(t){case"easy":s=_j;break;case"medium":s=kj;break;case"hard":s=Cj;break;case"extreme":s=Rj;break}return s[Math.floor(Math.random()*s.length)]}const Pj=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=d.useState("difficulty"),[i,c]=d.useState("easy"),[o,u]=d.useState(null),[p,y]=d.useState(60),[f,h]=d.useState(0),[g,j]=d.useState(null),[b,m]=d.useState(""),[x,v]=d.useState([]),[w,_]=d.useState(0),[R,S]=d.useState(0),[I,M]=d.useState(null),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(!1),[N,H]=d.useState(null),[T,F]=d.useState(0),G=5,U=["One answer per question, please!","Wait for the next question!","Patience, auditor!","No spam in the ledger!","Slow down there!"],ee=async O=>{var Q,B;try{c(O);const V=await Oo.startGame({difficulty:O});u(V.data.session.id),l("playing"),y(60),h(0),v([]),_(0),S(0),m(""),F(0),j(Uu(O))}catch(V){console.error("Failed to start game:",V),alert(((B=(Q=V.response)==null?void 0:Q.data)==null?void 0:B.error)||"Failed to start audit case. Please try again.")}},te=()=>{if(A){const B=U[Math.floor(Math.random()*U.length)];H(B),setTimeout(()=>H(null),1500);return}if(!g||!b.trim())return;const O=parseFloat(b.replace(/,/g,"")),Q=Math.abs(O-g.answer)<.01;if(M(Q),P(!0),v(B=>[...B,Q]),F(B=>B+1),Q?(_(B=>B+1),S(B=>Math.max(B,w+1)),h(B=>B+1)):_(0),T+1>=G){setTimeout(()=>K(),1e3);return}setTimeout(()=>{m(""),j(Uu(i)),M(null),P(!1)},1e3)},de=O=>{O.key==="Enter"&&te()},K=d.useCallback(async()=>{var O,Q;if(!(!o||E)){W(!0),l("results");try{const B=await Oo.submitGame({session_id:o,score:f,correct_answers:f,total_problems:x.length,answer_sequence:x});k({score:f,correctAnswers:f,totalProblems:x.length,earnings:B.data.earnings,experience_points:B.data.experience_points,new_level:B.data.new_level,isNewHighScore:B.data.isNewHighScore,accuracy:x.length>0?f/x.length*100:0}),r()}catch(B){k({score:f,correctAnswers:f,totalProblems:x.length,earnings:0,experience_points:0,new_level:null,isNewHighScore:!1,accuracy:x.length>0?f/x.length*100:0,error:((Q=(O=B.response)==null?void 0:O.data)==null?void 0:Q.error)||"Failed to submit audit results"})}finally{W(!1)}}},[o,f,x,E,r]);d.useEffect(()=>{if(n==="playing"&&p>0&&T<G){const O=setTimeout(()=>y(Q=>Q-1),1e3);return()=>clearTimeout(O)}else n==="playing"&&(p===0||T>=G)&&K()},[n,p,T,K]);const se=()=>{l("difficulty"),u(null),y(60),h(0),j(null),m(""),v([]),_(0),S(0),M(null),P(!1),k(null),W(!1),H(null),F(0)},ie=()=>{se(),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-6 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W0,{className:"h-6 w-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Financial Audit Challenges"})]}),e.jsx("button",{onClick:ie,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),n==="difficulty"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Solve financial problems for students, businesses and the town"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[(a==null?void 0:a.remaining_plays)??0," / ",(a==null?void 0:a.daily_limit)??3," audit cases remaining today"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["easy","medium","hard","extreme"].map(O=>{var Q;return e.jsxs("button",{onClick:()=>ee(O),disabled:!a||(a.remaining_plays??0)<=0,className:`p-4 rounded-lg border-2 transition-all ${!a||(a.remaining_plays??0)<=0?"border-gray-700 bg-gray-800 text-gray-500 cursor-not-allowed":"border-emerald-500 bg-gray-800 text-white hover:bg-emerald-600 hover:border-emerald-400"}`,children:[e.jsx("div",{className:"text-lg font-semibold capitalize mb-1",children:O}),e.jsxs("div",{className:"text-xs text-gray-400",children:[O==="easy"&&"Income & Expenses",O==="medium"&&"Gross vs Net & Tax",O==="hard"&&"Budget Analysis",O==="extreme"&&"Financial Strategy"]}),e.jsxs("div",{className:"text-xs mt-1",children:["High: ",((Q=a==null?void 0:a.high_scores)==null?void 0:Q[O])??0]})]},O)})}),a&&(a.remaining_plays??0)<=0&&e.jsx("div",{className:"text-center text-gray-400 text-sm mt-4",children:"No audit cases remaining today. Try again tomorrow!"})]}),n==="playing"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-emerald-400"}),e.jsxs("span",{className:"text-lg font-bold",children:[p,"s"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yl,{className:"h-5 w-5 text-blue-400"}),e.jsx("span",{className:"text-lg font-bold",children:f})]}),w>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-lg font-bold",children:w})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Question ",T+1," / ",G]})]}),g&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[e.jsx("div",{className:"text-white text-lg mb-4 leading-relaxed",children:g.question}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx("input",{type:"number",value:b,onChange:O=>m(O.target.value),onKeyPress:de,placeholder:"Your answer (number)",className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-emerald-500 text-lg",autoFocus:!0,disabled:A})}),A&&e.jsx("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${I?"bg-green-900 border border-green-700":"bg-red-900 border border-red-700"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-6 w-6 text-green-400"}),e.jsxs("div",{className:"text-green-300",children:[e.jsx("div",{className:"font-semibold",children:"Correct! "}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-6 w-6 text-red-400"}),e.jsxs("div",{className:"text-red-300",children:[e.jsx("div",{className:"font-semibold",children:"Incorrect"}),e.jsxs("div",{className:"text-sm mt-1",children:["Correct answer: ",g.answer]}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]})}),N&&e.jsx("div",{className:"mt-2 text-center text-yellow-400 text-sm animate-pulse",children:N}),!A&&e.jsx("button",{onClick:te,disabled:!b.trim(),className:"w-full mt-4 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-700 disabled:text-gray-500",children:"Submit Answer"})]})]}),n==="results"&&C&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-16 w-16 text-emerald-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Audit Case Complete!"}),C.error&&e.jsx("div",{className:"bg-red-900 border border-red-700 text-red-300 p-3 rounded-lg mb-4",children:C.error})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:C.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Accuracy"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(C.accuracy),"%"]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Experience Points"}),e.jsxs("span",{className:"text-xl font-bold text-blue-400 flex items-center space-x-1",children:[e.jsx(Ws,{className:"h-5 w-5"}),e.jsxs("span",{children:["+",C.experience_points]})]})]}),C.new_level&&e.jsx("div",{className:"bg-green-900 border border-green-700 p-3 rounded-lg text-center",children:e.jsxs("div",{className:"text-green-300 font-semibold text-lg",children:[" Level Up! Level ",C.new_level]})}),C.isNewHighScore&&e.jsx("div",{className:"text-center text-emerald-400 font-semibold mt-2",children:" New High Score!"})]})]}),e.jsx("button",{onClick:ie,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Close"})]})]})}):null},Tj=[{question:"What comes next: 2, 4, 8, 16, ___?",answer:32,explanation:"Each term 2: 162 = 32"},{question:'If input = 5 and the rule is "2 + 1", what is the output?',answer:11,explanation:"52 + 1 = 11"},{question:"True or False: 7 is divisible by 3? (1=True, 0=False)",answer:0,explanation:"73 is not whole; False = 0"},{question:"What comes next: 3, 6, 9, 12, ___?",answer:15,explanation:"Add 3 each time: 12+3 = 15"},{question:"Rule: double the input. Input = 7. Output?",answer:14,explanation:"72 = 14"},{question:"True or False: 10 is divisible by 5? (1=True, 0=False)",answer:1,explanation:"105 = 2; True = 1"},{question:"What comes next: 1, 2, 4, 8, ___?",answer:16,explanation:"Each 2: 82 = 16"},{question:'Input = 4, rule "+3". Output?',answer:7,explanation:"4+3 = 7"},{question:"True or False: 9 is divisible by 3? (1=True, 0=False)",answer:1,explanation:"93 = 3; True = 1"},{question:"What comes next: 5, 10, 15, 20, ___?",answer:25,explanation:"Add 5: 20+5 = 25"},{question:"Rule: input  2. Input = 9. Output?",answer:7,explanation:"92 = 7"},{question:"True or False: 8 is divisible by 4? (1=True, 0=False)",answer:1,explanation:"84 = 2; True = 1"},{question:"What comes next: 1, 3, 5, 7, ___?",answer:9,explanation:"Odd numbers; next is 9"},{question:'Input = 6, rule "2  1". Output?',answer:11,explanation:"621 = 11"},{question:"True or False: 6 is divisible by 3? (1=True, 0=False)",answer:1,explanation:"63 = 2; True = 1"},{question:"What comes next: 10, 20, 30, 40, ___?",answer:50,explanation:"Add 10: 40+10 = 50"},{question:"Rule: input + 10. Input = 12. Output?",answer:22,explanation:"12+10 = 22"},{question:"True or False: 11 is divisible by 2? (1=True, 0=False)",answer:0,explanation:"112 is not whole; False = 0"},{question:"What comes next: 100, 90, 80, 70, ___?",answer:60,explanation:"Subtract 10: 7010 = 60"},{question:'Input = 3, rule "3 + 2". Output?',answer:11,explanation:"33+2 = 11"}],Aj=[{question:"If balance < R500 apply R50 fine, else no fine. Balance = R480. Final balance?",answer:430,explanation:"48050 = R430"},{question:"If number divisible by 3 add 5, else subtract 2. Input = 9. Output?",answer:14,explanation:"93 ok; 9+5 = 14"},{question:"If balance < R500 apply R50 fine. Balance = R600. Final balance?",answer:600,explanation:"No fine; 600"},{question:"If even add 4, if odd subtract 1. Input = 8. Output?",answer:12,explanation:"8 even; 8+4 = 12"},{question:"If balance < R500 apply R50 fine. Balance = R400. Final balance?",answer:350,explanation:"40050 = R350"},{question:"If divisible by 3 add 5, else subtract 2. Input = 7. Output?",answer:5,explanation:"7 not div by 3; 72 = 5"},{question:"If score  10 add 2, else add 0. Score = 12. New score?",answer:14,explanation:"1210; 12+2 = 14"},{question:"If x > 5 then x2, else x+5. x = 6. Output?",answer:12,explanation:"6>5; 62 = 12"},{question:"If balance < R500 apply R50 fine. Balance = R500. Final balance?",answer:500,explanation:"Not <500; no fine"},{question:"If divisible by 3 add 5, else subtract 2. Input = 12. Output?",answer:17,explanation:"123 ok; 12+5 = 17"},{question:"If even add 4, if odd subtract 1. Input = 7. Output?",answer:6,explanation:"7 odd; 71 = 6"},{question:"If balance < R300 apply R30 fine. Balance = R250. Final balance?",answer:220,explanation:"25030 = R220"},{question:"If divisible by 5 add 10, else subtract 3. Input = 15. Output?",answer:25,explanation:"155 ok; 15+10 = 25"},{question:"If x > 5 then x2, else x+5. x = 4. Output?",answer:9,explanation:"4 not >5; 4+5 = 9"},{question:"If score  10 add 2, else add 0. Score = 8. New score?",answer:8,explanation:"8<10; 8+0 = 8"},{question:"If balance < R500 apply R50 fine. Balance = R450. Final balance?",answer:400,explanation:"45050 = R400"},{question:"If divisible by 3 add 5, else subtract 2. Input = 6. Output?",answer:11,explanation:"63 ok; 6+5 = 11"},{question:"If n mod 2 = 0 then n/2, else n2. n = 10. Output?",answer:5,explanation:"10 even; 10/2 = 5"},{question:"If n mod 2 = 0 then n/2, else n2. n = 7. Output?",answer:14,explanation:"7 odd; 72 = 14"},{question:"If divisible by 5 add 10, else subtract 3. Input = 8. Output?",answer:5,explanation:"8 not div by 5; 83 = 5"}],Ej=[{question:"Program: multiply by 3, subtract 4, divide by 2. Input = 10. Output?",answer:13,explanation:"(1034)/2 = 26/2 = 13"},{question:"1,200 users; each server handles 150 users. How many servers required?",answer:8,explanation:"1200150 = 8"},{question:"Steps: add 5, multiply by 2, subtract 3. Input = 4. Output?",answer:15,explanation:"(4+5)23 = 183 = 15"},{question:"900 requests; each worker handles 75. How many workers?",answer:12,explanation:"90075 = 12"},{question:"Program: divide by 2, add 10, multiply by 3. Input = 20. Output?",answer:60,explanation:"(20/2+10)3 = 203 = 60"},{question:"2,000 items; batch size 125. How many batches?",answer:16,explanation:"2000125 = 16"},{question:"Steps: 2, +6, 2. Input = 8. Output?",answer:11,explanation:"(82+6)/2 = 22/2 = 11"},{question:"600 users; 50 per server. How many servers?",answer:12,explanation:"60050 = 12"},{question:"Program: subtract 2, multiply by 4, add 1. Input = 5. Output?",answer:13,explanation:"(52)4+1 = 12+1 = 13"},{question:"3,600 records; 120 per batch. How many batches?",answer:30,explanation:"3600120 = 30"},{question:"Steps: +3, 2, 5. Input = 6. Output?",answer:13,explanation:"(6+3)25 = 185 = 13"},{question:"500 tasks; 25 per worker. How many workers?",answer:20,explanation:"50025 = 20"},{question:"Program: 3, +1, 2. Input = 7. Output?",answer:11,explanation:"(73+1)/2 = 22/2 = 11"},{question:"1,440 minutes of data; 60 per slot. How many slots?",answer:24,explanation:"144060 = 24"},{question:"Steps: 4, 3, +2. Input = 10. Output?",answer:20,explanation:"(104)3+2 = 18+2 = 20"},{question:"2,500 users; 100 per server. How many servers?",answer:25,explanation:"2500100 = 25"},{question:"Program: 2, 5, 1. Input = 12. Output?",answer:29,explanation:"12/251 = 301 = 29"},{question:"800 items; 40 per box. How many boxes?",answer:20,explanation:"80040 = 20"},{question:"Steps: 4, 8, 2. Input = 6. Output?",answer:8,explanation:"(648)/2 = 16/2 = 8"},{question:"1,800 requests; 90 per handler. How many handlers?",answer:20,explanation:"180090 = 20"}],Lj=[{question:"App refreshes every 5 seconds. How many refreshes in 3 minutes?",answer:36,explanation:"3605 = 36"},{question:"Database: 25 records per page. 620 records. How many pages?",answer:25,explanation:"ceil(620/25) = 25"},{question:"Algorithm steps = n2. n = 50. How many steps?",answer:100,explanation:"502 = 100"},{question:"Poll every 10 seconds. How many polls in 5 minutes?",answer:30,explanation:"56010 = 30"},{question:"32 bytes per row. 800 rows. Total bytes?",answer:25600,explanation:"32800 = 25600"},{question:"Refresh every 4 seconds. How many refreshes in 2 minutes?",answer:30,explanation:"2604 = 30"},{question:"50 records per page. 1,237 records. How many pages?",answer:25,explanation:"ceil(1237/50) = 25"},{question:"Steps = n3. n = 40. How many steps?",answer:120,explanation:"403 = 120"},{question:"Cache clears every 15 seconds. How many clears in 1 minute?",answer:4,explanation:"6015 = 4"},{question:"20 items per page. 415 items. How many pages?",answer:21,explanation:"ceil(415/20) = 21"},{question:"App refreshes every 6 seconds. How many refreshes in 2 minutes?",answer:20,explanation:"2606 = 20"},{question:"100 records per page. 2,550 records. How many pages?",answer:26,explanation:"ceil(2550/100) = 26"},{question:"Algorithm: n steps. n = 10. How many steps?",answer:100,explanation:"10 = 100"},{question:"Sync every 30 seconds. How many syncs in 10 minutes?",answer:20,explanation:"106030 = 20"},{question:"40 records per page. 1,000 records. How many pages?",answer:25,explanation:"100040 = 25"},{question:"Steps = n4. n = 25. How many steps?",answer:100,explanation:"254 = 100"},{question:"Refresh every 8 seconds. How many refreshes in 4 minutes?",answer:30,explanation:"4608 = 30"},{question:"64 bytes per record. 500 records. Total bytes?",answer:32e3,explanation:"64500 = 32000"},{question:"Algorithm: 2^n steps. n = 5. How many steps? (evaluate 2^5)",answer:32,explanation:"2^5 = 32"},{question:"30 records per page. 733 records. How many pages?",answer:25,explanation:"ceil(733/30) = 25"}];function Hu(t){let s;switch(t){case"easy":s=Tj;break;case"medium":s=Aj;break;case"hard":s=Ej;break;case"extreme":s=Lj;break}return s[Math.floor(Math.random()*s.length)]}const Fj=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=d.useState("difficulty"),[i,c]=d.useState("easy"),[o,u]=d.useState(null),[p,y]=d.useState(60),[f,h]=d.useState(0),[g,j]=d.useState(null),[b,m]=d.useState(""),[x,v]=d.useState([]),[w,_]=d.useState(0),[R,S]=d.useState(0),[I,M]=d.useState(null),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(!1),[N,H]=d.useState(null),[T,F]=d.useState(0),G=5,U=["One answer per question!","Wait for the next problem!","No spam!","Slow down!"],ee=async O=>{var Q,B;try{c(O);const V=await Io.startGame({difficulty:O});u(V.data.session.id),l("playing"),y(60),h(0),v([]),_(0),S(0),m(""),F(0),j(Hu(O))}catch(V){console.error("Failed to start game:",V),alert(((B=(Q=V.response)==null?void 0:Q.data)==null?void 0:B.error)||"Failed to start build sprint. Please try again.")}},te=()=>{if(A){const B=U[Math.floor(Math.random()*U.length)];H(B),setTimeout(()=>H(null),1500);return}if(!g||!b.trim())return;const O=parseFloat(b.replace(/,/g,"")),Q=Math.abs(O-g.answer)<.01;if(M(Q),P(!0),v(B=>[...B,Q]),F(B=>B+1),Q?(_(B=>B+1),S(B=>Math.max(B,w+1)),h(B=>B+1)):_(0),T+1>=G){setTimeout(()=>K(),1e3);return}setTimeout(()=>{m(""),j(Hu(i)),M(null),P(!1)},1e3)},de=O=>{O.key==="Enter"&&te()},K=d.useCallback(async()=>{var O,Q;if(!(!o||E)){W(!0),l("results");try{const B=await Io.submitGame({session_id:o,score:f,correct_answers:f,total_problems:x.length,answer_sequence:x});k({score:f,correctAnswers:f,totalProblems:x.length,earnings:B.data.earnings,experience_points:B.data.experience_points,new_level:B.data.new_level,isNewHighScore:B.data.isNewHighScore,accuracy:x.length>0?f/x.length*100:0}),r()}catch(B){k({score:f,correctAnswers:f,totalProblems:x.length,earnings:0,experience_points:0,new_level:null,isNewHighScore:!1,accuracy:x.length>0?f/x.length*100:0,error:((Q=(O=B.response)==null?void 0:O.data)==null?void 0:Q.error)||"Failed to submit build sprint results"})}finally{W(!1)}}},[o,f,x,E,r]);d.useEffect(()=>{if(n==="playing"&&p>0&&T<G){const O=setTimeout(()=>y(Q=>Q-1),1e3);return()=>clearTimeout(O)}else n==="playing"&&(p===0||T>=G)&&K()},[n,p,T,K]);const se=()=>{l("difficulty"),u(null),y(60),h(0),j(null),m(""),v([]),_(0),S(0),M(null),P(!1),k(null),W(!1),H(null),F(0)},ie=()=>{se(),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-violet-600 p-6 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Nb,{className:"h-6 w-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Logic & Systems Challenge"})]}),e.jsx("button",{onClick:ie,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),n==="difficulty"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Solve coding-style logic problems to build tools for the town"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[(a==null?void 0:a.remaining_plays)??0," / ",(a==null?void 0:a.daily_limit)??3," build sprints remaining today"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["easy","medium","hard","extreme"].map(O=>{var Q;return e.jsxs("button",{onClick:()=>ee(O),disabled:!a||(a.remaining_plays??0)<=0,className:`p-4 rounded-lg border-2 transition-all ${!a||(a.remaining_plays??0)<=0?"border-gray-700 bg-gray-800 text-gray-500 cursor-not-allowed":"border-blue-500 bg-gray-800 text-white hover:bg-blue-600 hover:border-blue-400"}`,children:[e.jsx("div",{className:"text-lg font-semibold capitalize mb-1",children:O}),e.jsxs("div",{className:"text-xs text-gray-400",children:[O==="easy"&&"Pattern & Sequence",O==="medium"&&"Conditional Logic",O==="hard"&&"Algorithmic Thinking",O==="extreme"&&"Systems & Performance"]}),e.jsxs("div",{className:"text-xs mt-1",children:["High: ",((Q=a==null?void 0:a.high_scores)==null?void 0:Q[O])??0]})]},O)})}),a&&(a.remaining_plays??0)<=0&&e.jsx("div",{className:"text-center text-gray-400 text-sm mt-4",children:"No build sprints remaining today. Try again tomorrow!"})]}),n==="playing"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-blue-400"}),e.jsxs("span",{className:"text-lg font-bold",children:[p,"s"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yl,{className:"h-5 w-5 text-violet-400"}),e.jsx("span",{className:"text-lg font-bold",children:f})]}),w>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-lg font-bold",children:w})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Problem ",T+1," / ",G]})]}),g&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[e.jsx("div",{className:"text-white text-lg mb-4 leading-relaxed",children:g.question}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx("input",{type:"number",value:b,onChange:O=>m(O.target.value),onKeyPress:de,placeholder:"Your answer (number)",className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 text-lg",autoFocus:!0,disabled:A})}),A&&e.jsx("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${I?"bg-green-900 border border-green-700":"bg-red-900 border border-red-700"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-6 w-6 text-green-400"}),e.jsxs("div",{className:"text-green-300",children:[e.jsx("div",{className:"font-semibold",children:"Correct! "}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-6 w-6 text-red-400"}),e.jsxs("div",{className:"text-red-300",children:[e.jsx("div",{className:"font-semibold",children:"Incorrect"}),e.jsxs("div",{className:"text-sm mt-1",children:["Correct answer: ",g.answer]}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]})}),N&&e.jsx("div",{className:"mt-2 text-center text-yellow-400 text-sm animate-pulse",children:N}),!A&&e.jsx("button",{onClick:te,disabled:!b.trim(),className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-700 disabled:text-gray-500",children:"Submit Answer"})]})]}),n==="results"&&C&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-16 w-16 text-blue-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Build Sprint Complete!"}),C.error&&e.jsx("div",{className:"bg-red-900 border border-red-700 text-red-300 p-3 rounded-lg mb-4",children:C.error})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:C.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Accuracy"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(C.accuracy),"%"]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Experience Points"}),e.jsxs("span",{className:"text-xl font-bold text-blue-400 flex items-center space-x-1",children:[e.jsx(Ws,{className:"h-5 w-5"}),e.jsxs("span",{children:["+",C.experience_points]})]})]}),C.new_level&&e.jsx("div",{className:"bg-green-900 border border-green-700 p-3 rounded-lg text-center",children:e.jsxs("div",{className:"text-green-300 font-semibold text-lg",children:[" Level Up! Level ",C.new_level]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Earnings"}),e.jsxs("span",{className:"text-xl font-bold text-green-400",children:["R",C.earnings.toFixed(2)]})]}),C.isNewHighScore&&e.jsx("div",{className:"text-center text-blue-400 font-semibold mt-2",children:" New High Score!"})]})]}),e.jsx("button",{onClick:ie,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Close"})]})]})}):null},Mj=[{question:"A caf sells 40 drinks at R25 each. What is total revenue?",answer:1e3,explanation:"40  25 = R1,000"},{question:"Revenue = R5,000. Costs = R3,200. Profit?",answer:1800,explanation:"5000  3200 = R1,800"},{question:"A shop sells 30 items at R50 each. Total revenue?",answer:1500,explanation:"30  50 = R1,500"},{question:"Revenue R8,000. Costs R4,500. Profit?",answer:3500,explanation:"8000  4500 = R3,500"},{question:"60 tickets at R75 each. Total revenue?",answer:4500,explanation:"60  75 = R4,500"},{question:"Revenue R6,200. Costs R3,800. Profit?",answer:2400,explanation:"6200  3800 = R2,400"},{question:"25 products at R80 each. Total revenue?",answer:2e3,explanation:"25  80 = R2,000"},{question:"Revenue R9,000. Costs R5,200. Profit?",answer:3800,explanation:"9000  5200 = R3,800"},{question:"50 units at R40 each. Total revenue?",answer:2e3,explanation:"50  40 = R2,000"},{question:"Revenue R4,500. Costs R2,100. Profit?",answer:2400,explanation:"4500  2100 = R2,400"},{question:"100 items at R15 each. Total revenue?",answer:1500,explanation:"100  15 = R1,500"},{question:"Revenue R7,500. Costs R4,800. Profit?",answer:2700,explanation:"7500  4800 = R2,700"},{question:"35 drinks at R30 each. Total revenue?",answer:1050,explanation:"35  30 = R1,050"},{question:"Revenue R11,000. Costs R6,500. Profit?",answer:4500,explanation:"11000  6500 = R4,500"},{question:"20 cakes at R45 each. Total revenue?",answer:900,explanation:"20  45 = R900"},{question:"Revenue R3,800. Costs R2,200. Profit?",answer:1600,explanation:"3800  2200 = R1,600"},{question:"80 units at R12 each. Total revenue?",answer:960,explanation:"80  12 = R960"},{question:"Revenue R5,500. Costs R3,100. Profit?",answer:2400,explanation:"5500  3100 = R2,400"},{question:"45 items at R22 each. Total revenue?",answer:990,explanation:"45  22 = R990"},{question:"Revenue R12,000. Costs R7,400. Profit?",answer:4600,explanation:"12000  7400 = R4,600"}],Dj=[{question:"Last week: 200 customers. This week: 260 customers. What is the percentage increase?",answer:30,explanation:"(260200)/200  100 = 30%"},{question:"Product costs R100. You apply a 20% discount. What is the new price?",answer:80,explanation:"100  0.80 = R80"},{question:"You spend R2,000 on advertising. It generates R3,000 extra revenue. What is profit from the campaign?",answer:1e3,explanation:"3000  2000 = R1,000"},{question:"Sales were 150, now 195. Percentage increase?",answer:30,explanation:"(195150)/150  100 = 30%"},{question:"Price R80. 15% discount. New price?",answer:68,explanation:"80  0.85 = R68"},{question:"Ad spend R1,500. Revenue from campaign R2,400. Profit from campaign?",answer:900,explanation:"2400  1500 = R900"},{question:"Last month 400 sales. This month 520. Percentage increase?",answer:30,explanation:"(520400)/400  100 = 30%"},{question:"Product R120. 25% discount. New price?",answer:90,explanation:"120  0.75 = R90"},{question:"Ad spend R3,000. Campaign revenue R4,500. Profit?",answer:1500,explanation:"4500  3000 = R1,500"},{question:"Customers 80 last week, 100 this week. Percentage increase?",answer:25,explanation:"(10080)/80  100 = 25%"},{question:"Price R60. 10% discount. New price?",answer:54,explanation:"60  0.90 = R54"},{question:"Spend R2,500 on ads. Revenue R3,800. Profit from campaign?",answer:1300,explanation:"3800  2500 = R1,300"},{question:"Sales 300  360. Percentage increase?",answer:20,explanation:"(360300)/300  100 = 20%"},{question:"Product R200. 30% discount. New price?",answer:140,explanation:"200  0.70 = R140"},{question:"Ad R1,800. Revenue R2,700. Profit?",answer:900,explanation:"2700  1800 = R900"},{question:"Customers 120  150. Percentage increase?",answer:25,explanation:"(150120)/120  100 = 25%"},{question:"Price R90. 20% off. New price?",answer:72,explanation:"90  0.80 = R72"},{question:"Spend R4,000. Revenue R6,200. Campaign profit?",answer:2200,explanation:"6200  4000 = R2,200"},{question:"Sales 250  325. Percentage increase?",answer:30,explanation:"(325250)/250  100 = 30%"},{question:"Product R150. 15% discount. New price?",answer:127.5,explanation:"150  0.85 = R127.50"}],$j=[{question:"Ad cost = R5,000. Revenue generated = R8,000. What is ROI? (ROI = Profit  Cost  100)",answer:60,explanation:"Profit 3000, 3000/5000100 = 60%"},{question:"Ad reaches 1,000 people. 5% buy. Product price = R200. Total revenue?",answer:1e4,explanation:"10000.05200 = R10,000"},{question:"Cost R4,000. Revenue R6,500. What is ROI (%)?",answer:62.5,explanation:"Profit 2500, 2500/4000100 = 62.5%"},{question:"Reach 2,000. 4% convert. Price R150. Total revenue?",answer:12e3,explanation:"20000.04150 = R12,000"},{question:"Ad cost R6,000. Revenue R9,600. ROI (%)?",answer:60,explanation:"3600/6000100 = 60%"},{question:"Reach 500. 8% buy. Price R100. Revenue?",answer:4e3,explanation:"5000.08100 = R4,000"},{question:"Cost R3,000. Revenue R5,400. ROI (%)?",answer:80,explanation:"2400/3000100 = 80%"},{question:"Reach 1,500. 6% buy. Price R80. Revenue?",answer:7200,explanation:"15000.0680 = R7,200"},{question:"Ad R7,000. Revenue R11,200. ROI (%)?",answer:60,explanation:"4200/7000100 = 60%"},{question:"Reach 800. 5% convert. Price R250. Revenue?",answer:1e4,explanation:"8000.05250 = R10,000"},{question:"Cost R2,500. Revenue R4,250. ROI (%)?",answer:70,explanation:"1750/2500100 = 70%"},{question:"Reach 3,000. 3% buy. Price R120. Revenue?",answer:10800,explanation:"30000.03120 = R10,800"},{question:"Ad R8,000. Revenue R12,000. ROI (%)?",answer:50,explanation:"4000/8000100 = 50%"},{question:"Reach 600. 10% buy. Price R50. Revenue?",answer:3e3,explanation:"6000.1050 = R3,000"},{question:"Cost R4,500. Revenue R7,650. ROI (%)?",answer:70,explanation:"3150/4500100 = 70%"},{question:"Reach 1,200. 5% convert. Price R180. Revenue?",answer:10800,explanation:"12000.05180 = R10,800"},{question:"Ad R5,500. Revenue R8,800. ROI (%)?",answer:60,explanation:"3300/5500100 = 60%"},{question:"Reach 900. 7% buy. Price R90. Revenue?",answer:5670,explanation:"9000.0790 = R5,670"},{question:"Cost R6,500. Revenue R10,400. ROI (%)?",answer:60,explanation:"3900/6500100 = 60%"},{question:"Reach 2,500. 4% buy. Price R200. Revenue?",answer:2e4,explanation:"25000.04200 = R20,000"}],Oj=[{question:"Campaign A: Cost R4,000, Revenue R7,000. Campaign B: Cost R6,000, Revenue R10,000. What is the ROI of the campaign with the higher ROI? (answer as percentage)",answer:75,explanation:"A: 3000/4000=75%. B: 4000/6000=66.7%. A has higher ROI = 75%"},{question:"Budget R10,000. R2,000 per platform. Each platform returns 150 customers. Profit per customer R30. How many platforms to maximise profit? (max 5)",answer:5,explanation:"5 platforms = 52000=10000, 515030=R22,500 revenue, profit R12,500"},{question:"Campaign X: Cost R3,000, Revenue R5,400. Campaign Y: Cost R5,000, Revenue R8,000. What is the higher ROI (%)?",answer:80,explanation:"X: 2400/3000=80%. Y: 3000/5000=60%. Higher = 80%"},{question:"Budget R8,000. R1,600 per channel. Each channel brings 80 customers. Profit R40 per customer. How many channels to use? (max 5)",answer:5,explanation:"51600=8000, 58040=R16,000 revenue, net R8,000"},{question:"A: Cost R2,000, Revenue R3,600. B: Cost R4,000, Revenue R6,400. Higher ROI (%)?",answer:80,explanation:"A: 1600/2000=80%. B: 2400/4000=60%. Answer 80"},{question:"Budget R6,000. R1,500 per campaign. Each campaign gains 100 sales at R25 profit each. How many campaigns? (max 4)",answer:4,explanation:"4 campaigns: cost 6000, 410025=R10,000 profit"},{question:"Campaign P: R5,000 cost, R8,500 revenue. Q: R7,000 cost, R11,200 revenue. Which has higher ROI? Give the higher ROI (%).",answer:70,explanation:"P: 3500/5000=70%. Q: 4200/7000=60%. Higher 70%"},{question:"R12,000 budget. R3,000 per platform. Each: 200 customers, R35 profit each. How many platforms? (max 4)",answer:4,explanation:"43000=12000, 420035=R28,000"},{question:"M: Cost R4,000, Revenue R7,200. N: Cost R6,000, Revenue R9,600. Higher ROI (%)?",answer:80,explanation:"M: 3200/4000=80%. N: 3600/6000=60%. 80%"},{question:"Budget R9,000. R2,250 per option. Each option: 90 customers, R50 profit. How many options? (max 4)",answer:4,explanation:"42250=9000, 49050=R18,000"},{question:"Campaign A: R3,500 cost, R6,300 revenue. B: R5,500 cost, R8,800 revenue. Higher ROI (%)?",answer:80,explanation:"A: 2800/3500=80%. B: 3300/5500=60%. 80%"},{question:"Budget R15,000. R5,000 per campaign. Each: 120 customers, R40 profit. How many campaigns? (max 3)",answer:3,explanation:"35000=15000, 312040=R14,400"},{question:"X: R2,500 cost, R4,500 revenue. Y: R4,000 cost, R6,800 revenue. Higher ROI (%)?",answer:80,explanation:"X: 2000/2500=80%. Y: 2800/4000=70%. 80%"},{question:"Budget R7,000. R1,400 per channel. Each: 70 customers, R30 profit. How many channels? (max 5)",answer:5,explanation:"51400=7000, 57030=R10,500"},{question:"Campaign C: R6,000 cost, R10,200 revenue. D: R8,000 cost, R12,800 revenue. Higher ROI (%)?",answer:70,explanation:"C: 4200/6000=70%. D: 4800/8000=60%. 70%"},{question:"R11,000 budget. R2,200 per platform. Each: 110 customers, R45 profit. How many platforms? (max 5)",answer:5,explanation:"52200=11000, 511045=R24,750"},{question:"E: R4,500 cost, R7,650 revenue. F: R7,500 cost, R12,000 revenue. Higher ROI (%)?",answer:70,explanation:"E: 3150/4500=70%. F: 4500/7500=60%. 70%"},{question:"Budget R5,000. R1,000 per campaign. Each: 50 customers, R20 profit. How many campaigns? (max 5)",answer:5,explanation:"51000=5000, 55020=R5,000"},{question:"G: R5,500 cost, R9,350 revenue. H: R9,000 cost, R14,400 revenue. Higher ROI (%)?",answer:70,explanation:"G: 3850/5500=70%. H: 5400/9000=60%. 70%"},{question:"R14,000 budget. R3,500 per option. Each: 140 customers, R25 profit. How many options? (max 4)",answer:4,explanation:"43500=14000, 414025=R14,000"}];function Wu(t){let s;switch(t){case"easy":s=Mj;break;case"medium":s=Dj;break;case"hard":s=$j;break;case"extreme":s=Oj;break}return s[Math.floor(Math.random()*s.length)]}const Ij=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=d.useState("difficulty"),[i,c]=d.useState("easy"),[o,u]=d.useState(null),[p,y]=d.useState(60),[f,h]=d.useState(0),[g,j]=d.useState(null),[b,m]=d.useState(""),[x,v]=d.useState([]),[w,_]=d.useState(0),[R,S]=d.useState(0),[I,M]=d.useState(null),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(!1),[N,H]=d.useState(null),[T,F]=d.useState(0),G=5,U=["One answer per question!","Wait for the next problem!","No spam!","Slow down!"],ee=async O=>{var Q,B;try{c(O);const V=await qo.startGame({difficulty:O});u(V.data.session.id),l("playing"),y(60),h(0),v([]),_(0),S(0),m(""),F(0),j(Wu(O))}catch(V){console.error("Failed to start game:",V),alert(((B=(Q=V.response)==null?void 0:Q.data)==null?void 0:B.error)||"Failed to start campaign. Please try again.")}},te=()=>{if(A){const B=U[Math.floor(Math.random()*U.length)];H(B),setTimeout(()=>H(null),1500);return}if(!g||!b.trim())return;const O=parseFloat(b.replace(/,/g,"")),Q=Math.abs(O-g.answer)<.01;if(M(Q),P(!0),v(B=>[...B,Q]),F(B=>B+1),Q?(_(B=>B+1),S(B=>Math.max(B,w+1)),h(B=>B+1)):_(0),T+1>=G){setTimeout(()=>K(),1e3);return}setTimeout(()=>{m(""),j(Wu(i)),M(null),P(!1)},1e3)},de=O=>{O.key==="Enter"&&te()},K=d.useCallback(async()=>{var O,Q;if(!(!o||E)){W(!0),l("results");try{const B=await qo.submitGame({session_id:o,score:f,correct_answers:f,total_problems:x.length,answer_sequence:x});k({score:f,correctAnswers:f,totalProblems:x.length,earnings:B.data.earnings,experience_points:B.data.experience_points,new_level:B.data.new_level,isNewHighScore:B.data.isNewHighScore,accuracy:x.length>0?f/x.length*100:0}),r()}catch(B){k({score:f,correctAnswers:f,totalProblems:x.length,earnings:0,experience_points:0,new_level:null,isNewHighScore:!1,accuracy:x.length>0?f/x.length*100:0,error:((Q=(O=B.response)==null?void 0:O.data)==null?void 0:Q.error)||"Failed to submit campaign results"})}finally{W(!1)}}},[o,f,x,E,r]);d.useEffect(()=>{if(n==="playing"&&p>0&&T<G){const O=setTimeout(()=>y(Q=>Q-1),1e3);return()=>clearTimeout(O)}else n==="playing"&&(p===0||T>=G)&&K()},[n,p,T,K]);const se=()=>{l("difficulty"),u(null),y(60),h(0),j(null),m(""),v([]),_(0),S(0),M(null),P(!1),k(null),W(!1),H(null),F(0)},ie=()=>{se(),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-pink-600 p-6 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K0,{className:"h-6 w-6 text-white"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Campaign Strategy Challenge"})]}),e.jsx("button",{onClick:ie,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),n==="difficulty"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-300 mb-2",children:"Answer campaign maths to run successful campaigns"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[(a==null?void 0:a.remaining_plays)??0," / ",(a==null?void 0:a.daily_limit)??3," campaigns remaining today"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["easy","medium","hard","extreme"].map(O=>{var Q;return e.jsxs("button",{onClick:()=>ee(O),disabled:!a||(a.remaining_plays??0)<=0,className:`p-4 rounded-lg border-2 transition-all ${!a||(a.remaining_plays??0)<=0?"border-gray-700 bg-gray-800 text-gray-500 cursor-not-allowed":"border-rose-500 bg-gray-800 text-white hover:bg-rose-600 hover:border-rose-400"}`,children:[e.jsx("div",{className:"text-lg font-semibold capitalize mb-1",children:O}),e.jsxs("div",{className:"text-xs text-gray-400",children:[O==="easy"&&"Sales & Revenue",O==="medium"&&"Percentage & Growth",O==="hard"&&"ROI",O==="extreme"&&"Strategy & Optimisation"]}),e.jsxs("div",{className:"text-xs mt-1",children:["High: ",((Q=a==null?void 0:a.high_scores)==null?void 0:Q[O])??0]})]},O)})}),a&&(a.remaining_plays??0)<=0&&e.jsx("div",{className:"text-center text-gray-400 text-sm mt-4",children:"No campaigns remaining today. Try again tomorrow!"})]}),n==="playing"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-rose-400"}),e.jsxs("span",{className:"text-lg font-bold",children:[p,"s"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yl,{className:"h-5 w-5 text-pink-400"}),e.jsx("span",{className:"text-lg font-bold",children:f})]}),w>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-5 w-5 text-yellow-400"}),e.jsx("span",{className:"text-lg font-bold",children:w})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Question ",T+1," / ",G]})]}),g&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[e.jsx("div",{className:"text-white text-lg mb-4 leading-relaxed",children:g.question}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx("input",{type:"number",value:b,onChange:O=>m(O.target.value),onKeyPress:de,placeholder:"Your answer (number)",className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-rose-500 text-lg",autoFocus:!0,disabled:A})}),A&&e.jsx("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${I?"bg-green-900 border border-green-700":"bg-red-900 border border-red-700"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-6 w-6 text-green-400"}),e.jsxs("div",{className:"text-green-300",children:[e.jsx("div",{className:"font-semibold",children:"Correct! "}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-6 w-6 text-red-400"}),e.jsxs("div",{className:"text-red-300",children:[e.jsx("div",{className:"font-semibold",children:"Incorrect"}),e.jsxs("div",{className:"text-sm mt-1",children:["Correct answer: ",g.answer]}),g.explanation&&e.jsx("div",{className:"text-sm mt-1",children:g.explanation})]})]})}),N&&e.jsx("div",{className:"mt-2 text-center text-yellow-400 text-sm animate-pulse",children:N}),!A&&e.jsx("button",{onClick:te,disabled:!b.trim(),className:"w-full mt-4 bg-rose-600 hover:bg-rose-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:bg-gray-700 disabled:text-gray-500",children:"Submit Answer"})]})]}),n==="results"&&C&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-16 w-16 text-rose-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Campaign Complete!"}),C.error&&e.jsx("div",{className:"bg-red-900 border border-red-700 text-red-300 p-3 rounded-lg mb-4",children:C.error})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:C.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Accuracy"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(C.accuracy),"%"]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Experience Points"}),e.jsxs("span",{className:"text-xl font-bold text-rose-400 flex items-center space-x-1",children:[e.jsx(Ws,{className:"h-5 w-5"}),e.jsxs("span",{children:["+",C.experience_points]})]})]}),C.new_level&&e.jsx("div",{className:"bg-green-900 border border-green-700 p-3 rounded-lg text-center",children:e.jsxs("div",{className:"text-green-300 font-semibold text-lg",children:[" Level Up! Level ",C.new_level]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Earnings"}),e.jsxs("span",{className:"text-xl font-bold text-green-400",children:["R",C.earnings.toFixed(2)]})]}),C.isNewHighScore&&e.jsx("div",{className:"text-center text-rose-400 font-semibold mt-2",children:" New High Score!"})]})]}),e.jsx("button",{onClick:ie,className:"w-full bg-rose-600 hover:bg-rose-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Close"})]})]})}):null},qj=()=>{var U,ee,te,de,K,se,ie,O,Q,B,V,ue,$,q,Z,ne,le,D,ge,X,oe;const{jobId:t}=Ro(),s=br(),{user:r}=Le(),[a,n]=d.useState(null),[l,i]=d.useState(!0),[c,o]=d.useState(null),[u,p]=d.useState(null),[y,f]=d.useState(!1),[h,g]=d.useState(null),[j,b]=d.useState(!1),[m,x]=d.useState(null),[v,w]=d.useState(!1),[_,R]=d.useState(null),[S,I]=d.useState(!1);d.useEffect(()=>{t&&k()},[t]),d.useEffect(()=>{var Y;r&&((Y=a==null?void 0:a.name)==null?void 0:Y.toLowerCase())==="architect"&&M()},[r,a]),d.useEffect(()=>{var Y;r&&((Y=a==null?void 0:a.name)==null?void 0:Y.toLowerCase().trim())==="chartered accountant"&&A()},[r,a]),d.useEffect(()=>{var Y;r&&((Y=a==null?void 0:a.name)==null?void 0:Y.toLowerCase().trim())==="software engineer"&&P()},[r,a]),d.useEffect(()=>{var Y;r&&((Y=a==null?void 0:a.name)==null?void 0:Y.toLowerCase().trim())==="marketing manager"&&C()},[r,a]);const M=async()=>{var Y,he;try{const fe=await $o.getStatus();p(fe.data)}catch(fe){console.log("Architect game status not available:",(he=(Y=fe.response)==null?void 0:Y.data)==null?void 0:he.error)}},A=async()=>{var Y,he;try{const fe=await Oo.getStatus();g(fe.data)}catch(fe){console.log("Accountant game status not available:",(he=(Y=fe.response)==null?void 0:Y.data)==null?void 0:he.error)}},P=async()=>{var Y,he;try{const fe=await Io.getStatus();x(fe.data)}catch(fe){console.log("Software engineer game status not available:",(he=(Y=fe.response)==null?void 0:Y.data)==null?void 0:he.error)}},C=async()=>{var Y,he;try{const fe=await qo.getStatus();R(fe.data)}catch(fe){console.log("Marketing manager game status not available:",(he=(Y=fe.response)==null?void 0:Y.data)==null?void 0:he.error)}},k=async()=>{var Y,he;try{i(!0),o(null);const fe=await pt.getJob(parseInt(t));n(fe.data)}catch(fe){o(((he=(Y=fe.response)==null?void 0:Y.data)==null?void 0:he.error)||"Failed to load job details")}finally{i(!1)}},E=Y=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Y),N=(()=>{if(!a)return null;const Y=a.base_salary||2e3,fe=1+(((r==null?void 0:r.job_level)||1)-1)*.7222,At=a.is_contractual?1.5:1;return Y*fe*At})(),H=(r==null?void 0:r.job_level)||1,T=(r==null?void 0:r.job_experience_points)||0,F=(a==null?void 0:a.base_salary)||2e3;if(l)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});if(c||!a)return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx(ke,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600",children:c||"Job not found"})]})]}),e.jsxs("button",{onClick:()=>s(-1),className:"mt-4 flex items-center space-x-2 text-primary-600 hover:text-primary-700",children:[e.jsx(zo,{className:"h-4 w-4"}),e.jsx("span",{children:"Go Back"})]})]});const G=((U=a.description)==null?void 0:U.split(`
`).filter(Y=>Y.trim()))||[];return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(zo,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"h-6 w-6 text-primary-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Job Details"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"border-l-4 border-amber-500 pl-4 py-3 bg-amber-50 rounded-r-lg mb-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-2xl text-gray-900 flex items-center gap-2 mb-2",children:[e.jsx(Ws,{className:"h-6 w-6 text-amber-600"}),a.name]}),a.company_name&&e.jsxs("div",{className:"flex items-center text-gray-600 mb-1",children:[e.jsx(Ot,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-lg",children:a.company_name})]}),a.location&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:a.location})]})]})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Level"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["Level ",H]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[T," Experience Points"]})]})]}),H<10&&(()=>{const Y=Jc(H,T);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Progress to Level ",H+1]}),e.jsxs("span",{children:[Y.current," / ",Y.needed," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${Y.percentage}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Y.needed-Y.current," XP needed for next level"]})]})})(),H>=10&&e.jsx("div",{className:"text-xs text-green-600 font-medium mt-2",children:"Maximum level reached! "})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Salary per Period"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:N?E(N):"N/A"}),a.is_contractual&&e.jsx("div",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"Contractual Job"})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Salary Progression"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:[1,2,3,4,5,6,7,8,9,10].map(Y=>{const he=1+(Y-1)*.7222,fe=a.is_contractual?1.5:1,At=F*he*fe,Et=Y===H;return e.jsxs("div",{className:`bg-white rounded p-2 border ${Et?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:[e.jsxs("div",{className:`font-semibold ${Et?"text-primary-700":"text-gray-700"}`,children:["L",Y," ",Et&&""]}),e.jsx("div",{className:`font-medium ${Et?"text-primary-600":"text-gray-600"}`,children:E(At)})]},Y)})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Your salary increases as you level up. Focus on doing your job well to earn more!"})]}),a.description&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(xn,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Description"})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:a.description})})]}),G.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Xa,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Responsibilities"})]}),e.jsx("ul",{className:"space-y-3",children:G.map((Y,he)=>e.jsxs("li",{className:"flex items-start text-gray-700",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-amber-400 mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{className:"leading-relaxed",children:Y})]},he))})]}),(()=>{const Y=kl(a.requirements);return Y?e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:Y})]}):null})(),((ee=a.name)==null?void 0:ee.toLowerCase().trim())==="software engineer"&&e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-violet-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-blue-600"}),"Logic & Systems Challenge"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete build sprints (5 problems each) to earn XP and money."})]}),e.jsxs("button",{onClick:()=>w(!0),disabled:!m||(m.remaining_plays??0)<=0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Build Sprint"})]})]}),m&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Remaining Today"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[m.remaining_plays," / ",m.daily_limit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Easy High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((te=m.high_scores)==null?void 0:te.easy)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Medium High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((de=m.high_scores)==null?void 0:de.medium)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Hard High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((K=m.high_scores)==null?void 0:K.hard)??0})]})]})]})}),((se=a.name)==null?void 0:se.toLowerCase().trim())==="marketing manager"&&e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-6 border border-rose-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-rose-600"}),"Campaign Strategy Challenge"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete campaigns (5 questions each) to earn XP and money."})]}),e.jsxs("button",{onClick:()=>I(!0),disabled:!_||(_.remaining_plays??0)<=0,className:"bg-rose-600 hover:bg-rose-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Campaign"})]})]}),_&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Remaining Today"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[_.remaining_plays," / ",_.daily_limit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Easy High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((ie=_.high_scores)==null?void 0:ie.easy)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Medium High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((O=_.high_scores)==null?void 0:O.medium)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Hard High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((Q=_.high_scores)==null?void 0:Q.hard)??0})]})]})]})}),((B=a.name)==null?void 0:B.toLowerCase().trim())==="chartered accountant"&&e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-6 border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-emerald-600"}),"Financial Audit Challenges"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Solve audit cases (5 questions each) to earn XP."})]}),e.jsxs("button",{onClick:()=>b(!0),disabled:!h||(h.remaining_plays??0)<=0,className:"bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Audit Case"})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Remaining Today"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[h.remaining_plays," / ",h.daily_limit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Easy High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((V=h.high_scores)==null?void 0:V.easy)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Medium High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((ue=h.high_scores)==null?void 0:ue.medium)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Hard High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(($=h.high_scores)==null?void 0:$.hard)??0})]})]})]})}),((q=a.name)==null?void 0:q.toLowerCase())==="architect"&&e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-6 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1 flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-amber-600"}),"Design Approval Challenges"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Solve design calculations to earn experience points and money"})]}),e.jsxs("button",{onClick:()=>f(!0),disabled:!u||(u.remaining_plays??0)<=0,className:"bg-amber-600 hover:bg-amber-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(Mr,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Review"})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Remaining Today"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[u.remaining_plays," / ",u.daily_limit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Easy High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((Z=u.high_scores)==null?void 0:Z.easy)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Medium High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((ne=u.high_scores)==null?void 0:ne.medium)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Hard High Score"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:((le=u.high_scores)==null?void 0:le.hard)??0})]})]})]})})]}),((D=a.name)==null?void 0:D.toLowerCase())==="architect"&&e.jsx(Sj,{isOpen:y,onClose:()=>{f(!1),M(),window.location.reload()},onGameComplete:()=>M(),gameStatus:u}),((ge=a.name)==null?void 0:ge.toLowerCase().trim())==="chartered accountant"&&e.jsx(Pj,{isOpen:j,onClose:()=>{b(!1),A(),window.location.reload()},onGameComplete:()=>A(),gameStatus:h}),((X=a.name)==null?void 0:X.toLowerCase().trim())==="software engineer"&&e.jsx(Fj,{isOpen:v,onClose:()=>{w(!1),P(),window.location.reload()},onGameComplete:()=>P(),gameStatus:m}),((oe=a.name)==null?void 0:oe.toLowerCase().trim())==="marketing manager"&&e.jsx(Ij,{isOpen:S,onClose:()=>{I(!1),C(),window.location.reload()},onGameComplete:()=>C(),gameStatus:_})]})},zj=()=>{const{plugins:t,loading:s}=rt(),r=t.find(a=>a.route_path==="/news");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Town News"}),e.jsx("p",{className:"text-primary-100",children:"Local News & Updates"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Y0,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Town News"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Local news and updates will be available here soon."})]})]})},Bj=()=>{const{plugins:t,loading:s}=rt(),r=t.find(a=>a.route_path==="/government");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Government"}),e.jsx("p",{className:"text-primary-100",children:"Town Government Services"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(H0,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Government Services"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Government services and information will be available here soon."})]})]})},Uj=()=>{const{plugins:t,loading:s}=rt(),{user:r}=Le(),{currentTownClass:a}=ls(),n=t.find(q=>q.route_path==="/tenders"),l=(r==null?void 0:r.role)==="teacher",[i,c]=d.useState([]),[o,u]=d.useState(!0),[p,y]=d.useState(""),[f,h]=d.useState(""),[g,j]=d.useState(!1),[b,m]=d.useState(!1),[x,v]=d.useState({name:"",description:"",value:""}),[w,_]=d.useState(!1),[R,S]=d.useState(null),[I,M]=d.useState([]),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(null),[N,H]=d.useState(!1),[T,F]=d.useState(null),[G,U]=d.useState(!1),ee=async()=>{var q,Z;try{u(!0),y("");const ne=l&&a||void 0,le=await Xs.getTenders(ne);c(le.data)}catch(ne){y(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Failed to load tenders")}finally{u(!1)}};if(d.useEffect(()=>{s||!n||!n.enabled||l&&!a||ee()},[l,a,s,n]),s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!n||!n.enabled)return e.jsx(qe,{to:"/",replace:!0});const te=q=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(q),de=q=>{switch(q){case"open":return"bg-emerald-100 text-emerald-800";case"awarded":return"bg-blue-100 text-blue-800";case"closed":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},K=q=>{switch(q){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-emerald-100 text-emerald-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}},se=async q=>{var Z,ne;S(q),_(!0),M([]);try{P(!0);const le=await Xs.getTenderApplications(q.id);M(le.data.applications)}catch(le){y(((ne=(Z=le.response)==null?void 0:Z.data)==null?void 0:ne.error)||"Failed to load applications")}finally{P(!1)}},ie=async(q,Z)=>{var ne,le;k(q),y(""),h("");try{await Xs.updateTenderApplicationStatus(q,Z),h(`Application ${Z}`),R&&await se(R),await ee()}catch(D){y(((le=(ne=D.response)==null?void 0:ne.data)==null?void 0:le.error)||"Failed to update application")}finally{k(null)}},O=async q=>{var Z,ne;W(q.id),y(""),h("");try{await Xs.payTender(q.id),h("Tender paid from treasury"),await ee()}catch(le){y(((ne=(Z=le.response)==null?void 0:Z.data)==null?void 0:ne.error)||"Failed to pay tender")}finally{W(null)}},Q=l&&!!a,B=async q=>{var Z,ne;if(q.preventDefault(),!!a){m(!0),y(""),h("");try{await Xs.createTender({town_class:a,name:x.name.trim(),description:x.description.trim()||void 0,value:Number(x.value||0)}),h("Tender created"),j(!1),v({name:"",description:"",value:""}),await ee()}catch(le){y(((ne=(Z=le.response)==null?void 0:Z.data)==null?void 0:ne.error)||"Failed to create tender")}finally{m(!1)}}},V=q=>{F(q),H(!0),h(""),y("")},ue=async()=>{var q,Z;if(T){U(!0),y(""),h("");try{await Xs.applyToTender(T.id),h("Application submitted"),H(!1),F(null),await ee()}catch(ne){y(((Z=(q=ne.response)==null?void 0:q.data)==null?void 0:Z.error)||"Failed to apply")}finally{U(!1)}}},$=d.useMemo(()=>[...i].sort((q,Z)=>new Date(Z.created_at).getTime()-new Date(q.created_at).getTime()),[i]);return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tenders"}),e.jsx("p",{className:"text-primary-100",children:l?`Manage building tenders for ${a||"your selected town"}`:"Apply for building jobs that need to happen on the game board"})]})]})}),(p||f)&&e.jsxs("div",{className:"space-y-3",children:[p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(ct,{className:"h-5 w-5"}),e.jsx("span",{children:p})]}),f&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:f})]})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Create a new tender"}),e.jsx("p",{className:"text-sm text-gray-500",children:a?`This will be created for Class ${a}.`:"Select a town tab on the Teacher Dashboard first."})]}),e.jsxs("button",{onClick:()=>j(!0),disabled:!Q,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Tender"})]})]}),$.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Xa,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No tenders yet"}),e.jsx("p",{className:"text-gray-600",children:l?"Create the first tender for this town.":"Check back later for new building jobs."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:$.map(q=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:q.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${de(q.status)}`,children:q.status.toUpperCase()}),!l&&q.my_application_status&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K(q.my_application_status)}`,children:q.my_application_status.toUpperCase()})]}),q.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:q.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:te(Number(q.value||0))}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Town: ",q.town_class]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[q.pending_count??0," pending"]}),e.jsxs("span",{children:["(",q.application_count??0," total)"]})]}),q.status==="awarded"&&q.awarded_to_username&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"text-blue-700",children:["Awarded to ",q.awarded_to_username]})]}),q.status==="awarded"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{className:q.paid?"text-emerald-700":"text-amber-700",children:q.paid?"Paid":"Unpaid"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[q.status==="awarded"&&!q.paid&&e.jsxs("button",{onClick:()=>O(q),disabled:E===q.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center space-x-2 disabled:opacity-50",children:[E===q.id?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{children:"Pay"})]}),e.jsxs("button",{onClick:()=>se(q),className:`relative px-3 py-2 rounded-lg transition-colors text-sm flex items-center space-x-2 ${(q.pending_count??0)>0?"bg-amber-100 hover:bg-amber-200 ring-2 ring-amber-400 animate-pulse":"bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(en,{className:"h-4 w-4"}),e.jsx("span",{children:"Applications"}),(q.pending_count??0)>0&&e.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] h-5 px-1 rounded-full bg-red-600 text-white text-xs flex items-center justify-center",children:q.pending_count})]})]}):e.jsx("button",{onClick:()=>V(q),className:"px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"View"})})]})},q.id))}),g&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Tender"}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tender name"}),e.jsx("input",{required:!0,value:x.name,onChange:q=>v({...x,name:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Build a town hall"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:q=>v({...x,description:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"What needs to be built? Any rules/requirements?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value (ZAR)"}),e.jsx("input",{required:!0,type:"number",min:"0",step:"0.01",value:x.value,onChange:q=>v({...x,value:q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:b||!a,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:b?"Creating...":"Create"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),w&&l&&R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[R.name,"  Applications"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",e.jsx("span",{className:"font-medium",children:R.status.toUpperCase()}),"  Town: ",R.town_class]})]}),e.jsx("button",{onClick:()=>{_(!1),S(null),M([])},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 text-primary-600 animate-spin"})}):I.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Xa,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No applications yet"})]}):e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-auto pr-1",children:I.map(q=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:q.applicant_first_name||q.applicant_last_name?`${q.applicant_first_name||""} ${q.applicant_last_name||""}`.trim():q.applicant_username}),q.applicant_username&&e.jsxs("span",{className:"text-sm text-gray-500",children:["@",q.applicant_username]}),q.applicant_class&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",q.applicant_class,")"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K(q.status)}`,children:q.status.toUpperCase()})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Applied: ",new Date(q.created_at).toLocaleString()]}),q.reviewer_username&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Reviewed by ",q.reviewer_username," ",q.reviewed_at?` ${new Date(q.reviewed_at).toLocaleString()}`:""]})]}),e.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:R.status==="open"&&q.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(q.id,"approved"),disabled:C===q.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:C===q.id?"...":"Approve"}),e.jsx("button",{onClick:()=>ie(q.id,"denied"),disabled:C===q.id,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:C===q.id?"...":"Deny"})]}):null})]})},q.id))})]})}),N&&!l&&T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xl mx-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:T.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${de(T.status)}`,children:T.status.toUpperCase()}),T.my_application_status&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K(T.my_application_status)}`,children:T.my_application_status.toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-500",children:[" ",te(Number(T.value||0))]})]})]}),e.jsx("button",{onClick:()=>{H(!1),F(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),T.description&&e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:T.description}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:ue,disabled:G||T.status!=="open"||!!T.my_application_status,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:G?"Applying...":T.my_application_status?"Already Applied":"Apply"}),e.jsx("button",{onClick:()=>{H(!1),F(null)},className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},Hj=[{title:"1. Protect Your Account",items:["Keep your password private.","Do not use someone else's account.","Tell a teacher if something looks wrong."]},{title:"2. Be Honest with Money",items:['Do not try to "hack" or cheat the system.',"Only transfer money for real in-game reasons.","No fake payments or tricks.","If you cheat, money will be removed and fines may apply."]},{title:"3. Do Your Job",items:["Complete your weekly job tasks.","Do not claim work you didn't do.","If you don't do your job, your salary may pause."]},{title:"4. Plan Your Money",items:["Submit your budget honestly.","Pay rent, tax and other required costs.","Bad planning has real consequences.","The system will not be reset because you overspent."]},{title:"5. Follow the Law",items:["Respect the rules voted in by the class.","Submit appropriate rule ideas.","No spam or silly submissions."]},{title:"6. Buy Property Properly",items:["Apply before buying land.","Follow biome and building rules.","Do not claim land without approval."]},{title:"7. Be Respectful",items:["All posts, tools and news must be school-appropriate.","Treat others fairly in transfers and deals."]},{title:"8. Learn from Mistakes",items:["This is a simulation of real life.","You will make mistakes.","That's part of learning."]}],Wj=()=>{const{plugins:t,loading:s}=rt(),{currentTownClass:r}=ls(),{user:a,refreshProfile:n}=Le(),[l,i]=d.useState(null),[c,o]=d.useState(!0),[u,p]=d.useState(!1),[y,f]=d.useState(!1),[h,g]=d.useState(!1),[j,b]=d.useState(""),[m,x]=d.useState(null),[v,w]=d.useState(!1),_=t.find(k=>k.route_path==="/town-rules"),R=(a==null?void 0:a.role)==="student",S=!!(a!=null&&a.rules_agreed_at);d.useEffect(()=>{r&&I()},[r]);const I=async()=>{var k,E;if(r)try{o(!0),x(null);const W=await z.get("/town-rules",{params:{town_class:r}});i(W.data),b(W.data.rules||"")}catch(W){console.error("Failed to fetch town rules:",W),x(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to load town rules")}finally{o(!1)}},M=async()=>{var k,E;if(r)try{p(!0),x(null),w(!1),await z.put("/town-rules",{town_class:r,rules:j||null}),w(!0),g(!1),await I(),setTimeout(()=>w(!1),3e3)}catch(W){console.error("Failed to save town rules:",W),x(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to save town rules")}finally{p(!1)}},A=()=>{b((l==null?void 0:l.rules)||""),g(!1),x(null),w(!1)},P=async()=>{var k,E;try{f(!0),x(null),await z.post("/auth/rules-agree"),await n()}catch(W){x(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to agree to rules")}finally{f(!1)}};if(s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!_||!_.enabled)return e.jsx(qe,{to:"/",replace:!0});const C=(a==null?void 0:a.role)==="teacher";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Game of Life  App Rules"}),e.jsx("p",{className:"text-primary-100",children:"These rules help our town run fairly and smoothly."})]})]})}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),v&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:"Town rules saved successfully!"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"App Rules"}),e.jsx("div",{className:"space-y-5",children:Hj.map(k=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:k.title}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:k.items.map((E,W)=>e.jsx("li",{children:E},W))})]},k.title))}),R&&!S&&e.jsxs("div",{className:"mt-8 p-6 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("p",{className:"text-amber-900 font-medium mb-4",children:"You must agree to the rules to use the enabled systems."}),e.jsx("button",{onClick:P,disabled:y,className:"flex items-center space-x-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 font-medium",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Agreeing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:"I agree to the rules"})]})})]}),R&&S&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center space-x-2 text-green-800",children:[e.jsx(Ne,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("span",{children:["You agreed to the rules on ",(a==null?void 0:a.rules_agreed_at)&&new Date(a.rules_agreed_at).toLocaleDateString(),"."]})]})]}),(C||S)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Town Rules  ",r]}),c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading town rules..."})]}):e.jsxs(e.Fragment,{children:[C&&!h&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(hn,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Rules"})]})}),h?e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:j,onChange:k=>b(k.target.value),placeholder:"Enter town rules here...",className:"w-full h-64 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:A,disabled:u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Rules"})]})})]})]}):e.jsx("div",{children:l!=null&&l.rules?e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:l.rules}),l.updated_at&&e.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",new Date(l.updated_at).toLocaleString()]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fb,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"No Town Rules Set"}),e.jsx("p",{className:"text-gray-600 text-sm",children:C?'Click "Edit Rules" to add rules for this town.':"No town rules have been set yet."})]})})]})]})]})},Vj=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),s=(r,a,n,l)=>{const i=t.createOscillator(),c=t.createGain();i.connect(c),c.connect(t.destination),i.frequency.value=r,i.type="sine",c.gain.setValueAtTime(l,t.currentTime+a),c.gain.exponentialRampToValueAtTime(.001,t.currentTime+a+n),i.start(t.currentTime+a),i.stop(t.currentTime+a+n)};s(880,0,.1,.3),s(1108,.08,.1,.3),s(1318,.16,.2,.4)}catch{console.log("Audio not supported")}},Gj=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),s=(r,a,n,l)=>{const i=t.createOscillator(),c=t.createGain();i.connect(c),c.connect(t.destination),i.frequency.value=r,i.type="sine",c.gain.setValueAtTime(l,t.currentTime+a),c.gain.exponentialRampToValueAtTime(.001,t.currentTime+a+n),i.start(t.currentTime+a),i.stop(t.currentTime+a+n)};s(523,0,.08,.25),s(659,.06,.08,.25),s(784,.12,.08,.3),s(1047,.18,.15,.35)}catch{console.log("Audio not supported")}},Jj=()=>{const{plugins:t,loading:s}=rt(),{user:r}=Le(),a=t.find(U=>U.route_path==="/winkel"),[n,l]=d.useState([]),[i,c]=d.useState([]),[o,u]=d.useState(!0),[p,y]=d.useState(!0),[f,h]=d.useState(null),[g,j]=d.useState(""),[b,m]=d.useState(""),[x,v]=d.useState("shop"),[w,_]=d.useState("consumables"),[R,S]=d.useState(null),[I,M]=d.useState([]),[A,P]=d.useState(1),[C,k]=d.useState(0),[E,W]=d.useState(1);d.useEffect(()=>{a&&a.enabled&&N()},[a]);const N=async()=>{try{u(!0);const[U,ee,te,de,K]=await Promise.all([z.get("/winkel/items"),z.get("/winkel/purchases"),(r==null?void 0:r.role)==="student"?z.get("/winkel/can-purchase"):Promise.resolve({data:{canPurchase:!0,weeklyLimit:1,purchasesThisWeek:0,remainingPurchases:1}}),(r==null?void 0:r.role)==="student"?z.get("/transactions/history").then(()=>z.get("/transactions/history").then(()=>Promise.resolve({data:null}))):Promise.resolve({data:null}),(r==null?void 0:r.role)==="student"?z.get("/winkel/owned-emojis"):Promise.resolve({data:[]})]),se=U.data.map(O=>({...O,price:parseFloat(O.price)||0})),ie=ee.data.map(O=>({...O,price_paid:parseFloat(O.price_paid)||0}));if(l(se),c(ie),y(te.data.canPurchase),P(te.data.weeklyLimit||1),k(te.data.purchasesThisWeek||0),W(te.data.remainingPurchases||0),M(K.data||[]),(r==null?void 0:r.role)==="student")try{const O=await z.get("/transactions/history")}catch(O){console.error("Failed to fetch balance:",O)}}catch(U){console.error("Failed to fetch shop data:",U),j("Failed to load shop data")}finally{u(!1)}},H=async U=>{var ee,te;try{h(U),j(""),m("");const de=await z.post("/winkel/purchase",{item_id:U});Gj(),m(de.data.message||"Purchase successful!"),await N(),setTimeout(()=>m(""),3e3)}catch(de){j(((te=(ee=de.response)==null?void 0:ee.data)==null?void 0:te.error)||"Failed to make purchase"),setTimeout(()=>j(""),5e3)}finally{h(null)}},T=n.filter(U=>U.category==="consumable"),F=n.filter(U=>U.category==="privilege"),G=n.filter(U=>U.category==="profile");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(r==null?void 0:r.role)==="teacher"?e.jsx(Qj,{purchases:i,items:n,loading:o,onRefresh:N}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(Bs,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),e.jsxs("p",{className:"text-orange-100",children:["You may make ",A," purchase",A!==1?"s":""," per week"]})]})]}),e.jsx("div",{className:"text-right",children:p?e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2",children:[e.jsxs("p",{className:"font-semibold",children:[E," purchase",E!==1?"s":""," remaining"]}),e.jsxs("p",{className:"text-xs text-orange-100",children:[C," of ",A," used this week"]})]}):e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Come back next week!"})]})})]})}),g&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500"}),e.jsx("p",{className:"text-red-700",children:g})]}),b&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:b})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>v("shop"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${x==="shop"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(pn,{className:"h-5 w-5"}),e.jsx("span",{children:"Shop"})]})}),e.jsx("button",{onClick:()=>v("history"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${x==="history"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(zs,{className:"h-5 w-5"}),e.jsx("span",{children:"My Purchases"})]})})]}),e.jsxs("div",{className:"p-6",children:[x==="shop"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Claim your purchases"})," during I&D or Inquiry lessons."]})]}),!p&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-amber-800 font-semibold",children:[" ",A===1?"You've already made your weekly purchase!":`You've reached your limit of ${A} purchases this week!`," Come back next week for more shopping."]})}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>_("consumables"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="consumables"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Tu,{className:"h-5 w-5"}),e.jsx("span",{children:" Consumables"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Impulse Spending)"})]})}),e.jsx("button",{onClick:()=>_("privileges"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="privileges"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Bo,{className:"h-5 w-5"}),e.jsx("span",{children:" Time & Privileges"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Very Powerful)"})]})}),e.jsx("button",{onClick:()=>_("profile"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="profile"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{children:"Profile Emojis"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Permanent)"})]})})]}),w==="consumables"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:"These items drain money without long-term advantage. Perfect for impulse spending!"})}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 animate-spin text-primary-600"})}):T.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Tu,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No consumables available at this time."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(U=>e.jsx(Vu,{item:U,onPurchase:H,canPurchase:p,purchasing:f===U.id},U.id))})]}),w==="privileges"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:"Time is the most valuable currency in class. These privileges give you comfort and freedom!"})}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 animate-spin text-primary-600"})}):F.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Bo,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No privileges available at this time."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(U=>e.jsx(Vu,{item:U,onPurchase:H,canPurchase:p,purchasing:f===U.id},U.id))})]}),w==="profile"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Customize your profile with a fun emoji! These are permanent and you can switch between owned emojis anytime."}),I.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Your Owned Emojis:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(U=>{var te;const ee=(te=U.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:te[1];return e.jsx("button",{onClick:async()=>{var de,K;try{await z.post("/winkel/change-emoji",{item_id:U.id}),m("Profile emoji changed!"),setTimeout(()=>m(""),3e3),window.location.reload()}catch(se){j(((K=(de=se.response)==null?void 0:de.data)==null?void 0:K.error)||"Failed to change emoji")}},className:"text-3xl p-2 hover:scale-110 transition-transform bg-white rounded-lg border-2 border-blue-300 hover:border-blue-500",title:"Click to use this emoji",children:ee},U.id)})}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click any emoji to use it on your profile"})]})]}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 animate-spin text-primary-600"})}):G.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("span",{className:"text-6xl mb-4 block",children:""}),e.jsx("p",{children:"No profile emojis available at this time."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:G.map(U=>{var de;const ee=(de=U.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:de[1],te=I.some(K=>K.id===U.id);return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-2 p-4 text-center transition-all ${te?"border-green-400 bg-green-50":"border-gray-200 hover:border-primary-300 hover:shadow-md"}`,children:[e.jsx("div",{className:"text-5xl mb-3",children:ee}),e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:U.name.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u,"")}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:U.description}),te?e.jsx("div",{className:"bg-green-500 text-white px-3 py-2 rounded-lg font-semibold text-sm",children:" Owned"}):e.jsx("button",{onClick:()=>H(U.id),disabled:f===U.id,className:"w-full bg-primary-600 text-white px-3 py-2 rounded-lg font-semibold hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:f===U.id?e.jsx(be,{className:"h-4 w-4 animate-spin mx-auto"}):`Buy R${U.price.toFixed(0)}`})]},U.id)})})]})]}),x==="history"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Purchase History"}),i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Bs,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No purchases yet. Start shopping!"})]}):e.jsx("div",{className:"space-y-3",children:i.map(U=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:U.item_name}),e.jsx("p",{className:"text-sm text-gray-600",children:U.item_category==="consumable"?" Consumable":" Privilege"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Purchased: ",new Date(U.purchase_date).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-primary-600",children:["R",(parseFloat(U.price_paid)||0).toFixed(2)]})})]},U.id))})]})]})]})]})},Vu=({item:t,onPurchase:s,canPurchase:r,purchasing:a})=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-primary-400 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-semibold",children:["R",(parseFloat(t.price)||0).toFixed(2)]})]}),t.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:t.description}),t.notes&&e.jsx("p",{className:"text-xs text-gray-500 italic mb-4",children:t.notes}),e.jsx("button",{onClick:()=>s(t.id),disabled:!r||a,className:`w-full py-3 rounded-lg font-semibold transition-all ${!r||a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:from-primary-700 hover:to-primary-800 shadow-md hover:shadow-lg"}`,children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(be,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(pn,{className:"h-4 w-4"}),e.jsx("span",{children:"Buy Now"})]})})]}),Qj=({purchases:t,items:s,loading:r,onRefresh:a})=>{const[n,l]=d.useState(null),[i,c]=d.useState(!0),[o,u]=d.useState("pending"),[p,y]=d.useState(null);d.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const m=await z.get("/winkel/stats");l(m.data)}catch(m){console.error("Failed to fetch stats:",m)}finally{c(!1)}},h=async m=>{try{y(m),await Ss.markPurchasePaid(m),Vj(),a&&a()}catch(x){console.error("Failed to mark purchase as paid:",x)}finally{y(null)}},g=t.filter(m=>!m.paid),j=t,b=o==="pending"?g:j;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(Bs,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),e.jsx("p",{className:"text-orange-100",children:"Shop Management & Analytics"})]})]}),g.length>0&&e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2",children:[e.jsxs("p",{className:"font-semibold",children:[g.length," pending"]}),e.jsx("p",{className:"text-xs text-orange-100",children:"purchases to fulfill"})]})]})}),!i&&n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Shop Balance"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["R",(parseFloat(n.shop_balance)||0).toFixed(2)]})]}),e.jsx(Bs,{className:"h-8 w-8 text-emerald-600"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Total money in shop account"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchases"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.total_purchases})]}),e.jsx(Ke,{className:"h-8 w-8 text-primary-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["R",(parseFloat(n.total_revenue)||0).toFixed(2)]})]}),e.jsx(we,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Items"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.filter(m=>m.available).length})]}),e.jsx(X0,{className:"h-8 w-8 text-blue-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>u("pending"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${o==="pending"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{children:"Pending Purchases"}),g.length>0&&e.jsx("span",{className:"bg-amber-500 text-white px-2 py-0.5 rounded-full text-xs font-bold",children:g.length})]})}),e.jsx("button",{onClick:()=>u("all"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${o==="all"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(zs,{className:"h-5 w-5"}),e.jsx("span",{children:"All Purchases"}),e.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:j.length})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(be,{className:"h-8 w-8 animate-spin text-primary-600"})}):b.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Bs,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:o==="pending"?"No pending purchases!":"No purchases yet."}),o==="pending"&&g.length===0&&e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"All purchases have been fulfilled."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o==="pending"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(m=>e.jsxs("tr",{className:m.paid?"":"bg-amber-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[m.first_name," ",m.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.username," (",m.class,")"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-900",children:m.item_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.item_category==="consumable"?"bg-purple-100 text-purple-800":m.item_category==="profile"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:m.item_category==="consumable"?" Consumable":m.item_category==="profile"?" Profile":" Privilege"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-primary-600",children:["R",(parseFloat(String(m.price_paid))||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.purchase_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.paid?e.jsxs("div",{children:[e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[e.jsx(Ne,{className:"h-3 w-3 inline mr-1"}),"Paid"]}),m.paid_by_first_name&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["by ",m.paid_by_first_name," ",m.paid_by_last_name]})]}):e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:[e.jsx(Ce,{className:"h-3 w-3 inline mr-1"}),"Pending"]})}),o==="pending"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:!m.paid&&e.jsxs("button",{onClick:()=>h(m.id),disabled:p===m.id,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[p===m.id?e.jsx(be,{className:"h-4 w-4 animate-spin mr-1"}):e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Paid"]})})]},m.id))})]})})]})]})},Kj=()=>{const{plugins:t,loading:s}=rt(),{user:r,account:a}=Le();ls();const n=t.find(C=>C.route_path==="/pizza-time"),[l,i]=d.useState(null),[c,o]=d.useState(null),[u,p]=d.useState(!0),[y,f]=d.useState(null),[h,g]=d.useState(""),[j,b]=d.useState(""),[m,x]=d.useState(null),[v,w]=d.useState(null);d.useEffect(()=>{if(n&&n.enabled){_();const C=setInterval(_,5e3);return()=>clearInterval(C)}},[n,r==null?void 0:r.role]);const _=async()=>{var C,k;try{if(g(""),(r==null?void 0:r.role)==="teacher"){const E=await z.get("/pizza-time/status/all");o(E.data.classes),i(E.data.classes["6A"])}else{const E=await z.get("/pizza-time/status");i(E.data),o(null)}}catch(E){console.error("Failed to fetch pizza time status:",E);const W=((k=(C=E.response)==null?void 0:C.data)==null?void 0:k.error)||E.message||"Failed to load pizza time status";g(W)}finally{p(!1)}},R=async C=>{var k,E;if(!a||a.balance<C){g("Insufficient funds"),setTimeout(()=>g(""),5e3);return}try{f(C),g(""),b("");const W=await z.post("/pizza-time/donate",{amount:C});b(`Donated R${C.toFixed(2)}! Thank you for your contribution! `),await _(),setTimeout(()=>b(""),3e3)}catch(W){g(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to make donation"),setTimeout(()=>g(""),5e3)}finally{f(null)}},S=async C=>{var E,W;const k=(r==null?void 0:r.role)==="teacher"?c==null?void 0:c[C]:l;if(k)try{x(C),g(""),b(""),await z.post("/pizza-time/toggle",{class:C,is_active:!k.is_active}),b(`Pizza time ${k.is_active?"deactivated":"activated"} for ${C}`),await _(),setTimeout(()=>b(""),3e3)}catch(N){g(((W=(E=N.response)==null?void 0:E.data)==null?void 0:W.error)||"Failed to toggle pizza time"),setTimeout(()=>g(""),5e3)}finally{x(null)}},I=async C=>{var k,E;if(window.confirm(`Are you sure you want to reset the pizza time fund for Class ${C}? This will set the fund to R0.00 but keep donation history.`))try{w(C),g(""),b("");const W=await z.post("/pizza-time/reset",{class:C});b(W.data.message),await _(),setTimeout(()=>b(""),3e3)}catch(W){g(((E=(k=W.response)==null?void 0:k.data)==null?void 0:E.error)||"Failed to reset pizza time"),setTimeout(()=>g(""),5e3)}finally{w(null)}},M=d.useMemo(()=>l?Math.min(l.current_fund/l.goal_amount*100,100):0,[l]),A=d.useMemo(()=>{if(!l||!l.donation_history||l.donation_history.length===0)return[];let C=0;return l.donation_history.map(k=>(C+=k.daily_total,{date:k.date,amount:C,daily_total:k.daily_total,donation_count:k.donation_count}))},[l]);if(s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!n||!n.enabled)return e.jsx(qe,{to:"/",replace:!0});if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!((r==null?void 0:r.role)==="teacher"?c:l)&&!u)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"Failed to load pizza time status"}),h&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:h}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"If you see this error, the server may need to be restarted to run database migrations."})]})]})})});if((r==null?void 0:r.role)==="teacher"&&c){const C=["6A","6B","6C"];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(La,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),e.jsx("p",{className:"text-orange-100",children:"Class donation tracker for pizza party  all classes"})]})]})}),h&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500 mt-0.5"}),e.jsx("p",{className:"text-red-700 font-semibold",children:h})]})}),j&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:j})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:C.map(k=>{var H;const E=c[k];if(!E)return null;const W=Math.min(E.current_fund/E.goal_amount*100,100),N=(H=E.donation_history)!=null&&H.length?(()=>{let T=0;return E.donation_history.map(F=>(T+=F.daily_total,{date:F.date,amount:T,daily_total:F.daily_total,donation_count:F.donation_count}))})():[];return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Class ",k]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${E.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:E.is_active?" Active":" Inactive"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-semibold text-primary-600",children:["R",E.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-gray-500",children:["of R",E.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-6 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${W}%`},children:W>15&&e.jsxs("span",{className:"text-white text-xs font-semibold",children:[W.toFixed(0),"%"]})})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[E.donation_count," donation",E.donation_count!==1?"s":""]})]}),N.length>0&&e.jsxs("div",{className:"mb-4 flex-1 min-h-[80px]",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-600 mb-2 flex items-center gap-1",children:[e.jsx(Ur,{className:"h-4 w-4"}),"Fund growth"]}),e.jsx("div",{className:"h-16 flex items-end space-x-1",children:N.map(T=>{const F=Math.max(...N.map(U=>U.amount),E.goal_amount),G=T.amount/F*100;return e.jsx("div",{className:"flex-1 bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all hover:opacity-80",style:{height:`${G}%`,minHeight:"4px"},title:`${new Date(T.date).toLocaleDateString()}: R${T.amount.toLocaleString("en-ZA",{minimumFractionDigits:2})}`},T.date)})})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[e.jsx("button",{onClick:()=>S(k),disabled:!!m,className:`flex-1 px-4 py-2 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 ${E.is_active?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"} disabled:opacity-50`,children:m===k?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Ab,{className:"h-4 w-4"}),E.is_active?"Deactivate":"Activate"]})}),e.jsx("button",{onClick:()=>I(k),disabled:!!v||E.current_fund===0,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-gray-500 hover:bg-gray-600 text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v===k?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4"}),"Reset"]})})]}),E.donations&&E.donations.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Recent donations"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:E.donations.slice(0,5).map(T=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"font-medium truncate max-w-[120px]",children:T.first_name&&T.last_name?`${T.first_name} ${T.last_name}`:T.username}),e.jsxs("span",{className:"font-bold text-primary-600 text-xs",children:["R",T.amount.toLocaleString("en-ZA",{minimumFractionDigits:2})]})]},T.id))})]})]},k)})})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(La,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),e.jsx("p",{className:"text-orange-100",children:"Help your class reach the pizza party goal!"})]})]}),!l.is_active&&e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Pizza Time is not active"})]})]})}),h&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-red-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:h}),h.includes("class assigned")&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please contact your teacher to assign you to a class (6A, 6B, or 6C) before using Pizza Time."})]})]})}),j&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:j})]}),!l.is_active&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-amber-800 font-semibold",children:"Pizza Time is currently inactive. Your teacher needs to activate it before you can donate."})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fund Progress"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["R",l.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of R",l.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})," goal"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-8 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${M}%`},children:M>10&&e.jsxs("span",{className:"text-white text-sm font-semibold",children:[M.toFixed(1),"%"]})})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.donation_count," donation",l.donation_count!==1?"s":""," received"]})]}),A.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(Ur,{className:"h-5 w-5"}),e.jsx("span",{children:"Fund Growth Over Time"})]}),e.jsx("div",{className:"h-64 flex items-end space-x-1",children:A.map(C=>{const k=Math.max(...A.map(W=>W.amount),l.goal_amount),E=C.amount/k*100;return e.jsx("div",{className:"flex-1 group relative",style:{minWidth:"20px"},children:e.jsx("div",{className:"w-full bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all duration-300 hover:opacity-80 cursor-pointer",style:{height:`${E}%`},title:`${new Date(C.date).toLocaleDateString()}: R${C.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})} (${C.donation_count} donation${C.donation_count!==1?"s":""})`,children:e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[e.jsx("div",{className:"font-semibold",children:new Date(C.date).toLocaleDateString()}),e.jsxs("div",{children:["R",C.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-gray-300",children:[C.donation_count," donation",C.donation_count!==1?"s":""]})]})})},C.date)})}),e.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"Hover over bars to see details"})]}),l.is_active&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(we,{className:"h-5 w-5"}),e.jsx("span",{children:"Make a Donation"})]}),a&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Your balance: ",e.jsxs("span",{className:"font-semibold text-primary-600",children:["R",a.balance.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[100,500,1e3,2e3,5e3].map(C=>{const k=a?a.balance>=C:!1;return e.jsx("button",{onClick:()=>R(C),disabled:!k||y===C||!l.is_active,className:`px-6 py-4 rounded-lg font-bold text-lg transition-all ${k&&l.is_active?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:y===C?e.jsx(be,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(La,{className:"h-5 w-5"}),e.jsxs("span",{children:["R",C.toLocaleString()]})]})},C)})})]})]})},Zj=()=>{const{plugins:t,loading:s}=rt(),r=t.find(b=>b.route_path==="/leaderboard"),[a,n]=d.useState([]),[l,i]=d.useState({"6A":[],"6B":[],"6C":[]}),[c,o]=d.useState(!0),[u,p]=d.useState("overall"),y=b=>{switch(b){case 1:return"";case 2:return"";case 3:return"";case 4:return"";case 5:return"";default:return""}},f=b=>{switch(b){case 1:return"bg-yellow-400 text-yellow-900 border-yellow-500";case 2:return"bg-gray-300 text-gray-900 border-gray-400";case 3:return"bg-orange-400 text-orange-900 border-orange-500";case 4:return"bg-blue-100 text-blue-900 border-blue-300";case 5:return"bg-blue-50 text-blue-900 border-blue-200";default:return"bg-gray-100 text-gray-900 border-gray-300"}};d.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const[b,m]=await Promise.all([z.get("/leaderboard/overall"),z.get("/leaderboard/all-classes")]);n(b.data.leaderboard||[]),i(m.data||{"6A":[],"6B":[],"6C":[]})}catch(b){console.error("Failed to fetch leaderboards:",b)}finally{o(!1)}},g=b=>b.first_name&&b.last_name?`${b.first_name} ${b.last_name}`:b.username,j=b=>b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(bs,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No games played yet. Be the first to compete!"})]}):e.jsx("div",{className:"space-y-3",children:b.map(m=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all hover:scale-[1.02] ${f(m.rank)}`,children:[e.jsxs("div",{className:"flex-shrink-0 text-center w-16",children:[e.jsx("div",{className:"text-4xl mb-1",children:y(m.rank)}),e.jsxs("div",{className:"text-lg font-bold",children:["#",m.rank]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-lg truncate",children:g(m)}),e.jsxs("div",{className:"text-sm opacity-75",children:[m.class&&e.jsxs("span",{className:"mr-3",children:["Class ",m.class]}),e.jsxs("span",{children:[m.games_played," game",m.games_played!==1?"s":""]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-end mb-1",children:[e.jsx(Bo,{className:"h-5 w-5"}),e.jsx("span",{className:"text-2xl font-bold",children:m.total_points.toLocaleString()})]}),e.jsx("div",{className:"text-xs opacity-75",children:"Total Points"})]}),e.jsxs("div",{className:"hidden md:flex flex-col gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Easy:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_easy})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Medium:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_medium})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Hard:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_hard})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Extreme:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_extreme??0})]})]})]},m.user_id))});return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores Game Leaderboard"}),e.jsx("p",{className:"text-yellow-100",children:"Top performers across all classes"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>p("overall"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${u==="overall"?"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Overall Top 5"})]})}),e.jsx("button",{onClick:()=>p("6A"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${u==="6A"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6A"})]})}),e.jsx("button",{onClick:()=>p("6B"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${u==="6B"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6B"})]})}),e.jsx("button",{onClick:()=>p("6C"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${u==="6C"?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6C"})]})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[u==="overall"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(bs,{className:"h-6 w-6 text-yellow-500"}),"Overall Top 5 Champions"]}),j(a)]}),u==="6A"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-blue-500"}),"Class 6A Top 5"]}),j(l["6A"])]}),u==="6B"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-green-500"}),"Class 6B Top 5"]}),j(l["6B"])]}),u==="6C"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-purple-500"}),"Class 6C Top 5"]}),j(l["6C"])]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Rankings Work"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" Rankings are based on ",e.jsx("strong",{children:"total points"})," earned across all math games"]}),e.jsx("li",{children:" Points are awarded based on difficulty level and answer streaks"}),e.jsx("li",{children:" The leaderboard updates in real-time as students play"}),e.jsx("li",{children:" Each class has its own Top 5, plus an Overall Top 5 across all classes"})]})]})]})})]})},es=t=>t?new Date(t).toLocaleString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Nr=({status:t})=>{const s=d.useMemo(()=>{switch(t){case"approved":case"verified":return{icon:Ne,className:"bg-green-100 text-green-700 border-green-200",label:t==="verified"?"approved":t};case"denied":return{icon:ct,className:"bg-red-100 text-red-700 border-red-200",label:t};default:return{icon:ke,className:"bg-yellow-100 text-yellow-700 border-yellow-200",label:"pending"}}},[t]),r=s.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full border ${s.className}`,children:[e.jsx(r,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"capitalize",children:s.label})]})},Yj=()=>{const{plugins:t,loading:s}=rt(),{user:r}=Le(),[a,n]=d.useState("my"),[l,i]=d.useState("pending"),[c,o]=d.useState(!1),[u,p]=d.useState(null),[y,f]=d.useState([]),[h,g]=d.useState([]),[j,b]=d.useState(!1),[m,x]=d.useState(null),[v,w]=d.useState([]),[_,R]=d.useState([]),[S,I]=d.useState([]),[M,A]=d.useState([]),[P,C]=d.useState("bug"),[k,E]=d.useState(!1),[W,N]=d.useState(null),[H,T]=d.useState(null),[F,G]=d.useState(""),[U,ee]=d.useState(""),[te,de]=d.useState(""),K=(r==null?void 0:r.role)==="teacher",se=t.find(D=>D.route_path==="/suggestions-bugs");d.useEffect(()=>{!s&&(se!=null&&se.enabled)&&(n(K?"review":"my"),K&&i("pending"))},[s,se==null?void 0:se.enabled,K]);const ie=async()=>{var D,ge;try{o(!0),p(null);const X=await z.get("/suggestions-bugs/my");f(X.data.suggestions||[]),g(X.data.bugReports||[])}catch(X){p(((ge=(D=X.response)==null?void 0:D.data)==null?void 0:ge.error)||"Failed to load your submissions")}finally{o(!1)}},O=async()=>{var D,ge;try{b(!0),x(null);const X=await z.get("/suggestions-bugs/admin/queue");w(X.data.suggestions||[]),R(X.data.bugReports||[])}catch(X){x(((ge=(D=X.response)==null?void 0:D.data)==null?void 0:ge.error)||"Failed to load review queue")}finally{b(!1)}},Q=async()=>{var D,ge;try{b(!0),x(null);const X=await z.get("/suggestions-bugs/admin/all");I(X.data.suggestions||[]),A(X.data.bugReports||[])}catch(X){x(((ge=(D=X.response)==null?void 0:D.data)==null?void 0:ge.error)||"Failed to load suggestions & bugs")}finally{b(!1)}};d.useEffect(()=>{se!=null&&se.enabled&&r&&(r.role==="student"?ie():(O(),Q()))},[se==null?void 0:se.enabled,r==null?void 0:r.role]);const B=async()=>{var D,ge,X,oe,Y,he;try{E(!0),N(null),T(null),await z.post("/suggestions-bugs/suggestions",{content:F}),G(""),T("Suggestion submitted!"),await ie()}catch(fe){N(((ge=(D=fe.response)==null?void 0:D.data)==null?void 0:ge.error)||((he=(Y=(oe=(X=fe.response)==null?void 0:X.data)==null?void 0:oe.errors)==null?void 0:Y[0])==null?void 0:he.msg)||"Failed to submit suggestion")}finally{E(!1)}},V=async()=>{var D,ge,X,oe,Y,he;try{E(!0),N(null),T(null),await z.post("/suggestions-bugs/bugs",{title:U,description:te}),ee(""),de(""),T("Bug report submitted!"),await ie()}catch(fe){N(((ge=(D=fe.response)==null?void 0:D.data)==null?void 0:ge.error)||((he=(Y=(oe=(X=fe.response)==null?void 0:X.data)==null?void 0:oe.errors)==null?void 0:Y[0])==null?void 0:he.msg)||"Failed to submit bug report")}finally{E(!1)}},ue=async(D,ge)=>{var X,oe;try{await z.put(`/suggestions-bugs/admin/suggestions/${D}/review`,{status:ge}),await O(),await Q()}catch(Y){x(((oe=(X=Y.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to update suggestion")}},$=async(D,ge)=>{var X,oe;try{await z.put(`/suggestions-bugs/admin/bugs/${D}/review`,{status:ge}),await O(),await Q()}catch(Y){x(((oe=(X=Y.response)==null?void 0:X.data)==null?void 0:oe.error)||"Failed to update bug report")}},q=d.useMemo(()=>S.filter(D=>D.status==="approved"),[S]),Z=d.useMemo(()=>S.filter(D=>D.status==="denied"),[S]),ne=d.useMemo(()=>M.filter(D=>D.status==="verified"),[M]),le=d.useMemo(()=>M.filter(D=>D.status==="denied"),[M]);return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!se||!se.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Suggestions & Bugs"}),e.jsxs("p",{className:"text-primary-100",children:["Submit ideas and report legit bugs. If approved, you earn ",e.jsx("span",{className:"font-semibold",children:"R1000"}),"."]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsxs("nav",{className:"flex gap-6",children:[!K&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n("my"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="my"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My submissions"}),e.jsx("button",{onClick:()=>n("submit"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="submit"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Submit"})]}),K&&e.jsx("button",{onClick:()=>n("review"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="review"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Review queue"})]})}),e.jsxs("div",{className:"p-6",children:[!K&&a==="my"&&e.jsxs("div",{className:"space-y-6",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),c?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(be,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Loading your submissions..."})]}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:y.length})]}),y.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions yet."}):e.jsx("div",{className:"space-y-3",children:y.slice(0,10).map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(Nr,{status:D.status}),e.jsx("span",{className:"text-xs text-gray-500",children:es(D.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:D.content}),(D.status==="approved"||D.status==="denied")&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:"",D.reward_paid?"  Reward paid ":D.status==="approved"?"  Reward pending":""]})]},D.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:h.length})]}),h.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No bug reports yet."}):e.jsx("div",{className:"space-y-3",children:h.slice(0,10).map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(Nr,{status:D.status}),e.jsx("span",{className:"text-xs text-gray-500",children:es(D.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:D.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:D.description}),(D.status==="verified"||D.status==="denied")&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:"",D.reward_paid?"  Reward paid ":D.status==="verified"?"  Reward pending":""]})]},D.id))})]})]})]}),!K&&a==="submit"&&e.jsxs("div",{className:"space-y-4",children:[W&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:W}),H&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:H}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C("bug"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${P==="bug"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Report a bug"}),e.jsx("button",{onClick:()=>C("suggestion"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${P==="suggestion"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Make a suggestion"})]}),P==="bug"?e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bug title"}),e.jsx("input",{value:U,onChange:D=>ee(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Short summary of the bug"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What happened?"}),e.jsx("textarea",{value:te,onChange:D=>de(D.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"Steps to reproduce, what you expected, what you saw..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:V,disabled:k||U.trim().length<3||te.trim().length<10,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[k?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(Mt,{className:"h-4 w-4"}),"Submit bug"]})})]}):e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Suggestion"}),e.jsx("textarea",{value:F,onChange:D=>G(D.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"What would make the app better?"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"If approved, you earn R1000."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:B,disabled:k||F.trim().length<5,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[k?e.jsx(be,{className:"h-4 w-4 animate-spin"}):e.jsx(Mt,{className:"h-4 w-4"}),"Submit suggestion"]})})]})]}),K&&a==="review"&&e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),j?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(be,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Loading review queue..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>i("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="pending"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Pending (",v.length+_.length,")"]}),e.jsxs("button",{onClick:()=>i("approved"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="approved"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Approved (",q.length+ne.length,")"]}),e.jsxs("button",{onClick:()=>i("denied"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="denied"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Denied (",Z.length+le.length,")"]})]}),l==="pending"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:v.length})]}),v.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):e.jsx("div",{className:"space-y-3",children:v.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx("span",{className:"text-xs text-gray-500",children:es(D.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:D.content}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:()=>ue(D.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),e.jsx("button",{onClick:()=>ue(D.id,"approved"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},D.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:_.length})]}),_.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):e.jsx("div",{className:"space-y-3",children:_.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx("span",{className:"text-xs text-gray-500",children:es(D.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:D.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:D.description}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:()=>$(D.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),e.jsx("button",{onClick:()=>$(D.id,"verified"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},D.id))})]})]}),l==="approved"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:q.length})]}),q.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved suggestions yet."}):e.jsx("div",{className:"space-y-3",children:q.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx(Nr,{status:D.status})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:D.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:"",D.reward_paid?"  Reward paid ":"  Reward pending"]})]},D.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:ne.length})]}),ne.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved bug reports yet."}):e.jsx("div",{className:"space-y-3",children:ne.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx(Nr,{status:D.status})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:D.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:D.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:"",D.reward_paid?"  Reward paid ":"  Reward pending"]})]},D.id))})]})]}),l==="denied"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:Z.length})]}),Z.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No denied suggestions."}):e.jsx("div",{className:"space-y-3",children:Z.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx(Nr,{status:D.status})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:D.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:""]})]},D.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:le.length})]}),le.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No denied bug reports."}):e.jsx("div",{className:"space-y-3",children:le.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),D.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",D.class,")"]}):null]}),e.jsx(Nr,{status:D.status})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:D.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:D.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",D.reviewed_at?`on ${es(D.reviewed_at)}`:"",D.reviewed_by_username?` by ${D.reviewed_by_username}`:""]})]},D.id))})]})]})]})]})]})]})]})},Xj=()=>{const{plugins:t,loading:s}=rt(),{user:r}=Le(),a=t.find(h=>h.route_path==="/disasters"),[n,l]=d.useState([]),[i,c]=d.useState([]),[o,u]=d.useState(!0);d.useEffect(()=>{p()},[]);const p=async()=>{try{u(!0);const[h,g]=await Promise.all([z.get("/disasters"),z.get("/disasters/events/recent")]);l(h.data||[]),c(g.data||[])}catch(h){console.error("Failed to fetch disasters:",h),l([]),c([])}finally{u(!1)}},y=h=>{const g=h.effect_value;switch(h.effect_type){case"balance_percentage":return g<0?`Reduces balance by ${Math.abs(g)}%`:`Increases balance by ${g}%`;case"balance_fixed":return g<0?`Reduces balance by R${Math.abs(g).toFixed(2)}`:`Increases balance by R${g.toFixed(2)}`;case"salary_percentage":return g<0?`Reduces next salary by ${Math.abs(g)}%`:`Increases next salary by ${g}%`;default:return`Effect: ${g}`}},f=h=>new Date(h).toLocaleDateString("en-ZA",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Disasters"}),e.jsx("p",{className:"text-red-100",children:"Natural and economic events affecting all citizens"})]})]})}),o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[n.some(h=>h.is_active)&&e.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jr,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900 text-lg",children:"Active Disasters!"}),e.jsx("p",{className:"text-red-700 mb-4",children:"The following disasters are currently affecting citizens:"}),e.jsx("div",{className:"space-y-2",children:n.filter(h=>h.is_active).map(h=>e.jsxs("div",{className:"bg-red-100 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:h.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:h.name}),e.jsx("div",{className:"text-sm text-red-700",children:y(h)})]})]},h.id))})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(vb,{className:"h-6 w-6 text-yellow-500"}),"Possible Disasters"]}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No disasters have been configured yet."}),e.jsx("p",{className:"text-gray-400 mt-2",children:"The skies are clear... for now."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(h=>e.jsx("div",{className:`rounded-xl border-2 p-4 transition-all ${h.is_active?"border-red-400 bg-red-50 shadow-lg":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:h.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:h.name}),h.is_active&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse",children:"ACTIVE"})]}),h.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.description}),e.jsx("div",{className:"mt-2 text-sm",children:e.jsx("span",{className:`font-medium ${h.effect_value<0?"text-red-600":"text-green-600"}`,children:y(h)})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:h.affects_all_classes?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"h-3 w-3"})," Affects all classes"]}):e.jsxs("span",{children:["Targets: Class ",h.target_class]})})]})]})},h.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(zs,{className:"h-6 w-6 text-gray-500"}),"Recent Disaster Events"]}),i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-gray-500",children:"No disasters have occurred yet."})]}):e.jsx("div",{className:"space-y-3",children:i.map(h=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-2xl",children:h.disaster_icon||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:h.disaster_name||"Unknown Disaster"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[h.target_class?`Class ${h.target_class}`:"All Classes"," ",h.affected_students," student",h.affected_students!==1?"s":""," affected"]}),h.notes&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1 italic",children:['"',h.notes,'"']})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:["R",Math.abs(h.total_impact).toLocaleString("en-ZA",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:f(h.triggered_at)})]})]},h.id))})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"About Disasters"}),e.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[e.jsx("li",{children:" Disasters are events that can affect all students in a town"}),e.jsx("li",{children:" They may reduce bank balances, affect salaries, or have other economic impacts"}),e.jsx("li",{children:" Teachers can trigger disasters at any time"}),e.jsx("li",{children:" Some disasters may target specific classes while others affect everyone"}),e.jsx("li",{children:" Keep an eye on the weather forecast... and your savings!"})]})]})]})})]})]})},ga={easy:{label:"Dishwasher",unit:"items unpacked",formatScore:t=>`${t} item${t!==1?"s":""} unpacked`},medium:{label:"Dog poo",unit:"poos picked up",formatScore:t=>`${t} poo${t!==1?"s":""} picked up`},hard:{label:"Lawn mower",unit:"meters mowed",formatScore:t=>`${t}m mowed`},extreme:{label:"Car wash",unit:"cars washed",formatScore:t=>`${t} car${t!==1?"s":""} washed`}},ev=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=d.useState("difficulty"),[i,c]=d.useState("easy"),[o,u]=d.useState(null),[p,y]=d.useState(60),[f,h]=d.useState(0),[g,j]=d.useState(null),[b,m]=d.useState(""),[x,v]=d.useState([]),[w,_]=d.useState(0),[R,S]=d.useState(0),[I,M]=d.useState(null),[A,P]=d.useState(!1),[C,k]=d.useState(null),[E,W]=d.useState(!1),[N,H]=d.useState(null),T=["Nice try, cheater!","Nope! One answer per question!","Did you really think that would work?","NO! Wait for the next question!","Spam detected!","Slow down there, speedster!","Patience, young grasshopper","BONK! No cheating!"],F=d.useCallback(O=>{const B={easy:{addition:{max:20,min:1},subtraction:{max:20,min:1},multiplication:{max:12,min:1},division:{max:12,min:2}},medium:{addition:{max:50,min:1},subtraction:{max:50,min:1},multiplication:{max:15,min:1},division:{max:15,min:2}},hard:{addition:{max:100,min:1},subtraction:{max:100,min:1},multiplication:{max:20,min:1},division:{max:20,min:2}},extreme:{addition:{max:1e3,min:1},subtraction:{max:1e3,min:1},multiplication:{max:99,min:1},division:{max:99,min:2}}}[O],V=["+","-","",""],ue=V[Math.floor(Math.random()*V.length)];let $,q,Z;switch(ue){case"+":$=Math.floor(Math.random()*(B.addition.max-B.addition.min+1))+B.addition.min,q=Math.floor(Math.random()*(B.addition.max-B.addition.min+1))+B.addition.min,Z=$+q;break;case"-":$=Math.floor(Math.random()*(B.subtraction.max-B.subtraction.min+1))+B.subtraction.min,q=Math.floor(Math.random()*(B.subtraction.max-B.subtraction.min+1))+B.subtraction.min,$<q&&([$,q]=[q,$]),Z=$-q;break;case"":$=Math.floor(Math.random()*(B.multiplication.max-B.multiplication.min+1))+B.multiplication.min,q=Math.floor(Math.random()*(B.multiplication.max-B.multiplication.min+1))+B.multiplication.min,Z=$*q;break;case"":Z=Math.floor(Math.random()*(B.division.max-B.division.min+1))+B.division.min,q=Math.floor(Math.random()*(B.division.max-B.division.min+1))+B.division.min,$=q*Z;break}return{num1:$,num2:q,operation:ue,answer:Z,display:`${$} ${ue} ${q} =`}},[]),G=async O=>{try{c(O);const Q=await Do.startGame({difficulty:O});u(Q.data.session.id),l("playing"),y(60),h(0),v([]),_(0),S(0),m(""),j(F(O))}catch(Q){console.error("Failed to start game:",Q),alert("Failed to start game. Please try again.")}},U=()=>{if(A){const B=T[Math.floor(Math.random()*T.length)];H(B),setTimeout(()=>H(null),1500);return}if(!g||!b.trim())return;const Q=parseInt(b)===g.answer;if(M(Q),P(!0),v(B=>[...B,Q]),Q){const B=w+1;_(B),S(V=>Math.max(V,B)),h(V=>V+1)}else _(0);setTimeout(()=>{m(""),j(F(i)),M(null),P(!1)},1e3)},ee=O=>{O.key==="Enter"&&U()},te=O=>{m(O==="backspace"?Q=>Q.slice(0,-1):O==="clear"?"":Q=>Q+O)},de=d.useCallback(async()=>{var O,Q;if(o&&!E){W(!0),l("results");try{const B=await Do.submitGame({session_id:o,score:f,correct_answers:f,total_problems:x.length,answer_sequence:x});k({score:f,correctAnswers:f,totalProblems:x.length,earnings:B.data.earnings,isNewHighScore:B.data.isNewHighScore,accuracy:x.length>0?f/x.length*100:0}),r()}catch(B){const V=((Q=(O=B.response)==null?void 0:O.data)==null?void 0:Q.error)||"Failed to submit game results";k({score:f,correctAnswers:f,totalProblems:x.length,earnings:0,isNewHighScore:!1,accuracy:x.length>0?f/x.length*100:0,error:V})}finally{W(!1)}}},[o,f,x,E,r]);d.useEffect(()=>{if(n==="playing"&&p>0){const O=setTimeout(()=>y(Q=>Q-1),1e3);return()=>clearTimeout(O)}else n==="playing"&&p===0&&de()},[n,p,de]);const K=()=>{l("difficulty"),u(null),y(60),h(0),j(null),m(""),v([]),_(0),S(0),M(null),P(!1),k(null),W(!1),H(null)},se=()=>{K(),s()};if(!t)return null;const ie=ga[i];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Chores Game"}),e.jsx("button",{onClick:se,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[n==="difficulty"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Choose Difficulty"}),e.jsx("p",{className:"text-gray-400",children:"Each correct sum = 1 chore done! Earn money for your bank account."})]}),e.jsx("div",{className:"space-y-4",children:[{level:"easy",label:"Easy",chore:ga.easy.label,multiplier:"1.0x",range:"1-20,  up to 12",color:"bg-green-600"},{level:"medium",label:"Medium",chore:ga.medium.label,multiplier:"1.2x",range:"1-50,  up to 15",color:"bg-yellow-600"},{level:"hard",label:"Hard",chore:ga.hard.label,multiplier:"1.5x",range:"1-100,  up to 20",color:"bg-red-600"},{level:"extreme",label:"Extreme",chore:ga.extreme.label,multiplier:"2x",range:"1-1000,  up to 99",color:"bg-purple-600"}].map(({level:O,label:Q,chore:B,multiplier:V,range:ue,color:$})=>e.jsx("button",{onClick:()=>G(O),className:`w-full p-4 rounded-xl ${$} text-white hover:opacity-90 transition-opacity`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"font-semibold",children:[Q,"  ",B]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Numbers ",ue]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:V}),e.jsx("div",{className:"text-sm opacity-90",children:"Multiplier"})]})]})},O))}),a&&e.jsxs("div",{className:"text-center text-sm text-gray-400",children:[a.remaining_plays," plays remaining today"]})]}),n==="playing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-pink-600 text-white px-4 py-2 rounded-lg font-bold text-lg",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]}),e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:ie.formatScore(f)}),e.jsx("div",{className:"text-sm text-gray-400",children:ie.label})]})]}),e.jsxs("div",{className:"text-right text-white",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(la,{className:"h-4 w-4"}),e.jsx("span",{className:"font-bold",children:w})]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Streak"})]})]}),N&&e.jsx("div",{className:"bg-red-500 text-white px-4 py-3 rounded-lg text-center font-bold animate-pulse mb-4",children:N}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-6",children:g==null?void 0:g.display}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:b,onChange:O=>m(O.target.value),onKeyPress:ee,placeholder:"?",disabled:A,className:"w-32 text-3xl font-bold text-center bg-gray-700 text-white border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-pink-500 disabled:opacity-50",autoFocus:!0}),A&&e.jsx("div",{className:"absolute -right-12 top-1/2 transform -translate-y-1/2",children:I?e.jsx(Ne,{className:"h-8 w-8 text-green-500"}):e.jsx(ct,{className:"h-8 w-8 text-red-500"})})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[["1","2","3"],["4","5","6"],["7","8","9"],["clear","0","backspace"]].map((O,Q)=>e.jsx("div",{className:"contents",children:O.map(B=>e.jsx("button",{onClick:()=>te(B),disabled:A,className:`py-4 px-6 rounded-lg font-semibold text-white transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed ${B==="clear"||B==="backspace"?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 hover:bg-gray-600"}`,children:B==="backspace"?"":B==="clear"?"C":B},B))},Q))}),e.jsx("button",{onClick:U,disabled:!b.trim()||A,className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Answer"})]}),n==="results"&&C&&e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Chore Complete!"}),e.jsx("p",{className:"text-gray-400",children:"Here's how you did:"})]}),C.error&&e.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Error saving results"}),e.jsx("p",{className:"text-sm mt-1",children:C.error}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Your earnings may not have been recorded. Please contact your teacher."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:ie.formatScore(C.score)}),e.jsx("div",{className:"text-sm text-gray-400",children:ie.label})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:`text-3xl font-bold ${C.error?"text-gray-500":"text-green-500"}`,children:["R",Number(C.earnings||0).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Earned"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-500",children:[C.accuracy.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Accuracy"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-500",children:R}),e.jsx("div",{className:"text-sm text-gray-400",children:"Best Streak"})]})]}),C.isNewHighScore&&!C.error&&e.jsxs("div",{className:"bg-yellow-600 text-white p-4 rounded-lg flex items-center justify-center space-x-2",children:[e.jsx(bs,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"New High Score!"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{a&&a.remaining_plays>0?(K(),l("difficulty")):se()},className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition-colors",children:a&&a.remaining_plays>0?"Play Again":"Close"}),e.jsx("button",{onClick:se,className:"w-full bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Close"})]})]}),E&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Submitting results..."})]})]})]})})},fa=5,tv=6,sv=({isOpen:t,onClose:s,onGameComplete:r})=>{const[a,n]=d.useState(null),[l,i]=d.useState(""),[c,o]=d.useState([]),[u,p]=d.useState(!1),[y,f]=d.useState(!1),[h,g]=d.useState(0),[j,b]=d.useState(0),[m,x]=d.useState(null),[v,w]=d.useState(null),[_,R]=d.useState(!1),[S,I]=d.useState(!1),M=d.useCallback(()=>{n(null),i(""),o([]),p(!1),f(!1),g(0),b(0),x(null),w(null),R(!1),I(!1)},[]);d.useEffect(()=>{if(!t){M();return}let k=!1;return I(!0),w(null),Zn.startGame().then(E=>{k||n(E.data.session_id)}).catch(E=>{var W,N;k||w(((N=(W=E.response)==null?void 0:W.data)==null?void 0:N.error)||"Failed to start game")}).finally(()=>{k||I(!1)}),()=>{k=!0}},[t,M]);const A=d.useCallback(async()=>{var E,W;if(!a||l.length!==fa||_||u)return;const k=l.toLowerCase().trim();R(!0),w(null);try{const N=await Zn.guess(a,k);if(o(H=>[...H,{word:k,feedback:N.data.feedback}]),i(""),N.data.game_over){p(!0),f(N.data.won);const H=await Zn.complete(a);g(H.data.earnings),b(H.data.experience_points),x(H.data.new_level),r()}}catch(N){w(((W=(E=N.response)==null?void 0:E.data)==null?void 0:W.error)||"Invalid guess")}finally{R(!1)}},[a,l,_,u,r]);d.useEffect(()=>{if(!t)return;const k=E=>{if(!(u||S||!a)){if(E.key==="Enter"){E.preventDefault(),l.length===fa&&A();return}if(E.key==="Backspace"){E.preventDefault(),i(W=>W.slice(0,-1));return}E.key.length===1&&/^[a-zA-Z]$/.test(E.key)&&(E.preventDefault(),l.length<fa&&i(W=>(W+E.key).toLowerCase().slice(0,fa)))}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[t,u,S,a,l,A]);const P=()=>{M(),s()};if(!t)return null;const C=k=>k===2?"bg-green-600":k===1?"bg-amber-500":"bg-gray-600";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Wordle Chores"}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[S&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Starting game..."}),v&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-600 rounded-lg text-red-200 text-sm",children:v}),a&&!S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-2 mb-6",children:Array.from({length:tv}).map((k,E)=>{const W=c[E],N=E===c.length&&!u,H=W?W.word.split(""):N?l.split(""):[],T=W?W.feedback:[];return e.jsx("div",{className:"flex justify-center gap-2",children:Array.from({length:fa}).map((F,G)=>{const U=H[G]||"",ee=T[G]??null,te=ee!==null?C(ee):N?"bg-gray-700":"bg-gray-800";return e.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded border-2 border-gray-600 font-bold text-white text-xl ${te}`,children:U.toUpperCase()},G)})},E)})}),u?e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:`text-xl font-bold ${y?"text-green-400":"text-gray-400"}`,children:y?"You won!":"Out of guesses"}),h>0&&e.jsxs("p",{className:"text-green-400 font-semibold",children:["+R",h.toFixed(2)]}),j>0&&e.jsxs("p",{className:"text-amber-400",children:["+",j," job XP"]}),m!=null&&e.jsxs("p",{className:"text-amber-400",children:["Level up! New level: ",m]}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Close"})]}):e.jsxs("p",{className:"text-center text-gray-500 text-sm mb-4",children:["Type a 5-letter word and press Enter. ",l.length,"/5"]})]})]})]})})},rv=()=>{var M,A,P,C;const{user:t}=Le(),{plugins:s,loading:r}=rt(),a=s.find(k=>k.route_path==="/chores"),[n,l]=d.useState(null),[i,c]=d.useState(null),[o,u]=d.useState(!0),[p,y]=d.useState(!1),[f,h]=d.useState(!1),[g,j]=d.useState({}),[b,m]=d.useState(!1),[x,v]=d.useState(null);d.useEffect(()=>{a&&a.enabled&&(t==null?void 0:t.role)==="student"?R():(a&&a.enabled&&(t==null?void 0:t.role)==="teacher"&&w(),u(!1))},[a,t==null?void 0:t.role]);const w=async()=>{m(!0);try{const k=await z.get("/transactions/bank-settings");j(k.data||{})}catch(k){console.error("Failed to fetch bank settings:",k)}finally{m(!1)}},_=async(k,E)=>{var W,N;v(k);try{await z.put(`/transactions/bank-settings/${k}`,{value:E}),j(H=>({...H,[k]:E}))}catch(H){console.error("Failed to update setting:",H),alert(((N=(W=H.response)==null?void 0:W.data)==null?void 0:N.error)||"Failed to update setting")}finally{v(null)}},R=async()=>{try{const[k,E]=await Promise.all([Do.getStatus().catch(()=>({data:null})),Zn.getStatus().catch(()=>({data:null}))]);l(k.data),c(E.data)}catch(k){console.error("Failed to fetch chores game status:",k)}finally{u(!1)}};if(r)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!a||!a.enabled)return e.jsx(qe,{to:"/",replace:!0});if((t==null?void 0:t.role)==="teacher"){const k=(g.math_chores_enabled??"true").toLowerCase()==="true",E=(g.wordle_chores_enabled??"true").toLowerCase()==="true";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores"}),e.jsx("p",{className:"text-primary-100",children:"Chore challenges  students earn money with math and Wordle"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Students complete chore challenges to earn money. Math chores: solve sums (daily limit in Town Settings). Wordle chores: guess the word in 6 tries (earn money and job XP if they have a job). Enable or disable each type below."}),b?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(be,{className:"h-6 w-6 animate-spin text-primary-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Math Chores"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Students can play math chore challenges to earn money"})]}),e.jsx("button",{type:"button",onClick:()=>_("math_chores_enabled",k?"false":"true"),disabled:x!==null,className:"focus:outline-none disabled:opacity-50",children:k?e.jsx(sn,{className:"h-10 w-10 text-green-600"}):e.jsx(tn,{className:"h-10 w-10 text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Wordle Chores"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Students can play Wordle chore challenges to earn money (and job XP if they have a job)"})]}),e.jsx("button",{type:"button",onClick:()=>_("wordle_chores_enabled",E?"false":"true"),disabled:x!==null,className:"focus:outline-none disabled:opacity-50",children:E?e.jsx(sn,{className:"h-10 w-10 text-green-600"}):e.jsx(tn,{className:"h-10 w-10 text-gray-400"})})]})]})]})]})}if(o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(be,{className:"h-12 w-12 animate-spin text-primary-600"})});const S=(n==null?void 0:n.enabled)!==!1,I=(i==null?void 0:i.enabled)!==!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores"}),e.jsx("p",{className:"text-primary-100",children:"Solve math sums or Wordle to complete chores and earn money!"})]})]})}),S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-2xl p-6 text-white",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Math Chores"}),e.jsx("p",{className:"text-green-100",children:"Each correct sum = 1 chore done. Easy = dishwasher, Medium = dog poo, Hard = lawn mower, Extreme = car wash. Earn R1 per correct answer (higher multipliers for harder difficulties)!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Math  Plays Remaining"}),e.jsx(Ce,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[(n==null?void 0:n.remaining_plays)??0,"/",(n==null?void 0:n.daily_limit)??3]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Resets daily at 6 AM"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Math High Scores"}),e.jsx(bs,{className:"h-5 w-5 text-yellow-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Easy (Dishwasher):"}),e.jsx("span",{className:"font-semibold",children:((M=n==null?void 0:n.high_scores)==null?void 0:M.easy)??0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Medium (Dog poo):"}),e.jsx("span",{className:"font-semibold",children:((A=n==null?void 0:n.high_scores)==null?void 0:A.medium)??0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hard (Lawn mower):"}),e.jsx("span",{className:"font-semibold",children:((P=n==null?void 0:n.high_scores)==null?void 0:P.hard)??0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Extreme (Car wash):"}),e.jsx("span",{className:"font-semibold",children:((C=n==null?void 0:n.high_scores)==null?void 0:C.extreme)??0})]})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:()=>y(!0),disabled:!n||(n.remaining_plays??0)<=0,className:`px-8 py-4 rounded-xl font-bold text-lg transition-all ${n&&(n.remaining_plays??0)>0?"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-700 hover:to-purple-700 transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:n&&(n.remaining_plays??0)>0?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"inline-block h-6 w-6 mr-2"}),"Start Math Chores Game"]}):"No Math Plays Remaining Today"}),n&&(n.remaining_plays??0)>0&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"60 seconds  Earn R1 per correct answer  Difficulty multipliers apply"})]}),(n==null?void 0:n.recent_sessions)&&n.recent_sessions.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Math Games"}),e.jsx("div",{className:"space-y-3",children:n.recent_sessions.slice(0,5).map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${k.difficulty==="easy"?"bg-green-500":k.difficulty==="medium"?"bg-yellow-500":k.difficulty==="hard"?"bg-red-500":"bg-purple-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[k.difficulty,"  ",k.score," correct"]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(k.played_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["+R",Number(k.earnings||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.correct_answers,"/",k.total_problems," correct"]})]})]},k.id))})]})]}),I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 rounded-2xl p-6 text-white",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Wordle Chores"}),e.jsx("p",{className:"text-amber-100",children:"Guess the 5-letter word in 6 tries. Win to earn money; if you have a job, you also earn job XP!"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Wordle  Plays Remaining"}),e.jsx(Ce,{className:"h-5 w-5 text-amber-600"})]}),e.jsxs("div",{className:"text-3xl font-bold text-amber-600 mb-2",children:[(i==null?void 0:i.remaining_plays)??0,"/",(i==null?void 0:i.daily_limit)??3]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Resets daily at 6 AM"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>h(!0),disabled:!i||(i.remaining_plays??0)<=0,className:`px-8 py-4 rounded-xl font-bold text-lg transition-all ${i&&(i.remaining_plays??0)>0?"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700 transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i&&(i.remaining_plays??0)>0?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"inline-block h-6 w-6 mr-2"}),"Start Wordle Chores"]}):"No Wordle Plays Remaining Today"})}),(i==null?void 0:i.recent_sessions)&&i.recent_sessions.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Wordle Games"}),e.jsx("div",{className:"space-y-3",children:i.recent_sessions.slice(0,5).map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[k.status==="won"?"Won":"Lost"," in ",k.guesses_count," guess(es)"]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(k.played_at).toLocaleDateString()})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["+R",Number(k.earnings||0).toFixed(2)]})})]},k.id))})]})]}),!S&&!I&&e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200 text-center text-gray-500",children:e.jsx("p",{children:"Chore challenges are currently disabled. Ask your teacher to enable Math or Wordle chores."})}),e.jsx(ev,{isOpen:p,onClose:()=>y(!1),onGameComplete:R,gameStatus:n}),e.jsx(sv,{isOpen:f,onClose:()=>h(!1),onGameComplete:R})]})},av=()=>{const{plugins:t,loading:s}=rt(),r=t.find(a=>a.route_path==="/doubles-day");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:"2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Doubles Day"}),e.jsx("p",{className:"text-amber-100",children:"Today your chores and pizza donations count double!"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(la,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Whats doubled"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When Doubles Day is on, you earn and give more."})]})]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-500 font-bold",children:"2"}),"Chore (math game) earnings"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-500 font-bold",children:"2"}),"Pizza Time donations to the class fund (you still pay the same amount)"]})]})]})]})},nv=()=>{const{user:t}=Le(),{plugins:s,loading:r}=rt(),a=s.find(R=>R.route_path==="/analytics"),[n,l]=d.useState("week"),[i,c]=d.useState("school"),[o,u]=d.useState(""),[p,y]=d.useState(null),[f,h]=d.useState(!0),[g,j]=d.useState("");d.useEffect(()=>{(t==null?void 0:t.role)==="teacher"&&(a!=null&&a.enabled)&&b()},[n,i,o,t==null?void 0:t.role,a==null?void 0:a.enabled]);const b=async()=>{var R,S;try{h(!0),j("");const I=await mb.getEngagement({time_range:n,scope:i,class:o||void 0});y(I.data)}catch(I){console.error("Failed to fetch analytics:",I),j(((S=(R=I.response)==null?void 0:R.data)==null?void 0:S.error)||"Failed to load analytics")}finally{h(!1)}},m=({data:R,metric:S})=>{if(!R||R.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No data available"});const I=Math.max(...R.map(N=>Number(N[S])||0),1),M=800,A=300,P={top:20,right:20,bottom:40,left:60},C=M-P.left-P.right,k=A-P.top-P.bottom,E=R.map((N,H)=>{const T=P.left+H/(R.length-1||1)*C,F=P.top+k-(Number(N[S])||0)/I*k;return{x:T,y:F,value:Number(N[S])||0,label:new Date(N.time_bucket).toLocaleDateString()}}),W=E.map((N,H)=>`${H===0?"M":"L"} ${N.x} ${N.y}`).join(" ");return e.jsxs("svg",{width:M,height:A,className:"w-full",children:[[0,.25,.5,.75,1].map(N=>{const H=P.top+k-N*k;return e.jsx("line",{x1:P.left,y1:H,x2:M-P.right,y2:H,stroke:"#e5e7eb",strokeWidth:"1"},N)}),e.jsx("path",{d:W,fill:"none",stroke:"#3b82f6",strokeWidth:"2"}),E.map((N,H)=>e.jsxs("g",{children:[e.jsx("circle",{cx:N.x,cy:N.y,r:"4",fill:"#3b82f6"}),e.jsxs("title",{children:[N.label,": ",N.value]})]},H)),[0,.25,.5,.75,1].map(N=>{const H=P.top+k-N*k,T=Math.round(N*I);return e.jsx("text",{x:P.left-10,y:H+4,textAnchor:"end",className:"text-xs fill-gray-600",children:T},N)}),R.map((N,H)=>{if(H%Math.ceil(R.length/5)!==0&&H!==R.length-1)return null;const T=P.left+H/(R.length-1||1)*C,F=new Date(N.time_bucket),G=n==="day"?F.toLocaleTimeString("en-US",{hour:"2-digit"}):F.toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsx("text",{x:T,y:A-P.bottom+20,textAnchor:"middle",className:"text-xs fill-gray-600",children:G},H)})]})},x=({data:R,metric:S,labelKey:I})=>{if(!R||R.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No data available"});const M=Math.max(...R.map(H=>Number(H[S])||0),1),A=800,P=400,C={top:20,right:20,bottom:60,left:60},k=A-C.left-C.right,E=P-C.top-C.bottom,W=k/R.length*.8,N=k/R.length*.2;return e.jsxs("svg",{width:A,height:P,className:"w-full",children:[[0,.25,.5,.75,1].map(H=>{const T=C.top+E-H*E;return e.jsx("line",{x1:C.left,y1:T,x2:A-C.right,y2:T,stroke:"#e5e7eb",strokeWidth:"1"},H)}),R.map((H,T)=>{const F=Number(H[S])||0,G=F/M*E,U=C.left+T*(W+N)+N/2,ee=C.top+E-G,te=String(H[I]||"");return e.jsxs("g",{children:[e.jsx("rect",{x:U,y:ee,width:W,height:G,fill:"#3b82f6",className:"hover:opacity-80 transition-opacity"}),e.jsx("text",{x:U+W/2,y:ee-5,textAnchor:"middle",className:"text-xs fill-gray-700 font-medium",children:F}),e.jsx("text",{x:U+W/2,y:P-C.bottom+20,textAnchor:"middle",className:"text-xs fill-gray-600",transform:`rotate(-45 ${U+W/2} ${P-C.bottom+20})`,children:te.length>15?te.substring(0,15)+"...":te}),e.jsxs("title",{children:[te,": ",F]})]},T)}),[0,.25,.5,.75,1].map(H=>{const T=C.top+E-H*E,F=Math.round(H*M);return e.jsx("text",{x:C.left-10,y:T+4,textAnchor:"end",className:"text-xs fill-gray-600",children:F},H)})]})},v=({data:R})=>{if(!R||R.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No data available"});const S=R.reduce((k,E)=>k+E.value,0);if(S===0)return e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No activity data"});const I=300,M=I/2,A=I/2-20;let P=-Math.PI/2;const C=R.map(k=>{const E=k.value/S*2*Math.PI,W=P,N=P+E;P=N;const H=M+A*Math.cos(W),T=M+A*Math.sin(W),F=M+A*Math.cos(N),G=M+A*Math.sin(N),U=E>Math.PI?1:0,ee=`M ${M} ${M} L ${H} ${T} A ${A} ${A} 0 ${U} 1 ${F} ${G} Z`;return{...k,path:ee,angle:W+E/2,percentage:k.value/S*100}});return e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{width:I,height:I,className:"w-full max-w-md",children:C.map((k,E)=>e.jsxs("g",{children:[e.jsx("path",{d:k.path,fill:k.color,className:"hover:opacity-80 transition-opacity cursor-pointer"}),e.jsx("text",{x:M+A*.7*Math.cos(k.angle),y:M+A*.7*Math.sin(k.angle),textAnchor:"middle",className:"text-sm fill-white font-medium",children:k.percentage>5?`${Math.round(k.percentage)}%`:""}),e.jsxs("title",{children:[k.label,": ",k.value," (",Math.round(k.percentage),"%)"]})]},E))}),e.jsx("div",{className:"ml-8 space-y-2",children:C.map((k,E)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:k.color}}),e.jsxs("span",{className:"text-sm text-gray-700",children:[k.label,": ",k.value]})]},E))})]})};if(r)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!a||!a.enabled)return e.jsx(qe,{to:"/",replace:!0});if((t==null?void 0:t.role)!=="teacher")return e.jsx(qe,{to:"/",replace:!0});const w=R=>{const S=new Date(R),M=new Date().getTime()-S.getTime(),A=Math.floor(M/(1e3*60*60*24));return A===0?"Today":A===1?"Yesterday":A<7?`${A} days ago`:A<14?"1 week ago":A<30?`${Math.floor(A/7)} weeks ago`:A<60?"1 month ago":A<365?`${Math.floor(A/30)} months ago`:S.toLocaleDateString()},_=p?[{label:"Logins",value:p.summary.total_logins,color:"#3b82f6"},{label:"Chores",value:p.summary.total_chores_sessions,color:"#10b981"},{label:"Transfers",value:p.summary.total_transfers,color:"#f59e0b"},{label:"Purchases",value:p.summary.total_purchases,color:"#ef4444"}].filter(R=>R.value>0):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Analytics"}),e.jsx("p",{className:"text-indigo-100",children:"Engagement data visualization for teachers"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V0,{className:"h-5 w-5 text-gray-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),e.jsxs("select",{value:n,onChange:R=>l(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"year",children:"Year"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kl,{className:"h-5 w-5 text-gray-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"View:"}),e.jsxs("select",{value:i,onChange:R=>{c(R.target.value),u("")},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"school",children:"Entire School"}),e.jsx("option",{value:"classes",children:"By Class"}),e.jsx("option",{value:"students",children:"By Student"})]})]}),i==="students"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-gray-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Class:"}),e.jsxs("select",{value:o,onChange:R=>u(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Classes"}),e.jsx("option",{value:"6A",children:"6A"}),e.jsx("option",{value:"6B",children:"6B"}),e.jsx("option",{value:"6C",children:"6C"})]})]})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Logins"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.summary.total_logins}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.summary.total_logins_users," users"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Chores"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.summary.total_chores_sessions}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.summary.total_chores_users," users"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ur,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Transfers"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:p.summary.total_transfers}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.summary.total_transfers_users," users"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Purchases"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p.summary.total_purchases}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.summary.total_purchases_users," users"]})]})]}),i==="school"&&p.by_class&&p.by_class.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ur,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Logins by town"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Total logins per class (6A, 6B, 6C) in the selected period. Compare engagement across towns."}),e.jsx(x,{data:p.by_class,metric:"logins",labelKey:"class"})]}),(i==="school"||i==="classes")&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Engagement Over Time"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Logins"}),e.jsx(m,{data:p.time_series,metric:"logins"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chores Sessions"}),e.jsx(m,{data:p.time_series,metric:"chores_sessions"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Transfers"}),e.jsx(m,{data:p.time_series,metric:"transfers_count"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Purchases"}),e.jsx(m,{data:p.time_series,metric:"purchases_count"})]})]})]}),i==="classes"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ur,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Engagement by Class"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Logins"}),e.jsx(x,{data:p.by_class,metric:"logins",labelKey:"class"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chores Sessions"}),e.jsx(x,{data:p.by_class,metric:"chores_sessions",labelKey:"class"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Transfers"}),e.jsx(x,{data:p.by_class,metric:"transfers_count",labelKey:"class"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Purchases"}),e.jsx(x,{data:p.by_class,metric:"purchases_count",labelKey:"class"})]})]})]}),i==="students"&&p.top_students.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Top Students by Engagement"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Logins"}),e.jsx(x,{data:p.top_students,metric:"logins",labelKey:"username"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Chores Sessions"}),e.jsx(x,{data:p.top_students,metric:"chores_sessions",labelKey:"username"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Transfers"}),e.jsx(x,{data:p.top_students,metric:"transfers_count",labelKey:"username"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Purchases"}),e.jsx(x,{data:p.top_students,metric:"purchases_count",labelKey:"username"})]})]})]}),p.low_login_students!==void 0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-amber-600"}),"Students with few or no logins"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Students with 0 or 1 login in the selected period. Last login is when they were last active (any time). Use this to see who may need a nudge to log in regularly."}),p.low_login_students.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:"All students have logged in at least twice in this period."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:"Student"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:"Class"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-700 uppercase",children:"Logins (period)"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:"Last login"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.low_login_students.map(R=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.first_name&&R.last_name?`${R.first_name} ${R.last_name}`:R.username}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.class??""}),e.jsx("td",{className:"px-4 py-2 text-sm text-right text-gray-600",children:R.logins}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.last_login?w(R.last_login):"Never"})]},R.id))})]})})]}),_.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(v,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Activity Composition"]}),e.jsx(v,{data:_})]})]}):null]})},lv=({schools:t,onSchoolClick:s,onRefresh:r})=>{const[a,n]=d.useState(""),[l,i]=d.useState("name"),[c,o]=d.useState("asc"),[u,p]=d.useState(!1),y=async()=>{p(!0),await r(),p(!1)},h=[...t.filter(j=>j.name.toLowerCase().includes(a.toLowerCase())||j.code.toLowerCase().includes(a.toLowerCase()))].sort((j,b)=>{let m,x;switch(l){case"name":m=j.name.toLowerCase(),x=b.name.toLowerCase();break;case"students":m=j.student_count,x=b.student_count;break;case"created_at":m=new Date(j.created_at).getTime(),x=new Date(b.created_at).getTime();break;default:return 0}return m<x?c==="asc"?-1:1:m>x?c==="asc"?1:-1:0}),g=j=>{l===j?o(c==="asc"?"desc":"asc"):(i(j),o("asc"))};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Schools"}),e.jsxs("button",{onClick:y,disabled:u,className:"btn-secondary flex items-center text-sm",children:[e.jsx(pr,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:a,onChange:j=>n(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("name"),children:["School Name",l==="name"&&e.jsx("span",{className:"ml-1",children:c==="asc"?"":""})]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("students"),children:["Students",l==="students"&&e.jsx("span",{className:"ml-1",children:c==="asc"?"":""})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teachers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Treasury"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:a?"No schools found matching your search":"No schools found"})}):h.map(j=>{var b;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),e.jsx("div",{className:"text-sm text-gray-500",children:j.code})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.student_count.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.teacher_count}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",((b=j.treasury_total)==null?void 0:b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.archived?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:j.archived?"Archived":"Active"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("button",{onClick:()=>s(j),className:"text-primary-600 hover:text-primary-900 flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1"}),"View"]})})]},j.id)})})]})})]})},iv=({school:t,onClose:s,onUpdate:r})=>{var w,_,R,S,I;const[a,n]=d.useState("financial"),[l,i]=d.useState(null),[c,o]=d.useState(!0),[u,p]=d.useState(""),[y,f]=d.useState(!1),[h,g]=d.useState({username:"",password:"",first_name:"",last_name:"",email:""}),[j,b]=d.useState(!1);d.useEffect(()=>{m()},[t.id]);const m=async()=>{var M,A;try{o(!0);const P=await z.get(`/admin/schools/${t.id}`);i(P.data)}catch(P){p(((A=(M=P.response)==null?void 0:M.data)==null?void 0:A.error)||"Failed to load school details")}finally{o(!1)}},x=async()=>{var M,A;if(confirm(`Are you sure you want to ${t.archived?"reactivate":"archive"} this school?`))try{await z.put(`/admin/schools/${t.id}`,{archived:!t.archived}),r()}catch(P){p(((A=(M=P.response)==null?void 0:M.data)==null?void 0:A.error)||"Failed to update school")}},v=async M=>{var A,P;M.preventDefault(),b(!0),p("");try{await z.post(`/admin/schools/${t.id}/teachers`,h),f(!1),g({username:"",password:"",first_name:"",last_name:"",email:""}),m()}catch(C){p(((P=(A=C.response)==null?void 0:A.data)==null?void 0:P.error)||"Failed to create teacher")}finally{b(!1)}};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading school details..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.code})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"financial",label:"Financial",icon:we},{id:"users",label:"Users",icon:Pe},{id:"activity",label:"Activity",icon:gb},{id:"settings",label:"Settings",icon:Vc}].map(M=>{const A=M.icon;return e.jsxs("button",{onClick:()=>n(M.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${a===M.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),M.label]},M.id)})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),a==="financial"&&(l==null?void 0:l.financial)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Treasury"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((w=l.financial.treasury_total)==null?void 0:w.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student Balances"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((_=l.financial.student_balances_total)==null?void 0:_.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Transactions (30 days)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((R=l.financial.transaction_count_30d)==null?void 0:R.toLocaleString())||0})]}),l.financial.loan_stats&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Loan Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Loans"}),e.jsx("p",{className:"text-lg font-semibold",children:l.financial.loan_stats.total_loans||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Active Loans"}),e.jsx("p",{className:"text-lg font-semibold",children:l.financial.loan_stats.active_loans||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Outstanding"}),e.jsxs("p",{className:"text-lg font-semibold",children:["$",((S=l.financial.loan_stats.total_outstanding)==null?void 0:S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]})]})]}),a==="users"&&(l==null?void 0:l.users)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((I=l.users.student_count)==null?void 0:I.toLocaleString())||0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Teachers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.users.teacher_count||0})]})]}),l.users.pending_approvals>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[l.users.pending_approvals," pending student approval",l.users.pending_approvals!==1?"s":""]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Teachers"}),!t.archived&&e.jsxs("button",{onClick:()=>f(!y),className:"btn-secondary text-sm flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),"Add Teacher"]})]}),y&&e.jsxs("form",{onSubmit:v,className:"bg-blue-50 p-4 rounded-lg mb-4 space-y-3 border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Create New Teacher"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Username *",required:!0,value:h.username,onChange:M=>g({...h,username:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"password",placeholder:"Password *",required:!0,value:h.password,onChange:M=>g({...h,password:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",placeholder:"First Name",value:h.first_name,onChange:M=>g({...h,first_name:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",placeholder:"Last Name",value:h.last_name,onChange:M=>g({...h,last_name:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"email",placeholder:"Email",value:h.email,onChange:M=>g({...h,email:M.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm col-span-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:j,className:"btn-primary text-sm disabled:opacity-50",children:j?"Creating...":"Create"}),e.jsx("button",{type:"button",onClick:()=>{f(!1),g({username:"",password:"",first_name:"",last_name:"",email:""})},className:"btn-secondary text-sm",children:"Cancel"})]})]}),l.users.teachers&&l.users.teachers.length>0?e.jsx("div",{className:"space-y-2",children:l.users.teachers.map(M=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:M.username}),(M.first_name||M.last_name)&&e.jsxs("p",{className:"text-sm text-gray-600",children:[M.first_name," ",M.last_name]}),M.email&&e.jsx("p",{className:"text-xs text-gray-500",children:M.email})]},M.id))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No teachers yet. Create the first teacher above."})]})]}),a==="activity"&&(l==null?void 0:l.activity)&&e.jsxs("div",{className:"space-y-6",children:[l.activity.active_users_7d&&l.activity.active_users_7d.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Users (Last 7 Days)"}),e.jsx("div",{className:"space-y-2",children:l.activity.active_users_7d.map((M,A)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:M.date}),e.jsxs("span",{className:"font-medium",children:[M.active_users," users"]})]},A))})]}),l.activity.most_active_classes&&l.activity.most_active_classes.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Most Active Classes"}),e.jsx("div",{className:"space-y-2",children:l.activity.most_active_classes.map((M,A)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Class ",M.class]}),e.jsxs("span",{className:"font-medium",children:[M.transaction_count," transactions"]})]},A))})]})]}),a==="settings"&&(l==null?void 0:l.school)&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"School Settings"}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg text-xs overflow-auto",children:JSON.stringify(l.school.settings||{},null,2)})]})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-4",children:[e.jsxs("button",{onClick:x,className:"btn-secondary flex items-center",children:[e.jsx(fb,{className:"h-4 w-4 mr-2"}),t.archived?"Reactivate":"Archive"]}),e.jsx("button",{onClick:s,className:"btn-primary",children:"Close"})]})]})})},ov=({onClose:t,onSuccess:s})=>{const[r,a]=d.useState({name:"",code:"",settings:{classes:["6A","6B","6C"],allowed_email_domains:[],enabled_plugins:[]}}),[n,l]=d.useState(""),[i,c]=d.useState(!1),[o,u]=d.useState({username:"",password:"",first_name:"",last_name:"",email:""}),[p,y]=d.useState(!1),[f,h]=d.useState(""),g=async m=>{var x,v,w,_;m.preventDefault(),h(""),y(!0);try{const S=(await z.post("/admin/schools",r)).data.school.id;if(i&&o.username&&o.password)try{await z.post(`/admin/schools/${S}/teachers`,o)}catch(I){h(`School created, but failed to create teacher: ${((v=(x=I.response)==null?void 0:x.data)==null?void 0:v.error)||"Unknown error"}`),y(!1);return}s()}catch(R){h(((_=(w=R.response)==null?void 0:w.data)==null?void 0:_.error)||"Failed to create school")}finally{y(!1)}},j=()=>{if(n&&!n.startsWith("@")){h("Email domain must start with @");return}n&&!r.settings.allowed_email_domains.includes(n)&&(a({...r,settings:{...r.settings,allowed_email_domains:[...r.settings.allowed_email_domains,n]}}),l(""),h(""))},b=m=>{a({...r,settings:{...r.settings,allowed_email_domains:r.settings.allowed_email_domains.filter(x=>x!==m)}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New School"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ze,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name *"}),e.jsx("input",{id:"name",type:"text",required:!0,value:r.name,onChange:m=>a({...r,name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., St Peter's Boys Prep"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"School Code *"}),e.jsx("input",{id:"code",type:"text",required:!0,value:r.code,onChange:m=>a({...r,code:m.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., stpeters"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"createFirstTeacher",checked:i,onChange:m=>c(m.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"createFirstTeacher",className:"ml-2 block text-sm font-medium text-gray-700",children:"Create first teacher for this school"})]}),i&&e.jsxs("div",{className:"ml-6 space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher Username *"}),e.jsx("input",{id:"teacher_username",type:"text",required:i,value:o.username,onChange:m=>u({...o,username:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"teacher1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher Password *"}),e.jsx("input",{id:"teacher_password",type:"password",required:i,value:o.password,onChange:m=>u({...o,password:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Minimum 6 characters"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"teacher_first_name",type:"text",value:o.first_name,onChange:m=>u({...o,first_name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"teacher_last_name",type:"text",value:o.last_name,onChange:m=>u({...o,last_name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"teacher_email",type:"email",value:o.email,onChange:m=>u({...o,email:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"teacher@school.co.za"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Email Domains"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),onKeyPress:m=>m.key==="Enter"&&(m.preventDefault(),j()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"@school.co.za"}),e.jsx("button",{type:"button",onClick:j,className:"btn-secondary",children:"Add"})]}),r.settings.allowed_email_domains.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.settings.allowed_email_domains.map(m=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800",children:[m,e.jsx("button",{type:"button",onClick:()=>b(m),className:"ml-2 text-primary-600 hover:text-primary-800",children:""})]},m))})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"btn-primary disabled:opacity-50",children:p?"Creating...":"Create School"})]})]})]})})},cv=({analytics:t})=>e.jsxs("div",{className:"space-y-6",children:[t.growth_trends&&t.growth_trends.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Growth Trends (Last 90 Days)"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("div",{className:"space-y-2",children:t.growth_trends.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.date}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${s.new_schools/Math.max(...t.growth_trends.map(a=>a.new_schools))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:s.new_schools})]})]},r))})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_schools}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Schools"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_students.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Students"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_teachers}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Teachers"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.transaction_volume_30d.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Transactions (30d)"})]})]})]}),dv=({analytics:t})=>{const s=[{title:"Total Schools",value:t.total_schools,icon:Ot,color:"bg-blue-500",bgColor:"bg-blue-50"},{title:"Total Students",value:t.total_students.toLocaleString(),icon:wb,color:"bg-green-500",bgColor:"bg-green-50"},{title:"Total Teachers",value:t.total_teachers,icon:Pe,color:"bg-purple-500",bgColor:"bg-purple-50"},{title:"Transactions (30d)",value:t.transaction_volume_30d.toLocaleString(),icon:Ke,color:"bg-orange-500",bgColor:"bg-orange-50"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((r,a)=>{const n=r.icon;return e.jsx("div",{className:`${r.bgColor} rounded-xl shadow-sm border border-gray-200 p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.value})]}),e.jsx("div",{className:`${r.color} p-3 rounded-lg`,children:e.jsx(n,{className:"h-6 w-6 text-white"})})]})},a)})})},Gu=()=>{const{user:t}=Le(),[s,r]=d.useState([]),[a,n]=d.useState(null),[l,i]=d.useState(null),[c,o]=d.useState(!1),[u,p]=d.useState(!0),[y,f]=d.useState("");d.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&h()},[t]);const h=async()=>{var b,m;try{p(!0);const[x,v]=await Promise.all([z.get("/admin/schools"),z.get("/admin/analytics")]);r(x.data),n(v.data)}catch(x){console.error("Failed to fetch data:",x),f(((m=(b=x.response)==null?void 0:b.data)==null?void 0:m.error)||"Failed to load dashboard data")}finally{p(!1)}},g=()=>{o(!1),h()},j=()=>{i(null),h()};return!t||t.role!=="super_admin"?e.jsx(qe,{to:"/",replace:!0}):u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ot,{className:"h-8 w-8 mr-3 text-primary-600"}),"Super Admin Dashboard"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage all schools and view system-wide analytics"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[e.jsx(ns,{className:"h-5 w-5 mr-2"}),"Create School"]})]})}),y&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:y}),a&&e.jsx(dv,{analytics:a}),e.jsx("div",{className:"mt-8",children:e.jsx(lv,{schools:s,onSchoolClick:b=>i(b),onRefresh:h})}),a&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ur,{className:"h-6 w-6 mr-2 text-primary-600"}),"System Analytics"]}),e.jsx(cv,{analytics:a})]})}),c&&e.jsx(ov,{onClose:()=>o(!1),onSuccess:g}),l&&e.jsx(iv,{school:l,onClose:()=>i(null),onUpdate:j})]})})},dt=({children:t})=>{const{user:s}=Le(),{pathname:r}=yr();if(!s)return null;const a=s.role==="student",n=!!s.rules_agreed_at;return a&&!n&&!(r==="/town-rules")?e.jsx(qe,{to:"/town-rules",replace:!0}):e.jsx(e.Fragment,{children:t})},uv=()=>{const t=[{icon:Jt,title:"Virtual Bank Account",description:"Track your balance, view transaction history, and manage your money in a safe virtual environment.",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-100",iconColor:"text-blue-600"},{icon:Pe,title:"Peer-to-Peer Transfers",description:"Send money to classmates easily. Learn about digital payments and financial transactions.",color:"from-green-500 to-green-600",iconBg:"bg-green-100",iconColor:"text-green-600"},{icon:Qe,title:"Jobs & Salaries",description:"Apply for jobs, earn regular salaries, and learn about work and income in a fun way.",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-100",iconColor:"text-purple-600"},{icon:Hr,title:"Property Ownership",description:"Buy land parcels, build your property portfolio, and watch your investments grow.",color:"from-amber-500 to-amber-600",iconBg:"bg-amber-100",iconColor:"text-amber-600"},{icon:Ke,title:"Loans & Financial Planning",description:"Apply for loans, learn about repayment, and understand responsible borrowing.",color:"from-indigo-500 to-indigo-600",iconBg:"bg-indigo-100",iconColor:"text-indigo-600"},{icon:xn,title:"Tenders & Contracts",description:"Bid on town projects, complete contracts, and earn rewards for your contributions.",color:"from-orange-500 to-orange-600",iconBg:"bg-orange-100",iconColor:"text-orange-600"},{icon:W0,title:"Math Challenges",description:"Play interactive math games to earn money while practicing your skills.",color:"from-pink-500 to-pink-600",iconBg:"bg-pink-100",iconColor:"text-pink-600"},{icon:bs,title:"Leaderboards",description:"Compete with classmates and see who's leading in math challenges and achievements.",color:"from-yellow-500 to-yellow-600",iconBg:"bg-yellow-100",iconColor:"text-yellow-600"},{icon:pn,title:"Shop & Customization",description:"Buy items from the Winkel shop and customize your profile with emojis and accessories.",color:"from-teal-500 to-teal-600",iconBg:"bg-teal-100",iconColor:"text-teal-600"},{icon:La,title:"Pizza Time",description:"Contribute to class goals, work together, and celebrate achievements as a team.",color:"from-red-500 to-red-600",iconBg:"bg-red-100",iconColor:"text-red-600"},{icon:Ot,title:"Town Government",description:"Learn about civic responsibility, town treasury, taxes, and how communities work together.",color:"from-gray-500 to-gray-600",iconBg:"bg-gray-100",iconColor:"text-gray-600"},{icon:Y0,title:"News & Announcements",description:"Stay updated with town news, important announcements, and community updates.",color:"from-cyan-500 to-cyan-600",iconBg:"bg-cyan-100",iconColor:"text-cyan-600"},{icon:jr,title:"Disasters & Challenges",description:"Face unexpected events that teach resilience and financial planning under pressure.",color:"from-rose-500 to-rose-600",iconBg:"bg-rose-100",iconColor:"text-rose-600"},{icon:kb,title:"Suggestions & Feedback",description:"Share ideas, report bugs, and contribute to making the town better for everyone.",color:"from-violet-500 to-violet-600",iconBg:"bg-violet-100",iconColor:"text-violet-600"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 via-primary-700 to-primary-800 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:" Game of Life Classroom Simulation"}),e.jsx("p",{className:"text-xl md:text-2xl mb-4 text-primary-100",children:"Learn Financial Literacy Through Interactive Play"}),e.jsx("p",{className:"text-lg md:text-xl mb-8 text-primary-200 max-w-3xl mx-auto",children:"A comprehensive town economy simulator designed for Grade 6 students. Master money management, banking, jobs, and civic responsibility in a safe, engaging virtual environment."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(xr,{to:"/login",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-primary-700 font-bold rounded-xl hover:bg-primary-50 transition-all transform hover:scale-105 shadow-lg",children:[e.jsx(Lu,{className:"h-5 w-5 mr-2"}),"Get Started"]}),e.jsxs("a",{href:"#features",className:"inline-flex items-center justify-center px-8 py-4 bg-primary-500 text-white font-bold rounded-xl hover:bg-primary-400 transition-all transform hover:scale-105 border-2 border-white/20",children:["Explore Features",e.jsx(_l,{className:"h-5 w-5 ml-2"})]})]})]})})}),e.jsxs("div",{id:"features",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Student Features"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Everything students need to learn financial literacy, civic responsibility, and real-world skills through engaging gameplay."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:t.map((s,r)=>{const a=s.icon;return e.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-xl transition-all transform hover:-translate-y-1",children:[e.jsx("div",{className:`${s.iconBg} w-14 h-14 rounded-lg flex items-center justify-center mb-4`,children:e.jsx(a,{className:`h-7 w-7 ${s.iconColor}`})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]},r)})})]}),e.jsx("div",{className:"bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Simple steps to get started on your financial literacy journey"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-700",children:"1"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Register & Get Approved"}),e.jsx("p",{className:"text-gray-600",children:"Students register with their class information. Teachers approve accounts to ensure a safe learning environment."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-700",children:"2"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Receive Your Bank Account"}),e.jsx("p",{className:"text-gray-600",children:"Once approved, you get a virtual bank account and can start participating in the town economy."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-700",children:"3"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Start Playing & Learning"}),e.jsx("p",{className:"text-gray-600",children:"Apply for jobs, buy property, participate in tenders, and learn financial skills through interactive activities."})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Why Students Love It"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Real-World Skills"}),e.jsx("p",{className:"text-primary-100",children:"Learn banking, budgeting, and financial planning in a safe environment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Interactive Learning"}),e.jsx("p",{className:"text-primary-100",children:"Hands-on experience with money management and economic concepts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Social & Collaborative"}),e.jsx("p",{className:"text-primary-100",children:"Work with classmates, compete on leaderboards, and achieve goals together"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Gamified Experience"}),e.jsx("p",{className:"text-primary-100",children:"Earn rewards, unlock achievements, and have fun while learning"})]})]})]})}),e.jsx("div",{className:"bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ready to Start Learning?"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Join your classmates in the virtual town and begin your financial literacy journey today."}),e.jsxs(xr,{to:"/login",className:"inline-flex items-center justify-center px-8 py-4 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all transform hover:scale-105 shadow-lg text-lg",children:[e.jsx(Lu,{className:"h-5 w-5 mr-2"}),"Get Started Now",e.jsx(_l,{className:"h-5 w-5 ml-2"})]})]})}),e.jsx("footer",{className:"bg-gray-900 text-gray-400 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center space-y-2",children:[e.jsx("p",{className:"text-sm",children:"Game of Life Classroom Simulation  Teaching Financial Literacy Through Interactive Play"}),e.jsxs("p",{className:"text-sm",children:["Created by"," ",e.jsx("a",{href:"https://www.katalystlabs.co.za",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300 underline transition-colors",children:"Katalyst Labs"})]})]})})]})},Ve=({children:t})=>{const{user:s,loading:r}=Le();return r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?e.jsx(qb,{children:t}):e.jsx(qe,{to:"/login",replace:!0})},mv=({children:t})=>{const{user:s,loading:r}=Le();return r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!s||s.role!=="super_admin"?e.jsx(qe,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})},xv=()=>{const{user:t}=Le();return console.log("AppContent - Current user:",t),e.jsxs(kf,{children:[e.jsx(Ae,{path:"/showcase",element:e.jsx(uv,{})}),e.jsx(Ae,{path:"/login",element:e.jsx(Bb,{})}),e.jsx(Ae,{path:"/admin",element:e.jsx(mv,{children:e.jsx(Gu,{})})}),e.jsx(Ae,{path:"/",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:(t==null?void 0:t.role)==="super_admin"?e.jsx(Gu,{}):(t==null?void 0:t.role)==="teacher"?e.jsx(rj,{}):e.jsx(Jb,{})})})})}),e.jsx(Ae,{path:"/student/:username",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(Iu,{})})})})}),e.jsx(Ae,{path:"/account/:accountNumber",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(Iu,{})})})})}),e.jsx(Ae,{path:"/bank",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(oj,{})})})})})}),e.jsx(Ae,{path:"/land",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(pj,{})})})})})}),e.jsx(Ae,{path:"/jobs",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(bj,{})})})})})}),e.jsx(Ae,{path:"/my-job/:jobId",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(qj,{})})})})})}),e.jsx(Ae,{path:"/news",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(zj,{})})})})})}),e.jsx(Ae,{path:"/government",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Bj,{})})})})})}),e.jsx(Ae,{path:"/tenders",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Uj,{})})})})})}),e.jsx(Ae,{path:"/town-rules",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Wj,{})})})})})}),e.jsx(Ae,{path:"/winkel",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Jj,{})})})})})}),e.jsx(Ae,{path:"/pizza-time",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Kj,{})})})})})}),e.jsx(Ae,{path:"/leaderboard",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Zj,{})})})})})}),e.jsx(Ae,{path:"/suggestions-bugs",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Yj,{})})})})})}),e.jsx(Ae,{path:"/disasters",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(Xj,{})})})})})}),e.jsx(Ae,{path:"/chores",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(rv,{})})})})})}),e.jsx(Ae,{path:"/doubles-day",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(dt,{children:e.jsx(av,{})})})})})}),e.jsx(Ae,{path:"/analytics",element:e.jsx(Ve,{children:e.jsx(He,{children:e.jsx(We,{children:e.jsx(nv,{})})})})}),e.jsx(Ae,{path:"*",element:e.jsx(qe,{to:"/",replace:!0})})]})},hv=()=>e.jsx(Lf,{children:e.jsx(xb,{children:e.jsx(xv,{})})});Li.createRoot(document.getElementById("root")).render(e.jsx(am.StrictMode,{children:e.jsx(hv,{})}));
