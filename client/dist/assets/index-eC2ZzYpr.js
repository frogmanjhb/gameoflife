function Rh(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function Ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _u={exports:{}},ul={},Su={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ia=Symbol.for("react.element"),Lh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),Mh=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),$h=Symbol.for("react.provider"),Oh=Symbol.for("react.context"),zh=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Bh=Symbol.for("react.memo"),Uh=Symbol.for("react.lazy"),Rc=Symbol.iterator;function Hh(t){return t===null||typeof t!="object"?null:(t=Rc&&t[Rc]||t["@@iterator"],typeof t=="function"?t:null)}var ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cu=Object.assign,Tu={};function Ir(t,s,r){this.props=t,this.context=s,this.refs=Tu,this.updater=r||ku}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Ir.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Eu(){}Eu.prototype=Ir.prototype;function No(t,s,r){this.props=t,this.context=s,this.refs=Tu,this.updater=r||ku}var wo=No.prototype=new Eu;wo.constructor=No;Cu(wo,Ir.prototype);wo.isPureReactComponent=!0;var Ac=Array.isArray,Pu=Object.prototype.hasOwnProperty,_o={current:null},Ru={key:!0,ref:!0,__self:!0,__source:!0};function Au(t,s,r){var a,n={},l=null,i=null;if(s!=null)for(a in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Pu.call(s,a)&&!Ru.hasOwnProperty(a)&&(n[a]=s[a]);var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}if(t&&t.defaultProps)for(a in c=t.defaultProps,c)n[a]===void 0&&(n[a]=c[a]);return{$$typeof:Ia,type:t,key:l,ref:i,props:n,_owner:_o.current}}function Vh(t,s){return{$$typeof:Ia,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function So(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ia}function Wh(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Lc=/\/+/g;function Dl(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Wh(""+t.key):s.toString(36)}function yn(t,s,r,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Ia:case Lh:i=!0}}if(i)return i=t,n=n(i),t=a===""?"."+Dl(i,0):a,Ac(n)?(r="",t!=null&&(r=t.replace(Lc,"$&/")+"/"),yn(n,s,r,"",function(d){return d})):n!=null&&(So(n)&&(n=Vh(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Lc,"$&/")+"/")+t)),s.push(n)),1;if(i=0,a=a===""?".":a+":",Ac(t))for(var c=0;c<t.length;c++){l=t[c];var o=a+Dl(l,c);i+=yn(l,s,r,o,n)}else if(o=Hh(t),typeof o=="function")for(t=o.call(t),c=0;!(l=t.next()).done;)l=l.value,o=a+Dl(l,c++),i+=yn(l,s,r,o,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Ga(t,s,r){if(t==null)return t;var a=[],n=0;return yn(t,a,"","",function(l){return s.call(r,l,n++)}),a}function qh(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},jn={transition:null},Jh={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:jn,ReactCurrentOwner:_o};function Lu(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ga,forEach:function(t,s,r){Ga(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Ga(t,function(){s++}),s},toArray:function(t){return Ga(t,function(s){return s})||[]},only:function(t){if(!So(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ir;ce.Fragment=Fh;ce.Profiler=Dh;ce.PureComponent=No;ce.StrictMode=Mh;ce.Suspense=Ih;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jh;ce.act=Lu;ce.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Cu({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=_o.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in s)Pu.call(s,o)&&!Ru.hasOwnProperty(o)&&(a[o]=s[o]===void 0&&c!==void 0?c[o]:s[o])}var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}return{$$typeof:Ia,type:t.type,key:n,ref:l,props:a,_owner:i}};ce.createContext=function(t){return t={$$typeof:Oh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$h,_context:t},t.Consumer=t};ce.createElement=Au;ce.createFactory=function(t){var s=Au.bind(null,t);return s.type=t,s};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:zh,render:t}};ce.isValidElement=So;ce.lazy=function(t){return{$$typeof:Uh,_payload:{_status:-1,_result:t},_init:qh}};ce.memo=function(t,s){return{$$typeof:Bh,type:t,compare:s===void 0?null:s}};ce.startTransition=function(t){var s=jn.transition;jn.transition={};try{t()}finally{jn.transition=s}};ce.unstable_act=Lu;ce.useCallback=function(t,s){return at.current.useCallback(t,s)};ce.useContext=function(t){return at.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return at.current.useDeferredValue(t)};ce.useEffect=function(t,s){return at.current.useEffect(t,s)};ce.useId=function(){return at.current.useId()};ce.useImperativeHandle=function(t,s,r){return at.current.useImperativeHandle(t,s,r)};ce.useInsertionEffect=function(t,s){return at.current.useInsertionEffect(t,s)};ce.useLayoutEffect=function(t,s){return at.current.useLayoutEffect(t,s)};ce.useMemo=function(t,s){return at.current.useMemo(t,s)};ce.useReducer=function(t,s,r){return at.current.useReducer(t,s,r)};ce.useRef=function(t){return at.current.useRef(t)};ce.useState=function(t){return at.current.useState(t)};ce.useSyncExternalStore=function(t,s,r){return at.current.useSyncExternalStore(t,s,r)};ce.useTransition=function(){return at.current.useTransition()};ce.version="18.3.1";Su.exports=ce;var u=Su.exports;const Fu=Ah(u),Zh=Rh({__proto__:null,default:Fu},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=u,Gh=Symbol.for("react.element"),Kh=Symbol.for("react.fragment"),Yh=Object.prototype.hasOwnProperty,Xh=Qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ep={key:!0,ref:!0,__self:!0,__source:!0};function Mu(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)Yh.call(s,a)&&!ep.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Gh,type:t,key:l,ref:i,props:n,_owner:Xh.current}}ul.Fragment=Kh;ul.jsx=Mu;ul.jsxs=Mu;_u.exports=ul;var e=_u.exports,fi={},Du={exports:{}},Nt={},$u={exports:{}},Ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(R,P){var H=R.length;R.push(P);e:for(;0<H;){var U=H-1>>>1,Y=R[U];if(0<n(Y,P))R[U]=P,R[H]=Y,H=U;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var P=R[0],H=R.pop();if(H!==P){R[0]=H;e:for(var U=0,Y=R.length,Z=Y>>>1;U<Z;){var K=2*(U+1)-1,X=R[K],ae=K+1,ue=R[ae];if(0>n(X,H))ae<Y&&0>n(ue,X)?(R[U]=ue,R[ae]=H,U=ae):(R[U]=X,R[K]=H,U=K);else if(ae<Y&&0>n(ue,H))R[U]=ue,R[ae]=H,U=ae;else break e}}return P}function n(R,P){var H=R.sortIndex-P.sortIndex;return H!==0?H:R.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,c=i.now();t.unstable_now=function(){return i.now()-c}}var o=[],d=[],p=1,f=null,b=3,x=!1,g=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var P=r(d);P!==null;){if(P.callback===null)a(d);else if(P.startTime<=R)a(d),P.sortIndex=P.expirationTime,s(o,P);else break;P=r(d)}}function w(R){if(y=!1,v(R),!g)if(r(o)!==null)g=!0,N(S);else{var P=r(d);P!==null&&V(w,P.startTime-R)}}function S(R,P){g=!1,y&&(y=!1,m(I),I=-1),x=!0;var H=b;try{for(v(P),f=r(o);f!==null&&(!(f.expirationTime>P)||R&&!F());){var U=f.callback;if(typeof U=="function"){f.callback=null,b=f.priorityLevel;var Y=U(f.expirationTime<=P);P=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(o)&&a(o),v(P)}else a(o);f=r(o)}if(f!==null)var Z=!0;else{var K=r(d);K!==null&&V(w,K.startTime-P),Z=!1}return Z}finally{f=null,b=H,x=!1}}var A=!1,_=null,I=-1,C=5,T=-1;function F(){return!(t.unstable_now()-T<C)}function k(){if(_!==null){var R=t.unstable_now();T=R;var P=!0;try{P=_(!0,R)}finally{P?$():(A=!1,_=null)}}else A=!1}var $;if(typeof h=="function")$=function(){h(k)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,q=M.port2;M.port1.onmessage=k,$=function(){q.postMessage(null)}}else $=function(){j(k,0)};function N(R){_=R,A||(A=!0,$())}function V(R,P){I=j(function(){R(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){g||x||(g=!0,N(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var H=b;b=P;try{return R()}finally{b=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=b;b=R;try{return P()}finally{b=H}},t.unstable_scheduleCallback=function(R,P,H){var U=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,R){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=H+Y,R={id:p++,callback:P,priorityLevel:R,startTime:H,expirationTime:Y,sortIndex:-1},H>U?(R.sortIndex=H,s(d,R),r(o)===null&&R===r(d)&&(y?(m(I),I=-1):y=!0,V(w,H-U))):(R.sortIndex=Y,s(o,R),g||x||(g=!0,N(S))),R},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(R){var P=b;return function(){var H=b;b=P;try{return R.apply(this,arguments)}finally{b=H}}}})(Ou);$u.exports=Ou;var tp=$u.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=u,vt=tp;function W(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zu=new Set,ba={};function or(t,s){Rr(t,s),Rr(t+"Capture",s)}function Rr(t,s){for(ba[t]=s,t=0;t<s.length;t++)zu.add(s[t])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gi=Object.prototype.hasOwnProperty,rp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fc={},Mc={};function ap(t){return gi.call(Mc,t)?!0:gi.call(Fc,t)?!1:rp.test(t)?Mc[t]=!0:(Fc[t]=!0,!1)}function np(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lp(t,s,r,a){if(s===null||typeof s>"u"||np(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function nt(t,s,r,a,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];We[s]=new nt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ko=/[\-:]([a-z])/g;function Co(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(ko,Co);We[s]=new nt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(ko,Co);We[s]=new nt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(ko,Co);We[s]=new nt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function To(t,s,r,a){var n=We.hasOwnProperty(s)?We[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(lp(s,r,n,a)&&(r=null),a||n===null?ap(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var ms=sp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),mr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),Eo=Symbol.for("react.strict_mode"),yi=Symbol.for("react.profiler"),Iu=Symbol.for("react.provider"),Bu=Symbol.for("react.context"),Po=Symbol.for("react.forward_ref"),ji=Symbol.for("react.suspense"),bi=Symbol.for("react.suspense_list"),Ro=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),Uu=Symbol.for("react.offscreen"),Dc=Symbol.iterator;function Qr(t){return t===null||typeof t!="object"?null:(t=Dc&&t[Dc]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,$l;function aa(t){if($l===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);$l=s&&s[1]||""}return`
`+$l+t}var Ol=!1;function zl(t,s){if(!t||Ol)return"";Ol=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),l=a.stack.split(`
`),i=n.length-1,c=l.length-1;1<=i&&0<=c&&n[i]!==l[c];)c--;for(;1<=i&&0<=c;i--,c--)if(n[i]!==l[c]){if(i!==1||c!==1)do if(i--,c--,0>c||n[i]!==l[c]){var o=`
`+n[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=c);break}}}finally{Ol=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?aa(t):""}function ip(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function vi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case mr:return"Portal";case yi:return"Profiler";case Eo:return"StrictMode";case ji:return"Suspense";case bi:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bu:return(t.displayName||"Context")+".Consumer";case Iu:return(t._context.displayName||"Context")+".Provider";case Po:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ro:return s=t.displayName||null,s!==null?s:vi(t.type)||"Memo";case ys:s=t._payload,t=t._init;try{return vi(t(s))}catch{}}return null}function op(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vi(s);case 8:return s===Eo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hu(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cp(t){var s=Hu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ya(t){t._valueTracker||(t._valueTracker=cp(t))}function Vu(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=Hu(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Fn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ni(t,s){var r=s.checked;return ke({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function $c(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Os(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Wu(t,s){s=s.checked,s!=null&&To(t,"checked",s,!1)}function wi(t,s){Wu(t,s);var r=Os(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?_i(t,s.type,r):s.hasOwnProperty("defaultValue")&&_i(t,s.type,Os(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Oc(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function _i(t,s,r){(s!=="number"||Fn(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var na=Array.isArray;function Sr(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Os(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Si(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(W(91));return ke({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zc(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(W(92));if(na(r)){if(1<r.length)throw Error(W(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Os(r)}}function qu(t,s){var r=Os(s.value),a=Os(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Ic(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Ju(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ki(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Ju(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xa,Zu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Xa=Xa||document.createElement("div"),Xa.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function va(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dp=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){dp.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),oa[s]=oa[t]})});function Qu(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||oa.hasOwnProperty(t)&&oa[t]?(""+s).trim():s+"px"}function Gu(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Qu(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var up=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ci(t,s){if(s){if(up[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(W(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(W(61))}if(s.style!=null&&typeof s.style!="object")throw Error(W(62))}}function Ti(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ei=null;function Ao(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pi=null,kr=null,Cr=null;function Bc(t){if(t=Ha(t)){if(typeof Pi!="function")throw Error(W(280));var s=t.stateNode;s&&(s=fl(s),Pi(t.stateNode,t.type,s))}}function Ku(t){kr?Cr?Cr.push(t):Cr=[t]:kr=t}function Yu(){if(kr){var t=kr,s=Cr;if(Cr=kr=null,Bc(t),s)for(t=0;t<s.length;t++)Bc(s[t])}}function Xu(t,s){return t(s)}function em(){}var Il=!1;function tm(t,s,r){if(Il)return t(s,r);Il=!0;try{return Xu(t,s,r)}finally{Il=!1,(kr!==null||Cr!==null)&&(em(),Yu())}}function Na(t,s){var r=t.stateNode;if(r===null)return null;var a=fl(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(W(231,s,typeof r));return r}var Ri=!1;if(ls)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{Ri=!1}function mp(t,s,r,a,n,l,i,c,o){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(p){this.onError(p)}}var ca=!1,Mn=null,Dn=!1,Ai=null,xp={onError:function(t){ca=!0,Mn=t}};function hp(t,s,r,a,n,l,i,c,o){ca=!1,Mn=null,mp.apply(xp,arguments)}function pp(t,s,r,a,n,l,i,c,o){if(hp.apply(this,arguments),ca){if(ca){var d=Mn;ca=!1,Mn=null}else throw Error(W(198));Dn||(Dn=!0,Ai=d)}}function cr(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function sm(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Uc(t){if(cr(t)!==t)throw Error(W(188))}function fp(t){var s=t.alternate;if(!s){if(s=cr(t),s===null)throw Error(W(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Uc(n),t;if(l===a)return Uc(n),s;l=l.sibling}throw Error(W(188))}if(r.return!==a.return)r=n,a=l;else{for(var i=!1,c=n.child;c;){if(c===r){i=!0,r=n,a=l;break}if(c===a){i=!0,a=n,r=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===r){i=!0,r=l,a=n;break}if(c===a){i=!0,a=l,r=n;break}c=c.sibling}if(!i)throw Error(W(189))}}if(r.alternate!==a)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?t:s}function rm(t){return t=fp(t),t!==null?am(t):null}function am(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=am(t);if(s!==null)return s;t=t.sibling}return null}var nm=vt.unstable_scheduleCallback,Hc=vt.unstable_cancelCallback,gp=vt.unstable_shouldYield,yp=vt.unstable_requestPaint,Ee=vt.unstable_now,jp=vt.unstable_getCurrentPriorityLevel,Lo=vt.unstable_ImmediatePriority,lm=vt.unstable_UserBlockingPriority,$n=vt.unstable_NormalPriority,bp=vt.unstable_LowPriority,im=vt.unstable_IdlePriority,ml=null,Jt=null;function vp(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:_p,Np=Math.log,wp=Math.LN2;function _p(t){return t>>>=0,t===0?32:31-(Np(t)/wp|0)|0}var en=64,tn=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function On(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var c=i&~n;c!==0?a=la(c):(l&=i,l!==0&&(a=la(l)))}else i=r&~n,i!==0?a=la(i):l!==0&&(a=la(l));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-Dt(s),n=1<<r,a|=t[r],s&=~n;return a}function Sp(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kp(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Dt(l),c=1<<i,o=n[i];o===-1?(!(c&r)||c&a)&&(n[i]=Sp(c,s)):o<=s&&(t.expiredLanes|=c),l&=~c}}function Li(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function om(){var t=en;return en<<=1,!(en&4194240)&&(en=64),t}function Bl(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Ba(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Dt(s),t[s]=r}function Cp(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Dt(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function Fo(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-Dt(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var fe=0;function cm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dm,Mo,um,mm,xm,Fi=!1,sn=[],Ss=null,ks=null,Cs=null,wa=new Map,_a=new Map,bs=[],Tp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(t,s){switch(t){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":wa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(s.pointerId)}}function Kr(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=Ha(s),s!==null&&Mo(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function Ep(t,s,r,a,n){switch(s){case"focusin":return Ss=Kr(Ss,t,s,r,a,n),!0;case"dragenter":return ks=Kr(ks,t,s,r,a,n),!0;case"mouseover":return Cs=Kr(Cs,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return wa.set(l,Kr(wa.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,_a.set(l,Kr(_a.get(l)||null,t,s,r,a,n)),!0}return!1}function hm(t){var s=Qs(t.target);if(s!==null){var r=cr(s);if(r!==null){if(s=r.tag,s===13){if(s=sm(r),s!==null){t.blockedOn=s,xm(t.priority,function(){um(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bn(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Mi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Ei=a,r.target.dispatchEvent(a),Ei=null}else return s=Ha(r),s!==null&&Mo(s),t.blockedOn=r,!1;s.shift()}return!0}function Wc(t,s,r){bn(t)&&r.delete(s)}function Pp(){Fi=!1,Ss!==null&&bn(Ss)&&(Ss=null),ks!==null&&bn(ks)&&(ks=null),Cs!==null&&bn(Cs)&&(Cs=null),wa.forEach(Wc),_a.forEach(Wc)}function Yr(t,s){t.blockedOn===s&&(t.blockedOn=null,Fi||(Fi=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,Pp)))}function Sa(t){function s(n){return Yr(n,t)}if(0<sn.length){Yr(sn[0],t);for(var r=1;r<sn.length;r++){var a=sn[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Ss!==null&&Yr(Ss,t),ks!==null&&Yr(ks,t),Cs!==null&&Yr(Cs,t),wa.forEach(s),_a.forEach(s),r=0;r<bs.length;r++)a=bs[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<bs.length&&(r=bs[0],r.blockedOn===null);)hm(r),r.blockedOn===null&&bs.shift()}var Tr=ms.ReactCurrentBatchConfig,zn=!0;function Rp(t,s,r,a){var n=fe,l=Tr.transition;Tr.transition=null;try{fe=1,Do(t,s,r,a)}finally{fe=n,Tr.transition=l}}function Ap(t,s,r,a){var n=fe,l=Tr.transition;Tr.transition=null;try{fe=4,Do(t,s,r,a)}finally{fe=n,Tr.transition=l}}function Do(t,s,r,a){if(zn){var n=Mi(t,s,r,a);if(n===null)Kl(t,s,a,In,r),Vc(t,a);else if(Ep(n,t,s,r,a))a.stopPropagation();else if(Vc(t,a),s&4&&-1<Tp.indexOf(t)){for(;n!==null;){var l=Ha(n);if(l!==null&&dm(l),l=Mi(t,s,r,a),l===null&&Kl(t,s,a,In,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else Kl(t,s,a,null,r)}}var In=null;function Mi(t,s,r,a){if(In=null,t=Ao(a),t=Qs(t),t!==null)if(s=cr(t),s===null)t=null;else if(r=s.tag,r===13){if(t=sm(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return In=t,null}function pm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jp()){case Lo:return 1;case lm:return 4;case $n:case bp:return 16;case im:return 536870912;default:return 16}default:return 16}}var Ns=null,$o=null,vn=null;function fm(){if(vn)return vn;var t,s=$o,r=s.length,a,n="value"in Ns?Ns.value:Ns.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var i=r-t;for(a=1;a<=i&&s[r-a]===n[l-a];a++);return vn=n.slice(t,1<a?1-a:void 0)}function Nn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function rn(){return!0}function qc(){return!1}function wt(t){function s(r,a,n,l,i){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?rn:qc,this.isPropagationStopped=qc,this}return ke(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),s}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oo=wt(Br),Ua=ke({},Br,{view:0,detail:0}),Lp=wt(Ua),Ul,Hl,Xr,xl=ke({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xr&&(Xr&&t.type==="mousemove"?(Ul=t.screenX-Xr.screenX,Hl=t.screenY-Xr.screenY):Hl=Ul=0,Xr=t),Ul)},movementY:function(t){return"movementY"in t?t.movementY:Hl}}),Jc=wt(xl),Fp=ke({},xl,{dataTransfer:0}),Mp=wt(Fp),Dp=ke({},Ua,{relatedTarget:0}),Vl=wt(Dp),$p=ke({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Op=wt($p),zp=ke({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ip=wt(zp),Bp=ke({},Br,{data:0}),Zc=wt(Bp),Up={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wp(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Vp[t])?!!s[t]:!1}function zo(){return Wp}var qp=ke({},Ua,{key:function(t){if(t.key){var s=Up[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Nn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(t){return t.type==="keypress"?Nn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jp=wt(qp),Zp=ke({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qc=wt(Zp),Qp=ke({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),Gp=wt(Qp),Kp=ke({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yp=wt(Kp),Xp=ke({},xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=wt(Xp),t0=[9,13,27,32],Io=ls&&"CompositionEvent"in window,da=null;ls&&"documentMode"in document&&(da=document.documentMode);var s0=ls&&"TextEvent"in window&&!da,gm=ls&&(!Io||da&&8<da&&11>=da),Gc=" ",Kc=!1;function ym(t,s){switch(t){case"keyup":return t0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function r0(t,s){switch(t){case"compositionend":return jm(s);case"keypress":return s.which!==32?null:(Kc=!0,Gc);case"textInput":return t=s.data,t===Gc&&Kc?null:t;default:return null}}function a0(t,s){if(hr)return t==="compositionend"||!Io&&ym(t,s)?(t=fm(),vn=$o=Ns=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gm&&s.locale!=="ko"?null:s.data;default:return null}}var n0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!n0[t.type]:s==="textarea"}function bm(t,s,r,a){Ku(a),s=Bn(s,"onChange"),0<s.length&&(r=new Oo("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var ua=null,ka=null;function l0(t){Rm(t,0)}function hl(t){var s=gr(t);if(Vu(s))return t}function i0(t,s){if(t==="change")return s}var vm=!1;if(ls){var Wl;if(ls){var ql="oninput"in document;if(!ql){var Xc=document.createElement("div");Xc.setAttribute("oninput","return;"),ql=typeof Xc.oninput=="function"}Wl=ql}else Wl=!1;vm=Wl&&(!document.documentMode||9<document.documentMode)}function ed(){ua&&(ua.detachEvent("onpropertychange",Nm),ka=ua=null)}function Nm(t){if(t.propertyName==="value"&&hl(ka)){var s=[];bm(s,ka,t,Ao(t)),tm(l0,s)}}function o0(t,s,r){t==="focusin"?(ed(),ua=s,ka=r,ua.attachEvent("onpropertychange",Nm)):t==="focusout"&&ed()}function c0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hl(ka)}function d0(t,s){if(t==="click")return hl(s)}function u0(t,s){if(t==="input"||t==="change")return hl(s)}function m0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var zt=typeof Object.is=="function"?Object.is:m0;function Ca(t,s){if(zt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!gi.call(s,n)||!zt(t[n],s[n]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sd(t,s){var r=td(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=td(r)}}function wm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?wm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function _m(){for(var t=window,s=Fn();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Fn(t.document)}return s}function Bo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function x0(t){var s=_m(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&wm(r.ownerDocument.documentElement,r)){if(a!==null&&Bo(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=sd(r,l);var i=sd(r,a);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h0=ls&&"documentMode"in document&&11>=document.documentMode,pr=null,Di=null,ma=null,$i=!1;function rd(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$i||pr==null||pr!==Fn(a)||(a=pr,"selectionStart"in a&&Bo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ma&&Ca(ma,a)||(ma=a,a=Bn(Di,"onSelect"),0<a.length&&(s=new Oo("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=pr)))}function an(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var fr={animationend:an("Animation","AnimationEnd"),animationiteration:an("Animation","AnimationIteration"),animationstart:an("Animation","AnimationStart"),transitionend:an("Transition","TransitionEnd")},Jl={},Sm={};ls&&(Sm=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function pl(t){if(Jl[t])return Jl[t];if(!fr[t])return t;var s=fr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Sm)return Jl[t]=s[r];return t}var km=pl("animationend"),Cm=pl("animationiteration"),Tm=pl("animationstart"),Em=pl("transitionend"),Pm=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,s){Pm.set(t,s),or(s,[t])}for(var Zl=0;Zl<ad.length;Zl++){var Ql=ad[Zl],p0=Ql.toLowerCase(),f0=Ql[0].toUpperCase()+Ql.slice(1);Is(p0,"on"+f0)}Is(km,"onAnimationEnd");Is(Cm,"onAnimationIteration");Is(Tm,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(Em,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function nd(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,pp(a,s,void 0,t),t.currentTarget=null}function Rm(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var i=a.length-1;0<=i;i--){var c=a[i],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==l&&n.isPropagationStopped())break e;nd(n,c,d),l=o}else for(i=0;i<a.length;i++){if(c=a[i],o=c.instance,d=c.currentTarget,c=c.listener,o!==l&&n.isPropagationStopped())break e;nd(n,c,d),l=o}}}if(Dn)throw t=Ai,Dn=!1,Ai=null,t}function ve(t,s){var r=s[Ui];r===void 0&&(r=s[Ui]=new Set);var a=t+"__bubble";r.has(a)||(Am(s,t,2,!1),r.add(a))}function Gl(t,s,r){var a=0;s&&(a|=4),Am(r,t,a,s)}var nn="_reactListening"+Math.random().toString(36).slice(2);function Ta(t){if(!t[nn]){t[nn]=!0,zu.forEach(function(r){r!=="selectionchange"&&(g0.has(r)||Gl(r,!1,t),Gl(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[nn]||(s[nn]=!0,Gl("selectionchange",!1,s))}}function Am(t,s,r,a){switch(pm(s)){case 1:var n=Rp;break;case 4:n=Ap;break;default:n=Do}r=n.bind(null,s,r,t),n=void 0,!Ri||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function Kl(t,s,r,a,n){var l=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var c=a.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;i=i.return}for(;c!==null;){if(i=Qs(c),i===null)return;if(o=i.tag,o===5||o===6){a=l=i;continue e}c=c.parentNode}}a=a.return}tm(function(){var d=l,p=Ao(r),f=[];e:{var b=Pm.get(t);if(b!==void 0){var x=Oo,g=t;switch(t){case"keypress":if(Nn(r)===0)break e;case"keydown":case"keyup":x=Jp;break;case"focusin":g="focus",x=Vl;break;case"focusout":g="blur",x=Vl;break;case"beforeblur":case"afterblur":x=Vl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Gp;break;case km:case Cm:case Tm:x=Op;break;case Em:x=Yp;break;case"scroll":x=Lp;break;case"wheel":x=e0;break;case"copy":case"cut":case"paste":x=Ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Qc}var y=(s&4)!==0,j=!y&&t==="scroll",m=y?b!==null?b+"Capture":null:b;y=[];for(var h=d,v;h!==null;){v=h;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,m!==null&&(w=Na(h,m),w!=null&&y.push(Ea(h,w,v)))),j)break;h=h.return}0<y.length&&(b=new x(b,g,null,r,p),f.push({event:b,listeners:y}))}}if(!(s&7)){e:{if(b=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",b&&r!==Ei&&(g=r.relatedTarget||r.fromElement)&&(Qs(g)||g[is]))break e;if((x||b)&&(b=p.window===p?p:(b=p.ownerDocument)?b.defaultView||b.parentWindow:window,x?(g=r.relatedTarget||r.toElement,x=d,g=g?Qs(g):null,g!==null&&(j=cr(g),g!==j||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=d),x!==g)){if(y=Jc,w="onMouseLeave",m="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(y=Qc,w="onPointerLeave",m="onPointerEnter",h="pointer"),j=x==null?b:gr(x),v=g==null?b:gr(g),b=new y(w,h+"leave",x,r,p),b.target=j,b.relatedTarget=v,w=null,Qs(p)===d&&(y=new y(m,h+"enter",g,r,p),y.target=v,y.relatedTarget=j,w=y),j=w,x&&g)t:{for(y=x,m=g,h=0,v=y;v;v=dr(v))h++;for(v=0,w=m;w;w=dr(w))v++;for(;0<h-v;)y=dr(y),h--;for(;0<v-h;)m=dr(m),v--;for(;h--;){if(y===m||m!==null&&y===m.alternate)break t;y=dr(y),m=dr(m)}y=null}else y=null;x!==null&&ld(f,b,x,y,!1),g!==null&&j!==null&&ld(f,j,g,y,!0)}}e:{if(b=d?gr(d):window,x=b.nodeName&&b.nodeName.toLowerCase(),x==="select"||x==="input"&&b.type==="file")var S=i0;else if(Yc(b))if(vm)S=u0;else{S=c0;var A=o0}else(x=b.nodeName)&&x.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(S=d0);if(S&&(S=S(t,d))){bm(f,S,r,p);break e}A&&A(t,b,d),t==="focusout"&&(A=b._wrapperState)&&A.controlled&&b.type==="number"&&_i(b,"number",b.value)}switch(A=d?gr(d):window,t){case"focusin":(Yc(A)||A.contentEditable==="true")&&(pr=A,Di=d,ma=null);break;case"focusout":ma=Di=pr=null;break;case"mousedown":$i=!0;break;case"contextmenu":case"mouseup":case"dragend":$i=!1,rd(f,r,p);break;case"selectionchange":if(h0)break;case"keydown":case"keyup":rd(f,r,p)}var _;if(Io)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else hr?ym(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(gm&&r.locale!=="ko"&&(hr||I!=="onCompositionStart"?I==="onCompositionEnd"&&hr&&(_=fm()):(Ns=p,$o="value"in Ns?Ns.value:Ns.textContent,hr=!0)),A=Bn(d,I),0<A.length&&(I=new Zc(I,t,null,r,p),f.push({event:I,listeners:A}),_?I.data=_:(_=jm(r),_!==null&&(I.data=_)))),(_=s0?r0(t,r):a0(t,r))&&(d=Bn(d,"onBeforeInput"),0<d.length&&(p=new Zc("onBeforeInput","beforeinput",null,r,p),f.push({event:p,listeners:d}),p.data=_))}Rm(f,s)})}function Ea(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Bn(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Na(t,r),l!=null&&a.unshift(Ea(t,l,n)),l=Na(t,s),l!=null&&a.push(Ea(t,l,n))),t=t.return}return a}function dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ld(t,s,r,a,n){for(var l=s._reactName,i=[];r!==null&&r!==a;){var c=r,o=c.alternate,d=c.stateNode;if(o!==null&&o===a)break;c.tag===5&&d!==null&&(c=d,n?(o=Na(r,l),o!=null&&i.unshift(Ea(r,o,c))):n||(o=Na(r,l),o!=null&&i.push(Ea(r,o,c)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var y0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function id(t){return(typeof t=="string"?t:""+t).replace(y0,`
`).replace(j0,"")}function ln(t,s,r){if(s=id(s),id(t)!==s&&r)throw Error(W(425))}function Un(){}var Oi=null,zi=null;function Ii(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bi=typeof setTimeout=="function"?setTimeout:void 0,b0=typeof clearTimeout=="function"?clearTimeout:void 0,od=typeof Promise=="function"?Promise:void 0,v0=typeof queueMicrotask=="function"?queueMicrotask:typeof od<"u"?function(t){return od.resolve(null).then(t).catch(N0)}:Bi;function N0(t){setTimeout(function(){throw t})}function Yl(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Sa(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Sa(s)}function Ts(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function cd(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ur,Pa="__reactProps$"+Ur,is="__reactContainer$"+Ur,Ui="__reactEvents$"+Ur,w0="__reactListeners$"+Ur,_0="__reactHandles$"+Ur;function Qs(t){var s=t[qt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[is]||r[qt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=cd(t);t!==null;){if(r=t[qt])return r;t=cd(t)}return s}t=r,r=t.parentNode}return null}function Ha(t){return t=t[qt]||t[is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function fl(t){return t[Pa]||null}var Hi=[],yr=-1;function Bs(t){return{current:t}}function Ne(t){0>yr||(t.current=Hi[yr],Hi[yr]=null,yr--)}function ye(t,s){yr++,Hi[yr]=t.current,t.current=s}var zs={},et=Bs(zs),ct=Bs(!1),sr=zs;function Ar(t,s){var r=t.type.contextTypes;if(!r)return zs;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function dt(t){return t=t.childContextTypes,t!=null}function Hn(){Ne(ct),Ne(et)}function dd(t,s,r){if(et.current!==zs)throw Error(W(168));ye(et,s),ye(ct,r)}function Lm(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(W(108,op(t)||"Unknown",n));return ke({},r,a)}function Vn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zs,sr=et.current,ye(et,t),ye(ct,ct.current),!0}function ud(t,s,r){var a=t.stateNode;if(!a)throw Error(W(169));r?(t=Lm(t,s,sr),a.__reactInternalMemoizedMergedChildContext=t,Ne(ct),Ne(et),ye(et,t)):Ne(ct),ye(ct,r)}var es=null,gl=!1,Xl=!1;function Fm(t){es===null?es=[t]:es.push(t)}function S0(t){gl=!0,Fm(t)}function Us(){if(!Xl&&es!==null){Xl=!0;var t=0,s=fe;try{var r=es;for(fe=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}es=null,gl=!1}catch(n){throw es!==null&&(es=es.slice(t+1)),nm(Lo,Us),n}finally{fe=s,Xl=!1}}return null}var jr=[],br=0,Wn=null,qn=0,_t=[],St=0,rr=null,ss=1,rs="";function qs(t,s){jr[br++]=qn,jr[br++]=Wn,Wn=t,qn=s}function Mm(t,s,r){_t[St++]=ss,_t[St++]=rs,_t[St++]=rr,rr=t;var a=ss;t=rs;var n=32-Dt(a)-1;a&=~(1<<n),r+=1;var l=32-Dt(s)+n;if(30<l){var i=n-n%5;l=(a&(1<<i)-1).toString(32),a>>=i,n-=i,ss=1<<32-Dt(s)+n|r<<n|a,rs=l+t}else ss=1<<l|r<<n|a,rs=t}function Uo(t){t.return!==null&&(qs(t,1),Mm(t,1,0))}function Ho(t){for(;t===Wn;)Wn=jr[--br],jr[br]=null,qn=jr[--br],jr[br]=null;for(;t===rr;)rr=_t[--St],_t[St]=null,rs=_t[--St],_t[St]=null,ss=_t[--St],_t[St]=null}var yt=null,gt=null,we=!1,Mt=null;function Dm(t,s){var r=kt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function md(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,yt=t,gt=Ts(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,yt=t,gt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=rr!==null?{id:ss,overflow:rs}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=kt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,yt=t,gt=null,!0):!1;default:return!1}}function Vi(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wi(t){if(we){var s=gt;if(s){var r=s;if(!md(t,s)){if(Vi(t))throw Error(W(418));s=Ts(r.nextSibling);var a=yt;s&&md(t,s)?Dm(a,r):(t.flags=t.flags&-4097|2,we=!1,yt=t)}}else{if(Vi(t))throw Error(W(418));t.flags=t.flags&-4097|2,we=!1,yt=t}}}function xd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yt=t}function on(t){if(t!==yt)return!1;if(!we)return xd(t),we=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Ii(t.type,t.memoizedProps)),s&&(s=gt)){if(Vi(t))throw $m(),Error(W(418));for(;s;)Dm(t,s),s=Ts(s.nextSibling)}if(xd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){gt=Ts(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}gt=null}}else gt=yt?Ts(t.stateNode.nextSibling):null;return!0}function $m(){for(var t=gt;t;)t=Ts(t.nextSibling)}function Lr(){gt=yt=null,we=!1}function Vo(t){Mt===null?Mt=[t]:Mt.push(t)}var k0=ms.ReactCurrentBatchConfig;function ea(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var a=r.stateNode}if(!a)throw Error(W(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var c=n.refs;i===null?delete c[l]:c[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,t))}return t}function cn(t,s){throw t=Object.prototype.toString.call(s),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function hd(t){var s=t._init;return s(t._payload)}function Om(t){function s(m,h){if(t){var v=m.deletions;v===null?(m.deletions=[h],m.flags|=16):v.push(h)}}function r(m,h){if(!t)return null;for(;h!==null;)s(m,h),h=h.sibling;return null}function a(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function n(m,h){return m=As(m,h),m.index=0,m.sibling=null,m}function l(m,h,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<h?(m.flags|=2,h):v):(m.flags|=2,h)):(m.flags|=1048576,h)}function i(m){return t&&m.alternate===null&&(m.flags|=2),m}function c(m,h,v,w){return h===null||h.tag!==6?(h=li(v,m.mode,w),h.return=m,h):(h=n(h,v),h.return=m,h)}function o(m,h,v,w){var S=v.type;return S===xr?p(m,h,v.props.children,w,v.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&hd(S)===h.type)?(w=n(h,v.props),w.ref=ea(m,h,v),w.return=m,w):(w=En(v.type,v.key,v.props,null,m.mode,w),w.ref=ea(m,h,v),w.return=m,w)}function d(m,h,v,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=ii(v,m.mode,w),h.return=m,h):(h=n(h,v.children||[]),h.return=m,h)}function p(m,h,v,w,S){return h===null||h.tag!==7?(h=er(v,m.mode,w,S),h.return=m,h):(h=n(h,v),h.return=m,h)}function f(m,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=li(""+h,m.mode,v),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ka:return v=En(h.type,h.key,h.props,null,m.mode,v),v.ref=ea(m,null,h),v.return=m,v;case mr:return h=ii(h,m.mode,v),h.return=m,h;case ys:var w=h._init;return f(m,w(h._payload),v)}if(na(h)||Qr(h))return h=er(h,m.mode,v,null),h.return=m,h;cn(m,h)}return null}function b(m,h,v,w){var S=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:c(m,h,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ka:return v.key===S?o(m,h,v,w):null;case mr:return v.key===S?d(m,h,v,w):null;case ys:return S=v._init,b(m,h,S(v._payload),w)}if(na(v)||Qr(v))return S!==null?null:p(m,h,v,w,null);cn(m,v)}return null}function x(m,h,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(v)||null,c(h,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ka:return m=m.get(w.key===null?v:w.key)||null,o(h,m,w,S);case mr:return m=m.get(w.key===null?v:w.key)||null,d(h,m,w,S);case ys:var A=w._init;return x(m,h,v,A(w._payload),S)}if(na(w)||Qr(w))return m=m.get(v)||null,p(h,m,w,S,null);cn(h,w)}return null}function g(m,h,v,w){for(var S=null,A=null,_=h,I=h=0,C=null;_!==null&&I<v.length;I++){_.index>I?(C=_,_=null):C=_.sibling;var T=b(m,_,v[I],w);if(T===null){_===null&&(_=C);break}t&&_&&T.alternate===null&&s(m,_),h=l(T,h,I),A===null?S=T:A.sibling=T,A=T,_=C}if(I===v.length)return r(m,_),we&&qs(m,I),S;if(_===null){for(;I<v.length;I++)_=f(m,v[I],w),_!==null&&(h=l(_,h,I),A===null?S=_:A.sibling=_,A=_);return we&&qs(m,I),S}for(_=a(m,_);I<v.length;I++)C=x(_,m,I,v[I],w),C!==null&&(t&&C.alternate!==null&&_.delete(C.key===null?I:C.key),h=l(C,h,I),A===null?S=C:A.sibling=C,A=C);return t&&_.forEach(function(F){return s(m,F)}),we&&qs(m,I),S}function y(m,h,v,w){var S=Qr(v);if(typeof S!="function")throw Error(W(150));if(v=S.call(v),v==null)throw Error(W(151));for(var A=S=null,_=h,I=h=0,C=null,T=v.next();_!==null&&!T.done;I++,T=v.next()){_.index>I?(C=_,_=null):C=_.sibling;var F=b(m,_,T.value,w);if(F===null){_===null&&(_=C);break}t&&_&&F.alternate===null&&s(m,_),h=l(F,h,I),A===null?S=F:A.sibling=F,A=F,_=C}if(T.done)return r(m,_),we&&qs(m,I),S;if(_===null){for(;!T.done;I++,T=v.next())T=f(m,T.value,w),T!==null&&(h=l(T,h,I),A===null?S=T:A.sibling=T,A=T);return we&&qs(m,I),S}for(_=a(m,_);!T.done;I++,T=v.next())T=x(_,m,I,T.value,w),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?I:T.key),h=l(T,h,I),A===null?S=T:A.sibling=T,A=T);return t&&_.forEach(function(k){return s(m,k)}),we&&qs(m,I),S}function j(m,h,v,w){if(typeof v=="object"&&v!==null&&v.type===xr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ka:e:{for(var S=v.key,A=h;A!==null;){if(A.key===S){if(S=v.type,S===xr){if(A.tag===7){r(m,A.sibling),h=n(A,v.props.children),h.return=m,m=h;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&hd(S)===A.type){r(m,A.sibling),h=n(A,v.props),h.ref=ea(m,A,v),h.return=m,m=h;break e}r(m,A);break}else s(m,A);A=A.sibling}v.type===xr?(h=er(v.props.children,m.mode,w,v.key),h.return=m,m=h):(w=En(v.type,v.key,v.props,null,m.mode,w),w.ref=ea(m,h,v),w.return=m,m=w)}return i(m);case mr:e:{for(A=v.key;h!==null;){if(h.key===A)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){r(m,h.sibling),h=n(h,v.children||[]),h.return=m,m=h;break e}else{r(m,h);break}else s(m,h);h=h.sibling}h=ii(v,m.mode,w),h.return=m,m=h}return i(m);case ys:return A=v._init,j(m,h,A(v._payload),w)}if(na(v))return g(m,h,v,w);if(Qr(v))return y(m,h,v,w);cn(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(r(m,h.sibling),h=n(h,v),h.return=m,m=h):(r(m,h),h=li(v,m.mode,w),h.return=m,m=h),i(m)):r(m,h)}return j}var Fr=Om(!0),zm=Om(!1),Jn=Bs(null),Zn=null,vr=null,Wo=null;function qo(){Wo=vr=Zn=null}function Jo(t){var s=Jn.current;Ne(Jn),t._currentValue=s}function qi(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Er(t,s){Zn=t,Wo=vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(ot=!0),t.firstContext=null)}function Et(t){var s=t._currentValue;if(Wo!==t)if(t={context:t,memoizedValue:s,next:null},vr===null){if(Zn===null)throw Error(W(308));vr=t,Zn.dependencies={lanes:0,firstContext:t}}else vr=vr.next=t;return s}var Gs=null;function Zo(t){Gs===null?Gs=[t]:Gs.push(t)}function Im(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,Zo(s)):(r.next=n.next,n.next=r),s.interleaved=r,os(t,a)}function os(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var js=!1;function Qo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bm(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ns(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Es(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,xe&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,os(t,r)}return n=a.interleaved,n===null?(s.next=s,Zo(a)):(s.next=n.next,n.next=s),a.interleaved=s,os(t,r)}function wn(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Fo(t,r)}}function pd(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Qn(t,s,r,a){var n=t.updateQueue;js=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var o=c,d=o.next;o.next=null,i===null?l=d:i.next=d,i=o;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==i&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=o))}if(l!==null){var f=n.baseState;i=0,p=d=o=null,c=l;do{var b=c.lane,x=c.eventTime;if((a&b)===b){p!==null&&(p=p.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=t,y=c;switch(b=s,x=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(x,f,b);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,b=typeof g=="function"?g.call(x,f,b):g,b==null)break e;f=ke({},f,b);break e;case 2:js=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,b=n.effects,b===null?n.effects=[c]:b.push(c))}else x={eventTime:x,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=x,o=f):p=p.next=x,i|=b;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;b=c,c=b.next,b.next=null,n.lastBaseUpdate=b,n.shared.pending=null}}while(!0);if(p===null&&(o=f),n.baseState=o,n.firstBaseUpdate=d,n.lastBaseUpdate=p,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);nr|=i,t.lanes=i,t.memoizedState=f}}function fd(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(W(191,n));n.call(a)}}}var Va={},Zt=Bs(Va),Ra=Bs(Va),Aa=Bs(Va);function Ks(t){if(t===Va)throw Error(W(174));return t}function Go(t,s){switch(ye(Aa,s),ye(Ra,t),ye(Zt,Va),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ki(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ki(s,t)}Ne(Zt),ye(Zt,s)}function Mr(){Ne(Zt),Ne(Ra),Ne(Aa)}function Um(t){Ks(Aa.current);var s=Ks(Zt.current),r=ki(s,t.type);s!==r&&(ye(Ra,t),ye(Zt,r))}function Ko(t){Ra.current===t&&(Ne(Zt),Ne(Ra))}var _e=Bs(0);function Gn(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ei=[];function Yo(){for(var t=0;t<ei.length;t++)ei[t]._workInProgressVersionPrimary=null;ei.length=0}var _n=ms.ReactCurrentDispatcher,ti=ms.ReactCurrentBatchConfig,ar=0,Se=null,Oe=null,Be=null,Kn=!1,xa=!1,La=0,C0=0;function Je(){throw Error(W(321))}function Xo(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!zt(t[r],s[r]))return!1;return!0}function ec(t,s,r,a,n,l){if(ar=l,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_n.current=t===null||t.memoizedState===null?R0:A0,t=r(a,n),xa){l=0;do{if(xa=!1,La=0,25<=l)throw Error(W(301));l+=1,Be=Oe=null,s.updateQueue=null,_n.current=L0,t=r(a,n)}while(xa)}if(_n.current=Yn,s=Oe!==null&&Oe.next!==null,ar=0,Be=Oe=Se=null,Kn=!1,s)throw Error(W(300));return t}function tc(){var t=La!==0;return La=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=t:Be=Be.next=t,Be}function Pt(){if(Oe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var s=Be===null?Se.memoizedState:Be.next;if(s!==null)Be=s,Oe=t;else{if(t===null)throw Error(W(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Be===null?Se.memoizedState=Be=t:Be=Be.next=t}return Be}function Fa(t,s){return typeof s=="function"?s(t):s}function si(t){var s=Pt(),r=s.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=t;var a=Oe,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var c=i=null,o=null,d=l;do{var p=d.lane;if((ar&p)===p)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=f,i=a):o=o.next=f,Se.lanes|=p,nr|=p}d=d.next}while(d!==null&&d!==l);o===null?i=a:o.next=c,zt(a,s.memoizedState)||(ot=!0),s.memoizedState=a,s.baseState=i,s.baseQueue=o,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,Se.lanes|=l,nr|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function ri(t){var s=Pt(),r=s.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);zt(l,s.memoizedState)||(ot=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function Hm(){}function Vm(t,s){var r=Se,a=Pt(),n=s(),l=!zt(a.memoizedState,n);if(l&&(a.memoizedState=n,ot=!0),a=a.queue,sc(Jm.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||Be!==null&&Be.memoizedState.tag&1){if(r.flags|=2048,Ma(9,qm.bind(null,r,a,n,s),void 0,null),Ue===null)throw Error(W(349));ar&30||Wm(r,s,n)}return n}function Wm(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Se.updateQueue,s===null?(s={lastEffect:null,stores:null},Se.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function qm(t,s,r,a){s.value=r,s.getSnapshot=a,Zm(s)&&Qm(t)}function Jm(t,s,r){return r(function(){Zm(s)&&Qm(t)})}function Zm(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!zt(t,r)}catch{return!0}}function Qm(t){var s=os(t,1);s!==null&&$t(s,t,1,-1)}function gd(t){var s=Wt();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:t},s.queue=t,t=t.dispatch=P0.bind(null,Se,t),[s.memoizedState,t]}function Ma(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Se.updateQueue,s===null?(s={lastEffect:null,stores:null},Se.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function Gm(){return Pt().memoizedState}function Sn(t,s,r,a){var n=Wt();Se.flags|=t,n.memoizedState=Ma(1|s,r,void 0,a===void 0?null:a)}function yl(t,s,r,a){var n=Pt();a=a===void 0?null:a;var l=void 0;if(Oe!==null){var i=Oe.memoizedState;if(l=i.destroy,a!==null&&Xo(a,i.deps)){n.memoizedState=Ma(s,r,l,a);return}}Se.flags|=t,n.memoizedState=Ma(1|s,r,l,a)}function yd(t,s){return Sn(8390656,8,t,s)}function sc(t,s){return yl(2048,8,t,s)}function Km(t,s){return yl(4,2,t,s)}function Ym(t,s){return yl(4,4,t,s)}function Xm(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function ex(t,s,r){return r=r!=null?r.concat([t]):null,yl(4,4,Xm.bind(null,s,t),r)}function rc(){}function tx(t,s){var r=Pt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Xo(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function sx(t,s){var r=Pt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Xo(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function rx(t,s,r){return ar&21?(zt(r,s)||(r=om(),Se.lanes|=r,nr|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=r)}function T0(t,s){var r=fe;fe=r!==0&&4>r?r:4,t(!0);var a=ti.transition;ti.transition={};try{t(!1),s()}finally{fe=r,ti.transition=a}}function ax(){return Pt().memoizedState}function E0(t,s,r){var a=Rs(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},nx(t))lx(s,r);else if(r=Im(t,s,r,a),r!==null){var n=rt();$t(r,t,a,n),ix(r,s,a)}}function P0(t,s,r){var a=Rs(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(nx(t))lx(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,c=l(i,r);if(n.hasEagerState=!0,n.eagerState=c,zt(c,i)){var o=s.interleaved;o===null?(n.next=n,Zo(s)):(n.next=o.next,o.next=n),s.interleaved=n;return}}catch{}finally{}r=Im(t,s,n,a),r!==null&&(n=rt(),$t(r,t,a,n),ix(r,s,a))}}function nx(t){var s=t.alternate;return t===Se||s!==null&&s===Se}function lx(t,s){xa=Kn=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function ix(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Fo(t,r)}}var Yn={readContext:Et,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},R0={readContext:Et,useCallback:function(t,s){return Wt().memoizedState=[t,s===void 0?null:s],t},useContext:Et,useEffect:yd,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Sn(4194308,4,Xm.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Sn(4194308,4,t,s)},useInsertionEffect:function(t,s){return Sn(4,2,t,s)},useMemo:function(t,s){var r=Wt();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=Wt();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=E0.bind(null,Se,t),[a.memoizedState,t]},useRef:function(t){var s=Wt();return t={current:t},s.memoizedState=t},useState:gd,useDebugValue:rc,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=gd(!1),s=t[0];return t=T0.bind(null,t[1]),Wt().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Se,n=Wt();if(we){if(r===void 0)throw Error(W(407));r=r()}else{if(r=s(),Ue===null)throw Error(W(349));ar&30||Wm(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,yd(Jm.bind(null,a,l,t),[t]),a.flags|=2048,Ma(9,qm.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=Wt(),s=Ue.identifierPrefix;if(we){var r=rs,a=ss;r=(a&~(1<<32-Dt(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=La++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=C0++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},A0={readContext:Et,useCallback:tx,useContext:Et,useEffect:sc,useImperativeHandle:ex,useInsertionEffect:Km,useLayoutEffect:Ym,useMemo:sx,useReducer:si,useRef:Gm,useState:function(){return si(Fa)},useDebugValue:rc,useDeferredValue:function(t){var s=Pt();return rx(s,Oe.memoizedState,t)},useTransition:function(){var t=si(Fa)[0],s=Pt().memoizedState;return[t,s]},useMutableSource:Hm,useSyncExternalStore:Vm,useId:ax,unstable_isNewReconciler:!1},L0={readContext:Et,useCallback:tx,useContext:Et,useEffect:sc,useImperativeHandle:ex,useInsertionEffect:Km,useLayoutEffect:Ym,useMemo:sx,useReducer:ri,useRef:Gm,useState:function(){return ri(Fa)},useDebugValue:rc,useDeferredValue:function(t){var s=Pt();return Oe===null?s.memoizedState=t:rx(s,Oe.memoizedState,t)},useTransition:function(){var t=ri(Fa)[0],s=Pt().memoizedState;return[t,s]},useMutableSource:Hm,useSyncExternalStore:Vm,useId:ax,unstable_isNewReconciler:!1};function Lt(t,s){if(t&&t.defaultProps){s=ke({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Ji(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:ke({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jl={isMounted:function(t){return(t=t._reactInternals)?cr(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=rt(),n=Rs(t),l=ns(a,n);l.payload=s,r!=null&&(l.callback=r),s=Es(t,l,n),s!==null&&($t(s,t,n,a),wn(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=rt(),n=Rs(t),l=ns(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Es(t,l,n),s!==null&&($t(s,t,n,a),wn(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=rt(),a=Rs(t),n=ns(r,a);n.tag=2,s!=null&&(n.callback=s),s=Es(t,n,a),s!==null&&($t(s,t,a,r),wn(s,t,a))}};function jd(t,s,r,a,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,i):s.prototype&&s.prototype.isPureReactComponent?!Ca(r,a)||!Ca(n,l):!0}function ox(t,s,r){var a=!1,n=zs,l=s.contextType;return typeof l=="object"&&l!==null?l=Et(l):(n=dt(s)?sr:et.current,a=s.contextTypes,l=(a=a!=null)?Ar(t,n):zs),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=jl,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function bd(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&jl.enqueueReplaceState(s,s.state,null)}function Zi(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Qo(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=Et(l):(l=dt(s)?sr:et.current,n.context=Ar(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Ji(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&jl.enqueueReplaceState(n,n.state,null),Qn(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Dr(t,s){try{var r="",a=s;do r+=ip(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function ai(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Qi(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var F0=typeof WeakMap=="function"?WeakMap:Map;function cx(t,s,r){r=ns(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){el||(el=!0,no=a),Qi(t,s)},r}function dx(t,s,r){r=ns(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){Qi(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Qi(t,s),typeof a!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function vd(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new F0;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Z0.bind(null,t,s,r),s.then(t,t))}function Nd(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function wd(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=ns(-1,1),s.tag=2,Es(r,s,1))),r.lanes|=1),t)}var M0=ms.ReactCurrentOwner,ot=!1;function tt(t,s,r,a){s.child=t===null?zm(s,null,r,a):Fr(s,t.child,r,a)}function _d(t,s,r,a,n){r=r.render;var l=s.ref;return Er(s,n),a=ec(t,s,r,a,l,n),r=tc(),t!==null&&!ot?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,cs(t,s,n)):(we&&r&&Uo(s),s.flags|=1,tt(t,s,a,n),s.child)}function Sd(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!uc(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,ux(t,s,l,a,n)):(t=En(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ca,r(i,a)&&t.ref===s.ref)return cs(t,s,n)}return s.flags|=1,t=As(l,a),t.ref=s.ref,t.return=s,s.child=t}function ux(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Ca(l,a)&&t.ref===s.ref)if(ot=!1,s.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(ot=!0);else return s.lanes=t.lanes,cs(t,s,n)}return Gi(t,s,r,a,n)}function mx(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(wr,ft),ft|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,ye(wr,ft),ft|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,ye(wr,ft),ft|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,ye(wr,ft),ft|=a;return tt(t,s,n,r),s.child}function xx(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Gi(t,s,r,a,n){var l=dt(r)?sr:et.current;return l=Ar(s,l),Er(s,n),r=ec(t,s,r,a,l,n),a=tc(),t!==null&&!ot?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,cs(t,s,n)):(we&&a&&Uo(s),s.flags|=1,tt(t,s,r,n),s.child)}function kd(t,s,r,a,n){if(dt(r)){var l=!0;Vn(s)}else l=!1;if(Er(s,n),s.stateNode===null)kn(t,s),ox(s,r,a),Zi(s,r,a,n),a=!0;else if(t===null){var i=s.stateNode,c=s.memoizedProps;i.props=c;var o=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Et(d):(d=dt(r)?sr:et.current,d=Ar(s,d));var p=r.getDerivedStateFromProps,f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==a||o!==d)&&bd(s,i,a,d),js=!1;var b=s.memoizedState;i.state=b,Qn(s,a,i,n),o=s.memoizedState,c!==a||b!==o||ct.current||js?(typeof p=="function"&&(Ji(s,r,p,a),o=s.memoizedState),(c=js||jd(s,r,c,a,b,o,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=o),i.props=a,i.state=o,i.context=d,a=c):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,Bm(t,s),c=s.memoizedProps,d=s.type===s.elementType?c:Lt(s.type,c),i.props=d,f=s.pendingProps,b=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=Et(o):(o=dt(r)?sr:et.current,o=Ar(s,o));var x=r.getDerivedStateFromProps;(p=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==f||b!==o)&&bd(s,i,a,o),js=!1,b=s.memoizedState,i.state=b,Qn(s,a,i,n);var g=s.memoizedState;c!==f||b!==g||ct.current||js?(typeof x=="function"&&(Ji(s,r,x,a),g=s.memoizedState),(d=js||jd(s,r,d,a,b,g,o)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,g,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,g,o)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=g),i.props=a,i.state=g,i.context=o,a=d):(typeof i.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(s.flags|=1024),a=!1)}return Ki(t,s,r,a,l,n)}function Ki(t,s,r,a,n,l){xx(t,s);var i=(s.flags&128)!==0;if(!a&&!i)return n&&ud(s,r,!1),cs(t,s,l);a=s.stateNode,M0.current=s;var c=i&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&i?(s.child=Fr(s,t.child,null,l),s.child=Fr(s,null,c,l)):tt(t,s,c,l),s.memoizedState=a.state,n&&ud(s,r,!0),s.child}function hx(t){var s=t.stateNode;s.pendingContext?dd(t,s.pendingContext,s.pendingContext!==s.context):s.context&&dd(t,s.context,!1),Go(t,s.containerInfo)}function Cd(t,s,r,a,n){return Lr(),Vo(n),s.flags|=256,tt(t,s,r,a),s.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Xi(t){return{baseLanes:t,cachePool:null,transitions:null}}function px(t,s,r){var a=s.pendingProps,n=_e.current,l=!1,i=(s.flags&128)!==0,c;if((c=i)||(c=t!==null&&t.memoizedState===null?!1:(n&2)!==0),c?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),ye(_e,n&1),t===null)return Wi(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=a.children,t=a.fallback,l?(a=s.mode,l=s.child,i={mode:"hidden",children:i},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Nl(i,a,0,null),t=er(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Xi(r),s.memoizedState=Yi,t):ac(s,i));if(n=t.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return D0(t,s,i,a,c,n,r);if(l){l=a.fallback,i=s.mode,n=t.child,c=n.sibling;var o={mode:"hidden",children:a.children};return!(i&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=o,s.deletions=null):(a=As(n,o),a.subtreeFlags=n.subtreeFlags&14680064),c!==null?l=As(c,l):(l=er(l,i,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,i=t.child.memoizedState,i=i===null?Xi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=Yi,a}return l=t.child,t=l.sibling,a=As(l,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function ac(t,s){return s=Nl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function dn(t,s,r,a){return a!==null&&Vo(a),Fr(s,t.child,null,r),t=ac(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function D0(t,s,r,a,n,l,i){if(r)return s.flags&256?(s.flags&=-257,a=ai(Error(W(422))),dn(t,s,i,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=Nl({mode:"visible",children:a.children},n,0,null),l=er(l,n,i,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,s.mode&1&&Fr(s,t.child,null,i),s.child.memoizedState=Xi(i),s.memoizedState=Yi,l);if(!(s.mode&1))return dn(t,s,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(W(419)),a=ai(l,a,void 0),dn(t,s,i,a)}if(c=(i&t.childLanes)!==0,ot||c){if(a=Ue,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,os(t,n),$t(a,t,n,-1))}return dc(),a=ai(Error(W(421))),dn(t,s,i,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Q0.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,gt=Ts(n.nextSibling),yt=s,we=!0,Mt=null,t!==null&&(_t[St++]=ss,_t[St++]=rs,_t[St++]=rr,ss=t.id,rs=t.overflow,rr=s),s=ac(s,a.children),s.flags|=4096,s)}function Td(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),qi(t.return,s,r)}function ni(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function fx(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(tt(t,s,a.children,r),a=_e.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,r,s);else if(t.tag===19)Td(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(ye(_e,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&Gn(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),ni(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&Gn(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}ni(s,!0,r,null,l);break;case"together":ni(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function kn(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function cs(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),nr|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(W(153));if(s.child!==null){for(t=s.child,r=As(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=As(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function $0(t,s,r){switch(s.tag){case 3:hx(s),Lr();break;case 5:Um(s);break;case 1:dt(s.type)&&Vn(s);break;case 4:Go(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;ye(Jn,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(ye(_e,_e.current&1),s.flags|=128,null):r&s.child.childLanes?px(t,s,r):(ye(_e,_e.current&1),t=cs(t,s,r),t!==null?t.sibling:null);ye(_e,_e.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return fx(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ye(_e,_e.current),a)break;return null;case 22:case 23:return s.lanes=0,mx(t,s,r)}return cs(t,s,r)}var gx,eo,yx,jx;gx=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eo=function(){};yx=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Ks(Zt.current);var l=null;switch(r){case"input":n=Ni(t,n),a=Ni(t,a),l=[];break;case"select":n=ke({},n,{value:void 0}),a=ke({},a,{value:void 0}),l=[];break;case"textarea":n=Si(t,n),a=Si(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Un)}Ci(r,a);var i;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var c=n[d];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ba.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in a){var o=a[d];if(c=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(l||(l=[]),l.push(d,r)),r=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(l=l||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ba.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&ve("scroll",t),l||c===o||(l=[])):(l=l||[]).push(d,o))}r&&(l=l||[]).push("style",r);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};jx=function(t,s,r,a){r!==a&&(s.flags|=4)};function ta(t,s){if(!we)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ze(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function O0(t,s,r){var a=s.pendingProps;switch(Ho(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return dt(s.type)&&Hn(),Ze(s),null;case 3:return a=s.stateNode,Mr(),Ne(ct),Ne(et),Yo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(on(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Mt!==null&&(oo(Mt),Mt=null))),eo(t,s),Ze(s),null;case 5:Ko(s);var n=Ks(Aa.current);if(r=s.type,t!==null&&s.stateNode!=null)yx(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(W(166));return Ze(s),null}if(t=Ks(Zt.current),on(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[qt]=s,a[Pa]=l,t=(s.mode&1)!==0,r){case"dialog":ve("cancel",a),ve("close",a);break;case"iframe":case"object":case"embed":ve("load",a);break;case"video":case"audio":for(n=0;n<ia.length;n++)ve(ia[n],a);break;case"source":ve("error",a);break;case"img":case"image":case"link":ve("error",a),ve("load",a);break;case"details":ve("toggle",a);break;case"input":$c(a,l),ve("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},ve("invalid",a);break;case"textarea":zc(a,l),ve("invalid",a)}Ci(r,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&ln(a.textContent,c,t),n=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&ln(a.textContent,c,t),n=["children",""+c]):ba.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&ve("scroll",a)}switch(r){case"input":Ya(a),Oc(a,l,!0);break;case"textarea":Ya(a),Ic(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=Un)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ju(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=i.createElement(r,{is:a.is}):(t=i.createElement(r),r==="select"&&(i=t,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):t=i.createElementNS(t,r),t[qt]=s,t[Pa]=a,gx(t,s,!1,!1),s.stateNode=t;e:{switch(i=Ti(r,a),r){case"dialog":ve("cancel",t),ve("close",t),n=a;break;case"iframe":case"object":case"embed":ve("load",t),n=a;break;case"video":case"audio":for(n=0;n<ia.length;n++)ve(ia[n],t);n=a;break;case"source":ve("error",t),n=a;break;case"img":case"image":case"link":ve("error",t),ve("load",t),n=a;break;case"details":ve("toggle",t),n=a;break;case"input":$c(t,a),n=Ni(t,a),ve("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=ke({},a,{value:void 0}),ve("invalid",t);break;case"textarea":zc(t,a),n=Si(t,a),ve("invalid",t);break;default:n=a}Ci(r,n),c=n;for(l in c)if(c.hasOwnProperty(l)){var o=c[l];l==="style"?Gu(t,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Zu(t,o)):l==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&va(t,o):typeof o=="number"&&va(t,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ba.hasOwnProperty(l)?o!=null&&l==="onScroll"&&ve("scroll",t):o!=null&&To(t,l,o,i))}switch(r){case"input":Ya(t),Oc(t,a,!1);break;case"textarea":Ya(t),Ic(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Os(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?Sr(t,!!a.multiple,l,!1):a.defaultValue!=null&&Sr(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Un)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ze(s),null;case 6:if(t&&s.stateNode!=null)jx(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(W(166));if(r=Ks(Aa.current),Ks(Zt.current),on(s)){if(a=s.stateNode,r=s.memoizedProps,a[qt]=s,(l=a.nodeValue!==r)&&(t=yt,t!==null))switch(t.tag){case 3:ln(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ln(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[qt]=s,s.stateNode=a}return Ze(s),null;case 13:if(Ne(_e),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&gt!==null&&s.mode&1&&!(s.flags&128))$m(),Lr(),s.flags|=98560,l=!1;else if(l=on(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(W(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(W(317));l[qt]=s}else Lr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ze(s),l=!1}else Mt!==null&&(oo(Mt),Mt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||_e.current&1?Ie===0&&(Ie=3):dc())),s.updateQueue!==null&&(s.flags|=4),Ze(s),null);case 4:return Mr(),eo(t,s),t===null&&Ta(s.stateNode.containerInfo),Ze(s),null;case 10:return Jo(s.type._context),Ze(s),null;case 17:return dt(s.type)&&Hn(),Ze(s),null;case 19:if(Ne(_e),l=s.memoizedState,l===null)return Ze(s),null;if(a=(s.flags&128)!==0,i=l.rendering,i===null)if(a)ta(l,!1);else{if(Ie!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=Gn(t),i!==null){for(s.flags|=128,ta(l,!1),a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ye(_e,_e.current&1|2),s.child}t=t.sibling}l.tail!==null&&Ee()>$r&&(s.flags|=128,a=!0,ta(l,!1),s.lanes=4194304)}else{if(!a)if(t=Gn(i),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),ta(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!we)return Ze(s),null}else 2*Ee()-l.renderingStartTime>$r&&r!==1073741824&&(s.flags|=128,a=!0,ta(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ee(),s.sibling=null,r=_e.current,ye(_e,a?r&1|2:r&1),s):(Ze(s),null);case 22:case 23:return cc(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?ft&1073741824&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),null;case 24:return null;case 25:return null}throw Error(W(156,s.tag))}function z0(t,s){switch(Ho(s),s.tag){case 1:return dt(s.type)&&Hn(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Mr(),Ne(ct),Ne(et),Yo(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Ko(s),null;case 13:if(Ne(_e),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(W(340));Lr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ne(_e),null;case 4:return Mr(),null;case 10:return Jo(s.type._context),null;case 22:case 23:return cc(),null;case 24:return null;default:return null}}var un=!1,Ye=!1,I0=typeof WeakSet=="function"?WeakSet:Set,G=null;function Nr(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ce(t,s,a)}else r.current=null}function to(t,s,r){try{r()}catch(a){Ce(t,s,a)}}var Ed=!1;function B0(t,s){if(Oi=zn,t=_m(),Bo(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,c=-1,o=-1,d=0,p=0,f=t,b=null;t:for(;;){for(var x;f!==r||n!==0&&f.nodeType!==3||(c=i+n),f!==l||a!==0&&f.nodeType!==3||(o=i+a),f.nodeType===3&&(i+=f.nodeValue.length),(x=f.firstChild)!==null;)b=f,f=x;for(;;){if(f===t)break t;if(b===r&&++d===n&&(c=i),b===l&&++p===a&&(o=i),(x=f.nextSibling)!==null)break;f=b,b=f.parentNode}f=x}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(zi={focusedElem:t,selectionRange:r},zn=!1,G=s;G!==null;)if(s=G,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,G=t;else for(;G!==null;){s=G;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,j=g.memoizedState,m=s.stateNode,h=m.getSnapshotBeforeUpdate(s.elementType===s.type?y:Lt(s.type,y),j);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(w){Ce(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,G=t;break}G=s.return}return g=Ed,Ed=!1,g}function ha(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&to(s,r,l)}n=n.next}while(n!==a)}}function bl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function so(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function bx(t){var s=t.alternate;s!==null&&(t.alternate=null,bx(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[qt],delete s[Pa],delete s[Ui],delete s[w0],delete s[_0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vx(t){return t.tag===5||t.tag===3||t.tag===4}function Pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ro(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Un));else if(a!==4&&(t=t.child,t!==null))for(ro(t,s,r),t=t.sibling;t!==null;)ro(t,s,r),t=t.sibling}function ao(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(ao(t,s,r),t=t.sibling;t!==null;)ao(t,s,r),t=t.sibling}var He=null,Ft=!1;function fs(t,s,r){for(r=r.child;r!==null;)Nx(t,s,r),r=r.sibling}function Nx(t,s,r){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ml,r)}catch{}switch(r.tag){case 5:Ye||Nr(r,s);case 6:var a=He,n=Ft;He=null,fs(t,s,r),He=a,Ft=n,He!==null&&(Ft?(t=He,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(Ft?(t=He,r=r.stateNode,t.nodeType===8?Yl(t.parentNode,r):t.nodeType===1&&Yl(t,r),Sa(t)):Yl(He,r.stateNode));break;case 4:a=He,n=Ft,He=r.stateNode.containerInfo,Ft=!0,fs(t,s,r),He=a,Ft=n;break;case 0:case 11:case 14:case 15:if(!Ye&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&to(r,s,i),n=n.next}while(n!==a)}fs(t,s,r);break;case 1:if(!Ye&&(Nr(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(c){Ce(r,s,c)}fs(t,s,r);break;case 21:fs(t,s,r);break;case 22:r.mode&1?(Ye=(a=Ye)||r.memoizedState!==null,fs(t,s,r),Ye=a):fs(t,s,r);break;default:fs(t,s,r)}}function Rd(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new I0),s.forEach(function(a){var n=G0.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function At(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,i=s,c=i;e:for(;c!==null;){switch(c.tag){case 5:He=c.stateNode,Ft=!1;break e;case 3:He=c.stateNode.containerInfo,Ft=!0;break e;case 4:He=c.stateNode.containerInfo,Ft=!0;break e}c=c.return}if(He===null)throw Error(W(160));Nx(l,i,n),He=null,Ft=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(d){Ce(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)wx(s,t),s=s.sibling}function wx(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(At(s,t),Ut(t),a&4){try{ha(3,t,t.return),bl(3,t)}catch(y){Ce(t,t.return,y)}try{ha(5,t,t.return)}catch(y){Ce(t,t.return,y)}}break;case 1:At(s,t),Ut(t),a&512&&r!==null&&Nr(r,r.return);break;case 5:if(At(s,t),Ut(t),a&512&&r!==null&&Nr(r,r.return),t.flags&32){var n=t.stateNode;try{va(n,"")}catch(y){Ce(t,t.return,y)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&Wu(n,l),Ti(c,i);var d=Ti(c,l);for(i=0;i<o.length;i+=2){var p=o[i],f=o[i+1];p==="style"?Gu(n,f):p==="dangerouslySetInnerHTML"?Zu(n,f):p==="children"?va(n,f):To(n,p,f,d)}switch(c){case"input":wi(n,l);break;case"textarea":qu(n,l);break;case"select":var b=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Sr(n,!!l.multiple,x,!1):b!==!!l.multiple&&(l.defaultValue!=null?Sr(n,!!l.multiple,l.defaultValue,!0):Sr(n,!!l.multiple,l.multiple?[]:"",!1))}n[Pa]=l}catch(y){Ce(t,t.return,y)}}break;case 6:if(At(s,t),Ut(t),a&4){if(t.stateNode===null)throw Error(W(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(y){Ce(t,t.return,y)}}break;case 3:if(At(s,t),Ut(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Sa(s.containerInfo)}catch(y){Ce(t,t.return,y)}break;case 4:At(s,t),Ut(t);break;case 13:At(s,t),Ut(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(ic=Ee())),a&4&&Rd(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(Ye=(d=Ye)||p,At(s,t),Ye=d):At(s,t),Ut(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(G=t,p=t.child;p!==null;){for(f=G=p;G!==null;){switch(b=G,x=b.child,b.tag){case 0:case 11:case 14:case 15:ha(4,b,b.return);break;case 1:Nr(b,b.return);var g=b.stateNode;if(typeof g.componentWillUnmount=="function"){a=b,r=b.return;try{s=a,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(y){Ce(a,r,y)}}break;case 5:Nr(b,b.return);break;case 22:if(b.memoizedState!==null){Ld(f);continue}}x!==null?(x.return=b,G=x):Ld(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{n=f.stateNode,d?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=f.stateNode,o=f.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Qu("display",i))}catch(y){Ce(t,t.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Ce(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:At(s,t),Ut(t),a&4&&Rd(t);break;case 21:break;default:At(s,t),Ut(t)}}function Ut(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(vx(r)){var a=r;break e}r=r.return}throw Error(W(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(va(n,""),a.flags&=-33);var l=Pd(t);ao(t,l,n);break;case 3:case 4:var i=a.stateNode.containerInfo,c=Pd(t);ro(t,c,i);break;default:throw Error(W(161))}}catch(o){Ce(t,t.return,o)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function U0(t,s,r){G=t,_x(t)}function _x(t,s,r){for(var a=(t.mode&1)!==0;G!==null;){var n=G,l=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||un;if(!i){var c=n.alternate,o=c!==null&&c.memoizedState!==null||Ye;c=un;var d=Ye;if(un=i,(Ye=o)&&!d)for(G=n;G!==null;)i=G,o=i.child,i.tag===22&&i.memoizedState!==null?Fd(n):o!==null?(o.return=i,G=o):Fd(n);for(;l!==null;)G=l,_x(l),l=l.sibling;G=n,un=c,Ye=d}Ad(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,G=l):Ad(t)}}function Ad(t){for(;G!==null;){var s=G;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ye||bl(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Ye)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Lt(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&fd(s,l,a);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}fd(s,i,r)}break;case 5:var c=s.stateNode;if(r===null&&s.flags&4){r=c;var o=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Sa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ye||s.flags&512&&so(s)}catch(b){Ce(s,s.return,b)}}if(s===t){G=null;break}if(r=s.sibling,r!==null){r.return=s.return,G=r;break}G=s.return}}function Ld(t){for(;G!==null;){var s=G;if(s===t){G=null;break}var r=s.sibling;if(r!==null){r.return=s.return,G=r;break}G=s.return}}function Fd(t){for(;G!==null;){var s=G;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{bl(4,s)}catch(o){Ce(s,r,o)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(o){Ce(s,n,o)}}var l=s.return;try{so(s)}catch(o){Ce(s,l,o)}break;case 5:var i=s.return;try{so(s)}catch(o){Ce(s,i,o)}}}catch(o){Ce(s,s.return,o)}if(s===t){G=null;break}var c=s.sibling;if(c!==null){c.return=s.return,G=c;break}G=s.return}}var H0=Math.ceil,Xn=ms.ReactCurrentDispatcher,nc=ms.ReactCurrentOwner,Ct=ms.ReactCurrentBatchConfig,xe=0,Ue=null,De=null,Ve=0,ft=0,wr=Bs(0),Ie=0,Da=null,nr=0,vl=0,lc=0,pa=null,it=null,ic=0,$r=1/0,Yt=null,el=!1,no=null,Ps=null,mn=!1,ws=null,tl=0,fa=0,lo=null,Cn=-1,Tn=0;function rt(){return xe&6?Ee():Cn!==-1?Cn:Cn=Ee()}function Rs(t){return t.mode&1?xe&2&&Ve!==0?Ve&-Ve:k0.transition!==null?(Tn===0&&(Tn=om()),Tn):(t=fe,t!==0||(t=window.event,t=t===void 0?16:pm(t.type)),t):1}function $t(t,s,r,a){if(50<fa)throw fa=0,lo=null,Error(W(185));Ba(t,r,a),(!(xe&2)||t!==Ue)&&(t===Ue&&(!(xe&2)&&(vl|=r),Ie===4&&vs(t,Ve)),ut(t,a),r===1&&xe===0&&!(s.mode&1)&&($r=Ee()+500,gl&&Us()))}function ut(t,s){var r=t.callbackNode;kp(t,s);var a=On(t,t===Ue?Ve:0);if(a===0)r!==null&&Hc(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&Hc(r),s===1)t.tag===0?S0(Md.bind(null,t)):Fm(Md.bind(null,t)),v0(function(){!(xe&6)&&Us()}),r=null;else{switch(cm(a)){case 1:r=Lo;break;case 4:r=lm;break;case 16:r=$n;break;case 536870912:r=im;break;default:r=$n}r=Ax(r,Sx.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Sx(t,s){if(Cn=-1,Tn=0,xe&6)throw Error(W(327));var r=t.callbackNode;if(Pr()&&t.callbackNode!==r)return null;var a=On(t,t===Ue?Ve:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=sl(t,a);else{s=a;var n=xe;xe|=2;var l=Cx();(Ue!==t||Ve!==s)&&(Yt=null,$r=Ee()+500,Xs(t,s));do try{q0();break}catch(c){kx(t,c)}while(!0);qo(),Xn.current=l,xe=n,De!==null?s=0:(Ue=null,Ve=0,s=Ie)}if(s!==0){if(s===2&&(n=Li(t),n!==0&&(a=n,s=io(t,n))),s===1)throw r=Da,Xs(t,0),vs(t,a),ut(t,Ee()),r;if(s===6)vs(t,a);else{if(n=t.current.alternate,!(a&30)&&!V0(n)&&(s=sl(t,a),s===2&&(l=Li(t),l!==0&&(a=l,s=io(t,l))),s===1))throw r=Da,Xs(t,0),vs(t,a),ut(t,Ee()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(W(345));case 2:Js(t,it,Yt);break;case 3:if(vs(t,a),(a&130023424)===a&&(s=ic+500-Ee(),10<s)){if(On(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){rt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Bi(Js.bind(null,t,it,Yt),s);break}Js(t,it,Yt);break;case 4:if(vs(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var i=31-Dt(a);l=1<<i,i=s[i],i>n&&(n=i),a&=~l}if(a=n,a=Ee()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*H0(a/1960))-a,10<a){t.timeoutHandle=Bi(Js.bind(null,t,it,Yt),a);break}Js(t,it,Yt);break;case 5:Js(t,it,Yt);break;default:throw Error(W(329))}}}return ut(t,Ee()),t.callbackNode===r?Sx.bind(null,t):null}function io(t,s){var r=pa;return t.current.memoizedState.isDehydrated&&(Xs(t,s).flags|=256),t=sl(t,s),t!==2&&(s=it,it=r,s!==null&&oo(s)),t}function oo(t){it===null?it=t:it.push.apply(it,t)}function V0(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!zt(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vs(t,s){for(s&=~lc,s&=~vl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Dt(s),a=1<<r;t[r]=-1,s&=~a}}function Md(t){if(xe&6)throw Error(W(327));Pr();var s=On(t,0);if(!(s&1))return ut(t,Ee()),null;var r=sl(t,s);if(t.tag!==0&&r===2){var a=Li(t);a!==0&&(s=a,r=io(t,a))}if(r===1)throw r=Da,Xs(t,0),vs(t,s),ut(t,Ee()),r;if(r===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Js(t,it,Yt),ut(t,Ee()),null}function oc(t,s){var r=xe;xe|=1;try{return t(s)}finally{xe=r,xe===0&&($r=Ee()+500,gl&&Us())}}function lr(t){ws!==null&&ws.tag===0&&!(xe&6)&&Pr();var s=xe;xe|=1;var r=Ct.transition,a=fe;try{if(Ct.transition=null,fe=1,t)return t()}finally{fe=a,Ct.transition=r,xe=s,!(xe&6)&&Us()}}function cc(){ft=wr.current,Ne(wr)}function Xs(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,b0(r)),De!==null)for(r=De.return;r!==null;){var a=r;switch(Ho(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Hn();break;case 3:Mr(),Ne(ct),Ne(et),Yo();break;case 5:Ko(a);break;case 4:Mr();break;case 13:Ne(_e);break;case 19:Ne(_e);break;case 10:Jo(a.type._context);break;case 22:case 23:cc()}r=r.return}if(Ue=t,De=t=As(t.current,null),Ve=ft=s,Ie=0,Da=null,lc=vl=nr=0,it=pa=null,Gs!==null){for(s=0;s<Gs.length;s++)if(r=Gs[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var i=l.next;l.next=n,a.next=i}r.pending=a}Gs=null}return t}function kx(t,s){do{var r=De;try{if(qo(),_n.current=Yn,Kn){for(var a=Se.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Kn=!1}if(ar=0,Be=Oe=Se=null,xa=!1,La=0,nc.current=null,r===null||r.return===null){Ie=1,Da=s,De=null;break}e:{var l=t,i=r.return,c=r,o=s;if(s=Ve,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,p=c,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var b=p.alternate;b?(p.updateQueue=b.updateQueue,p.memoizedState=b.memoizedState,p.lanes=b.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Nd(i);if(x!==null){x.flags&=-257,wd(x,i,c,l,s),x.mode&1&&vd(l,d,s),s=x,o=d;var g=s.updateQueue;if(g===null){var y=new Set;y.add(o),s.updateQueue=y}else g.add(o);break e}else{if(!(s&1)){vd(l,d,s),dc();break e}o=Error(W(426))}}else if(we&&c.mode&1){var j=Nd(i);if(j!==null){!(j.flags&65536)&&(j.flags|=256),wd(j,i,c,l,s),Vo(Dr(o,c));break e}}l=o=Dr(o,c),Ie!==4&&(Ie=2),pa===null?pa=[l]:pa.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var m=cx(l,o,s);pd(l,m);break e;case 1:c=o;var h=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ps===null||!Ps.has(v)))){l.flags|=65536,s&=-s,l.lanes|=s;var w=dx(l,c,s);pd(l,w);break e}}l=l.return}while(l!==null)}Ex(r)}catch(S){s=S,De===r&&r!==null&&(De=r=r.return);continue}break}while(!0)}function Cx(){var t=Xn.current;return Xn.current=Yn,t===null?Yn:t}function dc(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Ue===null||!(nr&268435455)&&!(vl&268435455)||vs(Ue,Ve)}function sl(t,s){var r=xe;xe|=2;var a=Cx();(Ue!==t||Ve!==s)&&(Yt=null,Xs(t,s));do try{W0();break}catch(n){kx(t,n)}while(!0);if(qo(),xe=r,Xn.current=a,De!==null)throw Error(W(261));return Ue=null,Ve=0,Ie}function W0(){for(;De!==null;)Tx(De)}function q0(){for(;De!==null&&!gp();)Tx(De)}function Tx(t){var s=Rx(t.alternate,t,ft);t.memoizedProps=t.pendingProps,s===null?Ex(t):De=s,nc.current=null}function Ex(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=z0(r,s),r!==null){r.flags&=32767,De=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ie=6,De=null;return}}else if(r=O0(r,s,ft),r!==null){De=r;return}if(s=s.sibling,s!==null){De=s;return}De=s=t}while(s!==null);Ie===0&&(Ie=5)}function Js(t,s,r){var a=fe,n=Ct.transition;try{Ct.transition=null,fe=1,J0(t,s,r,a)}finally{Ct.transition=n,fe=a}return null}function J0(t,s,r,a){do Pr();while(ws!==null);if(xe&6)throw Error(W(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Cp(t,l),t===Ue&&(De=Ue=null,Ve=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mn||(mn=!0,Ax($n,function(){return Pr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ct.transition,Ct.transition=null;var i=fe;fe=1;var c=xe;xe|=4,nc.current=null,B0(t,r),wx(r,t),x0(zi),zn=!!Oi,zi=Oi=null,t.current=r,U0(r),yp(),xe=c,fe=i,Ct.transition=l}else t.current=r;if(mn&&(mn=!1,ws=t,tl=n),l=t.pendingLanes,l===0&&(Ps=null),vp(r.stateNode),ut(t,Ee()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(el)throw el=!1,t=no,no=null,t;return tl&1&&t.tag!==0&&Pr(),l=t.pendingLanes,l&1?t===lo?fa++:(fa=0,lo=t):fa=0,Us(),null}function Pr(){if(ws!==null){var t=cm(tl),s=Ct.transition,r=fe;try{if(Ct.transition=null,fe=16>t?16:t,ws===null)var a=!1;else{if(t=ws,ws=null,tl=0,xe&6)throw Error(W(331));var n=xe;for(xe|=4,G=t.current;G!==null;){var l=G,i=l.child;if(G.flags&16){var c=l.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(G=d;G!==null;){var p=G;switch(p.tag){case 0:case 11:case 15:ha(8,p,l)}var f=p.child;if(f!==null)f.return=p,G=f;else for(;G!==null;){p=G;var b=p.sibling,x=p.return;if(bx(p),p===d){G=null;break}if(b!==null){b.return=x,G=b;break}G=x}}}var g=l.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}G=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,G=i;else e:for(;G!==null;){if(l=G,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ha(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,G=m;break e}G=l.return}}var h=t.current;for(G=h;G!==null;){i=G;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,G=v;else e:for(i=h;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bl(9,c)}}catch(S){Ce(c,c.return,S)}if(c===i){G=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,G=w;break e}G=c.return}}if(xe=n,Us(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ml,t)}catch{}a=!0}return a}finally{fe=r,Ct.transition=s}}return!1}function Dd(t,s,r){s=Dr(r,s),s=cx(t,s,1),t=Es(t,s,1),s=rt(),t!==null&&(Ba(t,1,s),ut(t,s))}function Ce(t,s,r){if(t.tag===3)Dd(t,t,r);else for(;s!==null;){if(s.tag===3){Dd(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ps===null||!Ps.has(a))){t=Dr(r,t),t=dx(s,t,1),s=Es(s,t,1),t=rt(),s!==null&&(Ba(s,1,t),ut(s,t));break}}s=s.return}}function Z0(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=rt(),t.pingedLanes|=t.suspendedLanes&r,Ue===t&&(Ve&r)===r&&(Ie===4||Ie===3&&(Ve&130023424)===Ve&&500>Ee()-ic?Xs(t,0):lc|=r),ut(t,s)}function Px(t,s){s===0&&(t.mode&1?(s=tn,tn<<=1,!(tn&130023424)&&(tn=4194304)):s=1);var r=rt();t=os(t,s),t!==null&&(Ba(t,s,r),ut(t,r))}function Q0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Px(t,r)}function G0(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(W(314))}a!==null&&a.delete(s),Px(t,r)}var Rx;Rx=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||ct.current)ot=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return ot=!1,$0(t,s,r);ot=!!(t.flags&131072)}else ot=!1,we&&s.flags&1048576&&Mm(s,qn,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;kn(t,s),t=s.pendingProps;var n=Ar(s,et.current);Er(s,r),n=ec(null,s,a,t,n,r);var l=tc();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dt(a)?(l=!0,Vn(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Qo(s),n.updater=jl,s.stateNode=n,n._reactInternals=s,Zi(s,a,t,r),s=Ki(null,s,a,!0,l,r)):(s.tag=0,we&&l&&Uo(s),tt(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(kn(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Y0(a),t=Lt(a,t),n){case 0:s=Gi(null,s,a,t,r);break e;case 1:s=kd(null,s,a,t,r);break e;case 11:s=_d(null,s,a,t,r);break e;case 14:s=Sd(null,s,a,Lt(a.type,t),r);break e}throw Error(W(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Lt(a,n),Gi(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Lt(a,n),kd(t,s,a,n,r);case 3:e:{if(hx(s),t===null)throw Error(W(387));a=s.pendingProps,l=s.memoizedState,n=l.element,Bm(t,s),Qn(s,a,null,r);var i=s.memoizedState;if(a=i.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Dr(Error(W(423)),s),s=Cd(t,s,a,r,n);break e}else if(a!==n){n=Dr(Error(W(424)),s),s=Cd(t,s,a,r,n);break e}else for(gt=Ts(s.stateNode.containerInfo.firstChild),yt=s,we=!0,Mt=null,r=zm(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lr(),a===n){s=cs(t,s,r);break e}tt(t,s,a,r)}s=s.child}return s;case 5:return Um(s),t===null&&Wi(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,Ii(a,n)?i=null:l!==null&&Ii(a,l)&&(s.flags|=32),xx(t,s),tt(t,s,i,r),s.child;case 6:return t===null&&Wi(s),null;case 13:return px(t,s,r);case 4:return Go(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Fr(s,null,a,r):tt(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Lt(a,n),_d(t,s,a,n,r);case 7:return tt(t,s,s.pendingProps,r),s.child;case 8:return tt(t,s,s.pendingProps.children,r),s.child;case 12:return tt(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,ye(Jn,a._currentValue),a._currentValue=i,l!==null)if(zt(l.value,i)){if(l.children===n.children&&!ct.current){s=cs(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var c=l.dependencies;if(c!==null){i=l.child;for(var o=c.firstContext;o!==null;){if(o.context===a){if(l.tag===1){o=ns(-1,r&-r),o.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o}}l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),qi(l.return,r,s),c.lanes|=r;break}o=o.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(W(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),qi(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}tt(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Er(s,r),n=Et(n),a=a(n),s.flags|=1,tt(t,s,a,r),s.child;case 14:return a=s.type,n=Lt(a,s.pendingProps),n=Lt(a.type,n),Sd(t,s,a,n,r);case 15:return ux(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Lt(a,n),kn(t,s),s.tag=1,dt(a)?(t=!0,Vn(s)):t=!1,Er(s,r),ox(s,a,n),Zi(s,a,n,r),Ki(null,s,a,!0,t,r);case 19:return fx(t,s,r);case 22:return mx(t,s,r)}throw Error(W(156,s.tag))};function Ax(t,s){return nm(t,s)}function K0(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,s,r,a){return new K0(t,s,r,a)}function uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y0(t){if(typeof t=="function")return uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Po)return 11;if(t===Ro)return 14}return 2}function As(t,s){var r=t.alternate;return r===null?(r=kt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function En(t,s,r,a,n,l){var i=2;if(a=t,typeof t=="function")uc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case xr:return er(r.children,n,l,s);case Eo:i=8,n|=8;break;case yi:return t=kt(12,r,s,n|2),t.elementType=yi,t.lanes=l,t;case ji:return t=kt(13,r,s,n),t.elementType=ji,t.lanes=l,t;case bi:return t=kt(19,r,s,n),t.elementType=bi,t.lanes=l,t;case Uu:return Nl(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Iu:i=10;break e;case Bu:i=9;break e;case Po:i=11;break e;case Ro:i=14;break e;case ys:i=16,a=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return s=kt(i,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function er(t,s,r,a){return t=kt(7,t,a,s),t.lanes=r,t}function Nl(t,s,r,a){return t=kt(22,t,a,s),t.elementType=Uu,t.lanes=r,t.stateNode={isHidden:!1},t}function li(t,s,r){return t=kt(6,t,null,s),t.lanes=r,t}function ii(t,s,r){return s=kt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function X0(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function mc(t,s,r,a,n,l,i,c,o){return t=new X0(t,s,r,c,o),s===1?(s=1,l===!0&&(s|=8)):s=0,l=kt(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qo(l),t}function ef(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function Lx(t){if(!t)return zs;t=t._reactInternals;e:{if(cr(t)!==t||t.tag!==1)throw Error(W(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(W(171))}if(t.tag===1){var r=t.type;if(dt(r))return Lm(t,r,s)}return s}function Fx(t,s,r,a,n,l,i,c,o){return t=mc(r,a,!0,t,n,l,i,c,o),t.context=Lx(null),r=t.current,a=rt(),n=Rs(r),l=ns(a,n),l.callback=s??null,Es(r,l,n),t.current.lanes=n,Ba(t,n,a),ut(t,a),t}function wl(t,s,r,a){var n=s.current,l=rt(),i=Rs(n);return r=Lx(r),s.context===null?s.context=r:s.pendingContext=r,s=ns(l,i),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Es(n,s,i),t!==null&&($t(t,n,i,l),wn(t,n,i)),i}function rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $d(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function xc(t,s){$d(t,s),(t=t.alternate)&&$d(t,s)}function tf(){return null}var Mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function hc(t){this._internalRoot=t}_l.prototype.render=hc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(W(409));wl(t,s,null,null)};_l.prototype.unmount=hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;lr(function(){wl(null,t,null,null)}),s[is]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var s=mm();t={blockedOn:null,target:t,priority:s};for(var r=0;r<bs.length&&s!==0&&s<bs[r].priority;r++);bs.splice(r,0,t),r===0&&hm(t)}};function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Od(){}function sf(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var d=rl(i);l.call(d)}}var i=Fx(s,a,t,0,null,!1,!1,"",Od);return t._reactRootContainer=i,t[is]=i.current,Ta(t.nodeType===8?t.parentNode:t),lr(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var c=a;a=function(){var d=rl(o);c.call(d)}}var o=mc(t,0,!1,null,null,!1,!1,"",Od);return t._reactRootContainer=o,t[is]=o.current,Ta(t.nodeType===8?t.parentNode:t),lr(function(){wl(s,o,r,a)}),o}function kl(t,s,r,a,n){var l=r._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var c=n;n=function(){var o=rl(i);c.call(o)}}wl(s,i,t,n)}else i=sf(r,s,t,n,a);return rl(i)}dm=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=la(s.pendingLanes);r!==0&&(Fo(s,r|1),ut(s,Ee()),!(xe&6)&&($r=Ee()+500,Us()))}break;case 13:lr(function(){var a=os(t,1);if(a!==null){var n=rt();$t(a,t,1,n)}}),xc(t,1)}};Mo=function(t){if(t.tag===13){var s=os(t,134217728);if(s!==null){var r=rt();$t(s,t,134217728,r)}xc(t,134217728)}};um=function(t){if(t.tag===13){var s=Rs(t),r=os(t,s);if(r!==null){var a=rt();$t(r,t,s,a)}xc(t,s)}};mm=function(){return fe};xm=function(t,s){var r=fe;try{return fe=t,s()}finally{fe=r}};Pi=function(t,s,r){switch(s){case"input":if(wi(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=fl(a);if(!n)throw Error(W(90));Vu(a),wi(a,n)}}}break;case"textarea":qu(t,r);break;case"select":s=r.value,s!=null&&Sr(t,!!r.multiple,s,!1)}};Xu=oc;em=lr;var rf={usingClientEntryPoint:!1,Events:[Ha,gr,fl,Ku,Yu,oc]},sa={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},af={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rm(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||tf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xn.isDisabled&&xn.supportsFiber)try{ml=xn.inject(af),Jt=xn}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rf;Nt.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(s))throw Error(W(200));return ef(t,s,null,r)};Nt.createRoot=function(t,s){if(!pc(t))throw Error(W(299));var r=!1,a="",n=Mx;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=mc(t,1,!1,null,null,r,!1,a,n),t[is]=s.current,Ta(t.nodeType===8?t.parentNode:t),new hc(s)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=rm(s),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return lr(t)};Nt.hydrate=function(t,s,r){if(!Sl(s))throw Error(W(200));return kl(null,t,s,!0,r)};Nt.hydrateRoot=function(t,s,r){if(!pc(t))throw Error(W(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",i=Mx;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=Fx(s,null,t,1,r??null,n,!1,l,i),t[is]=s.current,Ta(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new _l(s)};Nt.render=function(t,s,r){if(!Sl(s))throw Error(W(200));return kl(null,t,s,!1,r)};Nt.unmountComponentAtNode=function(t){if(!Sl(t))throw Error(W(40));return t._reactRootContainer?(lr(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[is]=null})}),!0):!1};Nt.unstable_batchedUpdates=oc;Nt.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Sl(r))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return kl(t,s,r,!1,a)};Nt.version="18.3.1-next-f1338f8080-20240426";function Dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dx)}catch(t){console.error(t)}}Dx(),Du.exports=Nt;var nf=Du.exports,zd=nf;fi.createRoot=zd.createRoot,fi.hydrateRoot=zd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},$a.apply(this,arguments)}var _s;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_s||(_s={}));const Id="popstate";function lf(t){t===void 0&&(t={});function s(a,n){let{pathname:l,search:i,hash:c}=a.location;return co("",{pathname:l,search:i,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:al(n)}return cf(s,r,null,t)}function Re(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function $x(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function of(){return Math.random().toString(36).substr(2,8)}function Bd(t,s){return{usr:t.state,key:t.key,idx:s}}function co(t,s,r,a){return r===void 0&&(r=null),$a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Hr(s):s,{state:r,key:s&&s.key||a||of()})}function al(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Hr(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function cf(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,c=_s.Pop,o=null,d=p();d==null&&(d=0,i.replaceState($a({},i.state,{idx:d}),""));function p(){return(i.state||{idx:null}).idx}function f(){c=_s.Pop;let j=p(),m=j==null?null:j-d;d=j,o&&o({action:c,location:y.location,delta:m})}function b(j,m){c=_s.Push;let h=co(y.location,j,m);d=p()+1;let v=Bd(h,d),w=y.createHref(h);try{i.pushState(v,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(w)}l&&o&&o({action:c,location:y.location,delta:1})}function x(j,m){c=_s.Replace;let h=co(y.location,j,m);d=p();let v=Bd(h,d),w=y.createHref(h);i.replaceState(v,"",w),l&&o&&o({action:c,location:y.location,delta:0})}function g(j){let m=n.location.origin!=="null"?n.location.origin:n.location.href,h=typeof j=="string"?j:al(j);return h=h.replace(/ $/,"%20"),Re(m,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,m)}let y={get action(){return c},get location(){return t(n,i)},listen(j){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(Id,f),o=j,()=>{n.removeEventListener(Id,f),o=null}},createHref(j){return s(n,j)},createURL:g,encodeLocation(j){let m=g(j);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:b,replace:x,go(j){return i.go(j)}};return y}var Ud;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ud||(Ud={}));function df(t,s,r){return r===void 0&&(r="/"),uf(t,s,r)}function uf(t,s,r,a){let n=typeof s=="string"?Hr(s):s,l=fc(n.pathname||"/",r);if(l==null)return null;let i=Ox(t);mf(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let d=_f(l);c=vf(i[o],d)}return c}function Ox(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(l,i,c)=>{let o={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};o.relativePath.startsWith("/")&&(Re(o.relativePath.startsWith(a),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(a.length));let d=Ls([a,o.relativePath]),p=r.concat(o);l.children&&l.children.length>0&&(Re(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ox(l.children,s,p,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:jf(d,l.index),routesMeta:p})};return t.forEach((l,i)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))n(l,i);else for(let o of zx(l.path))n(l,i,o)}),s}function zx(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let i=zx(a.join("/")),c=[];return c.push(...i.map(o=>o===""?l:[l,o].join("/"))),n&&c.push(...i),c.map(o=>t.startsWith("/")&&o===""?"/":o)}function mf(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:bf(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const xf=/^:[\w-]+$/,hf=3,pf=2,ff=1,gf=10,yf=-2,Hd=t=>t==="*";function jf(t,s){let r=t.split("/"),a=r.length;return r.some(Hd)&&(a+=yf),s&&(a+=pf),r.filter(n=>!Hd(n)).reduce((n,l)=>n+(xf.test(l)?hf:l===""?ff:gf),a)}function bf(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function vf(t,s,r){let{routesMeta:a}=t,n={},l="/",i=[];for(let c=0;c<a.length;++c){let o=a[c],d=c===a.length-1,p=l==="/"?s:s.slice(l.length)||"/",f=Nf({path:o.relativePath,caseSensitive:o.caseSensitive,end:d},p),b=o.route;if(!f)return null;Object.assign(n,f.params),i.push({params:n,pathname:Ls([l,f.pathname]),pathnameBase:Tf(Ls([l,f.pathnameBase])),route:b}),f.pathnameBase!=="/"&&(l=Ls([l,f.pathnameBase]))}return i}function Nf(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=wf(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((d,p,f)=>{let{paramName:b,isOptional:x}=p;if(b==="*"){let y=c[f]||"";i=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const g=c[f];return x&&!g?d[b]=void 0:d[b]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:t}}function wf(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),$x(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(a.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function _f(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return $x(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function fc(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function Sf(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?Hr(t):t;return{pathname:r?r.startsWith("/")?r:kf(r,s):s,search:Ef(a),hash:Pf(n)}}function kf(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function oi(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Cf(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function gc(t,s){let r=Cf(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function yc(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=Hr(t):(n=$a({},t),Re(!n.pathname||!n.pathname.includes("?"),oi("?","pathname","search",n)),Re(!n.pathname||!n.pathname.includes("#"),oi("#","pathname","hash",n)),Re(!n.search||!n.search.includes("#"),oi("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,c;if(i==null)c=r;else{let f=s.length-1;if(!a&&i.startsWith("..")){let b=i.split("/");for(;b[0]==="..";)b.shift(),f-=1;n.pathname=b.join("/")}c=f>=0?s[f]:"/"}let o=Sf(n,c),d=i&&i!=="/"&&i.endsWith("/"),p=(l||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(d||p)&&(o.pathname+="/"),o}const Ls=t=>t.join("/").replace(/\/\/+/g,"/"),Tf=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ef=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Pf=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Rf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ix=["post","put","patch","delete"];new Set(Ix);const Af=["get",...Ix];new Set(Af);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Oa.apply(this,arguments)}const jc=u.createContext(null),Lf=u.createContext(null),Hs=u.createContext(null),Cl=u.createContext(null),xs=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Bx=u.createContext(null);function Ff(t,s){let{relative:r}=s===void 0?{}:s;Vr()||Re(!1);let{basename:a,navigator:n}=u.useContext(Hs),{hash:l,pathname:i,search:c}=Hx(t,{relative:r}),o=i;return a!=="/"&&(o=i==="/"?a:Ls([a,i])),n.createHref({pathname:o,search:c,hash:l})}function Vr(){return u.useContext(Cl)!=null}function Wr(){return Vr()||Re(!1),u.useContext(Cl).location}function Ux(t){u.useContext(Hs).static||u.useLayoutEffect(t)}function Wa(){let{isDataRoute:t}=u.useContext(xs);return t?Jf():Mf()}function Mf(){Vr()||Re(!1);let t=u.useContext(jc),{basename:s,future:r,navigator:a}=u.useContext(Hs),{matches:n}=u.useContext(xs),{pathname:l}=Wr(),i=JSON.stringify(gc(n,r.v7_relativeSplatPath)),c=u.useRef(!1);return Ux(()=>{c.current=!0}),u.useCallback(function(d,p){if(p===void 0&&(p={}),!c.current)return;if(typeof d=="number"){a.go(d);return}let f=yc(d,JSON.parse(i),l,p.relative==="path");t==null&&s!=="/"&&(f.pathname=f.pathname==="/"?s:Ls([s,f.pathname])),(p.replace?a.replace:a.push)(f,p.state,p)},[s,a,i,l,t])}function Vd(){let{matches:t}=u.useContext(xs),s=t[t.length-1];return s?s.params:{}}function Hx(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=u.useContext(Hs),{matches:n}=u.useContext(xs),{pathname:l}=Wr(),i=JSON.stringify(gc(n,a.v7_relativeSplatPath));return u.useMemo(()=>yc(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function Df(t,s){return $f(t,s)}function $f(t,s,r,a){Vr()||Re(!1);let{navigator:n}=u.useContext(Hs),{matches:l}=u.useContext(xs),i=l[l.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let d=Wr(),p;if(s){var f;let j=typeof s=="string"?Hr(s):s;o==="/"||(f=j.pathname)!=null&&f.startsWith(o)||Re(!1),p=j}else p=d;let b=p.pathname||"/",x=b;if(o!=="/"){let j=o.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(j.length).join("/")}let g=df(t,{pathname:x}),y=Uf(g&&g.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:Ls([o,n.encodeLocation?n.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?o:Ls([o,n.encodeLocation?n.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,r,a);return s&&y?u.createElement(Cl.Provider,{value:{location:Oa({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:_s.Pop}},y):y}function Of(){let t=qf(),s=Rf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},s),r?u.createElement("pre",{style:n},r):null,null)}const zf=u.createElement(Of,null);class If extends u.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?u.createElement(xs.Provider,{value:this.props.routeContext},u.createElement(Bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bf(t){let{routeContext:s,match:r,children:a}=t,n=u.useContext(jc);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(xs.Provider,{value:s},a)}function Uf(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,c=(n=r)==null?void 0:n.errors;if(c!=null){let p=i.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);p>=0||Re(!1),i=i.slice(0,Math.min(i.length,p+1))}let o=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:b,errors:x}=r,g=f.route.loader&&b[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||g){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((p,f,b)=>{let x,g=!1,y=null,j=null;r&&(x=c&&f.route.id?c[f.route.id]:void 0,y=f.route.errorElement||zf,o&&(d<0&&b===0?(Zf("route-fallback"),g=!0,j=null):d===b&&(g=!0,j=f.route.hydrateFallbackElement||null)));let m=s.concat(i.slice(0,b+1)),h=()=>{let v;return x?v=y:g?v=j:f.route.Component?v=u.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=p,u.createElement(Bf,{match:f,routeContext:{outlet:p,matches:m,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||b===0)?u.createElement(If,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):h()},null)}var Vx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vx||{}),Wx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wx||{});function Hf(t){let s=u.useContext(jc);return s||Re(!1),s}function Vf(t){let s=u.useContext(Lf);return s||Re(!1),s}function Wf(t){let s=u.useContext(xs);return s||Re(!1),s}function qx(t){let s=Wf(),r=s.matches[s.matches.length-1];return r.route.id||Re(!1),r.route.id}function qf(){var t;let s=u.useContext(Bx),r=Vf(),a=qx();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function Jf(){let{router:t}=Hf(Vx.UseNavigateStable),s=qx(Wx.UseNavigateStable),r=u.useRef(!1);return Ux(()=>{r.current=!0}),u.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Oa({fromRouteId:s},l)))},[t,s])}const Wd={};function Zf(t,s,r){Wd[t]||(Wd[t]=!0)}function Qf(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qe(t){let{to:s,replace:r,state:a,relative:n}=t;Vr()||Re(!1);let{future:l,static:i}=u.useContext(Hs),{matches:c}=u.useContext(xs),{pathname:o}=Wr(),d=Wa(),p=yc(s,gc(c,l.v7_relativeSplatPath),o,n==="path"),f=JSON.stringify(p);return u.useEffect(()=>d(JSON.parse(f),{replace:r,state:a,relative:n}),[d,f,n,r,a]),null}function Me(t){Re(!1)}function Gf(t){let{basename:s="/",children:r=null,location:a,navigationType:n=_s.Pop,navigator:l,static:i=!1,future:c}=t;Vr()&&Re(!1);let o=s.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:o,navigator:l,static:i,future:Oa({v7_relativeSplatPath:!1},c)}),[o,c,l,i]);typeof a=="string"&&(a=Hr(a));let{pathname:p="/",search:f="",hash:b="",state:x=null,key:g="default"}=a,y=u.useMemo(()=>{let j=fc(p,o);return j==null?null:{location:{pathname:j,search:f,hash:b,state:x,key:g},navigationType:n}},[o,p,f,b,x,g,n]);return y==null?null:u.createElement(Hs.Provider,{value:d},u.createElement(Cl.Provider,{children:r,value:y}))}function Kf(t){let{children:s,location:r}=t;return Df(uo(s),r)}new Promise(()=>{});function uo(t,s){s===void 0&&(s=[]);let r=[];return u.Children.forEach(t,(a,n)=>{if(!u.isValidElement(a))return;let l=[...s,n];if(a.type===u.Fragment){r.push.apply(r,uo(a.props.children,l));return}a.type!==Me&&Re(!1),!a.props.index||!a.props.children||Re(!1);let i={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=uo(a.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},mo.apply(this,arguments)}function Yf(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Xf(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eg(t,s){return t.button===0&&(!s||s==="_self")&&!Xf(t)}const tg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sg="6";try{window.__reactRouterVersion=sg}catch{}const rg="startTransition",qd=Zh[rg];function ag(t){let{basename:s,children:r,future:a,window:n}=t,l=u.useRef();l.current==null&&(l.current=lf({window:n,v5Compat:!0}));let i=l.current,[c,o]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=a||{},p=u.useCallback(f=>{d&&qd?qd(()=>o(f)):o(f)},[o,d]);return u.useLayoutEffect(()=>i.listen(p),[i,p]),u.useEffect(()=>Qf(a),[a]),u.createElement(Gf,{basename:s,children:r,location:c.location,navigationType:c.action,navigator:i,future:a})}const ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nl=u.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:l,replace:i,state:c,target:o,to:d,preventScrollReset:p,viewTransition:f}=s,b=Yf(s,tg),{basename:x}=u.useContext(Hs),g,y=!1;if(typeof d=="string"&&lg.test(d)&&(g=d,ng))try{let v=new URL(window.location.href),w=d.startsWith("//")?new URL(v.protocol+d):new URL(d),S=fc(w.pathname,x);w.origin===v.origin&&S!=null?d=S+w.search+w.hash:y=!0}catch{}let j=Ff(d,{relative:n}),m=ig(d,{replace:i,state:c,target:o,preventScrollReset:p,relative:n,viewTransition:f});function h(v){a&&a(v),v.defaultPrevented||m(v)}return u.createElement("a",mo({},b,{href:g||j,onClick:y||l?a:h,ref:r,target:o}))});var Jd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jd||(Jd={}));var Zd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zd||(Zd={}));function ig(t,s){let{target:r,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:c}=s===void 0?{}:s,o=Wa(),d=Wr(),p=Hx(t,{relative:i});return u.useCallback(f=>{if(eg(f,r)){f.preventDefault();let b=a!==void 0?a:al(d)===al(p);o(t,{replace:b,state:n,preventScrollReset:l,relative:i,viewTransition:c})}},[d,o,p,a,n,r,t,l,i,c])}function Jx(t,s){return function(){return t.apply(s,arguments)}}const{toString:og}=Object.prototype,{getPrototypeOf:bc}=Object,{iterator:Tl,toStringTag:Zx}=Symbol,El=(t=>s=>{const r=og.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bt=t=>(t=t.toLowerCase(),s=>El(s)===t),Pl=t=>s=>typeof s===t,{isArray:qr}=Array,Or=Pl("undefined");function qa(t){return t!==null&&!Or(t)&&t.constructor!==null&&!Or(t.constructor)&&mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Qx=Bt("ArrayBuffer");function cg(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Qx(t.buffer),s}const dg=Pl("string"),mt=Pl("function"),Gx=Pl("number"),Ja=t=>t!==null&&typeof t=="object",ug=t=>t===!0||t===!1,Pn=t=>{if(El(t)!=="object")return!1;const s=bc(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Zx in t)&&!(Tl in t)},mg=t=>{if(!Ja(t)||qa(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},xg=Bt("Date"),hg=Bt("File"),pg=Bt("Blob"),fg=Bt("FileList"),gg=t=>Ja(t)&&mt(t.pipe),yg=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||mt(t.append)&&((s=El(t))==="formdata"||s==="object"&&mt(t.toString)&&t.toString()==="[object FormData]"))},jg=Bt("URLSearchParams"),[bg,vg,Ng,wg]=["ReadableStream","Request","Response","Headers"].map(Bt),_g=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Za(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),qr(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(qa(t))return;const l=r?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let c;for(a=0;a<i;a++)c=l[a],s.call(null,t[c],c,t)}}function Kx(t,s){if(qa(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const Ys=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yx=t=>!Or(t)&&t!==Ys;function xo(){const{caseless:t,skipUndefined:s}=Yx(this)&&this||{},r={},a=(n,l)=>{const i=t&&Kx(r,l)||l;Pn(r[i])&&Pn(n)?r[i]=xo(r[i],n):Pn(n)?r[i]=xo({},n):qr(n)?r[i]=n.slice():(!s||!Or(n))&&(r[i]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&Za(arguments[n],a);return r}const Sg=(t,s,r,{allOwnKeys:a}={})=>(Za(s,(n,l)=>{r&&mt(n)?t[l]=Jx(n,r):t[l]=n},{allOwnKeys:a}),t),kg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Cg=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Tg=(t,s,r,a)=>{let n,l,i;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),l=n.length;l-- >0;)i=n[l],(!a||a(i,t,s))&&!c[i]&&(s[i]=t[i],c[i]=!0);t=r!==!1&&bc(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Eg=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},Pg=t=>{if(!t)return null;if(qr(t))return t;let s=t.length;if(!Gx(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Rg=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&bc(Uint8Array)),Ag=(t,s)=>{const a=(t&&t[Tl]).call(t);let n;for(;(n=a.next())&&!n.done;){const l=n.value;s.call(t,l[0],l[1])}},Lg=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},Fg=Bt("HTMLFormElement"),Mg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),Qd=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),Dg=Bt("RegExp"),Xx=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};Za(r,(n,l)=>{let i;(i=s(n,l,t))!==!1&&(a[l]=i||n)}),Object.defineProperties(t,a)},$g=t=>{Xx(t,(s,r)=>{if(mt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(mt(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Og=(t,s)=>{const r={},a=n=>{n.forEach(l=>{r[l]=!0})};return qr(t)?a(t):a(String(t).split(s)),r},zg=()=>{},Ig=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Bg(t){return!!(t&&mt(t.append)&&t[Zx]==="FormData"&&t[Tl])}const Ug=t=>{const s=new Array(10),r=(a,n)=>{if(Ja(a)){if(s.indexOf(a)>=0)return;if(qa(a))return a;if(!("toJSON"in a)){s[n]=a;const l=qr(a)?[]:{};return Za(a,(i,c)=>{const o=r(i,n+1);!Or(o)&&(l[c]=o)}),s[n]=void 0,l}}return a};return r(t,0)},Hg=Bt("AsyncFunction"),Vg=t=>t&&(Ja(t)||mt(t))&&mt(t.then)&&mt(t.catch),eh=((t,s)=>t?setImmediate:s?((r,a)=>(Ys.addEventListener("message",({source:n,data:l})=>{n===Ys&&l===r&&a.length&&a.shift()()},!1),n=>{a.push(n),Ys.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",mt(Ys.postMessage)),Wg=typeof queueMicrotask<"u"?queueMicrotask.bind(Ys):typeof process<"u"&&process.nextTick||eh,qg=t=>t!=null&&mt(t[Tl]),O={isArray:qr,isArrayBuffer:Qx,isBuffer:qa,isFormData:yg,isArrayBufferView:cg,isString:dg,isNumber:Gx,isBoolean:ug,isObject:Ja,isPlainObject:Pn,isEmptyObject:mg,isReadableStream:bg,isRequest:vg,isResponse:Ng,isHeaders:wg,isUndefined:Or,isDate:xg,isFile:hg,isBlob:pg,isRegExp:Dg,isFunction:mt,isStream:gg,isURLSearchParams:jg,isTypedArray:Rg,isFileList:fg,forEach:Za,merge:xo,extend:Sg,trim:_g,stripBOM:kg,inherits:Cg,toFlatObject:Tg,kindOf:El,kindOfTest:Bt,endsWith:Eg,toArray:Pg,forEachEntry:Ag,matchAll:Lg,isHTMLForm:Fg,hasOwnProperty:Qd,hasOwnProp:Qd,reduceDescriptors:Xx,freezeMethods:$g,toObjectSet:Og,toCamelCase:Mg,noop:zg,toFiniteNumber:Ig,findKey:Kx,global:Ys,isContextDefined:Yx,isSpecCompliantForm:Bg,toJSONObject:Ug,isAsyncFn:Hg,isThenable:Vg,setImmediate:eh,asap:Wg,isIterable:qg};function ie(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}O.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const th=ie.prototype,sh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sh[t]={value:t}});Object.defineProperties(ie,sh);Object.defineProperty(th,"isAxiosError",{value:!0});ie.from=(t,s,r,a,n,l)=>{const i=Object.create(th);O.toFlatObject(t,i,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",o=s==null&&t?t.code:s;return ie.call(i,c,o,r,a,n),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",l&&Object.assign(i,l),i};const Jg=null;function ho(t){return O.isPlainObject(t)||O.isArray(t)}function rh(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function Gd(t,s,r){return t?t.concat(s).map(function(n,l){return n=rh(n),!r&&l?"["+n+"]":n}).join(r?".":""):s}function Zg(t){return O.isArray(t)&&!t.some(ho)}const Qg=O.toFlatObject(O,{},null,function(s){return/^is[A-Z]/.test(s)});function Rl(t,s,r){if(!O.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=O.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!O.isUndefined(j[y])});const a=r.metaTokens,n=r.visitor||p,l=r.dots,i=r.indexes,o=(r.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(s);if(!O.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(O.isDate(g))return g.toISOString();if(O.isBoolean(g))return g.toString();if(!o&&O.isBlob(g))throw new ie("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(g)||O.isTypedArray(g)?o&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function p(g,y,j){let m=g;if(g&&!j&&typeof g=="object"){if(O.endsWith(y,"{}"))y=a?y:y.slice(0,-2),g=JSON.stringify(g);else if(O.isArray(g)&&Zg(g)||(O.isFileList(g)||O.endsWith(y,"[]"))&&(m=O.toArray(g)))return y=rh(y),m.forEach(function(v,w){!(O.isUndefined(v)||v===null)&&s.append(i===!0?Gd([y],w,l):i===null?y:y+"[]",d(v))}),!1}return ho(g)?!0:(s.append(Gd(j,y,l),d(g)),!1)}const f=[],b=Object.assign(Qg,{defaultVisitor:p,convertValue:d,isVisitable:ho});function x(g,y){if(!O.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),O.forEach(g,function(m,h){(!(O.isUndefined(m)||m===null)&&n.call(s,m,O.isString(h)?h.trim():h,y,b))===!0&&x(m,y?y.concat(h):[h])}),f.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return x(t),s}function Kd(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function vc(t,s){this._pairs=[],t&&Rl(t,this,s)}const ah=vc.prototype;ah.append=function(s,r){this._pairs.push([s,r])};ah.toString=function(s){const r=s?function(a){return s.call(this,a,Kd)}:Kd;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Gg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nh(t,s,r){if(!s)return t;const a=r&&r.encode||Gg;O.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let l;if(n?l=n(s,r):l=O.isURLSearchParams(s)?s.toString():new vc(s,r).toString(a),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Yd{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){O.forEach(this.handlers,function(a){a!==null&&s(a)})}}const lh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kg=typeof URLSearchParams<"u"?URLSearchParams:vc,Yg=typeof FormData<"u"?FormData:null,Xg=typeof Blob<"u"?Blob:null,ey={isBrowser:!0,classes:{URLSearchParams:Kg,FormData:Yg,Blob:Xg},protocols:["http","https","file","blob","url","data"]},Nc=typeof window<"u"&&typeof document<"u",po=typeof navigator=="object"&&navigator||void 0,ty=Nc&&(!po||["ReactNative","NativeScript","NS"].indexOf(po.product)<0),sy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ry=Nc&&window.location.href||"http://localhost",ay=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nc,hasStandardBrowserEnv:ty,hasStandardBrowserWebWorkerEnv:sy,navigator:po,origin:ry},Symbol.toStringTag,{value:"Module"})),Xe={...ay,...ey};function ny(t,s){return Rl(t,new Xe.classes.URLSearchParams,{visitor:function(r,a,n,l){return Xe.isNode&&O.isBuffer(r)?(this.append(a,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function ly(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function iy(t){const s={},r=Object.keys(t);let a;const n=r.length;let l;for(a=0;a<n;a++)l=r[a],s[l]=t[l];return s}function ih(t){function s(r,a,n,l){let i=r[l++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),o=l>=r.length;return i=!i&&O.isArray(n)?n.length:i,o?(O.hasOwnProp(n,i)?n[i]=[n[i],a]:n[i]=a,!c):((!n[i]||!O.isObject(n[i]))&&(n[i]=[]),s(r,a,n[i],l)&&O.isArray(n[i])&&(n[i]=iy(n[i])),!c)}if(O.isFormData(t)&&O.isFunction(t.entries)){const r={};return O.forEachEntry(t,(a,n)=>{s(ly(a),n,r,0)}),r}return null}function oy(t,s,r){if(O.isString(t))try{return(s||JSON.parse)(t),O.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Qa={transitional:lh,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,l=O.isObject(s);if(l&&O.isHTMLForm(s)&&(s=new FormData(s)),O.isFormData(s))return n?JSON.stringify(ih(s)):s;if(O.isArrayBuffer(s)||O.isBuffer(s)||O.isStream(s)||O.isFile(s)||O.isBlob(s)||O.isReadableStream(s))return s;if(O.isArrayBufferView(s))return s.buffer;if(O.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return ny(s,this.formSerializer).toString();if((c=O.isFileList(s))||a.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return Rl(c?{"files[]":s}:s,o&&new o,this.formSerializer)}}return l||n?(r.setContentType("application/json",!1),oy(s)):s}],transformResponse:[function(s){const r=this.transitional||Qa.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(O.isResponse(s)||O.isReadableStream(s))return s;if(s&&O.isString(s)&&(a&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?ie.from(c,ie.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xe.classes.FormData,Blob:Xe.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{Qa.headers[t]={}});const cy=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dy=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),a=i.substring(n+1).trim(),!(!r||s[r]&&cy[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},Xd=Symbol("internals");function ra(t){return t&&String(t).trim().toLowerCase()}function Rn(t){return t===!1||t==null?t:O.isArray(t)?t.map(Rn):String(t)}function uy(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const my=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ci(t,s,r,a,n){if(O.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!O.isString(s)){if(O.isString(a))return s.indexOf(a)!==-1;if(O.isRegExp(a))return a.test(s)}}function xy(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function hy(t,s){const r=O.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,l,i){return this[a].call(this,s,n,l,i)},configurable:!0})})}let xt=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function l(c,o,d){const p=ra(o);if(!p)throw new Error("header name must be a non-empty string");const f=O.findKey(n,p);(!f||n[f]===void 0||d===!0||d===void 0&&n[f]!==!1)&&(n[f||o]=Rn(c))}const i=(c,o)=>O.forEach(c,(d,p)=>l(d,p,o));if(O.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(O.isString(s)&&(s=s.trim())&&!my(s))i(dy(s),r);else if(O.isObject(s)&&O.isIterable(s)){let c={},o,d;for(const p of s){if(!O.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[d=p[0]]=(o=c[d])?O.isArray(o)?[...o,p[1]]:[o,p[1]]:p[1]}i(c,r)}else s!=null&&l(r,s,a);return this}get(s,r){if(s=ra(s),s){const a=O.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return uy(n);if(O.isFunction(r))return r.call(this,n,a);if(O.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=ra(s),s){const a=O.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||ci(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function l(i){if(i=ra(i),i){const c=O.findKey(a,i);c&&(!r||ci(a,a[c],c,r))&&(delete a[c],n=!0)}}return O.isArray(s)?s.forEach(l):l(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const l=r[a];(!s||ci(this,this[l],l,s,!0))&&(delete this[l],n=!0)}return n}normalize(s){const r=this,a={};return O.forEach(this,(n,l)=>{const i=O.findKey(a,l);if(i){r[i]=Rn(n),delete r[l];return}const c=s?xy(l):String(l).trim();c!==l&&delete r[l],r[c]=Rn(n),a[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return O.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&O.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[Xd]=this[Xd]={accessors:{}}).accessors,n=this.prototype;function l(i){const c=ra(i);a[c]||(hy(n,i),a[c]=!0)}return O.isArray(s)?s.forEach(l):l(s),this}};xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(xt.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});O.freezeMethods(xt);function di(t,s){const r=this||Qa,a=s||r,n=xt.from(a.headers);let l=a.data;return O.forEach(t,function(c){l=c.call(r,l,n.normalize(),s?s.status:void 0)}),n.normalize(),l}function oh(t){return!!(t&&t.__CANCEL__)}function Jr(t,s,r){ie.call(this,t??"canceled",ie.ERR_CANCELED,s,r),this.name="CanceledError"}O.inherits(Jr,ie,{__CANCEL__:!0});function ch(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new ie("Request failed with status code "+r.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function py(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function fy(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,l=0,i;return s=s!==void 0?s:1e3,function(o){const d=Date.now(),p=a[l];i||(i=d),r[n]=o,a[n]=d;let f=l,b=0;for(;f!==n;)b+=r[f++],f=f%t;if(n=(n+1)%t,n===l&&(l=(l+1)%t),d-i<s)return;const x=p&&d-p;return x?Math.round(b*1e3/x):void 0}}function gy(t,s){let r=0,a=1e3/s,n,l;const i=(d,p=Date.now())=>{r=p,n=null,l&&(clearTimeout(l),l=null),t(...d)};return[(...d)=>{const p=Date.now(),f=p-r;f>=a?i(d,p):(n=d,l||(l=setTimeout(()=>{l=null,i(n)},a-f)))},()=>n&&i(n)]}const ll=(t,s,r=3)=>{let a=0;const n=fy(50,250);return gy(l=>{const i=l.loaded,c=l.lengthComputable?l.total:void 0,o=i-a,d=n(o),p=i<=c;a=i;const f={loaded:i,total:c,progress:c?i/c:void 0,bytes:o,rate:d||void 0,estimated:d&&c&&p?(c-i)/d:void 0,event:l,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(f)},r)},eu=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},tu=t=>(...s)=>O.asap(()=>t(...s)),yy=Xe.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Xe.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Xe.origin),Xe.navigator&&/(msie|trident)/i.test(Xe.navigator.userAgent)):()=>!0,jy=Xe.hasStandardBrowserEnv?{write(t,s,r,a,n,l){const i=[t+"="+encodeURIComponent(s)];O.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),O.isString(a)&&i.push("path="+a),O.isString(n)&&i.push("domain="+n),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function by(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vy(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function dh(t,s,r){let a=!by(s);return t&&(a||r==!1)?vy(t,s):s}const su=t=>t instanceof xt?{...t}:t;function ir(t,s){s=s||{};const r={};function a(d,p,f,b){return O.isPlainObject(d)&&O.isPlainObject(p)?O.merge.call({caseless:b},d,p):O.isPlainObject(p)?O.merge({},p):O.isArray(p)?p.slice():p}function n(d,p,f,b){if(O.isUndefined(p)){if(!O.isUndefined(d))return a(void 0,d,f,b)}else return a(d,p,f,b)}function l(d,p){if(!O.isUndefined(p))return a(void 0,p)}function i(d,p){if(O.isUndefined(p)){if(!O.isUndefined(d))return a(void 0,d)}else return a(void 0,p)}function c(d,p,f){if(f in s)return a(d,p);if(f in t)return a(void 0,d)}const o={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(d,p,f)=>n(su(d),su(p),f,!0)};return O.forEach(Object.keys({...t,...s}),function(p){const f=o[p]||n,b=f(t[p],s[p],p);O.isUndefined(b)&&f!==c||(r[p]=b)}),r}const uh=t=>{const s=ir({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:l,headers:i,auth:c}=s;if(s.headers=i=xt.from(i),s.url=nh(dh(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),O.isFormData(r)){if(Xe.hasStandardBrowserEnv||Xe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(O.isFunction(r.getHeaders)){const o=r.getHeaders(),d=["content-type","content-length"];Object.entries(o).forEach(([p,f])=>{d.includes(p.toLowerCase())&&i.set(p,f)})}}if(Xe.hasStandardBrowserEnv&&(a&&O.isFunction(a)&&(a=a(s)),a||a!==!1&&yy(s.url))){const o=n&&l&&jy.read(l);o&&i.set(n,o)}return s},Ny=typeof XMLHttpRequest<"u",wy=Ny&&function(t){return new Promise(function(r,a){const n=uh(t);let l=n.data;const i=xt.from(n.headers).normalize();let{responseType:c,onUploadProgress:o,onDownloadProgress:d}=n,p,f,b,x,g;function y(){x&&x(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(p),n.signal&&n.signal.removeEventListener("abort",p)}let j=new XMLHttpRequest;j.open(n.method.toUpperCase(),n.url,!0),j.timeout=n.timeout;function m(){if(!j)return;const v=xt.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:v,config:t,request:j};ch(function(_){r(_),y()},function(_){a(_),y()},S),j=null}"onloadend"in j?j.onloadend=m:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(m)},j.onabort=function(){j&&(a(new ie("Request aborted",ie.ECONNABORTED,t,j)),j=null)},j.onerror=function(w){const S=w&&w.message?w.message:"Network Error",A=new ie(S,ie.ERR_NETWORK,t,j);A.event=w||null,a(A),j=null},j.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||lh;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),a(new ie(w,S.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,j)),j=null},l===void 0&&i.setContentType(null),"setRequestHeader"in j&&O.forEach(i.toJSON(),function(w,S){j.setRequestHeader(S,w)}),O.isUndefined(n.withCredentials)||(j.withCredentials=!!n.withCredentials),c&&c!=="json"&&(j.responseType=n.responseType),d&&([b,g]=ll(d,!0),j.addEventListener("progress",b)),o&&j.upload&&([f,x]=ll(o),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(p=v=>{j&&(a(!v||v.type?new Jr(null,t,j):v),j.abort(),j=null)},n.cancelToken&&n.cancelToken.subscribe(p),n.signal&&(n.signal.aborted?p():n.signal.addEventListener("abort",p)));const h=py(n.url);if(h&&Xe.protocols.indexOf(h)===-1){a(new ie("Unsupported protocol "+h+":",ie.ERR_BAD_REQUEST,t));return}j.send(l||null)})},_y=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const l=function(d){if(!n){n=!0,c();const p=d instanceof Error?d:this.reason;a.abort(p instanceof ie?p:new Jr(p instanceof Error?p.message:p))}};let i=s&&setTimeout(()=>{i=null,l(new ie(`timeout ${s} of ms exceeded`,ie.ETIMEDOUT))},s);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),t=null)};t.forEach(d=>d.addEventListener("abort",l));const{signal:o}=a;return o.unsubscribe=()=>O.asap(c),o}},Sy=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},ky=async function*(t,s){for await(const r of Cy(t))yield*Sy(r,s)},Cy=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},ru=(t,s,r,a)=>{const n=ky(t,s);let l=0,i,c=o=>{i||(i=!0,a&&a(o))};return new ReadableStream({async pull(o){try{const{done:d,value:p}=await n.next();if(d){c(),o.close();return}let f=p.byteLength;if(r){let b=l+=f;r(b)}o.enqueue(new Uint8Array(p))}catch(d){throw c(d),d}},cancel(o){return c(o),n.return()}},{highWaterMark:2})},au=64*1024,{isFunction:hn}=O,Ty=(({Request:t,Response:s})=>({Request:t,Response:s}))(O.global),{ReadableStream:nu,TextEncoder:lu}=O.global,iu=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Ey=t=>{t=O.merge.call({skipUndefined:!0},Ty,t);const{fetch:s,Request:r,Response:a}=t,n=s?hn(s):typeof fetch=="function",l=hn(r),i=hn(a);if(!n)return!1;const c=n&&hn(nu),o=n&&(typeof lu=="function"?(g=>y=>g.encode(y))(new lu):async g=>new Uint8Array(await new r(g).arrayBuffer())),d=l&&c&&iu(()=>{let g=!1;const y=new r(Xe.origin,{body:new nu,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),p=i&&c&&iu(()=>O.isReadableStream(new a("").body)),f={stream:p&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,j)=>{let m=y&&y[g];if(m)return m.call(y);throw new ie(`Response type '${g}' is not supported`,ie.ERR_NOT_SUPPORT,j)})});const b=async g=>{if(g==null)return 0;if(O.isBlob(g))return g.size;if(O.isSpecCompliantForm(g))return(await new r(Xe.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(O.isArrayBufferView(g)||O.isArrayBuffer(g))return g.byteLength;if(O.isURLSearchParams(g)&&(g=g+""),O.isString(g))return(await o(g)).byteLength},x=async(g,y)=>{const j=O.toFiniteNumber(g.getContentLength());return j??b(y)};return async g=>{let{url:y,method:j,data:m,signal:h,cancelToken:v,timeout:w,onDownloadProgress:S,onUploadProgress:A,responseType:_,headers:I,withCredentials:C="same-origin",fetchOptions:T}=uh(g),F=s||fetch;_=_?(_+"").toLowerCase():"text";let k=_y([h,v&&v.toAbortSignal()],w),$=null;const M=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let q;try{if(A&&d&&j!=="get"&&j!=="head"&&(q=await x(I,m))!==0){let U=new r(y,{method:"POST",body:m,duplex:"half"}),Y;if(O.isFormData(m)&&(Y=U.headers.get("content-type"))&&I.setContentType(Y),U.body){const[Z,K]=eu(q,ll(tu(A)));m=ru(U.body,au,Z,K)}}O.isString(C)||(C=C?"include":"omit");const N=l&&"credentials"in r.prototype,V={...T,signal:k,method:j.toUpperCase(),headers:I.normalize().toJSON(),body:m,duplex:"half",credentials:N?C:void 0};$=l&&new r(y,V);let R=await(l?F($,T):F(y,V));const P=p&&(_==="stream"||_==="response");if(p&&(S||P&&M)){const U={};["status","statusText","headers"].forEach(X=>{U[X]=R[X]});const Y=O.toFiniteNumber(R.headers.get("content-length")),[Z,K]=S&&eu(Y,ll(tu(S),!0))||[];R=new a(ru(R.body,au,Z,()=>{K&&K(),M&&M()}),U)}_=_||"text";let H=await f[O.findKey(f,_)||"text"](R,g);return!P&&M&&M(),await new Promise((U,Y)=>{ch(U,Y,{data:H,headers:xt.from(R.headers),status:R.status,statusText:R.statusText,config:g,request:$})})}catch(N){throw M&&M(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,g,$),{cause:N.cause||N}):ie.from(N,N&&N.code,g,$)}}},Py=new Map,mh=t=>{let s=t?t.env:{};const{fetch:r,Request:a,Response:n}=s,l=[a,n,r];let i=l.length,c=i,o,d,p=Py;for(;c--;)o=l[c],d=p.get(o),d===void 0&&p.set(o,d=c?new Map:Ey(s)),p=d;return d};mh();const fo={http:Jg,xhr:wy,fetch:{get:mh}};O.forEach(fo,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const ou=t=>`- ${t}`,Ry=t=>O.isFunction(t)||t===null||t===!1,xh={getAdapter:(t,s)=>{t=O.isArray(t)?t:[t];const{length:r}=t;let a,n;const l={};for(let i=0;i<r;i++){a=t[i];let c;if(n=a,!Ry(a)&&(n=fo[(c=String(a)).toLowerCase()],n===void 0))throw new ie(`Unknown adapter '${c}'`);if(n&&(O.isFunction(n)||(n=n.get(s))))break;l[c||"#"+i]=n}if(!n){const i=Object.entries(l).map(([o,d])=>`adapter ${o} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(ou).join(`
`):" "+ou(i[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:fo};function ui(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jr(null,t)}function cu(t){return ui(t),t.headers=xt.from(t.headers),t.data=di.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xh.getAdapter(t.adapter||Qa.adapter,t)(t).then(function(a){return ui(t),a.data=di.call(t,t.transformResponse,a),a.headers=xt.from(a.headers),a},function(a){return oh(a)||(ui(t),a&&a.response&&(a.response.data=di.call(t,t.transformResponse,a.response),a.response.headers=xt.from(a.response.headers))),Promise.reject(a)})}const hh="1.12.2",Al={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Al[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const du={};Al.transitional=function(s,r,a){function n(l,i){return"[Axios v"+hh+"] Transitional option '"+l+"'"+i+(a?". "+a:"")}return(l,i,c)=>{if(s===!1)throw new ie(n(i," has been removed"+(r?" in "+r:"")),ie.ERR_DEPRECATED);return r&&!du[i]&&(du[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(l,i,c):!0}};Al.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function Ay(t,s,r){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const l=a[n],i=s[l];if(i){const c=t[l],o=c===void 0||i(c,l,t);if(o!==!0)throw new ie("option "+l+" must be "+o,ie.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ie("Unknown option "+l,ie.ERR_BAD_OPTION)}}const An={assertOptions:Ay,validators:Al},Ht=An.validators;let tr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Yd,response:new Yd}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=ir(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:l}=r;a!==void 0&&An.assertOptions(a,{silentJSONParsing:Ht.transitional(Ht.boolean),forcedJSONParsing:Ht.transitional(Ht.boolean),clarifyTimeoutError:Ht.transitional(Ht.boolean)},!1),n!=null&&(O.isFunction(n)?r.paramsSerializer={serialize:n}:An.assertOptions(n,{encode:Ht.function,serialize:Ht.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),An.assertOptions(r,{baseUrl:Ht.spelling("baseURL"),withXsrfToken:Ht.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&O.merge(l.common,l[r.method]);l&&O.forEach(["delete","get","head","post","put","patch","common"],g=>{delete l[g]}),r.headers=xt.concat(i,l);const c=[];let o=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(o=o&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let p,f=0,b;if(!o){const g=[cu.bind(this),void 0];for(g.unshift(...c),g.push(...d),b=g.length,p=Promise.resolve(r);f<b;)p=p.then(g[f++],g[f++]);return p}b=c.length;let x=r;for(;f<b;){const g=c[f++],y=c[f++];try{x=g(x)}catch(j){y.call(this,j);break}}try{p=cu.call(this,x)}catch(g){return Promise.reject(g)}for(f=0,b=d.length;f<b;)p=p.then(d[f++],d[f++]);return p}getUri(s){s=ir(this.defaults,s);const r=dh(s.baseURL,s.url,s.allowAbsoluteUrls);return nh(r,s.params,s.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(s){tr.prototype[s]=function(r,a){return this.request(ir(a||{},{method:s,url:r,data:(a||{}).data}))}});O.forEach(["post","put","patch"],function(s){function r(a){return function(l,i,c){return this.request(ir(c||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}tr.prototype[s]=r(),tr.prototype[s+"Form"]=r(!0)});let Ly=class ph{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const a=this;this.promise.then(n=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](n);a._listeners=null}),this.promise.then=n=>{let l;const i=new Promise(c=>{a.subscribe(c),l=c}).then(n);return i.cancel=function(){a.unsubscribe(l)},i},s(function(l,i,c){a.reason||(a.reason=new Jr(l,i,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new ph(function(n){s=n}),cancel:s}}};function Fy(t){return function(r){return t.apply(null,r)}}function My(t){return O.isObject(t)&&t.isAxiosError===!0}const go={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(go).forEach(([t,s])=>{go[s]=t});function fh(t){const s=new tr(t),r=Jx(tr.prototype.request,s);return O.extend(r,tr.prototype,s,{allOwnKeys:!0}),O.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return fh(ir(t,n))},r}const Ae=fh(Qa);Ae.Axios=tr;Ae.CanceledError=Jr;Ae.CancelToken=Ly;Ae.isCancel=oh;Ae.VERSION=hh;Ae.toFormData=Rl;Ae.AxiosError=ie;Ae.Cancel=Ae.CanceledError;Ae.all=function(s){return Promise.all(s)};Ae.spread=Fy;Ae.isAxiosError=My;Ae.mergeConfig=ir;Ae.AxiosHeaders=xt;Ae.formToJSON=t=>ih(O.isHTMLForm(t)?new FormData(t):t);Ae.getAdapter=xh.getAdapter;Ae.HttpStatusCode=go;Ae.default=Ae;const{Axios:bb,AxiosError:vb,CanceledError:Nb,isCancel:wb,CancelToken:_b,VERSION:Sb,all:kb,Cancel:Cb,isAxiosError:Tb,spread:Eb,toFormData:Pb,AxiosHeaders:Rb,HttpStatusCode:Ab,formToJSON:Lb,getAdapter:Fb,mergeConfig:Mb}=Ae,Dy=()=>"/api",z=Ae.create({baseURL:Dy(),headers:{"Content-Type":"application/json"}});z.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));z.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(t)});const yo={getStatus:()=>z.get("/math-game/status"),startGame:t=>z.post("/math-game/start",t),submitGame:t=>z.post("/math-game/submit",t)},Xt={getJobs:()=>z.get("/jobs"),getJob:t=>z.get(`/jobs/${t}`),applyToJob:(t,s)=>z.post(`/jobs/${t}/apply`,{answers:s}),getApplications:t=>{const s=new URLSearchParams;t!=null&&t.status&&s.append("status",t.status),t!=null&&t.job_id&&s.append("job_id",t.job_id.toString()),t!=null&&t.user_id&&s.append("user_id",t.user_id.toString());const r=s.toString();return z.get(`/jobs/applications${r?`?${r}`:""}`)},getApplication:t=>z.get(`/jobs/applications/${t}`),updateApplicationStatus:(t,s)=>z.put(`/jobs/applications/${t}`,{status:s}),getJobAssignmentsOverview:t=>{const s=t?`?class=${t}`:"";return z.get(`/jobs/assignments/overview${s}`)},assignJobToStudent:(t,s)=>z.post("/jobs/assign",{user_id:t,job_id:s}),removeJobFromStudent:t=>z.delete(`/jobs/assign/${t}`)},as={getParcels:t=>{const s=new URLSearchParams;(t==null?void 0:t.minRow)!==void 0&&s.append("minRow",t.minRow.toString()),(t==null?void 0:t.maxRow)!==void 0&&s.append("maxRow",t.maxRow.toString()),(t==null?void 0:t.minCol)!==void 0&&s.append("minCol",t.minCol.toString()),(t==null?void 0:t.maxCol)!==void 0&&s.append("maxCol",t.maxCol.toString()),(t==null?void 0:t.owned)!==void 0&&s.append("owned",t.owned.toString()),t!=null&&t.biome&&s.append("biome",t.biome);const r=s.toString();return z.get(`/land/parcels${r?`?${r}`:""}`)},getParcel:t=>z.get(`/land/parcels/${t}`),getMyProperties:()=>z.get("/land/my-properties"),submitPurchaseRequest:(t,s)=>z.post("/land/purchase-request",{parcel_id:t,offered_price:s}),getPurchaseRequests:t=>{const s=t?`?status=${t}`:"";return z.get(`/land/purchase-requests${s}`)},updatePurchaseRequest:(t,s,r)=>z.put(`/land/purchase-requests/${t}`,{status:s,denial_reason:r}),seedLandData:()=>z.post("/land/seed"),getStats:()=>z.get("/land/stats"),getBiomeConfig:()=>z.get("/land/biome-config")},Kt={getTreasuryInfo:t=>z.get(`/town/treasury/${t}`),depositToTreasury:(t,s,r)=>z.post(`/town/treasury/${t}/deposit`,{amount:s,description:r}),withdrawFromTreasury:(t,s,r)=>z.post(`/town/treasury/${t}/withdraw`,{amount:s,description:r}),getTaxBrackets:()=>z.get("/town/tax-brackets"),getTaxReport:(t,s)=>{const r=s?`?period=${s}`:"";return z.get(`/town/tax-report/${t}${r}`)},paySalaries:t=>z.post(`/town/pay-salaries/${t}`),payBasicSalary:(t,s)=>z.post(`/town/pay-basic-salary/${t}`,s?{amount:s}:{}),toggleTax:(t,s)=>z.post(`/town/toggle-tax/${t}`,{enabled:s})},gs={getAllItems:()=>z.get("/winkel/items/all"),createItem:t=>z.post("/winkel/items",t),updateItem:(t,s)=>z.put(`/winkel/items/${t}`,s),deleteItem:t=>z.delete(`/winkel/items/${t}`),getStats:()=>z.get("/winkel/stats"),getPurchases:()=>z.get("/winkel/purchases"),getSettings:()=>z.get("/winkel/settings"),updateSettings:t=>z.put("/winkel/settings",t),canPurchase:()=>z.get("/winkel/can-purchase"),markPurchasePaid:t=>z.put(`/winkel/purchases/${t}/paid`)},Zs={getTenders:t=>{const s=t?`?town_class=${t}`:"";return z.get(`/tenders${s}`)},createTender:t=>z.post("/tenders",t),applyToTender:t=>z.post(`/tenders/${t}/apply`),getTenderApplications:t=>z.get(`/tenders/${t}/applications`),updateTenderApplicationStatus:(t,s)=>z.put(`/tenders/applications/${t}`,{status:s}),payTender:t=>z.post(`/tenders/${t}/pay`)},gh=u.createContext(void 0),Le=()=>{const t=u.useContext(gh);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},$y=({children:t})=>{const[s,r]=u.useState(null),[a,n]=u.useState(null),[l,i]=u.useState(!0);u.useEffect(()=>{const b=localStorage.getItem("token");b?(z.defaults.headers.common.Authorization=`Bearer ${b}`,c()):i(!1)},[]);const c=async()=>{try{const b=await z.get("/auth/profile");r(b.data.user),n(b.data.account)}catch(b){console.error("Failed to fetch profile:",b),localStorage.removeItem("token"),delete z.defaults.headers.common.Authorization}finally{i(!1)}},f={user:s,account:a,login:async(b,x,g)=>{var y,j;try{console.log("Attempting login for:",b,"school:",g);const m=await z.post("/auth/login",{username:b,password:x,...g&&{school_id:g}});console.log("Login response:",m.data);const{token:h,user:v,account:w}=m.data;localStorage.setItem("token",h),z.defaults.headers.common.Authorization=`Bearer ${h}`,console.log("Setting user state:",v),r(v),n(w),console.log("User state set, should redirect to dashboard"),window.location.href="/"}catch(m){throw console.error("Login error:",m),new Error(((j=(y=m.response)==null?void 0:y.data)==null?void 0:j.error)||"Login failed")}},register:async(b,x,g,y,j,m,h,v)=>{var w,S,A,_,I;try{console.log("Attempting registration for:",b,g,"school:",y);const C=await z.post("/auth/register",{username:b,password:x,confirmPassword:x,role:g,school_id:y,first_name:j,last_name:m,class:h,email:v});if(console.log("Registration response:",C.data),C.data.requires_approval)return C.data;const{token:T,user:F,account:k}=C.data;localStorage.setItem("token",T),z.defaults.headers.common.Authorization=`Bearer ${T}`,r(F),n(k),window.location.href="/"}catch(C){if(console.error("Registration error:",C),console.error("Error response data:",(w=C.response)==null?void 0:w.data),(A=(S=C.response)==null?void 0:S.data)!=null&&A.errors&&Array.isArray(C.response.data.errors)){const T=C.response.data.errors[0];throw new Error(T.msg||T.message||"Validation failed")}throw new Error(((I=(_=C.response)==null?void 0:_.data)==null?void 0:I.error)||"Registration failed")}},logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("student_header_color_index"),delete z.defaults.headers.common.Authorization,r(null),n(null)},loading:l};return e.jsx(gh.Provider,{value:f,children:t})},yh=u.createContext(void 0),lt=()=>{const t=u.useContext(yh);if(t===void 0)throw new Error("usePlugins must be used within a PluginProvider");return t},Qe=({children:t})=>{const[s,r]=u.useState([]),[a,n]=u.useState(!0),l=async()=>{try{const o=await z.get("/plugins");r(o.data)}catch(o){console.error("Failed to fetch plugins:",o)}finally{n(!1)}};u.useEffect(()=>{localStorage.getItem("token")?l():n(!1)},[]);const i=s.filter(o=>o.enabled),c={plugins:s,enabledPlugins:i,loading:a,refreshPlugins:l};return e.jsx(yh.Provider,{value:c,children:t})},jh=u.createContext(void 0),hs=()=>{const t=u.useContext(jh);if(t===void 0)throw new Error("useTown must be used within a TownProvider");return t},Ge=({children:t})=>{const{user:s}=Le(),[r,a]=u.useState(null),[n,l]=u.useState(null),[i,c]=u.useState([]),[o,d]=u.useState([]),[p,f]=u.useState(!0);u.useEffect(()=>{s&&(s.class&&["6A","6B","6C"].includes(s.class)?l(s.class):s.role==="teacher"&&o.length>0&&!n&&l(o[0].class))},[s,o,n]),u.useEffect(()=>{n&&s&&(b(),g())},[n,s]),u.useEffect(()=>{(s==null?void 0:s.role)==="teacher"&&x()},[s]);const b=async()=>{if(!(!n||!s))try{const h=await z.get(`/town/settings?class=${n}`);a(h.data)}catch(h){console.error("Failed to fetch town settings:",h)}finally{f(!1)}},x=async()=>{if(s)try{const h=await z.get("/town/settings?all=true");d(h.data)}catch(h){console.error("Failed to fetch all towns:",h)}},g=async()=>{if(!(!n||!s))try{const h=await z.get(`/announcements?town_class=${n}`);c(h.data)}catch(h){console.error("Failed to fetch announcements:",h)}},m={currentTown:r,currentTownClass:n,announcements:i,allTowns:o,loading:p,setCurrentTownClass:h=>{l(h),f(!0)},refreshTown:async()=>{await b(),(s==null?void 0:s.role)==="teacher"&&await x()},refreshAnnouncements:g};return e.jsx(jh.Provider,{value:m,children:t})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,s)=>{const r=u.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,...d},p)=>u.createElement("svg",{ref:p,...Oy,width:n,height:n,stroke:a,strokeWidth:i?Number(l)*24/Number(n):l,className:["lucide",`lucide-${zy(t)}`,c].join(" "),...d},[...s.map(([f,b])=>u.createElement(f,b)),...Array.isArray(o)?o:[o]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=J("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=J("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=J("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=J("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=J("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=J("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=J("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=J("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=J("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=J("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=J("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=J("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=J("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=J("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=J("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=J("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=J("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=J("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=J("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=J("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=J("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=J("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=J("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=J("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=J("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=J("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=J("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=J("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=J("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=J("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=J("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=J("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=J("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=J("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=J("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=J("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=J("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=J("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=J("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),yu=({user:t,size:s="md",className:r=""})=>{if(!t)return null;const a=()=>t.first_name&&t.last_name?`${t.first_name[0]}${t.last_name[0]}`.toUpperCase():t.username?t.username.substring(0,2).toUpperCase():"??",n={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},l={sm:"text-lg",md:"text-2xl",lg:"text-3xl"};return e.jsx("div",{className:`${n[s]} rounded-full flex items-center justify-center font-semibold ${r}`,style:t.profile_emoji?{}:{backgroundColor:"#9CA3AF",color:"white"},children:t.profile_emoji?e.jsx("span",{className:l[s],children:t.profile_emoji}):e.jsx("span",{children:a()})})},pj=({children:t})=>{const{user:s,logout:r}=Le(),a=Wr(),[n,l]=u.useState(!1),i=()=>{r()},c=[{name:"Dashboard",href:"/",icon:ja}],o=d=>d==="/"?a.pathname==="/":a.pathname.startsWith(d);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-lg",children:e.jsx("img",{src:"/logo.png",alt:"Town Hub",className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Town Hub"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Game of Life Control Center"})]})]}),e.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:c.map(d=>{const p=d.icon;return e.jsxs(nl,{to:d.href,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o(d.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:d.name})]},d.name)})}),s&&e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(yu,{user:s,size:"md"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.username}),e.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:s.role==="teacher"?" Teacher":" Student"})]})]}),e.jsxs("button",{onClick:i,className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx(fu,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]}),e.jsx("button",{onClick:()=>l(!n),className:"md:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:n?e.jsx(bt,{className:"h-6 w-6"}):e.jsx(Xy,{className:"h-6 w-6"})})]})}),n&&e.jsx("div",{className:"md:hidden border-t border-gray-200",children:e.jsxs("div",{className:"px-4 py-3 space-y-1",children:[c.map(d=>{const p=d.icon;return e.jsxs(nl,{to:d.href,onClick:()=>l(!1),className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-base font-medium transition-colors ${o(d.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:d.name})]},d.name)}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(yu,{user:s,size:"md"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.username})]}),e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium inline-block",children:s.role==="teacher"?" Teacher":" Student"})]}),e.jsxs("button",{onClick:()=>{i(),l(!1)},className:"flex items-center space-x-2 w-full px-4 py-2 rounded-lg text-base font-medium text-gray-600 hover:bg-gray-100",children:[e.jsx(fu,{className:"h-5 w-5"}),e.jsx("span",{children:"Logout"})]})]})]})})]}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})},fj=({value:t,onChange:s,required:r=!0,error:a,showOptional:n})=>{const[l,i]=u.useState([]),[c,o]=u.useState(!0),[d,p]=u.useState(""),[f,b]=u.useState(!1);u.useEffect(()=>{(async()=>{try{const j=await z.get("/auth/schools");i(j.data)}catch(j){console.error("Failed to fetch schools:",j)}finally{o(!1)}})()},[]);const x=l.filter(y=>y.name.toLowerCase().includes(d.toLowerCase())||y.code.toLowerCase().includes(d.toLowerCase())),g=l.find(y=>y.id===t);return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"label",children:[e.jsx(lj,{className:"h-4 w-4 inline mr-1"}),"School ",!r&&e.jsx("span",{className:"text-gray-500 text-xs",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>b(!f),className:`input-field w-full text-left flex items-center justify-between ${a?"border-red-500":""}`,children:[e.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.name:"Select your school..."}),e.jsx("svg",{className:`h-5 w-5 text-gray-400 transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:c?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading schools..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-2 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:d,onChange:y=>p(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",onClick:y=>y.stopPropagation()})]})}),e.jsx("div",{className:"py-1",children:x.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No schools found"}):x.map(y=>e.jsxs("button",{type:"button",onClick:()=>{s(y.id),b(!1),p("")},className:`w-full text-left px-4 py-2 hover:bg-primary-50 ${t===y.id?"bg-primary-100 font-medium":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500",children:y.code})]},y.id))})]})})]}),a&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),r&&!t&&!a&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please select your school"})]})},gj=()=>{const{login:t,register:s}=Le(),[r,a]=u.useState(!0),[n,l]=u.useState(!1),[i,c]=u.useState(!1),[o,d]=u.useState({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),[p,f]=u.useState(""),[b,x]=u.useState(""),[g,y]=u.useState(""),[j,m]=u.useState(!1),h=async w=>{if(w.preventDefault(),x(""),f(""),!r&&!o.school_id){f("Please select your school");return}if(!r&&o.password!==o.confirmPassword){x("Passwords do not match");return}m(!0);try{if(r){const S=o.school_id??void 0;await t(o.username,o.password,S)}else{const S=await s(o.username,o.password,o.role,o.school_id,o.first_name,o.last_name,o.class,o.email);if(S&&S.requires_approval){x(""),y("Registration successful! Your account is pending teacher approval. You will be able to log in once a teacher approves your account."),d({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),setTimeout(()=>{a(!0),y("")},5e3);return}}}catch(S){x(S.message)}finally{m(!1)}},v=w=>{d({...o,[w.target.name]:w.target.value})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"mx-auto flex items-center justify-center",children:e.jsx("img",{src:"/logo.png",alt:"SP Prep Schools",className:"max-w-[240px] max-h-[180px] w-auto h-auto object-contain mx-auto"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r?"Game of Life Town Hub":"Join the Game!"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Sign in to your account":"Create your classroom account"})]}),e.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:e.jsxs("form",{className:"space-y-6",onSubmit:h,children:[b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:b}),g&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:g}),e.jsxs("div",{children:[e.jsx(fj,{value:o.school_id,onChange:w=>{d({...o,school_id:w}),f("")},error:p,required:!r}),r&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Super admin can login without selecting a school"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"label",children:[e.jsx(Vs,{className:"h-4 w-4 inline mr-1"}),"Username"]}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"input-field",placeholder:"Enter your username",value:o.username,onChange:v})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"label",children:[e.jsx(pu,{className:"h-4 w-4 inline mr-1"}),"Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Enter your password",value:o.password,onChange:v}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!n),children:n?e.jsx(mu,{className:"h-4 w-4 text-gray-400"}):e.jsx(za,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"label",children:[e.jsx(pu,{className:"h-4 w-4 inline mr-1"}),"Confirm Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",required:!0,className:"input-field pr-10",placeholder:"Confirm your password",value:o.confirmPassword,onChange:v}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!i),children:i?e.jsx(mu,{className:"h-4 w-4 text-gray-400"}):e.jsx(za,{className:"h-4 w-4 text-gray-400"})})]})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"label",children:"I am a..."}),e.jsxs("select",{id:"role",name:"role",className:"input-field",value:o.role,onChange:v,children:[e.jsx("option",{value:"student",children:" Student"}),e.jsx("option",{value:"teacher",children:" Teacher"})]})]}),o.role==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"label",children:"First Name"}),e.jsx("input",{id:"first_name",name:"first_name",type:"text",required:!0,className:"input-field",placeholder:"Enter first name",value:o.first_name,onChange:v})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"label",children:"Last Name"}),e.jsx("input",{id:"last_name",name:"last_name",type:"text",required:!0,className:"input-field",placeholder:"Enter last name",value:o.last_name,onChange:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"class",className:"label",children:"Class"}),e.jsxs("select",{id:"class",name:"class",required:!0,className:"input-field",value:o.class,onChange:v,children:[e.jsx("option",{value:"",children:"Select your class"}),e.jsx("option",{value:"6A",children:"6A"}),e.jsx("option",{value:"6B",children:"6B"}),e.jsx("option",{value:"6C",children:"6C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"input-field",placeholder:"yourname@stpeters.co.za",value:o.email,onChange:v}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must end with @stpeters.co.za"})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:j,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Please wait...":r?"Sign In":"Create Account"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{a(!r),d({username:"",password:"",confirmPassword:"",role:"student",school_id:null,first_name:"",last_name:"",class:"",email:""}),x("")},className:"text-primary-600 hover:text-primary-500 font-medium",children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:" Welcome to your Town Hub - Manage your virtual life!"})})]})})},kh=({plugin:t})=>e.jsx(nl,{to:t.route_path,className:"block bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-primary-300 transition-all transform hover:scale-105",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center text-2xl",children:t.icon||""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Active"})})]})}),Ch=({announcements:t,maxItems:s=5})=>{const r=t.slice(0,s),a=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=l=>{switch(l){case"green":return{border:"border-green-500",bg:"bg-green-50",text:"text-green-900"};case"yellow":return{border:"border-yellow-500",bg:"bg-yellow-50",text:"text-yellow-900"};case"red":return{border:"border-red-500",bg:"bg-red-50",text:"text-red-900"};case"purple":return{border:"border-purple-500",bg:"bg-purple-50",text:"text-purple-900"};case"blue":default:return{border:"border-primary-500",bg:"bg-primary-50",text:"text-gray-900"}}};return t.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(mi,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(mi,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No announcements yet"}),e.jsx("p",{className:"text-sm",children:"Check back later for town updates"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(mi,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Alerts"}),t.length>s&&e.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length-s," more"]})]}),e.jsx("div",{className:"space-y-4",children:r.map(l=>{const i=n(l.background_color);return e.jsxs("div",{className:`border-l-4 ${i.border} pl-4 py-2 ${i.bg} rounded-r-lg ${l.enable_wiggle?"announcement-wiggle":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:`font-semibold ${i.text}`,children:l.title}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 ml-2",children:[e.jsx($e,{className:"h-3 w-3"}),e.jsx("span",{children:a(l.created_at)})]})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:l.content}),l.created_by_username&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Posted by ",l.created_by_username]})]},l.id)})})]})},Th=({town:t,readOnly:s=!0,showTreasury:r=!1})=>{const a=n=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(n);return t?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Fs,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Town Information"}),!s&&e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["Class ",t.class]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Fs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Name"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.town_name})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Vs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Mayor"})]}),e.jsx("p",{className:"text-base text-gray-900",children:t.mayor_name||"TBD"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(sj,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Tax Rate"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-base text-gray-900",children:[t.tax_rate,"%"]}),t.tax_enabled!==void 0&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.tax_enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:t.tax_enabled?"Active":"Disabled"})]})]}),r&&t.treasury_balance!==void 0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Qt,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Town Treasury"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:a(t.treasury_balance)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for paying student salaries"})]})]})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fs,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No town information available"})]})})},yj=({user:t})=>{var n;if(!(t.job_id&&t.job_name))return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(jt,{className:"h-5 w-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(jt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No job assigned yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Apply for jobs in the Jobs system"})]})]});const r=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),a=((n=t.job_description)==null?void 0:n.split(`
`).filter(l=>l.trim()))||[];return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(jt,{className:"h-5 w-5 text-amber-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Job"})]}),e.jsx("div",{className:"border-l-4 border-amber-500 pl-4 py-3 bg-amber-50 rounded-r-lg mb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(qy,{className:"h-5 w-5 text-amber-600"}),t.job_name]}),t.job_company_name&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[e.jsx(Fs,{className:"h-4 w-4 mr-1"}),t.job_company_name]}),t.job_location&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx(Tt,{className:"h-4 w-4 mr-1"}),t.job_location]})]})})}),e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 mb-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Weekly Salary"})]}),e.jsx("span",{className:"text-xl font-bold text-green-700",children:t.job_salary?r(t.job_salary):"N/A"})]}),a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(il,{className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:"Responsibilities"})]}),e.jsxs("ul",{className:"space-y-2",children:[a.slice(0,5).map((l,i)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-amber-400 mt-1.5 mr-2 flex-shrink-0"}),e.jsx("span",{children:l})]},i)),a.length>5&&e.jsxs("li",{className:"text-xs text-gray-400 pl-4",children:["+",a.length-5," more responsibilities"]})]})]}),t.job_requirements&&t.job_requirements!==t.job_description&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.job_requirements})]})]})},Ot={Savanna:{baseValue:2e4,risk:"medium",color:"#c4a747",lightColor:"#e8d999",pros:["Good grazing land","Wildlife tourism potential","Moderate rainfall"],cons:["Seasonal droughts","Fire risk","Limited water sources"]},Grassland:{baseValue:15e3,risk:"low",color:"#7cb342",lightColor:"#aed581",pros:["Excellent farming potential","Easy to develop","Stable ecosystem"],cons:["Soil erosion risk","Limited shade","Overgrazing concerns"]},Forest:{baseValue:35e3,risk:"medium",color:"#2e7d32",lightColor:"#66bb6a",pros:["Rich biodiversity","Timber resources","Carbon credits potential"],cons:["Fire risk","Clearing restrictions","Difficult access"]},Fynbos:{baseValue:45e3,risk:"high",color:"#9c27b0",lightColor:"#ce93d8",pros:["Unique biodiversity","Eco-tourism value","Protected species habitat"],cons:["Fire-dependent ecosystem","Strict conservation laws","Limited development"]},"Nama Karoo":{baseValue:1e4,risk:"medium",color:"#8d6e63",lightColor:"#bcaaa4",pros:["Sheep farming suited","Low land cost","Unique landscape"],cons:["Very dry climate","Limited water","Remote location"]},"Succulent Karoo":{baseValue:4500,risk:"high",color:"#ff7043",lightColor:"#ffab91",pros:["Rare plant species","Research value","Mining potential"],cons:["Extreme temperatures","Water scarcity","Conservation restrictions"]},Desert:{baseValue:8e3,risk:"high",color:"#ffd54f",lightColor:"#ffee58",pros:["Solar energy potential","Low land price","Mineral deposits"],cons:["Extreme conditions","No water","Uninhabitable without infrastructure"]},Thicket:{baseValue:25e3,risk:"low",color:"#558b2f",lightColor:"#8bc34a",pros:["Carbon storage","Game farming potential","Drought resistant"],cons:["Dense vegetation","Clearing needed","Elephant damage risk"]},"Indian Ocean Coastal Belt":{baseValue:6e4,risk:"medium",color:"#0288d1",lightColor:"#4fc3f7",pros:["High property value","Tourism potential","Port access"],cons:["Coastal erosion","Cyclone risk","High development costs"]}},dl={low:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},medium:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},high:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"}},ze=t=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),us={Savanna:"",Grassland:"",Forest:"",Fynbos:"","Nama Karoo":"","Succulent Karoo":"",Desert:"",Thicket:"","Indian Ocean Coastal Belt":""},jj=.02,Eh=t=>{const s=new Date(t),a=new Date().getTime()-s.getTime(),n=Math.floor(a/(7*24*60*60*1e3));return Math.max(0,n)},vo=(t,s)=>{const r=Eh(s);if(r===0)return t;const a=t*Math.pow(1+jj,r);return Math.round(a)},bj=()=>{const t=Wa(),[s,r]=u.useState(null),[a,n]=u.useState(!0),[l,i]=u.useState(!1);u.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await as.getMyProperties();r(p.data)}catch{i(!0)}finally{n(!1)}},{totalCurrentValue:o,totalAppreciation:d}=u.useMemo(()=>{if(!s||s.total_count===0)return{totalCurrentValue:0,totalAppreciation:0};let p=0,f=0;return s.parcels.forEach(b=>{const x=Number(b.value);f+=x,b.purchased_at?p+=vo(x,b.purchased_at):p+=x}),{totalCurrentValue:p,totalAppreciation:p-f}},[s]);return a?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(de,{className:"h-8 w-8 text-primary-600 animate-spin"})})}):l?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Tt,{className:"h-5 w-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"My Properties"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Unable to load properties"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sc,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"My Properties"})]}),e.jsxs("button",{onClick:()=>t("/land"),className:"text-xs bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"View All"}),e.jsx(Vy,{className:"h-3 w-3"})]})]})}),e.jsx("div",{className:"p-4",children:s&&s.total_count===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Tt,{className:"h-10 w-10 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No properties owned yet"}),e.jsx("button",{onClick:()=>t("/land"),className:"mt-3 text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Explore Land Registry "})]}):s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[e.jsx(Tt,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Plots"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s.total_count})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 mb-1",children:[e.jsx(ge,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Current Value"})]}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:ze(o)}),d>0&&e.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-1",children:[e.jsx(st,{className:"h-3 w-3 text-emerald-500"}),e.jsxs("span",{className:"text-xs text-emerald-600",children:["+",ze(d)]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Recent Purchases"}),s.parcels.slice(0,3).map(p=>{const f=Number(p.value),b=p.purchased_at?vo(f,p.purchased_at):f,x=b>f;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>t("/land"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-sm",style:{backgroundColor:Ot[p.biome_type].lightColor},children:us[p.biome_type]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.grid_code}),e.jsx("p",{className:"text-xs text-gray-500",children:p.biome_type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:ze(b)}),x&&e.jsxs("p",{className:"text-xs text-emerald-500 flex items-center justify-end",children:[e.jsx(st,{className:"h-2 w-2 mr-0.5"}),"+",ze(b-f)]})]})]},p.id)}),s.total_count>3&&e.jsxs("p",{className:"text-xs text-center text-gray-400 pt-1",children:["+",s.total_count-3," more plots"]})]})]})})]})},vj=()=>{const[t,s]=u.useState([]),[r,a]=u.useState(!0);u.useEffect(()=>{(async()=>{try{a(!0);const c=await Zs.getTenders();s(c.data)}finally{a(!1)}})()},[]);const n=u.useMemo(()=>t.filter(i=>i.my_application_status==="approved"),[t]),l=u.useMemo(()=>n.slice(0,5),[n]);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(il,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Tenders"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:n.length})]}),r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(de,{className:"h-6 w-6 text-primary-600 animate-spin"})}):n.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"No tenders yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Apply for a tender to see it here."})]}):e.jsxs("div",{className:"space-y-3",children:[l.map(i=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:i.name}),i.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-0.5 line-clamp-2",children:i.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[i.status==="awarded"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:[e.jsx(je,{className:"h-3.5 w-3.5"}),"AWARDED"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-100 text-amber-800",children:[e.jsx($e,{className:"h-3.5 w-3.5"}),"APPROVED"]}),i.status==="awarded"&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${i.paid?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-700"}`,children:[e.jsx(ga,{className:"h-3.5 w-3.5"}),i.paid?"PAID":"UNPAID"]})]})]})})},i.id)),n.length>l.length&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",n.length-l.length," more"]})]})]})},pn=[{gradient:"bg-gradient-to-r from-red-500 to-red-700",text:"text-white",subtext:"text-red-100"},{gradient:"bg-gradient-to-r from-blue-500 to-blue-700",text:"text-white",subtext:"text-blue-100"},{gradient:"bg-gradient-to-r from-yellow-400 to-yellow-600",text:"text-gray-900",subtext:"text-yellow-900"}],Nj=()=>{const t=sessionStorage.getItem("student_header_color_index");if(t!==null){const r=parseInt(t,10);if(r>=0&&r<pn.length)return pn[r]}const s=Math.floor(Math.random()*pn.length);return sessionStorage.setItem("student_header_color_index",String(s)),pn[s]},wj=()=>{const{user:t}=Le(),{enabledPlugins:s,loading:r}=lt(),{currentTown:a,announcements:n,loading:l}=hs(),[i]=u.useState(Nj),c=t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name} ${t.last_name}`:(t==null?void 0:t.username)||"Student",o=(t==null?void 0:t.job_name)||"No job assigned",[d,p]=u.useState(()=>{const x=Number(localStorage.getItem("dismissed_tender_announcement_id")||"0");return Number.isFinite(x)?x:0}),f=u.useMemo(()=>n.filter(g=>g.title.toLowerCase().includes("tender")).slice().sort((g,y)=>new Date(y.created_at).getTime()-new Date(g.created_at).getTime())[0],[n]),b=u.useMemo(()=>f?Date.now()-new Date(f.created_at).getTime()<1e3*60*60*48&&f.id>d:!1,[f,d]);return r||l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${i.gradient} rounded-2xl p-6`,children:[e.jsxs("h1",{className:`text-2xl font-bold mb-2 ${i.text}`,children:["Welcome, ",c,"! "]}),e.jsxs("p",{className:i.subtext,children:[a?`Welcome to ${a.town_name}!`:"Welcome to Town Hub!",o!=="No job assigned"&&`  Your job: ${o}`]})]}),b&&f&&e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-amber-400 bg-gradient-to-r from-amber-300 via-orange-300 to-red-300 p-5 animate-pulse",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_30%_20%,white,transparent_55%)]"}),e.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/40 rounded-xl p-2",children:e.jsx(Zr,{className:"h-6 w-6 text-red-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-extrabold text-red-900 tracking-wide uppercase",children:"New Tender Available"}),e.jsx("p",{className:"text-lg font-bold text-red-950",children:f.title}),e.jsx("p",{className:"text-sm text-red-900 mt-1 line-clamp-2",children:f.content}),e.jsx("div",{className:"mt-3",children:e.jsx(nl,{to:"/tenders",className:"inline-flex items-center px-4 py-2 rounded-lg bg-red-700 text-white font-bold hover:bg-red-800 transition-colors shadow",children:"View & Apply Now"})})]})]}),e.jsx("button",{onClick:()=>{localStorage.setItem("dismissed_tender_announcement_id",String(f.id)),p(f.id)},className:"flex-shrink-0 bg-white/40 hover:bg-white/60 rounded-lg p-2 transition-colors","aria-label":"Dismiss tender alert",children:e.jsx(bt,{className:"h-5 w-5 text-red-900"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ya,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Available Systems"})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No systems available at this time"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later for updates"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(x=>e.jsx(kh,{plugin:x},x.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(Th,{town:a,readOnly:!0}),e.jsx(Ch,{announcements:n}),t&&e.jsx(yj,{user:t}),e.jsx(bj,{})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsx(vj,{})})]})},_j=({plugins:t,onUpdate:s})=>{const[r,a]=u.useState(null),n=async l=>{a(l);try{await z.put(`/plugins/${l}/toggle`),s()}catch(i){console.error("Failed to toggle plugin:",i),alert("Failed to toggle plugin. Please try again.")}finally{a(null)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Plugin Management"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enable or disable plugins for all towns. Changes affect all classes (6A, 6B, 6C)."})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center text-xl",children:l.icon||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.description}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Route: ",l.route_path]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`text-sm font-medium ${l.enabled?"text-success-600":"text-gray-400"}`,children:l.enabled?"Enabled":"Disabled"}),e.jsx("button",{onClick:()=>n(l.id),disabled:r===l.id,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${l.enabled?"bg-primary-600":"bg-gray-200"} ${r===l.id?"opacity-50 cursor-not-allowed":""}`,children:r===l.id?e.jsx(wh,{className:"h-4 w-4 text-white animate-spin absolute left-1"}):e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.enabled?"translate-x-6":"translate-x-1"}`})})]})]},l.id))})})]})},Sj=({announcements:t,onUpdate:s})=>{const{currentTownClass:r,allTowns:a}=hs(),[n,l]=u.useState(!1),[i,c]=u.useState(null),[o,d]=u.useState({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),[p,f]=u.useState(!1);u.useEffect(()=>{i&&(d({title:i.title,content:i.content,town_class:i.town_class,post_to_all:!1,background_color:i.background_color||"blue",enable_wiggle:i.enable_wiggle||!1}),l(!0))},[i]);const b=async g=>{var y,j;g.preventDefault(),f(!0);try{if(i)await z.put(`/announcements/${i.id}`,{title:o.title,content:o.content,town_class:o.town_class,background_color:o.background_color,enable_wiggle:o.enable_wiggle});else if(o.post_to_all){const m=["6A","6B","6C"];await Promise.all(m.map(h=>z.post("/announcements",{title:o.title,content:o.content,town_class:h,background_color:o.background_color,enable_wiggle:o.enable_wiggle})))}else await z.post("/announcements",{title:o.title,content:o.content,town_class:o.town_class,background_color:o.background_color,enable_wiggle:o.enable_wiggle});l(!1),c(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1}),s()}catch(m){console.error("Failed to save announcement:",m),alert(((j=(y=m.response)==null?void 0:y.data)==null?void 0:j.error)||"Failed to save announcement")}finally{f(!1)}},x=async g=>{var y,j;if(confirm("Are you sure you want to delete this announcement?"))try{await z.delete(`/announcements/${g}`),s()}catch(m){console.error("Failed to delete announcement:",m),alert(((j=(y=m.response)==null?void 0:y.data)==null?void 0:j.error)||"Failed to delete announcement")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Announcement Management"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Post and manage town announcements"})]}),e.jsxs("button",{onClick:()=>{l(!0),c(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-primary flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"New Announcement"})]})]}),n&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:i?"Edit Announcement":"New Announcement"}),e.jsx("button",{onClick:()=>{l(!1),c(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[!i&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.post_to_all,onChange:g=>d({...o,post_to_all:g.target.checked}),className:"mt-0.5 w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Post to All Classes"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"This will create the same announcement for all three classes (6A, 6B, and 6C)"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o.post_to_all?"Target Classes":"Town"}),o.post_to_all?e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"All Classes:"})," 6A Town, 6B Town, 6C Town"]}):e.jsxs("select",{value:o.town_class,onChange:g=>d({...o,town_class:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0,children:[e.jsx("option",{value:"6A",children:"6A Town"}),e.jsx("option",{value:"6B",children:"6B Town"}),e.jsx("option",{value:"6C",children:"6C Town"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:o.title,onChange:g=>d({...o,title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),e.jsx("textarea",{value:o.content,onChange:g=>d({...o,content:g.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:[{value:"blue",label:"Blue",bgClass:"bg-blue-500",hoverClass:"hover:bg-blue-600"},{value:"green",label:"Green",bgClass:"bg-green-500",hoverClass:"hover:bg-green-600"},{value:"yellow",label:"Yellow",bgClass:"bg-yellow-500",hoverClass:"hover:bg-yellow-600"},{value:"red",label:"Red",bgClass:"bg-red-500",hoverClass:"hover:bg-red-600"},{value:"purple",label:"Purple",bgClass:"bg-purple-500",hoverClass:"hover:bg-purple-600"}].map(g=>e.jsxs("button",{type:"button",onClick:()=>d({...o,background_color:g.value}),className:`relative p-4 rounded-lg transition-all ${g.bgClass} ${g.hoverClass} ${o.background_color===g.value?"ring-4 ring-primary-600 ring-offset-2 scale-105":"opacity-70 hover:opacity-100"}`,children:[o.background_color===g.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.jsx("span",{className:"text-xs font-medium text-white opacity-0",children:g.label})]},g.value))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",e.jsx("span",{className:"font-medium capitalize",children:o.background_color})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.enable_wiggle,onChange:g=>d({...o,enable_wiggle:g.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable wiggle animation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Adds a subtle wiggle effect for extra attention"})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:p,className:"btn-primary flex-1",children:p?"Saving...":i?"Update":"Create"}),e.jsx("button",{type:"button",onClick:()=>{l(!1),c(null),d({title:"",content:"",town_class:r||"6A",post_to_all:!1,background_color:"blue",enable_wiggle:!1})},className:"btn-secondary",children:"Cancel"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No announcements yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Create your first announcement above"})]}):t.map(g=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:g.title}),e.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:g.town_class})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:g.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Posted by ",g.created_by_username]}),e.jsx("span",{children:new Date(g.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>c(g),className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",children:e.jsx(kc,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(g.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Pc,{className:"h-4 w-4"})})]})]})},g.id))})})]})},kj=()=>{var I;const{allTowns:t,refreshTown:s}=hs(),[r,a]=u.useState(((I=t[0])==null?void 0:I.id)||null),[n,l]=u.useState({}),[i,c]=u.useState(!1),[o,d]=u.useState(""),[p,f]=u.useState(!1),[b,x]=u.useState({}),[g,y]=u.useState(!0),[j,m]=u.useState(!1),h=t.find(C=>C.id===r);u.useEffect(()=>{(async()=>{try{const T=await z.get("/transactions/bank-settings");x(T.data)}catch(T){console.error("Failed to fetch bank settings:",T)}finally{y(!1)}})()},[]),u.useEffect(()=>{h&&l({town_name:h.town_name,mayor_name:h.mayor_name||"",tax_rate:h.tax_rate,tax_enabled:h.tax_enabled})},[h]);const v=async(C,T)=>{var F,k;m(!0);try{await z.put(`/transactions/bank-settings/${C}`,{value:T}),x({...b,[C]:T})}catch($){console.error("Failed to update bank setting:",$),alert(((k=(F=$.response)==null?void 0:F.data)==null?void 0:k.error)||"Failed to update setting")}finally{m(!1)}},w=async()=>{var C,T;if(h){c(!0);try{await Kt.toggleTax(h.class,!h.tax_enabled),await s()}catch(F){console.error("Failed to toggle tax:",F),alert(((T=(C=F.response)==null?void 0:C.data)==null?void 0:T.error)||"Failed to toggle tax")}finally{c(!1)}}},S=C=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(C),A=async C=>{var T,F;if(C.preventDefault(),!!r){c(!0);try{await z.put(`/town/settings/${r}`,n),await s(),alert("Town settings updated successfully!")}catch(k){console.error("Failed to update town settings:",k),alert(((F=(T=k.response)==null?void 0:T.data)==null?void 0:F.error)||"Failed to update town settings")}finally{c(!1)}}},_=async()=>{var T,F;if(o!=="RESET"){alert("Type RESET to confirm the factory reset.");return}if(window.confirm(`This will DELETE ALL students, loans, tenders, land ownership, transactions, announcements, and reset treasury/settings for ALL towns.

This cannot be undone.

Click OK to proceed.`)){f(!0);try{await z.post("/admin/factory-reset",{confirm:"RESET"}),d(""),await s(),alert("Factory reset completed. You may need to refresh the page."),window.location.reload()}catch(k){console.error("Factory reset failed:",k),alert(((F=(T=k.response)==null?void 0:T.data)==null?void 0:F.error)||"Factory reset failed")}finally{f(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage settings for each town"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Town"}),e.jsx("select",{value:r||"",onChange:C=>a(parseInt(C.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:t.map(C=>e.jsxs("option",{value:C.id,children:[C.town_name," (Class ",C.class,")"]},C.id))})]}),h&&e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Town Name"}),e.jsx("input",{type:"text",value:n.town_name||"",onChange:C=>l({...n,town_name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mayor Name"}),e.jsx("input",{type:"text",value:n.mayor_name||"",onChange:C=>l({...n,mayor_name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter mayor name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:n.tax_rate||0,onChange:C=>l({...n,tax_rate:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Collection"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, progressive tax is deducted from salaries"})]}),e.jsx("button",{type:"button",onClick:w,disabled:i,className:"focus:outline-none",children:h!=null&&h.tax_enabled?e.jsx(Ec,{className:"h-10 w-10 text-green-600"}):e.jsx(Tc,{className:"h-10 w-10 text-gray-400"})})]})}),h&&e.jsxs("div",{className:"border border-emerald-200 rounded-lg p-4 bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Qt,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Town Treasury"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:S(h.treasury_balance||1e7)}),e.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"Used for paying student salaries"})]}),e.jsxs("button",{type:"submit",disabled:i,className:"btn-primary flex items-center space-x-2",children:[e.jsx(ol,{className:"h-4 w-4"}),e.jsx("span",{children:i?"Saving...":"Save Settings"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:e.jsx(ja,{className:"h-5 w-5 text-purple-700"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Chores Game Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure the chores game settings for all students"})]})]}),g?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Daily Game Limit"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Number of chores games each student can play per day (resets at 6 AM)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:b.math_game_daily_limit||"3",onChange:C=>x({...b,math_game_daily_limit:C.target.value}),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"games per day"}),e.jsxs("button",{onClick:()=>v("math_game_daily_limit",b.math_game_daily_limit||"3"),disabled:j,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ol,{className:"h-4 w-4"}),e.jsx("span",{children:j?"Saving...":"Save"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Set to 0 to disable chores games entirely"})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100",children:e.jsx(Zr,{className:"h-5 w-5 text-red-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Factory Reset (Danger)"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This resets the game to a clean state: deletes all students, loans, tenders, land ownership & requests, transactions, and announcements. It also resets town treasury/settings for ALL towns."}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-bold text-red-700",children:"RESET"})," to confirm"]}),e.jsx("input",{value:o,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-red-500 focus:border-red-500",placeholder:"RESET"})]}),e.jsx("button",{type:"button",onClick:_,disabled:p||o!=="RESET",className:"w-full px-4 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 transition-colors disabled:opacity-50",children:p?"Resetting...":"Factory Reset"})]})]})]})})]})},Cj=()=>{const{currentTownClass:t,allTowns:s}=hs(),[r,a]=u.useState("jobs"),[n,l]=u.useState(t||"all"),[i,c]=u.useState([]),[o,d]=u.useState([]),[p,f]=u.useState([]),[b,x]=u.useState(!0),[g,y]=u.useState(null),[j,m]=u.useState(null);u.useEffect(()=>{h()},[n,r]);const h=async()=>{var T,F;try{if(x(!0),y(null),r==="jobs"){const k=n==="all"?void 0:n,$=await Xt.getJobAssignmentsOverview(k);c($.data.jobs),d($.data.students)}else{const k=n==="all"?void 0:n,$={status:"pending"};let q=(await Xt.getApplications($)).data;if(k&&k!=="all"){const V=(await Xt.getJobAssignmentsOverview(k)).data.students.map(R=>R.id);q=q.filter(R=>V.includes(R.user_id))}f(q)}}catch(k){y(((F=(T=k.response)==null?void 0:T.data)==null?void 0:F.error)||"Failed to load data")}finally{x(!1)}},v=async(T,F)=>{var k,$;try{y(null),await Xt.assignJobToStudent(T,F),m("Job assigned successfully"),h(),setTimeout(()=>m(null),3e3)}catch(M){y((($=(k=M.response)==null?void 0:k.data)==null?void 0:$.error)||"Failed to assign job")}},w=async T=>{var F,k;if(confirm("Are you sure you want to remove this job assignment?"))try{y(null),await Xt.removeJobFromStudent(T),m("Job assignment removed successfully"),h(),setTimeout(()=>m(null),3e3)}catch($){y(((k=(F=$.response)==null?void 0:F.data)==null?void 0:k.error)||"Failed to remove job assignment")}},S=async T=>{var F,k;try{y(null),await Xt.updateApplicationStatus(T,"approved"),m("Application approved and job assigned"),h(),setTimeout(()=>m(null),3e3)}catch($){y(((k=(F=$.response)==null?void 0:F.data)==null?void 0:k.error)||"Failed to approve application")}},A=async T=>{var F,k;if(confirm("Are you sure you want to deny this application?"))try{y(null),await Xt.updateApplicationStatus(T,"denied"),m("Application denied"),h(),setTimeout(()=>m(null),3e3)}catch($){y(((k=(F=$.response)==null?void 0:F.data)==null?void 0:k.error)||"Failed to deny application")}},_=T=>o.filter(F=>F.job_id===T),I=T=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(T),C=T=>{if(!T)return null;const F=T.match(/(\d+)\s+positions?/i);return F?parseInt(F[1]):null};return b&&i.length===0&&p.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Class:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),s.map(T=>e.jsx("button",{onClick:()=>l(T.class),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===T.class?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:T.class},T.class))]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>a("jobs"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="jobs"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{children:"Job Assignments"})]}),e.jsxs("button",{onClick:()=>a("applications"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="applications"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:"Pending Applications"}),p.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:p.length})]})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:j}),r==="jobs"&&e.jsx("div",{className:"space-y-4",children:i.map(T=>{const F=_(T.id),k=C(T.requirements),$=k?F.length>=k:!1;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.name}),T.company_name&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(",T.company_name,")"]})]}),T.location&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",T.location]}),e.jsxs("p",{className:"text-sm font-medium text-primary-600 mb-2",children:[I(T.salary)," per period"]}),k&&e.jsxs("p",{className:"text-sm text-gray-600",children:[k," position",k>1?"s":""," available"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm text-gray-600",children:n==="all"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Total: ",T.total_assigned||0," assigned"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Across all classes"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Class: ",T.class_assigned||0," assigned"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["In ",n]})]})})})]}),F.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assigned Students:"}),e.jsx("div",{className:"space-y-2",children:F.map(M=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[M.first_name," ",M.last_name]}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",M.username,") - ",M.class]})]}),e.jsxs("button",{onClick:()=>w(M.id),className:"text-red-600 hover:text-red-700 flex items-center space-x-1 text-sm",children:[e.jsx(dj,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]},M.id))})]}),n!=="all"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assign to Student:"}),e.jsx("div",{className:"space-y-2",children:o.filter(M=>M.class===n&&(!M.job_id||M.job_id!==T.id)).map(M=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[M.first_name," ",M.last_name]}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",M.username,")"]}),M.job_name&&e.jsxs("span",{className:"text-xs text-orange-600 ml-2",children:["Currently: ",M.job_name]})]}),e.jsxs("button",{onClick:()=>v(M.id,T.id),disabled:$,className:`flex items-center space-x-1 text-sm ${$?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[e.jsx(uj,{className:"h-4 w-4"}),e.jsx("span",{children:"Assign"})]})]},M.id))})]})]},T.id)})}),r==="applications"&&e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-600",children:"No pending applications"})]}):p.map(T=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:T.job_name}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Applicant:"})," ",T.applicant_first_name," ",T.applicant_last_name," (",T.applicant_username,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Applied:"})," ",new Date(T.created_at).toLocaleDateString()]}),T.job_salary&&e.jsxs("p",{children:[e.jsx("strong",{children:"Salary:"})," ",I(T.job_salary)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>S(T.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:()=>A(T.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm font-medium",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{children:"Deny"})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Application Answers:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(T.answers||{}).map(([F,k])=>{const M={interest:"Why are you interested in this position?",experience:"What relevant experience do you have?",availability:"Are you available to work during school hours?",skills:"What skills make you a good fit?",hours:"How many hours per week can you commit?"}[F]||F;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:M}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:Array.isArray(k)?k.join(", "):k})]},F)})})]})]},T.id))})]})},Tj=()=>{const{currentTownClass:t,refreshTown:s}=hs(),[r,a]=u.useState(null),[n,l]=u.useState(null),[i,c]=u.useState([]),[o,d]=u.useState(!0),[p,f]=u.useState("overview"),[b,x]=u.useState(""),[g,y]=u.useState(""),[j,m]=u.useState(""),[h,v]=u.useState(""),[w,S]=u.useState("1500"),[A,_]=u.useState(!1),[I,C]=u.useState(null),[T,F]=u.useState("month");u.useEffect(()=>{t&&k()},[t,T]);const k=async()=>{if(t){d(!0);try{const[P,H,U]=await Promise.all([Kt.getTreasuryInfo(t),Kt.getTaxReport(t,T),Kt.getTaxBrackets()]);a(P.data),l(H.data),c(U.data)}catch(P){console.error("Failed to fetch treasury data:",P)}finally{d(!1)}}},$=P=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(P),M=async()=>{if(!(!t||!r)){_(!0);try{await Kt.toggleTax(t,!r.tax_enabled),await k(),await s()}catch(P){console.error("Failed to toggle tax:",P),alert("Failed to toggle tax")}finally{_(!1)}}},q=async P=>{var H,U;if(P.preventDefault(),!(!t||!b)){_(!0);try{await Kt.depositToTreasury(t,parseFloat(b),g),x(""),y(""),await k(),await s(),alert("Deposit successful!")}catch(Y){console.error("Failed to deposit:",Y),alert(((U=(H=Y.response)==null?void 0:H.data)==null?void 0:U.error)||"Failed to deposit")}finally{_(!1)}}},N=async P=>{var H,U;if(P.preventDefault(),!(!t||!j)){_(!0);try{await Kt.withdrawFromTreasury(t,parseFloat(j),h),m(""),v(""),await k(),await s(),alert("Withdrawal successful!")}catch(Y){console.error("Failed to withdraw:",Y),alert(((U=(H=Y.response)==null?void 0:H.data)==null?void 0:U.error)||"Failed to withdraw")}finally{_(!1)}}},V=async()=>{var P,H;if(t&&confirm("Are you sure you want to pay salaries to all employed students? Tax will be automatically deducted.")){_(!0);try{const U=await Kt.paySalaries(t);C(U.data),await k(),await s()}catch(U){console.error("Failed to pay salaries:",U),alert(((H=(P=U.response)==null?void 0:P.data)==null?void 0:H.error)||"Failed to pay salaries")}finally{_(!1)}}},R=async()=>{var P,H;if(t&&confirm("Are you sure you want to pay basic salary to all unemployed students?")){_(!0);try{const U=parseFloat(w)||void 0,Y=await Kt.payBasicSalary(t,U);alert(`Basic salary paid to ${Y.data.paid_count} students. Total: ${$(Y.data.total_paid)}`),await k(),await s()}catch(U){console.error("Failed to pay basic salary:",U),alert(((H=(P=U.response)==null?void 0:P.data)==null?void 0:H.error)||"Failed to pay basic salary")}finally{_(!1)}}};return t?o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Town Treasury"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Manage finances for Class ",t]})]}),e.jsx("button",{onClick:k,disabled:o,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(zr,{className:`h-5 w-5 ${o?"animate-spin":""}`})})]}),r&&e.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-100 text-sm font-medium",children:"Treasury Balance"}),e.jsx("p",{className:"text-4xl font-bold mt-1",children:$(r.treasury_balance)}),e.jsx("p",{className:"text-emerald-100 text-sm mt-2",children:"Starting balance: R10,000,000"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-emerald-100 text-sm",children:"Tax Collection"}),e.jsx("button",{onClick:M,disabled:A,className:"focus:outline-none",title:r.tax_enabled?"Click to disable tax":"Click to enable tax",children:r.tax_enabled?e.jsx(Ec,{className:"h-8 w-8 text-white"}):e.jsx(Tc,{className:"h-8 w-8 text-emerald-200"})})]}),e.jsx("p",{className:`text-sm font-medium ${r.tax_enabled?"text-white":"text-emerald-200"}`,children:r.tax_enabled?"Progressive Tax Active":"Tax Disabled"})]})]})}),r&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-1",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Tax Collected"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(r.stats.total_tax_collected)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 mb-1",children:[e.jsx(_r,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Salaries Paid"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(Math.abs(r.stats.total_salaries_paid))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-1",children:[e.jsx(gu,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Deposits"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(r.stats.total_deposits)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 mb-1",children:[e.jsx(uu,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Withdrawals"})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(Math.abs(r.stats.total_withdrawals))})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:Qt},{id:"pay-salaries",label:"Pay Salaries",icon:ge},{id:"tax-report",label:"Tax Report",icon:wc},{id:"transactions",label:"Transactions",icon:nj}].map(({id:P,label:H,icon:U})=>e.jsxs("button",{onClick:()=>f(P),className:`py-3 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===P?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:H})]},P))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Progressive Tax Brackets"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:i.map((P,H)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[$(P.min_salary)," - ",P.max_salary?$(P.max_salary):""]}),e.jsxs("span",{className:`font-semibold ${P.tax_rate===0?"text-green-600":"text-gray-900"}`,children:[P.tax_rate,"% tax"]})]},P.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[e.jsx(gu,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Deposit to Treasury"})]}),e.jsxs("form",{onSubmit:q,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:b,onChange:P=>x(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:g,onChange:P=>y(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Donation from event"})]}),e.jsx("button",{type:"submit",disabled:A||!b,className:"w-full btn-primary",children:A?"Processing...":"Deposit"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[e.jsx(uu,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{children:"Withdraw from Treasury"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:j,onChange:P=>m(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:h,onChange:P=>v(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Town infrastructure"})]}),e.jsx("button",{type:"submit",disabled:A||!j,className:"w-full bg-amber-500 text-white py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50",children:A?"Processing...":"Withdraw"})]})]})]})]}),p==="pay-salaries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Pay Employed Students"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Pay all employed students their job salary. ",r!=null&&r.tax_enabled?"Progressive tax will be automatically deducted.":"Tax is currently disabled."]}),e.jsx("button",{onClick:V,disabled:A,className:"btn-primary",children:A?"Processing...":"Pay Salaries Now"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx(ge,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Pay Basic Salary (Unemployed)"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pay a basic salary to all unemployed students. This is tax-exempt."}),e.jsxs("div",{className:"flex items-end space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount per student (R)"}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",value:w,onChange:P=>S(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 w-40"})]}),e.jsx("button",{onClick:R,disabled:A,className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:A?"Processing...":"Pay Basic Salary"})]})]}),I&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:"Payment Complete!"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Students Paid"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:I.paid_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Gross Salaries"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:$(I.total_gross)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Tax Collected"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:$(I.total_tax)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Net Paid"}),e.jsx("p",{className:"text-xl font-bold text-green-800",children:$(I.total_net)})]})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-green-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-green-800",children:"Job"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Gross"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Tax"}),e.jsx("th",{className:"px-3 py-2 text-right text-green-800",children:"Net"})]})}),e.jsx("tbody",{children:I.payment_details.map((P,H)=>e.jsxs("tr",{className:H%2===0?"bg-white":"bg-green-50",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:P.job_name}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:$(P.gross_salary)}),e.jsxs("td",{className:"px-3 py-2 text-right text-red-600",children:["-",$(P.tax_amount)," (",P.tax_rate,"%)"]}),e.jsx("td",{className:"px-3 py-2 text-right font-medium text-green-600",children:$(P.net_salary)})]},P.id))})]})})]})]}),p==="tax-report"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Tax Report"}),e.jsxs("select",{value:T,onChange:P=>F(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"week",children:"Last 7 days"}),e.jsx("option",{value:"month",children:"Last 30 days"}),e.jsx("option",{value:"all",children:"All time"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(n.summary.total_gross)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tax"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:$(n.summary.total_tax)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Net"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:$(n.summary.total_net)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Tax Rate"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[n.summary.avg_tax_rate.toFixed(1),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Tax by Student"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"Student"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Gross Earnings"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Tax Paid"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Net Received"}),e.jsx("th",{className:"px-4 py-3 text-right text-gray-700",children:"Payments"})]})}),e.jsxs("tbody",{children:[n.student_taxes.map((P,H)=>e.jsxs("tr",{className:H%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-gray-900",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.username}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:$(P.total_gross)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-600 font-medium",children:$(P.total_tax_paid)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:$(P.total_net)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:P.payment_count})]},P.user_id)),n.student_taxes.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No tax transactions in this period"})})]})]})})]})]}),p==="transactions"&&r&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Recent Treasury Transactions"}),e.jsxs("div",{className:"space-y-2",children:[r.transactions.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${P.amount>0?"bg-green-100":"bg-red-100"}`,children:P.amount>0?e.jsx(st,{className:"h-4 w-4 text-green-600"}):e.jsx(_r,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[P.transaction_type.replace("_"," "),"  ",new Date(P.created_at).toLocaleString(),P.created_by_username&&`  by ${P.created_by_username}`]})]})]}),e.jsxs("span",{className:`font-semibold ${P.amount>0?"text-green-600":"text-red-600"}`,children:[P.amount>0?"+":"",$(P.amount)]})]},P.id)),r.transactions.length===0&&e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Select a town to manage treasury"})]})},Ej=()=>{const[t,s]=u.useState([]),[r,a]=u.useState(!0),[n,l]=u.useState(null),[i,c]=u.useState(null),[o,d]=u.useState(null),[p,f]=u.useState(!1),[b,x]=u.useState(!1),[g,y]=u.useState("all"),[j,m]=u.useState(1),[h,v]=u.useState(!1),[w,S]=u.useState({name:"",category:"consumable",price:0,description:"",notes:"",available:!0,event_day_only:!1});u.useEffect(()=>{A(),_()},[]);const A=async()=>{var N,V;try{a(!0),l(null);const P=(await gs.getAllItems()).data.map(H=>({...H,price:parseFloat(H.price)||0}));s(P)}catch(R){l(((V=(N=R.response)==null?void 0:N.data)==null?void 0:V.error)||"Failed to load shop items")}finally{a(!1)}},_=async()=>{try{const N=await gs.getSettings();m(N.data.weekly_purchase_limit)}catch(N){console.error("Failed to fetch shop settings:",N)}},I=async N=>{var V,R;try{v(!0),l(null),await gs.updateSettings({weekly_purchase_limit:N}),m(N),c(`Weekly purchase limit updated to ${N}`),setTimeout(()=>c(null),3e3)}catch(P){l(((R=(V=P.response)==null?void 0:V.data)==null?void 0:R.error)||"Failed to update settings")}finally{v(!1)}},C=async()=>{var N,V;if(!w.name.trim()||w.price<0){l("Please provide a valid name and price");return}try{x(!0),l(null),await gs.createItem({...w,description:w.description||void 0,notes:w.notes||void 0}),c("Item created successfully"),f(!1),S({name:"",category:"consumable",price:0,description:"",notes:"",available:!0,event_day_only:!1}),A(),setTimeout(()=>c(null),3e3)}catch(R){l(((V=(N=R.response)==null?void 0:N.data)==null?void 0:V.error)||"Failed to create item")}finally{x(!1)}},T=async()=>{var N,V;if(o)try{x(!0),l(null),await gs.updateItem(o.id,{name:o.name,category:o.category,price:o.price,description:o.description,notes:o.notes,available:o.available,event_day_only:o.event_day_only}),c("Item updated successfully"),d(null),A(),setTimeout(()=>c(null),3e3)}catch(R){l(((V=(N=R.response)==null?void 0:N.data)==null?void 0:V.error)||"Failed to update item")}finally{x(!1)}},F=async N=>{var V,R;try{l(null),await gs.updateItem(N.id,{available:!N.available}),c(`Item ${N.available?"disabled":"enabled"} successfully`),A(),setTimeout(()=>c(null),3e3)}catch(P){l(((R=(V=P.response)==null?void 0:V.data)==null?void 0:R.error)||"Failed to toggle item availability")}},k=async N=>{var V,R;if(confirm(`Are you sure you want to delete "${N.name}"? If this item has purchase history, it will be disabled instead.`))try{l(null),(await gs.deleteItem(N.id)).data.marked_unavailable?c("Item has purchase history and was disabled instead of deleted"):c("Item deleted successfully"),A(),setTimeout(()=>c(null),3e3)}catch(P){l(((R=(V=P.response)==null?void 0:V.data)==null?void 0:R.error)||"Failed to delete item")}},$=N=>{switch(N){case"consumable":return" Consumable";case"privilege":return" Privilege";case"profile":return" Profile Emoji";default:return N}},M=N=>{switch(N){case"consumable":return"bg-purple-100 text-purple-800";case"privilege":return"bg-yellow-100 text-yellow-800";case"profile":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},q=t.filter(N=>g==="all"||N.category===g);return r&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Shop Items Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage products, prices, and availability in The Winkel"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Item"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-amber-500 rounded-full p-3",children:e.jsx(Fl,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Weekly Purchase Limit"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Students can make up to ",e.jsx("span",{className:"font-bold text-amber-700",children:j})," purchase",j!==1?"s":""," per week"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(Profile emojis are excluded from this limit)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Limit:"}),e.jsx("select",{value:j,onChange:N=>I(parseInt(N.target.value)),disabled:h,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:opacity-50",children:[1,2,3,4,5,6,7,8,9,10].map(N=>e.jsxs("option",{value:N,children:[N," purchase",N!==1?"s":""," per week"]},N))}),h&&e.jsx(de,{className:"h-5 w-5 animate-spin text-amber-600"})]})]})}),n&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700",children:n}),e.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(bt,{className:"h-4 w-4"})})]}),i&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx("p",{className:"text-green-700",children:i})]}),p&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:w.name,onChange:N=>S({...w,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g.,  Candy Bar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{value:w.category,onChange:N=>S({...w,category:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"consumable",children:" Consumable"}),e.jsx("option",{value:"privilege",children:" Privilege"}),e.jsx("option",{value:"profile",children:" Profile Emoji"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (R) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:w.price,onChange:N=>S({...w,price:parseFloat(N.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:w.description,onChange:N=>S({...w,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Brief description"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (internal)"}),e.jsx("input",{type:"text",value:w.notes,onChange:N=>S({...w,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Internal notes (shown to students)"})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w.available,onChange:N=>S({...w,available:N.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Available for purchase"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w.event_day_only,onChange:N=>S({...w,event_day_only:N.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Event day only"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:C,disabled:b,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[b?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Item"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsx("div",{className:"flex space-x-2",children:["all","consumable","privilege","profile"].map(N=>e.jsx("button",{onClick:()=>y(N),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${g===N?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N==="all"?"All":$(N)},N))})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx(Sh,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Items"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(N=>N.available).length})]}),e.jsx(je,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Disabled Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:t.filter(N=>!N.available).length})]}),e.jsx(bt,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Price"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-600",children:["R",t.length>0?(t.reduce((N,V)=>N+V.price,0)/t.length).toFixed(0):0]})]}),e.jsx(ge,{className:"h-8 w-8 text-primary-400"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(N=>e.jsxs("tr",{className:N.available?"":"bg-gray-50 opacity-70",children:[e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:o.name,onChange:V=>d({...o,name:V.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",value:o.description||"",onChange:V=>d({...o,description:V.target.value||null}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Description"}),e.jsx("input",{type:"text",value:o.notes||"",onChange:V=>d({...o,notes:V.target.value||null}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Notes"})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),N.description&&e.jsx("p",{className:"text-xs text-gray-500",children:N.description}),N.notes&&e.jsx("p",{className:"text-xs text-gray-400 italic",children:N.notes})]})}),e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsxs("select",{value:o.category,onChange:V=>d({...o,category:V.target.value}),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"consumable",children:"Consumable"}),e.jsx("option",{value:"privilege",children:"Privilege"}),e.jsx("option",{value:"profile",children:"Profile"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${M(N.category)}`,children:$(N.category)})}),e.jsx("td",{className:"px-6 py-4",children:(o==null?void 0:o.id)===N.id?e.jsx("input",{type:"number",min:"0",step:"0.01",value:o.price,onChange:V=>d({...o,price:parseFloat(V.target.value)||0}),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm"}):e.jsxs("span",{className:"text-sm font-semibold text-primary-600",children:["R",N.price.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>F(N),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${N.available?"bg-green-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${N.available?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm ${N.available?"text-green-600":"text-gray-500"}`,children:N.available?"Active":"Disabled"}),N.event_day_only&&e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full",children:"Event Only"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:(o==null?void 0:o.id)===N.id?e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:T,disabled:b,className:"p-1.5 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Save",children:b?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(ol,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(null),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Cancel",children:e.jsx(bt,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>d({...N}),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:e.jsx(kc,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(N),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:e.jsx(Pc,{className:"h-4 w-4"})})]})})]},N.id))})]})}),q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($s,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:t.length===0?"No shop items yet. Add your first item!":"No items match the current filter."})]})]})]})},Pj=({students:t,onUpdate:s})=>{const r=Wa(),[a,n]=u.useState(null),[l,i]=u.useState(!1),[c,o]=u.useState(!1),[d,p]=u.useState(!1),[f,b]=u.useState(null),[x,g]=u.useState({amount:"",description:""}),[y,j]=u.useState(!1),[m,h]=u.useState(""),[v,w]=u.useState(""),[S,A]=u.useState(""),[_,I]=u.useState("all"),[C,T]=u.useState("surname"),[F,k]=u.useState("asc"),[$,M]=u.useState(new Set),[q,N]=u.useState({}),[V,R]=u.useState(null),P=u.useMemo(()=>{const D=t.reduce((re,Q)=>{const B=Q.class||"Unassigned";return re[B]||(re[B]=[]),re[B].push(Q),re},{}),ee=Object.keys(D).sort((re,Q)=>re==="Unassigned"?1:Q==="Unassigned"?-1:re.localeCompare(Q));return{grouped:D,sortedClasses:ee}},[t]),U=(D=>D==="all"?t:P.grouped[D]||[])(_).filter(D=>D.username.toLowerCase().includes(S.toLowerCase())||D.first_name&&D.first_name.toLowerCase().includes(S.toLowerCase())||D.last_name&&D.last_name.toLowerCase().includes(S.toLowerCase())),Y=u.useMemo(()=>{const D=F==="asc"?1:-1;return U.map((ee,re)=>({s:ee,idx:re})).sort((ee,re)=>{if(C==="balance"){const Q=Number(ee.s.balance)||0,B=Number(re.s.balance)||0,ne=Q-B;if(ne!==0)return ne*D}else{const Q=(ee.s.last_name||"").toLowerCase(),B=(re.s.last_name||"").toLowerCase();if(Q!==B)return Q.localeCompare(B)*D;const ne=(ee.s.first_name||"").toLowerCase(),oe=(re.s.first_name||"").toLowerCase();if(ne!==oe)return ne.localeCompare(oe)*D;const be=(ee.s.username||"").toLowerCase(),L=(re.s.username||"").toLowerCase();if(be!==L)return be.localeCompare(L)*D}return ee.idx-re.idx}).map(({s:ee})=>ee)},[U,C,F]),Z=async D=>{var ee,re;if(D.preventDefault(),!!a){h(""),w(""),j(!0);try{await z.post("/transactions/deposit",{username:a.username,amount:parseFloat(x.amount),description:x.description||"Deposit by teacher"}),w("Deposit successful!"),g({amount:"",description:""}),i(!1),s()}catch(Q){h(((re=(ee=Q.response)==null?void 0:ee.data)==null?void 0:re.error)||"Deposit failed")}finally{j(!1)}}},K=async D=>{var ee,re;if(D.preventDefault(),!!a){h(""),w(""),j(!0);try{await z.post("/transactions/withdraw",{username:a.username,amount:parseFloat(x.amount),description:x.description||"Withdrawal by teacher"}),w("Withdrawal successful!"),g({amount:"",description:""}),o(!1),s()}catch(Q){h(((re=(ee=Q.response)==null?void 0:ee.data)==null?void 0:re.error)||"Withdrawal failed")}finally{j(!1)}}},X=async()=>{var D,ee,re;if(f){h(""),w(""),j(!0);try{try{await z.delete(`/students/${f.username}`),w(`Student ${f.username} has been deleted successfully`),p(!1),b(null),s()}catch(Q){if(((D=Q.response)==null?void 0:D.status)===404&&f.account_number)await z.delete(`/students/account/${f.account_number}`),w(`Account ${f.account_number} has been deleted successfully`),p(!1),b(null),s();else throw Q}}catch(Q){h(((re=(ee=Q.response)==null?void 0:ee.data)==null?void 0:re.error)||"Failed to delete student")}finally{j(!1)}}},ae=D=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(D),ue=D=>{const ee=D.id,re=$.has(ee),Q=new Set($);if(re){Q.delete(ee),M(Q);return}Q.add(ee),M(Q)},le=async D=>{var ee,re;R(D.id),h(""),w("");try{const B=(await z.post(`/students/${D.username}/reset-password`,{reveal:!0})).data.temporary_password;if(!B){w(`Password reset for ${D.username}. (Password not returned by server)`);return}N(ne=>({...ne,[D.id]:B})),w(`Password reset for ${D.username}. Share the new password with the student.`),$.has(D.id)||M(ne=>new Set(ne).add(D.id))}catch(Q){h(((re=(ee=Q.response)==null?void 0:ee.data)==null?void 0:re.error)||"Failed to reset password")}finally{R(null)}},me=D=>{navigator.clipboard.writeText(D).then(()=>{w("Copied to clipboard!"),setTimeout(()=>w(""),2e3)}).catch(()=>{h("Failed to copy to clipboard")})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students by name or username...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:S,onChange:D=>A(D.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Sort by"}),e.jsxs("select",{value:C,onChange:D=>T(D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"surname",children:"Surname"}),e.jsx("option",{value:"balance",children:"Bank balance"})]}),e.jsx("button",{type:"button",onClick:()=>k(D=>D==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",title:F==="asc"?"Ascending":"Descending",children:F==="asc"?"AZ":"ZA"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>I("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Pe,{className:"h-4 w-4 inline mr-2"}),"All Students (",t.length,")"]}),P.sortedClasses.map(D=>e.jsxs("button",{onClick:()=>I(D),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_===D?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[D==="Unassigned"?"":""," ",D," (",P.grouped[D].length,")"]},D))]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),v&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:v}),_==="all"&&P.sortedClasses.length>1&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Class Summary"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.sortedClasses.map(D=>{const ee=P.grouped[D],re=ee.reduce((Q,B)=>Q+(Number(B.balance)||0),0);return e.jsx("div",{className:"bg-white rounded-lg p-3 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[D==="Unassigned"?"":""," ",D]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ee.length," students"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-semibold text-success-600",children:ae(re)})})]})},D)})})]}),Y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:S?"No students found":`No students in ${_==="all"?"any class":_}`}),e.jsx("p",{className:"text-gray-500",children:S?"Try adjusting your search terms":_==="all"?"Students will appear here once they register":"Students in this class will appear here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(D=>{const ee=$.has(D.id),re=q[D.id];return e.jsxs("div",{className:`card transition-all duration-200 ${(a==null?void 0:a.id)===D.id?"ring-2 ring-primary-500 bg-primary-50":"hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"bg-primary-100 p-2 rounded-full flex-shrink-0",children:e.jsx(Vs,{className:"h-5 w-5 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:D.first_name&&D.last_name?`${D.first_name} ${D.last_name}`:D.username}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",D.username]}),e.jsx("div",{className:"flex items-center space-x-2 mt-1 flex-wrap",children:e.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:D.class||"Unassigned"})})]})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:e.jsx("p",{className:"text-lg font-bold text-success-600",children:ae(D.balance)})})]}),e.jsxs("div",{className:"mb-3 space-y-1",children:[D.email&&e.jsx("p",{className:"text-xs text-gray-600 truncate",title:D.email,children:D.email}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",title:`Account: ${D.account_number}`,children:["Account: ",D.account_number]})]}),e.jsxs("div",{className:"mb-3 border-t border-gray-200 pt-3",children:[e.jsx("button",{onClick:()=>ue(D),className:"w-full flex items-center justify-between text-sm text-gray-700 hover:text-primary-600 transition-colors",children:e.jsxs("span",{className:"flex items-center",children:[ee?e.jsx(Nh,{className:"h-4 w-4 mr-1"}):e.jsx(vh,{className:"h-4 w-4 mr-1"}),"Credentials"]})}),ee&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Username"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:D.username,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:Q=>Q.currentTarget.select()}),e.jsx("button",{onClick:()=>me(D.username),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy username",children:e.jsx(xi,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 block mb-1",children:"Password"}),re?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:re,className:"flex-1 text-sm px-2 py-1.5 bg-white border border-gray-300 rounded text-gray-900 font-mono",onClick:Q=>Q.currentTarget.select()}),e.jsx("button",{onClick:()=>me(re),className:"p-1.5 text-gray-600 hover:text-primary-600 transition-colors rounded hover:bg-gray-200",title:"Copy password",children:e.jsx(xi,{className:"h-4 w-4"})})]}):V===D.id?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-white border border-gray-300 rounded",children:[e.jsx(zr,{className:"h-4 w-4 animate-spin text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading password"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 px-3 py-2 bg-amber-50 border border-amber-200 rounded text-sm text-amber-800",children:"Password not loaded yet. Click Reset to generate a new one."}),e.jsxs("button",{onClick:()=>le(D),disabled:V===D.id,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-primary-100 text-primary-700 hover:bg-primary-200 rounded text-sm transition-colors disabled:opacity-50",children:[e.jsx(zr,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]})]})]}),re&&e.jsxs("button",{onClick:()=>me(`Username: ${D.username}
Password: ${re}`),className:"w-full px-3 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded text-sm transition-colors flex items-center justify-center space-x-2",children:[e.jsx(xi,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy username and password"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:Q=>{Q.stopPropagation(),D.username?r(`/student/${D.username}`):console.error("Student has no username:",D)},className:"flex-1 bg-primary-100 text-primary-700 hover:bg-primary-200 px-3 py-2 rounded-lg transition-colors text-sm flex items-center justify-center space-x-1",title:"View detailed profile",children:[e.jsx(za,{className:"h-4 w-4"}),e.jsx("span",{children:"View Details"})]}),e.jsxs("button",{onClick:Q=>{Q.stopPropagation(),n(D),i(!0)},className:"flex-1 btn-success text-sm",children:[e.jsx(ds,{className:"h-4 w-4 inline mr-1"}),"Add Money"]}),e.jsxs("button",{onClick:Q=>{Q.stopPropagation(),n(D),o(!0)},className:"flex-1 btn-warning text-sm",children:[e.jsx(_h,{className:"h-4 w-4 inline mr-1"}),"Remove Money"]}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),b(D),p(!0)},className:"px-3 py-2 bg-red-100 text-red-600 hover:bg-red-200 rounded-lg transition-colors text-sm",title:"Delete Student",children:e.jsx(Pc,{className:"h-4 w-4"})})]})]},D.id)})}),l&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add Money to ",a.username]}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ge,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:x.amount,onChange:D=>g({...x,amount:D.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Salary, Bonus, Reward",value:x.description,onChange:D=>g({...x,description:D.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:y,className:"flex-1 btn-success disabled:opacity-50",children:y?"Adding...":"Add Money"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),c&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Remove Money from ",a.username]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ge,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:a.balance,required:!0,className:"input-field",placeholder:"0.00",value:x.amount,onChange:D=>g({...x,amount:D.target.value})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",ae(a.balance)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"e.g., Fine, Expense, Penalty",value:x.description,onChange:D=>g({...x,description:D.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:y,className:"flex-1 btn-warning disabled:opacity-50",children:y?"Removing...":"Remove Money"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]})}),d&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(Zr,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Student"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Are you sure you want to delete the following student? This action cannot be undone."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:f.first_name&&f.last_name?`${f.first_name} ${f.last_name}`:f.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",f.username]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Class: ",f.class||"Unassigned"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Balance: ",ae(f.balance)]})]}),e.jsxs("p",{className:"text-sm text-red-600 mt-3",children:[e.jsx("strong",{children:"Warning:"})," All associated data including transactions, loans, job applications, and land ownership will be removed."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:X,disabled:y,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:y?"Deleting...":"Delete Student"}),e.jsx("button",{onClick:()=>{p(!1),b(null)},className:"flex-1 btn-secondary",children:"Cancel"})]})]})})]})},Rj=({onUpdate:t})=>{const[s,r]=u.useState([]),[a,n]=u.useState(!0),[l,i]=u.useState(""),[c,o]=u.useState(""),[d,p]=u.useState(null);u.useEffect(()=>{f()},[]);const f=async()=>{var y,j;try{n(!0),i("");const m=await z.get("/students/pending");r(m.data)}catch(m){i(((j=(y=m.response)==null?void 0:y.data)==null?void 0:j.error)||"Failed to fetch pending students")}finally{n(!1)}},b=async y=>{var j,m;p(y.id),i(""),o("");try{await z.post(`/students/${y.username}/approve`),o(`Student ${y.username} has been approved successfully`),await f(),t()}catch(h){i(((m=(j=h.response)==null?void 0:j.data)==null?void 0:m.error)||"Failed to approve student")}finally{p(null)}},x=async y=>{var j,m;if(confirm(`Are you sure you want to deny ${y.username}? This action cannot be undone.`)){p(y.id),i(""),o("");try{await z.post(`/students/${y.username}/deny`),o(`Student ${y.username} has been denied`),await f(),t()}catch(h){i(((m=(j=h.response)==null?void 0:j.data)==null?void 0:m.error)||"Failed to deny student")}finally{p(null)}}},g=y=>new Date(y).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"New Student Registrations"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," ",s.length===1?"student":"students"," waiting for approval"]})]})]}),e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 transition-colors",children:[e.jsx(zr,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]}),l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("span",{children:l})]}),c&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:c}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx($e,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Students"}),e.jsx("p",{className:"text-gray-500",children:"All new student registrations have been processed."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(y=>e.jsxs("div",{className:"bg-white rounded-xl border-2 border-amber-200 shadow-sm p-5 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-full flex-shrink-0",children:e.jsx(Vs,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:y.first_name&&y.last_name?`${y.first_name} ${y.last_name}`:y.username}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",y.username]})]})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[y.class&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full",children:y.class})}),y.email&&e.jsx("p",{className:"text-xs text-gray-600 truncate",title:y.email,children:y.email}),y.account_number&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",y.account_number]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",g(y.created_at)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b(y),disabled:d===y.id,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-success-600 text-white rounded-lg hover:bg-success-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d===y.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zy,{className:"h-4 w-4"}),e.jsx("span",{children:"Approve"})]})}),e.jsx("button",{onClick:()=>x(y),disabled:d===y.id,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(bt,{className:"h-4 w-4"})})]})]},y.id))})]})},Aj=()=>{const{user:t}=Le(),{enabledPlugins:s,plugins:r,loading:a,refreshPlugins:n}=lt(),{currentTown:l,currentTownClass:i,allTowns:c,announcements:o,loading:d,setCurrentTownClass:p,refreshAnnouncements:f}=hs(),[b,x]=u.useState("dashboard"),[g,y]=u.useState(0),[j,m]=u.useState([]),[h,v]=u.useState([]),[w,S]=u.useState(!0),A=t!=null&&t.first_name&&(t!=null&&t.last_name)?`${t.first_name} ${t.last_name}`:(t==null?void 0:t.username)||"Teacher";u.useEffect(()=>{_()},[]);const _=async()=>{var k;try{const[$,M,q]=await Promise.all([z.get("/students"),z.get("/loans"),z.get("/students/pending").catch(()=>({data:[]}))]);m($.data),v(M.data),y(((k=q.data)==null?void 0:k.length)||0)}catch($){console.error("Failed to fetch data:",$)}finally{S(!1)}},I=u.useMemo(()=>{const k={};return c.forEach($=>{const M=j.filter(N=>N.class===$.class),q=h.filter(N=>{const V=j.find(R=>R.username===N.borrower_username);return(V==null?void 0:V.class)===$.class});k[$.class]={studentCount:M.length,totalBalance:M.reduce((N,V)=>N+(Number(V.balance)||0),0),employedCount:M.filter(N=>N.job_id).length,unemployedCount:M.filter(N=>!N.job_id).length,activeLoans:q.filter(N=>N.status==="active").length,pendingLoans:q.filter(N=>N.status==="pending").length}}),k},[j,h,c]),C=i?I[i]:null,T=u.useMemo(()=>i?j.filter(k=>k.class===i):[],[j,i]),F=k=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(k);return a||d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",A,"! "]}),e.jsx("p",{className:"text-primary-100",children:"Town Hub Control Center"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-primary-100 text-sm",children:"Managing"}),e.jsxs("p",{className:"text-xl font-bold",children:[c.length," Towns"]})]})]})}),g>0&&b!=="pending"&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx($e,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-amber-800",children:[g," new student",g!==1?"s":""," waiting for approval"]}),e.jsx("p",{className:"text-xs text-amber-600",children:'Click "New Students" tab to review and approve'})]})]}),e.jsx("button",{onClick:()=>x("pending"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium",children:"Review Now"})]})}),c.length>0&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-3 divide-x divide-gray-200",children:c.map(k=>{const $=I[k.class],M=i===k.class;return e.jsxs("button",{onClick:()=>p(k.class),className:`p-4 text-left transition-all ${M?"bg-gradient-to-br from-primary-50 to-primary-100 border-b-4 border-primary-500":"hover:bg-gray-50 border-b-4 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${M?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"}`,children:e.jsx(Tt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${M?"text-primary-700":"text-gray-900"}`,children:k.town_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Class ",k.class]})]})]}),$&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pe,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[$.studentCount," students"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qt,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:`${$.totalBalance>=0?"text-green-600":"text-red-600"}`,children:F($.totalBalance)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(jt,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[$.employedCount," employed"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(hu,{className:"h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"text-emerald-600",children:F(k.treasury_balance||1e7)})]})]})]},k.id)})})}),l&&C&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.studentCount}),e.jsxs("p",{className:"text-xs text-gray-500",children:[C.employedCount," employed"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),e.jsx("p",{className:`text-2xl font-bold ${C.totalBalance>=0?"text-green-600":"text-red-600"}`,children:F(C.totalBalance)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",F(C.studentCount>0?C.totalBalance/C.studentCount:0)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Employment"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[C.studentCount>0?Math.round(C.employedCount/C.studentCount*100):0,"%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[C.unemployedCount," unemployed"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:C.activeLoans}),e.jsx("p",{className:"text-xs text-amber-600",children:C.pendingLoans>0?`${C.pendingLoans} pending approval`:"No pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"dashboard",label:"Overview",icon:ya},{id:"pending",label:"New Students",icon:$e,badge:g},{id:"students",label:"Students",icon:Pe},{id:"treasury",label:"Treasury",icon:hu},{id:"jobs",label:"Jobs",icon:jt},{id:"shop",label:"Shop",icon:$s},{id:"plugins",label:"Plugins",icon:Cc},{id:"announcements",label:"Announcements",icon:Yy},{id:"town",label:"Town Settings",icon:Fs}].map(({id:k,label:$,icon:M,badge:q})=>e.jsxs("button",{onClick:()=>x(k),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 relative ${b===k?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:$}),q!==void 0&&q>0&&e.jsx("span",{className:"ml-1 bg-amber-500 text-white text-xs font-bold rounded-full px-2 py-0.5 min-w-[20px] text-center",children:q})]},k))})}),e.jsxs("div",{className:"p-6",children:[b==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Th,{town:l,readOnly:!0,showTreasury:!0}),e.jsx(Ch,{announcements:o})]}),T.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-primary-600"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Students in ",(l==null?void 0:l.town_name)||`Class ${i}`]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[T.length," students"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:T.slice(0,9).map(k=>e.jsx("div",{className:`bg-white rounded-lg p-3 border ${Number(k.balance)<0?"border-red-200 bg-red-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.first_name&&k.last_name?`${k.first_name} ${k.last_name}`:k.username}),e.jsxs("p",{className:"text-xs text-gray-500",children:["@",k.username]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-semibold ${Number(k.balance)<0?"text-red-600":"text-green-600"}`,children:F(k.balance)}),k.job_name?e.jsx("p",{className:"text-xs text-blue-600",children:k.job_name}):e.jsx("p",{className:"text-xs text-gray-400",children:"No job"})]})]})},k.id))}),T.length>9&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-3",children:["+",T.length-9," more students"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ya,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Available Systems"})]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No systems available at this time"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(k=>e.jsx(kh,{plugin:k},k.id))})]})]}),b==="pending"&&e.jsx(Rj,{onUpdate:_}),b==="students"&&e.jsx(Pj,{students:j,onUpdate:_}),b==="treasury"&&e.jsx(Tj,{}),b==="plugins"&&e.jsx(_j,{plugins:r,onUpdate:n}),b==="announcements"&&e.jsx(Sj,{announcements:o,onUpdate:f}),b==="jobs"&&e.jsx(Cj,{}),b==="shop"&&e.jsx(Ej,{}),b==="town"&&e.jsx(kj,{})]})]})]})},ju=()=>{const{username:t}=Vd(),{accountNumber:s}=Vd(),r=s||t||"",a=Wa(),[n,l]=u.useState(null),[i,c]=u.useState(!0),[o,d]=u.useState(""),[p,f]=u.useState("overview");u.useEffect(()=>{b()},[r]);const b=async()=>{var N,V,R;try{c(!0),d("");const P=s||(r==null?void 0:r.startsWith("ACC"));let H;if(P)try{H=await z.get(`/students/account/${r}/details`)}catch{H=await z.get(`/students/${r}/details`)}else try{H=await z.get(`/students/${r}/details`)}catch(U){if(((N=U.response)==null?void 0:N.status)===404)H=await z.get(`/students/account/${r}/details`);else throw U}l(H.data)}catch(P){d(((R=(V=P.response)==null?void 0:V.data)==null?void 0:R.error)||"Failed to load student details")}finally{c(!1)}},x=N=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(N),g=N=>new Date(N).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=N=>new Date(N).toLocaleDateString("en-ZA",{month:"short",day:"numeric",year:"numeric"}),j=(N,V)=>{const R="text-xs px-2 py-1 rounded-full flex items-center space-x-1";return N==="approved"||N==="verified"?e.jsxs("span",{className:`${R} bg-green-100 text-green-700`,children:[e.jsx(je,{className:"h-3 w-3"}),e.jsx("span",{children:V?"Approved  Paid":"Approved"})]}):N==="denied"?e.jsxs("span",{className:`${R} bg-red-100 text-red-700`,children:[e.jsx(It,{className:"h-3 w-3"}),e.jsx("span",{children:"Denied"})]}):e.jsxs("span",{className:`${R} bg-yellow-100 text-yellow-700`,children:[e.jsx(Te,{className:"h-3 w-3"}),e.jsx("span",{children:"Pending"})]})},m=N=>N?N.first_name&&N.last_name?`${N.first_name} ${N.last_name}`:N.username||N.account_number||"Unknown":"Unknown",h=(N,V)=>N.from_username===V&&N.to_username===V?"Internal":N.from_username===V?`To ${N.to_first_name&&N.to_last_name?`${N.to_first_name} ${N.to_last_name}`:N.to_username||"Unknown"}`:N.to_username===V?`From ${N.from_first_name&&N.from_last_name?`${N.from_first_name} ${N.from_last_name}`:N.from_username||"Unknown"}`:N.transaction_type;if(i)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wh,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading student details..."})]})});if(o||!n)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 mb-4",children:o||"Failed to load student details"}),e.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Back to Dashboard"})]})});const{account:v,student:w,transactions:S,loans:A,landParcels:_,mathGameSessions:I,pizzaContributions:C,shopPurchases:T,jobApplications:F,suggestions:k,bugReports:$,stats:M}=n,q=w||(v?{account_number:v.account_number,balance:v.balance,username:v.account_number,first_name:void 0,last_name:void 0}:null);return q?e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Hy,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to Dashboard"})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-4 rounded-full",children:e.jsx(Vs,{className:"h-12 w-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",children:m(q)}),e.jsxs("p",{className:"text-primary-100 mb-2",children:["@",q.username||q.account_number]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[q.class&&e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:["Class ",q.class]}),q.email&&e.jsx("span",{className:"text-sm text-primary-100",children:q.email}),(v==null?void 0:v.orphaned)&&e.jsx("span",{className:"bg-yellow-500/20 px-3 py-1 rounded-full text-sm text-yellow-200",children:"Orphaned Account"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-primary-100 text-sm mb-1",children:"Current Balance"}),e.jsx("p",{className:`text-4xl font-bold ${Number(q.balance)<0?"text-red-300":"text-white"}`,children:x(q.balance)}),e.jsxs("p",{className:"text-xs text-primary-200 mt-1",children:["Account: ",q.account_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Earned"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x(M.total_deposits+M.total_math_earnings)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(_r,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Spent"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x(M.total_withdrawals+M.shop_purchases_total+M.pizza_contributions_total)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Property Value"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x(M.land_value_total)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.land_parcels_owned," parcels"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-2",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Loan Debt"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x(M.total_loan_debt)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.active_loans," active"]})]})]}),q.job_name&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(jt,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Current Job"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Employment Details"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Position"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.job_name})]}),w.job_company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Company"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.job_company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Salary"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:x(q.job_salary||0)})]}),q.job_description&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:q.job_description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:wc},{id:"transactions",label:"Transactions",icon:ge},{id:"loans",label:"Loans",icon:ts},{id:"property",label:"Property",icon:ja},{id:"activities",label:"Activities",icon:pi}].map(({id:N,label:V,icon:R})=>e.jsxs("button",{onClick:()=>f(N),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===N?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:V})]},N))})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("span",{className:"font-semibold text-gray-900",children:M.total_transactions})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Chores Games Played"}),e.jsx("span",{className:"font-semibold text-gray-900",children:M.math_games_played})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Chores Game Earnings"}),e.jsx("span",{className:"font-semibold text-green-600",children:x(M.total_math_earnings)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pizza Contributions"}),e.jsx("span",{className:"font-semibold text-orange-600",children:x(M.pizza_contributions_total)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Shop Purchases"}),e.jsx("span",{className:"font-semibold text-blue-600",children:x(M.shop_purchases_total)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_r,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Sent to Students"})]}),e.jsx("span",{className:"font-semibold text-green-600",children:x(M.total_transfers_sent)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Received from Students"})]}),e.jsx("span",{className:"font-semibold text-blue-600",children:x(M.total_transfers_received)})]}),e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Net Transfer"}),e.jsx("span",{className:`font-bold ${M.total_transfers_received-M.total_transfers_sent>=0?"text-green-600":"text-red-600"}`,children:x(M.total_transfers_received-M.total_transfers_sent)})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:S.slice(0,5).map(N=>{const V=N.from_username===(q.username||q.account_number);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${V?"bg-red-100":"bg-green-100"}`,children:V?e.jsx(_r,{className:"h-4 w-4 text-red-600"}):e.jsx(st,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h(N,q.username||q.account_number||"")}),e.jsx("p",{className:"text-xs text-gray-500",children:N.description||N.transaction_type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${V?"text-red-600":"text-green-600"}`,children:[V?"-":"+",x(N.amount)]}),e.jsx("p",{className:"text-xs text-gray-500",children:y(N.created_at)})]})]},N.id)})})]})]}),p==="transactions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["All Transactions (",S.length,")"]})}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]}):e.jsx("div",{className:"space-y-2",children:S.map(N=>{const V=N.from_username===(q.username||q.account_number);return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full mt-1 ${V?"bg-red-100":"bg-green-100"}`,children:V?e.jsx(_r,{className:"h-4 w-4 text-red-600"}):e.jsx(st,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h(N,q.username||q.account_number||"")}),e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:N.transaction_type})]}),N.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:N.description}),e.jsx("p",{className:"text-xs text-gray-500",children:g(N.created_at)})]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("p",{className:`text-lg font-bold ${V?"text-red-600":"text-green-600"}`,children:[V?"-":"+",x(N.amount)]})})]})},N.id)})})]}),p==="loans"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Loans (",A.length,")"]})}),A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ts,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No loans"})]}):e.jsx("div",{className:"grid gap-4",children:A.map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-purple-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:x(N.amount)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.status==="active"?"bg-green-100 text-green-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":N.status==="paid_off"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:N.status})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[N.term_months," months  ",N.interest_rate,"% interest"]})]}),N.status==="active"&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:x(N.outstanding_balance)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold text-gray-900",children:x(N.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Paid"}),e.jsx("p",{className:"font-semibold text-green-600",children:x(N.total_paid)})]}),N.status==="active"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Payments Left"}),e.jsx("p",{className:"font-semibold text-gray-900",children:N.payments_remaining})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Created: ",y(N.created_at),N.approved_at&&`  Approved: ${y(N.approved_at)}`]})]},N.id))})]}),p==="property"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Land Parcels (",_.length,")"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Value"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:x(M.land_value_total)})]})]}),_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ja,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No land parcels owned"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:_.map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N.grid_code}),e.jsx("p",{className:"text-sm text-gray-600",children:N.biome_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:x(N.value)}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${N.risk_level==="low"?"bg-green-100 text-green-700":N.risk_level==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[N.risk_level," risk"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Purchased: ",y(N.purchased_at)]})]},N.id))})]}),p==="activities"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Chores Game Sessions (",I.length,")"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Earnings"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:x(M.total_math_earnings)})]})]}),I.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(pi,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No chores games played yet"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:I.slice(0,10).map(N=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pi,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${N.difficulty==="easy"?"bg-green-100 text-green-700":N.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:N.difficulty})]}),e.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+",x(N.earnings)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Score: ",N.score]}),e.jsxs("span",{className:"text-gray-600",children:[N.correct_answers,"/",N.total_problems," correct"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g(N.played_at)})]},N.id))})]}),C.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pizza Contributions"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:x(M.pizza_contributions_total)})]}),e.jsx("div",{className:"space-y-2",children:C.map((N,V)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ln,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:x(N.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:y(N.created_at)})]})]},V))})]}),T.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Shop Purchases"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:x(M.shop_purchases_total)})]}),e.jsx("div",{className:"space-y-2",children:T.map((N,V)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($s,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:x(N.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:y(N.created_at)})]})]},V))})]}),F.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Job Applications"}),e.jsx("div",{className:"space-y-2",children:F.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fs,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.job_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Salary: ",x(N.job_salary)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.status==="approved"?"bg-green-100 text-green-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:N.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y(N.created_at)})]})]},N.id))})]}),(k.length>0||$.length>0)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suggestions & Bugs"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Suggestions"}),e.jsx("p",{className:"text-xs text-gray-500",children:k.length})]}),k.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions submitted."}):e.jsx("div",{className:"space-y-2",children:k.map(N=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[j(N.status,N.reward_paid),e.jsx("span",{className:"text-xs text-gray-500",children:y(N.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:N.content})]},N.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Bug Reports"}),e.jsx("p",{className:"text-xs text-gray-500",children:$.length})]}),$.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No bugs reported."}):e.jsx("div",{className:"space-y-2",children:$.map(N=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[j(N.status,N.reward_paid),e.jsx("span",{className:"text-xs text-gray-500",children:y(N.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:N.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:N.description})]},N.id))})]})]})]})]})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 mb-4",children:"No account or student data found"}),e.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Back to Dashboard"})]})})},Lj=({onSuccess:t})=>{const[s,r]=u.useState({to_username:"",amount:"",description:""}),[a,n]=u.useState(!1),[l,i]=u.useState(""),[c,o]=u.useState(""),[d,p]=u.useState([]),[f,b]=u.useState(!0),[x,g]=u.useState(null),[y,j]=u.useState(!0);u.useEffect(()=>{(async()=>{try{const[w,S]=await Promise.all([z.get("/students/classmates"),z.get("/transactions/can-transact")]);p(w.data),g(S.data)}catch(w){console.error("Failed to load data:",w),i("Failed to load data. Please refresh the page.")}finally{b(!1),j(!1)}})()},[]);const m=async v=>{var w,S;v.preventDefault(),i(""),o(""),n(!0);try{await z.post("/transactions/transfer",{to_username:s.to_username,amount:parseFloat(s.amount),description:s.description||void 0}),o("Transfer completed successfully!"),r({to_username:"",amount:"",description:""}),t()}catch(A){i(((S=(w=A.response)==null?void 0:w.data)==null?void 0:S.error)||"Transfer failed")}finally{n(!1)}},h=v=>{r({...s,[v.target.name]:v.target.value})};return y?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):x&&!x.canTransact?e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(It,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfers Blocked"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-800 font-medium mb-2",children:"You cannot make transfers at this time"}),e.jsx("p",{className:"text-red-700 text-sm",children:x.reason})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:" How to resolve:"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:" If you have a negative balance, deposit money to clear it"}),e.jsx("li",{children:" If you have an overdue loan payment, make a loan payment first"}),e.jsx("li",{children:" Contact your teacher if you need assistance"})]})]})]}):e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ds,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transfer Money"}),e.jsx("p",{className:"text-gray-600",children:"Send money to another student in your class"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),c&&e.jsx("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg",children:c}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"to_username",className:"label",children:[e.jsx(Vs,{className:"h-4 w-4 inline mr-1"}),"Send to (Classmate)"]}),f?e.jsx("div",{className:"input-field text-gray-500",children:"Loading classmates..."}):e.jsxs("select",{id:"to_username",name:"to_username",required:!0,className:"input-field",value:s.to_username,onChange:h,children:[e.jsx("option",{value:"",children:"Select a classmate"}),d.map(v=>e.jsx("option",{value:v.username,children:v.first_name&&v.last_name?`${v.first_name} ${v.last_name} (${v.username})`:v.username},v.id))]}),!f&&d.length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No classmates found in your class."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"label",children:[e.jsx(ge,{className:"h-4 w-4 inline mr-1"}),"Amount"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0.01",required:!0,className:"input-field",placeholder:"0.00",value:s.amount,onChange:h})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"label",children:[e.jsx(ej,{className:"h-4 w-4 inline mr-1"}),"Description (Optional)"]}),e.jsx("input",{id:"description",name:"description",type:"text",className:"input-field",placeholder:"What's this for?",value:s.description,onChange:h})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Sending...":"Send Money"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Transfer Tips:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Make sure you have enough money in your account"}),e.jsx("li",{children:" Select a classmate from your class to send money to"}),e.jsx("li",{children:" Add a description to remember what the money is for"}),e.jsx("li",{children:" Pay off any outstanding loans before making transfers"})]})]})]})},Fj=({onSuccess:t})=>{const[s,r]=u.useState([]),[a,n]=u.useState(null),[l,i]=u.useState(!1),[c,o]=u.useState({amount:"",term_weeks:"4"}),[d,p]=u.useState(!0),[f,b]=u.useState(!1),[x,g]=u.useState(""),[y,j]=u.useState("");u.useEffect(()=>{m()},[]);const m=async()=>{try{const[F,k]=await Promise.all([z.get("/loans"),z.get("/loans/eligibility")]);r(F.data),n(k.data)}catch(F){console.error("Failed to fetch data:",F)}finally{p(!1)}},h=()=>{const F=parseFloat(c.amount)||0,k=parseInt(c.term_weeks)||4;let $;k<=4?$=.05:k<=8?$=.08:$=.1;const M=F*(1+$),q=M/k;return{interestRate:$,totalAmount:M,weeklyPayment:q,interestAmount:M-F}},v=async F=>{var k,$,M;F.preventDefault(),g(""),j(""),b(!0);try{const q=await z.post("/loans/apply",{amount:parseFloat(c.amount),term_weeks:parseInt(c.term_weeks)});j("Loan application submitted successfully! Weekly payment: R"+((k=q.data.weeklyPayment)==null?void 0:k.toFixed(2))),o({amount:"",term_weeks:"4"}),i(!1),m(),t()}catch(q){g(((M=($=q.response)==null?void 0:$.data)==null?void 0:M.error)||"Loan application failed")}finally{b(!1)}},w=async(F,k)=>{var $,M;try{await z.post("/loans/pay",{loan_id:F,amount:k}),j("Payment successful!"),m(),t()}catch(q){g(((M=($=q.response)==null?void 0:$.data)==null?void 0:M.error)||"Payment failed")}},S=F=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(F),A=F=>new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_=F=>{switch(F){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};s.some(F=>F.status==="pending");const I=s.some(F=>F.status==="approved");s.some(F=>F.status==="active");const C=s.find(F=>F.status==="active"),T=h();return d?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ge,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Center"}),e.jsx("p",{className:"text-gray-600",children:"Apply for loans and manage your payments"})]}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(It,{className:"h-5 w-5 mr-2"}),x]}),y&&e.jsxs("div",{className:"bg-success-50 border border-success-200 text-success-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(je,{className:"h-5 w-5 mr-2"}),y]}),e.jsx("div",{className:`rounded-xl p-4 ${a!=null&&a.hasJob?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{className:`h-6 w-6 ${a!=null&&a.hasJob?"text-green-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${a!=null&&a.hasJob?"text-green-900":"text-yellow-900"}`,children:a!=null&&a.hasJob?`Job: ${a.jobName}`:"No Job Assigned"}),a!=null&&a.hasJob?e.jsxs("p",{className:"text-sm text-green-700",children:["Weekly Salary: ",S(a.salary),"  Max Loan: ",S(a.maxLoanAmount)]}):e.jsx("p",{className:"text-sm text-yellow-700",children:"You need a job to apply for a loan. Apply for a job in the Jobs section."})]})]})}),(a==null?void 0:a.eligible)&&!l&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>i(!0),className:"btn-primary",children:"Apply for a Loan"})}),a&&!a.eligible&&a.reason&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"h-5 w-5 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Cannot Apply for Loan"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.reason})]})]})}),I&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900",children:"Loan Approved!"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved and the money is being processed. Payments will start next Monday."})]})]})}),C&&C.next_payment_date&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"h-5 w-5 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Next Payment Due"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[A(C.next_payment_date),"  ",S(C.weekly_payment||C.monthly_payment/4.33)]})]})]}),e.jsx("button",{onClick:()=>w(C.id,C.weekly_payment||C.monthly_payment/4.33),className:"btn-success text-sm",children:"Pay Now"})]})}),l&&(a==null?void 0:a.eligible)&&e.jsxs("div",{className:"card max-w-md mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Apply for a Loan"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"label",children:[e.jsx(ge,{className:"h-4 w-4 inline mr-1"}),"Loan Amount (Max: ",S(a.maxLoanAmount),")"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"1",max:a.maxLoanAmount,required:!0,className:"input-field",placeholder:"0.00",value:c.amount,onChange:F=>o({...c,amount:F.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"term_weeks",className:"label",children:[e.jsx(Jy,{className:"h-4 w-4 inline mr-1"}),"Repayment Term (Weeks)"]}),e.jsxs("select",{id:"term_weeks",name:"term_weeks",className:"input-field",value:c.term_weeks,onChange:F=>o({...c,term_weeks:F.target.value}),children:[e.jsx("option",{value:"2",children:"2 weeks (5% interest)"}),e.jsx("option",{value:"4",children:"4 weeks (5% interest)"}),e.jsx("option",{value:"6",children:"6 weeks (8% interest)"}),e.jsx("option",{value:"8",children:"8 weeks (8% interest)"}),e.jsx("option",{value:"10",children:"10 weeks (10% interest)"}),e.jsx("option",{value:"12",children:"12 weeks (10% interest)"})]})]}),parseFloat(c.amount)>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Loan Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Principal:"}),e.jsx("div",{className:"font-medium",children:S(parseFloat(c.amount))}),e.jsxs("div",{className:"text-gray-500",children:["Interest (",(T.interestRate*100).toFixed(0),"%):"]}),e.jsx("div",{className:"font-medium",children:S(T.interestAmount)}),e.jsx("div",{className:"text-gray-500",children:"Total Repayment:"}),e.jsx("div",{className:"font-medium text-primary-600",children:S(T.totalAmount)}),e.jsx("div",{className:"text-gray-500",children:"Weekly Payment:"}),e.jsx("div",{className:"font-medium text-primary-600",children:S(T.weeklyPayment)})]}),a.maxWeeklyPayment&&T.weeklyPayment>a.maxWeeklyPayment&&e.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded text-red-700 text-sm",children:" Weekly payment exceeds 50% of your salary. Please reduce the amount or extend the term."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:f||a.maxWeeklyPayment&&T.weeklyPayment>a.maxWeeklyPayment,className:"flex-1 btn-primary disabled:opacity-50",children:f?"Applying...":"Apply"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 btn-secondary",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Loans"}),s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ge,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No loans yet. Apply for your first loan to get started!"})]}):e.jsx("div",{className:"space-y-4",children:s.map(F=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",F.id]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",A(F.created_at)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(F.status)}`,children:F.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold text-gray-900",children:S(F.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Weekly Payment"}),e.jsx("p",{className:"font-semibold text-gray-900",children:S(F.weekly_payment||F.monthly_payment/4.33)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding Balance"}),e.jsx("p",{className:"font-semibold text-gray-900",children:S(F.outstanding_balance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsx("p",{className:"font-semibold text-gray-900",children:F.term_weeks?`${F.term_weeks} weeks`:`${F.term_months} months`})]})]}),F.status==="active"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Payments Remaining"}),e.jsx("p",{className:"font-semibold text-gray-900",children:F.payments_remaining||0}),F.next_payment_date&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Next payment: ",A(F.next_payment_date)]})]}),e.jsx("button",{onClick:()=>w(F.id,F.weekly_payment||F.monthly_payment/4.33),className:"btn-success",children:"Make Payment"})]})}),F.status==="pending"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 text-yellow-600 mr-2"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Your loan application is pending teacher approval."})]})}),F.status==="approved"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("p",{className:"text-sm text-green-800",children:"Your loan has been approved! The money will be disbursed to your account shortly."})]})})]},F.id))})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Loan Information:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Job Required:"})," You must have a job to apply for a loan"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Loan Amount:"})," Based on your salary (max loan = up to 6x weekly salary)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Interest rates:"})," 5% (1-4 weeks), 8% (5-8 weeks), 10% (9-12 weeks)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Payments:"})," Automatic weekly payments every Monday"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Payment Limit:"})," Weekly payment cannot exceed 50% of your salary"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Important:"})," If you don't have enough funds, payment still goes through (negative balance)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Restrictions:"})," Clear any negative balance before new loans or transfers"]})]})]})]})},Mj=({bankPlugin:t})=>{var ps;const[s,r]=u.useState("payments"),[a,n]=u.useState([]),[l,i]=u.useState([]),[c,o]=u.useState([]),[d,p]=u.useState(!0),[f,b]=u.useState("all"),[x,g]=u.useState(null),[y,j]=u.useState(""),[m,h]=u.useState(!1),[v,w]=u.useState(!1),[S,A]=u.useState("deposit"),[_,I]=u.useState({amount:"",description:""}),[C,T]=u.useState({amount:"",description:""}),[F,k]=u.useState(null),[$,M]=u.useState(!1),[q,N]=u.useState(""),[V,R]=u.useState(""),[P,H]=u.useState(!1),[U,Y]=u.useState({}),[Z,K]=u.useState(0),[X,ae]=u.useState(!1);u.useEffect(()=>{ue(),le()},[]);const ue=async()=>{try{const[E,te,se]=await Promise.all([z.get("/students"),z.get("/loans"),z.get("/transactions/history")]);n(E.data),i(te.data),o(se.data)}catch(E){console.error("Failed to fetch data:",E)}finally{p(!1)}},le=async()=>{try{const[E,te]=await Promise.all([z.get("/transactions/bank-settings"),z.get("/transactions/unemployed-students")]);Y(E.data),K(te.data.count)}catch(E){console.error("Failed to fetch bank settings:",E)}},me=async()=>{var E,te;ae(!0),N(""),R("");try{const se=U.basic_salary_enabled==="true"?"false":"true";await z.put("/transactions/bank-settings/basic_salary_enabled",{value:se}),Y({...U,basic_salary_enabled:se}),R(`Auto basic salary ${se==="true"?"enabled":"disabled"}`)}catch(se){N(((te=(E=se.response)==null?void 0:E.data)==null?void 0:te.error)||"Failed to update setting")}finally{ae(!1)}},D=async()=>{var E,te;H(!0),N(""),R("");try{const se=await z.post("/transactions/pay-basic-salary",{});R(`Paid basic salary to ${se.data.updated_count} unemployed students (R${se.data.amount} each)`),ue(),le()}catch(se){N(((te=(E=se.response)==null?void 0:E.data)==null?void 0:te.error)||"Failed to pay basic salary")}finally{H(!1)}},ee=u.useMemo(()=>{const E=a.reduce((se,pe)=>{const pt=pe.class||"Unassigned";return se[pt]||(se[pt]=[]),se[pt].push(pe),se},{}),te=Object.keys(E).sort((se,pe)=>se==="Unassigned"?1:pe==="Unassigned"?-1:se.localeCompare(pe));return{grouped:E,sortedClasses:te}},[a]),re=u.useMemo(()=>{let E=f==="all"?a:ee.grouped[f]||[];return y&&(E=E.filter(te=>{var se,pe;return te.username.toLowerCase().includes(y.toLowerCase())||((se=te.first_name)==null?void 0:se.toLowerCase().includes(y.toLowerCase()))||((pe=te.last_name)==null?void 0:pe.toLowerCase().includes(y.toLowerCase()))})),E},[a,f,y,ee]),Q=u.useMemo(()=>{let E=l;if(f!=="all"){const te=(ee.grouped[f]||[]).map(se=>se.id);E=E.filter(se=>{const pe=a.find(pt=>pt.username===se.borrower_username);return pe&&te.includes(pe.id)})}return x&&(E=E.filter(te=>te.borrower_username===x.username)),E},[l,f,x,ee,a]),B=u.useMemo(()=>{let E=c;if(f!=="all"){const te=(ee.grouped[f]||[]).map(se=>se.username);E=E.filter(se=>te.includes(se.from_username||"")||te.includes(se.to_username||""))}return x&&(E=E.filter(te=>te.from_username===x.username||te.to_username===x.username)),E},[c,f,x,ee]),ne=u.useMemo(()=>{const E=f==="all"?a:ee.grouped[f]||[],te=E.reduce((Ws,Ml)=>Ws+(Number(Ml.balance)||0),0),se=Q.filter(Ws=>Ws.status==="pending").length,pe=Q.filter(Ws=>Ws.status==="active").length,pt=B.filter(Ws=>{const Ml=new Date(Ws.created_at);return new Date().getTime()-Ml.getTime()<7*24*60*60*1e3}).length;return{totalBalance:te,pendingLoans:se,activeLoans:pe,recentTransactions:pt,studentCount:E.length}},[a,Q,B,f,ee]),oe=E=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(E),be=E=>new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=async E=>{var te,se;if(E.preventDefault(),!!x){N(""),R(""),H(!0);try{const pe=S==="deposit"?"/transactions/deposit":"/transactions/withdraw";await z.post(pe,{username:x.username,amount:parseFloat(_.amount),description:_.description||`${S==="deposit"?"Payment":"Withdrawal"} by teacher`}),R(`${S==="deposit"?"Payment":"Withdrawal"} successful!`),I({amount:"",description:""}),h(!1),ue()}catch(pe){N(((se=(te=pe.response)==null?void 0:te.data)==null?void 0:se.error)||"Operation failed")}finally{H(!1)}}},Fe=async(E,te)=>{var se,pe;if(E.preventDefault(),f==="all"){N("Please select a specific class for bulk payments");return}N(""),R(""),H(!0);try{const pt=te==="deposit"?"/transactions/bulk-payment":"/transactions/bulk-removal";await z.post(pt,{class_name:f,amount:parseFloat(C.amount),description:C.description||`Bulk ${te==="deposit"?"payment":"withdrawal"} by teacher`}),R(`Bulk ${te==="deposit"?"payment":"withdrawal"} successful!`),T({amount:"",description:""}),w(!1),ue()}catch(pt){N(((pe=(se=pt.response)==null?void 0:se.data)==null?void 0:pe.error)||"Bulk operation failed")}finally{H(!1)}},he=async(E,te)=>{var se,pe;N(""),R(""),H(!0);try{await z.post("/loans/approve",{loan_id:E,approved:te}),R(`Loan ${te?"approved":"denied"} successfully!`),M(!1),k(null),ue()}catch(pt){N(((pe=(se=pt.response)==null?void 0:se.data)==null?void 0:pe.error)||"Failed to update loan status")}finally{H(!1)}},ht=async E=>{var te,se;N(""),R(""),H(!0);try{await z.post(`/loans/activate/${E}`),R("Loan activated successfully!"),ue()}catch(pe){N(((se=(te=pe.response)==null?void 0:te.data)==null?void 0:se.error)||"Failed to activate loan")}finally{H(!1)}},Rt=(E,te,se)=>{switch(E){case"deposit":case"salary":return e.jsx(Uy,{className:"h-4 w-4 text-green-600"});case"withdrawal":case"fine":return e.jsx(Wy,{className:"h-4 w-4 text-red-600"});case"transfer":return e.jsx(Ds,{className:"h-4 w-4 text-blue-600"});case"loan_disbursement":return e.jsx(ga,{className:"h-4 w-4 text-amber-600"});case"loan_repayment":return e.jsx(ts,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(ge,{className:"h-4 w-4 text-gray-600"})}},Gt=E=>{switch(E){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"active":return"bg-blue-100 text-blue-800";case"paid_off":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Bank Management"}),e.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Students"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ne.studentCount})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Balance"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:oe(ne.totalBalance)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:ne.pendingLoans})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Active Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ne.activeLoans})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"This Week"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ne.recentTransactions})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(_c,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Filters"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("button",{onClick:()=>{b("all"),g(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${f==="all"?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Classes"}),ee.sortedClasses.map(E=>e.jsxs("button",{onClick:()=>{b(E),g(null)},className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${f===E?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[E," (",ee.grouped[E].length,")"]},E))]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:y,onChange:E=>j(E.target.value)})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",value:(x==null?void 0:x.id)||"",onChange:E=>{const te=re.find(se=>se.id===parseInt(E.target.value));g(te||null)},children:[e.jsx("option",{value:"",children:"All Students"}),re.map(E=>e.jsx("option",{value:E.id,children:E.first_name&&E.last_name?`${E.first_name} ${E.last_name}`:E.username},E.id))]})}),x&&e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 underline",children:"Clear Student Filter"})]})]}),q&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(It,{className:"h-5 w-5"}),e.jsx("span",{children:q})]}),V&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:V})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"payments",label:"Payments",icon:ga},{id:"loans",label:"Loans",icon:ts},{id:"activity",label:"Activity",icon:Ms}].map(({id:E,label:te,icon:se})=>e.jsxs("button",{onClick:()=>r(E),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===E?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:te})]},E))})}),e.jsxs("div",{className:"p-6",children:[s==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cc,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Basic Salary Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Unemployed students receive R1,500/week on Mondays at 07:00"})]})]}),e.jsxs("button",{onClick:me,disabled:X,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${U.basic_salary_enabled==="true"?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:[U.basic_salary_enabled==="true"?e.jsx(Ec,{className:"h-5 w-5"}):e.jsx(Tc,{className:"h-5 w-5"}),e.jsx("span",{children:U.basic_salary_enabled==="true"?"Auto Pay ON":"Auto Pay OFF"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[Z," Unemployed Students"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Will receive basic salary when paid"})]})]}),e.jsxs("button",{onClick:D,disabled:P||Z===0,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ga,{className:"h-4 w-4"}),e.jsx("span",{children:P?"Paying...":"Pay Basic Salary Now"})]})]}),U.last_basic_salary_run&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Last auto-payment: ",new Date(U.last_basic_salary_run).toLocaleString()]})]}),f!=="all"&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Bulk Actions for ",f]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Pay All Students"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map(E=>{const te=Number(E.balance)<0;return e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition-all ${te?"border-red-400 bg-red-50":(x==null?void 0:x.id)===E.id?"border-emerald-500 shadow-lg":"border-gray-200 hover:border-emerald-300 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${te?"bg-red-100":"bg-emerald-100"}`,children:e.jsx(Vs,{className:`h-5 w-5 ${te?"text-red-600":"text-emerald-600"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:E.first_name&&E.last_name?`${E.first_name} ${E.last_name}`:E.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",E.username]})]})]}),e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:E.class||"N/A"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:`text-2xl font-bold ${te?"text-red-600":"text-emerald-600"}`,children:oe(E.balance)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Account: ",E.account_number]}),te&&e.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:" Negative balance"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{g(E),A("deposit"),h(!0)},className:"flex-1 px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Add"})]}),e.jsxs("button",{onClick:()=>{g(E),A("withdraw"),h(!0)},className:"flex-1 px-3 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm flex items-center justify-center space-x-1",children:[e.jsx(_h,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]})]},E.id)})}),re.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No students found"})]})]}),s==="loans"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Clock,{className:"h-5 w-5 mr-2 text-blue-600"}),"Weekly Payment Processing"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Process automatic loan payments for all students with active loans. Payments are normally processed every Monday."}),e.jsx("button",{onClick:async()=>{var E,te,se;N(""),R(""),H(!0);try{const pe=await z.post("/loans/process-weekly-payments",{force:!0});R(`Processed ${((E=pe.data.results)==null?void 0:E.length)||0} loan payments`),ue()}catch(pe){N(((se=(te=pe.response)==null?void 0:te.data)==null?void 0:se.error)||"Failed to process payments")}finally{H(!1)}},disabled:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:P?"Processing...":"Process Weekly Payments Now"})]}),Q.filter(E=>E.status==="pending").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Te,{className:"h-5 w-5 text-amber-600 mr-2"}),"Pending Approval (",Q.filter(E=>E.status==="pending").length,")"]}),e.jsx("div",{className:"space-y-4",children:Q.filter(E=>E.status==="pending").map(E=>e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Applied on ",be(E.created_at)]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Gt(E.status)}`,children:E.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold",children:oe(E.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold",children:oe(E.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsxs("p",{className:"font-semibold",children:[E.term_months," months"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Interest Rate"}),e.jsxs("p",{className:"font-semibold",children:[(E.interest_rate*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>he(E.id,!0),disabled:P,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:"Approve"}),e.jsx("button",{onClick:()=>he(E.id,!1),disabled:P,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:"Deny"})]})]},E.id))})]}),Q.filter(E=>["active","approved"].includes(E.status)).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ts,{className:"h-5 w-5 text-blue-600 mr-2"}),"Active Loans (",Q.filter(E=>["active","approved"].includes(E.status)).length,")"]}),e.jsx("div",{className:"space-y-4",children:Q.filter(E=>["active","approved"].includes(E.status)).map(E=>e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),e.jsx("p",{className:"text-sm text-gray-500",children:E.approved_at?`Approved on ${be(E.approved_at)}`:"Awaiting activation"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Gt(E.status)}`,children:E.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"font-semibold",children:oe(E.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Outstanding"}),e.jsx("p",{className:"font-semibold",children:oe(E.outstanding_balance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold",children:oe(E.monthly_payment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Remaining"}),e.jsxs("p",{className:"font-semibold",children:[E.payments_remaining||0," payments"]})]})]}),E.total_paid&&Number(E.total_paid)>0&&e.jsx("div",{className:"mt-4 bg-white rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Paid"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:oe(E.total_paid)})]})}),E.status==="approved"&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>ht(E.id),disabled:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Activate Loan"})})]},E.id))})]}),Q.filter(E=>["paid_off","denied"].includes(E.status)).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(je,{className:"h-5 w-5 text-gray-600 mr-2"}),"Completed/Denied (",Q.filter(E=>["paid_off","denied"].includes(E.status)).length,")"]}),e.jsx("div",{className:"space-y-4",children:Q.filter(E=>["paid_off","denied"].includes(E.status)).map(E=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Loan #",E.id," - ",E.borrower_username]}),e.jsx("p",{className:"text-sm text-gray-500",children:be(E.created_at)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Gt(E.status)}`,children:E.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-semibold",children:oe(E.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Term"}),e.jsxs("p",{className:"font-semibold",children:[E.term_months," months"]})]}),E.total_paid&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Paid"}),e.jsx("p",{className:"font-semibold",children:oe(E.total_paid)})]})]})]},E.id))})]}),Q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ts,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No loan applications found"})]})]}),s==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[B.length," transactions"]})]}),B.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ms,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):e.jsx("div",{className:"space-y-2",children:B.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white p-2 rounded-full shadow-sm",children:Rt(E.transaction_type,E.from_username,E.to_username)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:E.description||E.transaction_type.replace(/_/g," ")}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("span",{children:be(E.created_at)}),E.from_username&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:["From: ",E.from_username]}),E.to_username&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["To: ",E.to_username]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${["deposit","salary","loan_disbursement"].includes(E.transaction_type)?"text-emerald-600":["withdrawal","fine","loan_repayment"].includes(E.transaction_type)?"text-red-600":"text-blue-600"}`,children:[["withdrawal","fine","loan_repayment"].includes(E.transaction_type)?"-":"+",oe(E.amount)]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:E.transaction_type.replace(/_/g," ")})]})]},E.id))})]})]})]}),m&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[S==="deposit"?"Add Money to":"Remove Money from"," ",x.first_name||x.username]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:S==="withdraw"?x.balance:void 0,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:_.amount,onChange:E=>I({..._,amount:E.target.value})})]}),S==="withdraw"&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Available: ",oe(x.balance)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:S==="deposit"?"e.g., Salary, Bonus, Reward":"e.g., Fine, Expense",value:_.description,onChange:E=>I({..._,description:E.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:P,className:`flex-1 py-2 text-white rounded-lg transition-colors disabled:opacity-50 ${S==="deposit"?"bg-emerald-600 hover:bg-emerald-700":"bg-amber-600 hover:bg-amber-700"}`,children:P?"Processing...":S==="deposit"?"Add Money":"Remove Money"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),v&&f!=="all"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Bulk Payment to ",f]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["This will add money to all ",((ps=ee.grouped[f])==null?void 0:ps.length)||0," students in ",f]}),e.jsxs("form",{onSubmit:E=>Fe(E,"deposit"),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount per student"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00",value:C.amount,onChange:E=>T({...C,amount:E.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Weekly allowance, Class bonus",value:C.description,onChange:E=>T({...C,description:E.target.value})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:P,className:"flex-1 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:P?"Processing...":"Pay All Students"}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})})]})},Dj=({bankPlugin:t})=>{const{user:s,account:r}=Le(),[a,n]=u.useState([]),[l,i]=u.useState([]),[c,o]=u.useState(!0),[d,p]=u.useState("overview");u.useEffect(()=>{f()},[]);const f=async()=>{try{const[j,m]=await Promise.all([z.get("/transactions/history"),z.get("/loans")]);n(j.data),i(m.data)}catch(j){console.error("Failed to fetch data:",j)}finally{o(!1)}},b=j=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(j),x=j=>new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),g=j=>{switch(j){case"deposit":case"salary":return e.jsx(st,{className:"h-4 w-4 text-success-600"});case"withdrawal":case"fine":return e.jsx(Te,{className:"h-4 w-4 text-red-600"});case"transfer":return e.jsx(Ds,{className:"h-4 w-4 text-primary-600"});case"loan_disbursement":return e.jsx(ge,{className:"h-4 w-4 text-warning-600"});case"loan_repayment":return e.jsx(Qt,{className:"h-4 w-4 text-blue-600"});default:return e.jsx(ge,{className:"h-4 w-4 text-gray-600"})}},y=j=>j.transaction_type==="transfer"?j.from_username===(s==null?void 0:s.username)?`Sent to ${j.to_username}`:`Received from ${j.from_username}`:j.description||j.transaction_type;return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Bank"}),e.jsx("p",{className:"text-primary-100",children:"Financial Services System"})]})]})}),e.jsx("div",{className:`card ${((r==null?void 0:r.balance)||0)<0?"border-2 border-red-500 bg-red-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Account Balance"}),e.jsx("p",{className:`text-3xl font-bold ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`,children:b((r==null?void 0:r.balance)||0)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Account: ",r==null?void 0:r.account_number]}),((r==null?void 0:r.balance)||0)<0&&e.jsx("div",{className:"mt-2 p-2 bg-red-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700 font-medium flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Negative balance! Pay off your debt to make transactions."]})})]}),e.jsx("div",{className:`p-4 rounded-full ${((r==null?void 0:r.balance)||0)<0?"bg-red-100":"bg-primary-100"}`,children:e.jsx(Qt,{className:`h-8 w-8 ${((r==null?void 0:r.balance)||0)<0?"text-red-600":"text-primary-600"}`})})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:Qt},{id:"transfer",label:"Transfer Money",icon:Ds},{id:"loans",label:"Loans",icon:ge},{id:"history",label:"History",icon:Ms}].map(({id:j,label:m,icon:h})=>e.jsxs("button",{onClick:()=>p(j),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${d===j?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:m})]},j))})}),e.jsxs("div",{className:"p-6",children:[d==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-success-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(st,{className:"h-5 w-5 text-success-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-success-800",children:"Total Deposits"})]}),e.jsx("p",{className:"text-2xl font-bold text-success-600 mt-1",children:b(a.filter(j=>["deposit","salary"].includes(j.transaction_type)).reduce((j,m)=>j+m.amount,0))})]}),e.jsxs("div",{className:"bg-warning-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-5 w-5 text-warning-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-warning-800",children:"Active Loans"})]}),e.jsx("p",{className:"text-2xl font-bold text-warning-600 mt-1",children:l.filter(j=>j.status==="active").length})]}),e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ds,{className:"h-5 w-5 text-primary-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-primary-800",children:"Transfers Made"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:a.filter(j=>j.transaction_type==="transfer"&&j.from_username===(s==null?void 0:s.username)).length})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(j.transaction_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:y(j)}),e.jsx("p",{className:"text-sm text-gray-500",children:x(j.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${j.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[j.from_username===(s==null?void 0:s.username)?"-":"+",b(j.amount)]})})]},j.id))})]})]}),d==="transfer"&&e.jsx(Lj,{onSuccess:f}),d==="loans"&&e.jsx(Fj,{onSuccess:f}),d==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ms,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Your transaction history will appear here"})]}):e.jsx("div",{className:"space-y-2",children:a.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(j.transaction_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:y(j)}),e.jsx("p",{className:"text-sm text-gray-500",children:x(j.created_at)})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${j.from_username===(s==null?void 0:s.username)?"text-red-600":"text-success-600"}`,children:[j.from_username===(s==null?void 0:s.username)?"-":"+",b(j.amount)]})})]},j.id))})]})]})]})]})},$j=()=>{const{user:t}=Le(),{plugins:s,loading:r}=lt(),a=s.find(n=>n.route_path==="/bank");return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(t==null?void 0:t.role)==="teacher"?e.jsx(Mj,{bankPlugin:a}):e.jsx(Dj,{bankPlugin:a})},Oj=({parcel:t,position:s,containerRef:r})=>{const a=Ot[t.biome_type],n=dl[t.risk_level],l=us[t.biome_type],i=Number(t.value),c=t.purchased_at?Eh(t.purchased_at):0,o=t.owner_id&&t.purchased_at?vo(i,t.purchased_at):i,d=o-i,p=t.owner_first_name&&t.owner_last_name?`${t.owner_first_name} ${t.owner_last_name}`:t.owner_username||"Unknown",f=320,b=400,x=10;let g=s.x+15,y=s.y+15;if(r.current){const j=r.current.getBoundingClientRect();g+f>j.right-x&&(g=s.x-f-15),y+b>j.bottom-x&&(y=s.y-b-15),g=Math.max(j.left+x,g),y=Math.max(j.top+x,y)}return e.jsxs("div",{className:"fixed z-50 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",style:{left:`${g}px`,top:`${y}px`,width:`${f}px`,maxHeight:`${b}px`},children:[e.jsx("div",{className:"p-4 text-white",style:{backgroundColor:a.color},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:l}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:t.grid_code}),e.jsx("p",{className:"text-sm opacity-90",children:t.biome_type})]})]}),e.jsxs("div",{className:"text-right",children:[t.owner_id&&d>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold",children:ze(o)}),e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx(st,{className:"h-3 w-3 text-green-300"}),e.jsxs("span",{className:"text-xs text-green-300",children:["+",ze(d)]})]})]}):e.jsx("p",{className:"text-xl font-bold",children:ze(i)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.owner_id?"bg-red-500/30":"bg-green-500/30"}`,children:t.owner_id?"Owned":"Available"})]})]})}),e.jsxs("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zr,{className:`h-4 w-4 ${n.text}`}),e.jsx("span",{className:"text-sm text-gray-600",children:"Risk Level:"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${n.bg} ${n.text} font-medium capitalize`,children:t.risk_level})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Tt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Grid Position: Row ",t.row_index+1,", Col ",t.col_index+1]})]}),t.owner_id&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Vs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Owner:"}),e.jsx("span",{className:"font-medium",children:p})]}),t.purchased_at&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx($e,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Purchased:"}),e.jsx("span",{children:new Date(t.purchased_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(st,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-gray-600",children:"Ownership:"}),e.jsxs("span",{children:[c," ",c===1?"week":"weeks"," (2% weekly interest)"]})]}),d>0&&e.jsxs("div",{className:"bg-green-50 rounded p-2 mt-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Original Value:"}),e.jsx("span",{children:ze(i)})]}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-700",children:[e.jsx("span",{children:"Current Value:"}),e.jsx("span",{children:ze(o)})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(cj,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Advantages"})]}),e.jsx("ul",{className:"space-y-1",children:(t.pros||a.pros).map((j,m)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-1",children:"+"}),j]},m))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(oj,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Disadvantages"})]}),e.jsx("ul",{className:"space-y-1",children:(t.cons||a.cons).map((j,m)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-1",children:"-"}),j]},m))})]})]}),e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:t.owner_id?`This plot is already owned by ${p}`:"Click to purchase this plot"})})]})},zj=({parcel:t,onClose:s,onSuccess:r})=>{const{account:a}=Le(),[n,l]=u.useState(!1),[i,c]=u.useState(""),[o,d]=u.useState(!1),p=Ot[t.biome_type],f=us[t.biome_type],b=dl[t.risk_level],x=Number(a==null?void 0:a.balance)||0,g=Number(t.value)||0,y=x>=g,j=async()=>{var m,h;if(y){l(!0),c("");try{await as.submitPurchaseRequest(t.id,g),d(!0),setTimeout(()=>{r(),s()},2e3)}catch(v){c(((h=(m=v.response)==null?void 0:m.data)==null?void 0:h.error)||"Failed to submit purchase request")}finally{l(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"p-6 text-white relative",style:{backgroundColor:p.color},children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(bt,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-5xl",children:f}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.grid_code}),e.jsx("p",{className:"text-white/80",children:t.biome_type})]})]})]}),e.jsx("div",{className:"p-6 space-y-6",children:o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(je,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request Submitted!"}),e.jsx("p",{className:"text-gray-600",children:"Your purchase request has been submitted for teacher approval. You'll be notified once it's reviewed."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Plot Price"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ze(g)})]}),e.jsxs("div",{className:`rounded-xl p-4 ${y?"bg-green-50":"bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Your Balance"})]}),e.jsx("p",{className:`text-2xl font-bold ${y?"text-green-600":"text-red-600"}`,children:ze(x)})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Tt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Row ",t.row_index+1,", Col ",t.col_index+1]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zr,{className:`h-4 w-4 ${b.text}`}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full ${b.bg} ${b.text} font-medium capitalize`,children:[t.risk_level," risk"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-green-800 mb-2",children:"Advantages"}),e.jsx("ul",{className:"space-y-1",children:p.pros.slice(0,2).map((m,h)=>e.jsxs("li",{className:"text-green-700 text-xs",children:["+ ",m]},h))})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("p",{className:"font-medium text-red-800 mb-2",children:"Disadvantages"}),e.jsx("ul",{className:"space-y-1",children:p.cons.slice(0,2).map((m,h)=>e.jsxs("li",{className:"text-red-700 text-xs",children:["- ",m]},h))})]})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[e.jsx(Te,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:i})]}),!y&&e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 bg-amber-50 p-3 rounded-lg",children:[e.jsx(Te,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm",children:["You need ",ze(g-x)," more to purchase this plot."]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 text-sm text-blue-700",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Plot purchases require teacher approval. The purchase amount will be deducted from your balance once approved."]})})]})}),!o&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex space-x-3",children:[e.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:j,disabled:!y||n,className:`flex-1 px-4 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 transition-colors ${y?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Fl,{className:"h-5 w-5"}),e.jsx("span",{children:n?"Submitting...":"Request Purchase"})]})]})]})})},fn=10,Ij=20,Bj=80,bu=50,Ph=({onParcelSelect:t,readOnly:s=!1})=>{const[r,a]=u.useState([]),[n,l]=u.useState(!0),[i,c]=u.useState(""),[o,d]=u.useState(bu),[p,f]=u.useState(null),[b,x]=u.useState({x:0,y:0}),[g,y]=u.useState(null),[j,m]=u.useState(!1),[h,v]=u.useState(""),[w,S]=u.useState("all"),[A,_]=u.useState(!1),I=u.useRef(null),C=u.useRef(null);u.useEffect(()=>{T()},[]);const T=async()=>{var Z,K;l(!0),c("");try{const X=await as.getParcels();a(X.data)}catch(X){c(((K=(Z=X.response)==null?void 0:Z.data)==null?void 0:K.error)||"Failed to load land plots")}finally{l(!1)}},F=u.useMemo(()=>{const Z=new Map;return r.forEach(K=>{Z.set(`${K.row_index}-${K.col_index}`,K)}),Z},[r]),k=u.useCallback((Z,K)=>F.get(`${Z}-${K}`),[F]),$=u.useCallback(Z=>Z?!(h&&Z.biome_type!==h||w==="available"&&Z.owner_id||w==="owned"&&!Z.owner_id):!0,[h,w]),M=u.useCallback(Z=>{x({x:Z.clientX,y:Z.clientY})},[]),q=u.useCallback((Z,K)=>{const X=k(Z,K);X&&$(X)?f(X):f(null)},[k,$]),N=u.useCallback((Z,K)=>{const X=k(Z,K);X&&!X.owner_id&&!s&&(y(X),m(!0)),t&&X&&t(X)},[k,s,t]),V=()=>d(Z=>Math.min(Z+2,Bj)),R=()=>d(Z=>Math.max(Z-2,Ij)),P=()=>d(bu),H=u.useCallback((Z,K)=>{const X=k(Z,K);if(!X)return{backgroundColor:"#e5e7eb"};if(!$(X))return{backgroundColor:"#f3f4f6",opacity:.3};const ae=Ot[X.biome_type],ue=!!X.owner_id;return{backgroundColor:ue?ae.lightColor:ae.color,border:ue?`1px solid ${ae.color}`:"none"}},[k,$]),U=u.useMemo(()=>{const Z=[];for(let K=0;K<fn;K++)for(let X=0;X<fn;X++){const ae=k(K,X),ue=(p==null?void 0:p.row_index)===K&&(p==null?void 0:p.col_index)===X;Z.push(e.jsx("div",{className:`transition-all cursor-pointer rounded-sm ${ue?"ring-2 ring-white z-10 scale-110 shadow-lg":"hover:brightness-110"}`,style:{...H(K,X),width:`${o}px`,height:`${o}px`,minWidth:`${o}px`,minHeight:`${o}px`},onMouseEnter:()=>q(K,X),onMouseLeave:()=>f(null),onClick:()=>N(K,X),title:(ae==null?void 0:ae.grid_code)||`Empty ${K}-${X}`},`${K}-${X}`))}return Z},[o,p,k,H,q,N]),Y=Object.keys(Ot);return n?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-gray-50 rounded-xl",children:[e.jsx(de,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading land plots..."})]}):i?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-red-600 mb-4",children:i}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-amber-50 rounded-xl border-2 border-amber-200",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("p",{className:"text-amber-800 font-medium mb-2",children:"No land plots found"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ask your teacher to seed the land data first"}),e.jsx("p",{className:"text-xs text-amber-500 mt-2",children:'(Teacher: Go to Land Registry  click "Seed Land Data")'})]}):e.jsxs("div",{className:"space-y-4",ref:I,children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Zoom:"}),e.jsx("button",{onClick:R,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom Out",children:e.jsx(hj,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium w-12 text-center",children:[o,"px"]}),e.jsx("button",{onClick:V,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Zoom In",children:e.jsx(xj,{className:"h-4 w-4"})}),e.jsx("button",{onClick:P,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Reset Zoom",children:e.jsx(Ky,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>_(!A),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${A?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(_c,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),(h||w!=="all")&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-2 py-0.5 rounded-full",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Total: ",e.jsx("strong",{children:r.length.toLocaleString()})]}),e.jsxs("span",{children:["Available: ",e.jsx("strong",{children:r.filter(Z=>!Z.owner_id).length.toLocaleString()})]}),e.jsxs("span",{children:["Owned: ",e.jsx("strong",{children:r.filter(Z=>Z.owner_id).length.toLocaleString()})]})]})]}),A&&e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Filter Plots"}),e.jsx("button",{onClick:()=>{v(""),S("all")},className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Biome Type"}),e.jsxs("select",{value:h,onChange:Z=>v(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Biomes"}),Y.map(Z=>e.jsxs("option",{value:Z,children:[us[Z]," ",Z]},Z))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Ownership"}),e.jsxs("select",{value:w,onChange:Z=>S(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Plots"}),e.jsx("option",{value:"available",children:"Available Only"}),e.jsx("option",{value:"owned",children:"Owned Only"})]})]})]})]}),e.jsxs("div",{className:"relative bg-gray-200 rounded-xl overflow-auto border-2 border-gray-400 p-4",style:{minHeight:"200px"},onMouseMove:M,children:[e.jsx("div",{ref:C,className:"inline-grid gap-1 bg-gray-300 p-2 rounded-lg",style:{gridTemplateColumns:`repeat(${fn}, ${o}px)`,gridTemplateRows:`repeat(${fn}, ${o}px)`},children:U}),p&&e.jsx(Oj,{parcel:p,position:b,containerRef:I})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Biome Legend"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:Y.map(Z=>{const K=Ot[Z];return e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-2 py-1 rounded",onClick:()=>v(h===Z?"":Z),children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:K.color}}),e.jsxs("span",{className:"text-xs text-gray-600",children:[us[Z]," ",Z]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",ze(K.baseValue),")"]})]},Z)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-green-600"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-green-200 border border-green-600"}),e.jsx("span",{children:"Owned"})]})]})]}),j&&g&&e.jsx(zj,{parcel:g,onClose:()=>{m(!1),y(null)},onSuccess:()=>{T()}})]})},Uj=({landPlugin:t})=>{const[s,r]=u.useState("grid"),[a,n]=u.useState([]),[l,i]=u.useState(null),[c,o]=u.useState(!0),[d,p]=u.useState(null),[f,b]=u.useState(""),[x,g]=u.useState(""),[y,j]=u.useState("pending"),[m,h]=u.useState(!1);u.useEffect(()=>{v()},[y]);const v=async()=>{o(!0);try{const[_,I]=await Promise.all([as.getPurchaseRequests(y||void 0),as.getStats()]);n(_.data),i(I.data)}catch(_){console.error("Failed to fetch land data:",_)}finally{o(!1)}},w=async(_,I,C)=>{var T,F;p(_),b(""),g("");try{await as.updatePurchaseRequest(_,I,C),g(`Request ${I} successfully`),v()}catch(k){b(((F=(T=k.response)==null?void 0:T.data)==null?void 0:F.error)||`Failed to ${I} request`)}finally{p(null)}},S=async()=>{var _,I;h(!0),b(""),g("");try{const C=await as.seedLandData();g(`${C.data.message} - ${C.data.count} parcels created`),v()}catch(C){b(((I=(_=C.response)==null?void 0:_.data)==null?void 0:I.error)||"Failed to seed land data")}finally{h(!1)}},A=_=>{switch(_){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry Management"}),e.jsx("p",{className:"text-emerald-100",children:"Teacher Administration Panel"})]})]}),e.jsxs("button",{onClick:S,disabled:m||l!==null&&l.total_parcels>0,className:`px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors ${l&&l.total_parcels>0?"bg-white/10 text-white/50 cursor-not-allowed":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx(hi,{className:"h-4 w-4"}),e.jsx("span",{children:m?"Seeding...":l&&l.total_parcels>0?"Data Seeded":"Seed Land Data"})]})]})}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Tt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Plots"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Available"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.available_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Owned"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.owned_parcels.toLocaleString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.pending_requests})]})]}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(It,{className:"h-5 w-5"}),e.jsx("span",{children:f})]}),x&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:x})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"grid",label:"Land Grid",icon:Sc},{id:"requests",label:"Purchase Requests",icon:$e,badge:l==null?void 0:l.pending_requests},{id:"stats",label:"Statistics",icon:ge}].map(({id:_,label:I,icon:C,badge:T})=>e.jsxs("button",{onClick:()=>r(_),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===_?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:I}),T!==void 0&&T>0&&e.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-0.5 rounded-full",children:T})]},_))})}),e.jsxs("div",{className:"p-6",children:[s==="grid"&&e.jsxs(e.Fragment,{children:[l&&l.total_parcels===0&&e.jsxs("div",{className:"mb-6 bg-amber-50 border-2 border-amber-200 rounded-xl p-6 text-center",children:[e.jsx(hi,{className:"h-12 w-12 mx-auto mb-4 text-amber-500"}),e.jsx("h3",{className:"text-lg font-semibold text-amber-800 mb-2",children:"No Land Data Yet"}),e.jsx("p",{className:"text-amber-600 mb-4",children:"Click the button below to generate 100 land plots (10x10 grid)"}),e.jsxs("button",{onClick:S,disabled:m,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors font-medium flex items-center space-x-2 mx-auto",children:[e.jsx(hi,{className:"h-5 w-5"}),e.jsx("span",{children:m?"Seeding Land Data...":"Seed Land Data Now"})]})]}),e.jsx(Ph,{readOnly:!0})]}),s==="requests"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(_c,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:y,onChange:_=>j(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"All Requests"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"denied",children:"Denied"})]}),e.jsx("button",{onClick:v,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:e.jsx(zr,{className:`h-4 w-4 ${c?"animate-spin":""}`})})]}),c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 text-emerald-600 animate-spin"})}):a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsxs("p",{children:["No ",y||""," purchase requests found"]})]}):e.jsx("div",{className:"space-y-4",children:a.map(_=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:_.parcel_biome_type?Ot[_.parcel_biome_type].lightColor:"#e5e7eb"},children:_.parcel_biome_type?us[_.parcel_biome_type]:""}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Plot ",_.parcel_grid_code]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${A(_.status)}`,children:_.status.toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by: ",e.jsx("strong",{children:_.applicant_first_name&&_.applicant_last_name?`${_.applicant_first_name} ${_.applicant_last_name}`:_.applicant_username}),_.applicant_class&&` (${_.applicant_class})`]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[_.parcel_biome_type,"  Offered: ",ze(_.offered_price)]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Submitted: ",new Date(_.created_at).toLocaleString()]}),_.denial_reason&&e.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Reason: ",_.denial_reason]})]})]}),_.status.toLowerCase()==="pending"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>w(_.id,"approved"),disabled:d!==null,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[d===_.id?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:d===_.id?"Processing...":"Approve"})]}),e.jsxs("button",{onClick:()=>{const I=prompt("Reason for denial (optional):");w(_.id,"denied",I||void 0)},disabled:d!==null,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1",children:[d===_.id?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{children:"Deny"})]})]})]})},_.id))})]}),s==="stats"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Biome Distribution"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.biome_stats.map(_=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2",style:{borderColor:Ot[_.biome_type].color},children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:us[_.biome_type]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:_.biome_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[_.count," plots"]})]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Owned:"}),e.jsxs("span",{className:"font-medium",children:[_.owned_count," (",(_.owned_count/_.count*100).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Avg Value:"}),e.jsx("span",{className:"font-medium",children:ze(_.avg_value)})]})]}),e.jsx("div",{className:"mt-3 h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all",style:{width:`${_.owned_count/_.count*100}%`,backgroundColor:Ot[_.biome_type].color}})})]},_.biome_type))})]}),l.top_owners.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Land Owners"}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Owner"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Plots"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Value"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.top_owners.map((_,I)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`font-bold ${I===0?"text-amber-500":I===1?"text-gray-400":I===2?"text-amber-700":"text-gray-500"}`,children:["#",I+1]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.first_name&&_.last_name?`${_.first_name} ${_.last_name}`:_.username}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",_.username]})]}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-900",children:[_.parcel_count," plots"]}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:ze(_.total_value)})]},_.username))})]})})]})]})]})]})]})},Hj=({landPlugin:t})=>{const[s,r]=u.useState("explore"),[a,n]=u.useState(null),[l,i]=u.useState([]),[c,o]=u.useState(!0),[d,p]=u.useState(null);u.useEffect(()=>{f()},[]);const f=async()=>{o(!0);try{const[x,g]=await Promise.all([as.getMyProperties(),as.getPurchaseRequests()]);n(x.data),i(g.data)}catch(x){console.error("Failed to fetch land data:",x)}finally{o(!1)}},b=x=>{switch(x){case"pending":return"bg-amber-100 text-amber-800 border-amber-300";case"approved":return"bg-green-100 text-green-800 border-green-300";case"denied":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Land Registry"}),e.jsx("p",{className:"text-primary-100",children:"Explore and purchase land parcels"})]})]})}),a&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(Tt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"My Plots"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-600",children:a.total_count})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Portfolio Value"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:ze(a.total_value)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 mb-1",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Pending Requests"})]}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:l.filter(x=>x.status==="pending").length})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"explore",label:"Explore Land",icon:Sc},{id:"my-properties",label:"My Plots",icon:Tt,badge:a==null?void 0:a.total_count},{id:"requests",label:"My Requests",icon:$e,badge:l.filter(x=>x.status==="pending").length}].map(({id:x,label:g,icon:y,badge:j})=>e.jsxs("button",{onClick:()=>r(x),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s===x?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:g}),j!==void 0&&j>0&&e.jsx("span",{className:"bg-primary-500 text-white text-xs px-2 py-0.5 rounded-full",children:j})]},x))})}),e.jsxs("div",{className:"p-6",children:[s==="explore"&&e.jsx(Ph,{onParcelSelect:x=>console.log("Selected:",x)}),s==="my-properties"&&(c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 text-primary-600 animate-spin"})}):a&&a.parcels.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"You don't own any land yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Explore the grid and purchase your first plot!"})]}):a&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.parcels.map(x=>e.jsxs("div",{className:"bg-white rounded-xl border-2 overflow-hidden hover:shadow-lg transition-shadow",style:{borderColor:Ot[x.biome_type].color},children:[e.jsx("div",{className:"p-4 text-white",style:{backgroundColor:Ot[x.biome_type].color},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:us[x.biome_type]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:x.grid_code}),e.jsx("p",{className:"text-sm opacity-80",children:x.biome_type})]})]}),e.jsx("p",{className:"text-lg font-bold",children:ze(x.value)})]})}),e.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"Location:"}),e.jsxs("span",{className:"font-medium",children:["Row ",x.row_index+1,", Col ",x.col_index+1]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Risk:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${dl[x.risk_level].bg} ${dl[x.risk_level].text} capitalize`,children:x.risk_level})]}),x.purchased_at&&e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"Purchased:"}),e.jsx("span",{className:"font-medium",children:new Date(x.purchased_at).toLocaleDateString()})]})]})]},x.id))})),s==="requests"&&(c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 text-primary-600 animate-spin"})}):l.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No purchase requests yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Your purchase requests will appear here"})]}):e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:`rounded-xl border ${b(x.status)} overflow-hidden`,children:[e.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>p(d===x.id?null:x.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:x.parcel_biome_type?us[x.parcel_biome_type]:""}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:["Parcel ",x.parcel_grid_code]}),e.jsxs("p",{className:"text-sm opacity-80",children:[x.parcel_biome_type,"  ",ze(x.offered_price)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium uppercase",children:x.status}),d===x.id?e.jsx(Nh,{className:"h-4 w-4"}):e.jsx(vh,{className:"h-4 w-4"})]})]})}),d===x.id&&e.jsxs("div",{className:"px-4 pb-4 pt-2 border-t space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Submitted:"}),e.jsx("span",{children:new Date(x.created_at).toLocaleString()})]}),x.reviewed_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Reviewed:"}),e.jsx("span",{children:new Date(x.reviewed_at).toLocaleString()})]}),x.reviewer_username&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"opacity-70",children:"Reviewed by:"}),e.jsx("span",{children:x.reviewer_username})]}),x.denial_reason&&e.jsxs("div",{className:"mt-2 p-2 bg-white/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Reason:"}),e.jsx("p",{className:"text-sm",children:x.denial_reason})]})]})]},x.id))}))]})]})]})},Vj=()=>{const{user:t}=Le(),{plugins:s,loading:r}=lt(),a=s.find(n=>n.route_path==="/land");return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(t==null?void 0:t.role)==="teacher"?e.jsx(Uj,{landPlugin:a}):e.jsx(Hj,{landPlugin:a})},Wj=({job:t,onClick:s,rotation:r=0,isFulfilled:a=!1})=>{const[n,l]=u.useState(!1),[i,c]=u.useState(!1),o=a||t.is_fulfilled,p=((y,j)=>{if(!y)return"bg-blue-50 border-blue-200";const m=y.toLowerCase();return j!=null&&j.toLowerCase(),m.includes("government")?"bg-green-50 border-green-200":m.includes("finance")?"bg-blue-50 border-blue-200":m.includes("police")?"bg-pink-50 border-pink-200":m.includes("infrastructure")||m.includes("design")?"bg-orange-50 border-orange-200":m.includes("education")?"bg-yellow-50 border-yellow-200":m.includes("health")?"bg-red-50 border-red-200":m.includes("retail")||m.includes("events")||m.includes("business")?"bg-purple-50 border-purple-200":m.includes("media")||m.includes("news")?"bg-cyan-50 border-cyan-200":"bg-gray-50 border-gray-200"})(t.company_name,t.name),b=(()=>{if(!t.requirements)return null;const y=t.requirements.match(/(\d+)\s+positions?/i)||t.requirements.match(/(\d+)\s+position/i);return y?parseInt(y[1]):null})(),x=y=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(y),g=u.useRef(null);return u.useEffect(()=>{const y=()=>{if(g.current){const j=g.current.getBoundingClientRect(),m=g.current.closest(".pin-board");if(m){const h=m.getBoundingClientRect(),v=j.top-h.top;c(v<h.height*.3)}}};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),e.jsxs("div",{ref:g,className:`job-flyer relative cursor-pointer transition-all duration-300 ${n?"wiggle-subtle":""}`,style:{transform:`rotate(${r}deg)`},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:s,children:[e.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full border-2 border-red-700 shadow-md z-10"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full border-2 border-blue-700 shadow-md z-10"}),e.jsxs("div",{className:`${p} border-2 rounded-lg p-4 shadow-lg hover:shadow-xl transition-shadow min-h-[180px] flex flex-col relative overflow-hidden`,children:[o&&e.jsxs("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-60 flex flex-col items-center justify-center z-20 rounded-lg",children:[e.jsx(je,{className:"h-10 w-10 text-green-400 mb-2"}),e.jsx("div",{className:"text-white font-bold text-lg text-center px-2",children:"Position Fulfilled"}),t.assigned_to_name&&e.jsxs("div",{className:"text-green-200 text-sm text-center px-2 mt-1",children:["by ",t.assigned_to_name]})]}),e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(jt,{className:"h-6 w-6 text-gray-700 flex-shrink-0"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x(t.salary)}),e.jsx("div",{className:"text-xs text-gray-600",children:"per period"})]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:t.name}),t.company_name&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:t.company_name}),t.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-3 flex-grow",children:t.description}),t.location&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" ",t.location]}),n&&e.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl z-50 pointer-events-none whitespace-nowrap ${i?"top-full mt-2":"-top-24"}`,children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:"text-gray-300",children:x(t.salary)}),b&&e.jsxs("div",{className:"text-gray-400 mt-1 text-center",children:[b," position",b>1?"s":""," available"]}),e.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 ${i?"bottom-full mb-0":"top-full mt-0"}`,children:e.jsx("div",{className:`border-4 border-transparent ${i?"border-b-gray-900":"border-t-gray-900"}`})})]})]})]})},qj=({isOpen:t,onClose:s,job:r,onApply:a,userHasJob:n=!1,userJobName:l})=>{if(!t||!r)return null;const i=r.is_fulfilled,c=!n&&!i,o=p=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),d=p=>new Date(p).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jt,{className:"h-6 w-6"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Job Details"})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.name}),r.company_name&&e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(bh,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-lg font-medium",children:r.company_name})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center text-primary-600",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-xl font-bold",children:o(r.salary)}),e.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"per period"})]}),r.location&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Tt,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:r.location})]})]})]}),r.description&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(wc,{className:"h-5 w-5 mr-2"}),"Job Description"]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.description})]}),r.requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Requirements"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:r.requirements})]}),e.jsxs("div",{className:"text-sm text-gray-500 border-t border-gray-200 pt-4",children:["Posted on ",d(r.created_at)]}),i&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(je,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Position Fulfilled"}),e.jsxs("p",{className:"text-sm text-green-600",children:["This position has been filled",r.assigned_to_name?` by ${r.assigned_to_name}`:"","."]})]})]}),n&&!i&&e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(Te,{className:"h-6 w-6 text-amber-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-800",children:"You Already Have a Job"}),e.jsxs("p",{className:"text-sm text-amber-600",children:["You are currently employed as: ",l]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[c?e.jsx("button",{onClick:a,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Apply Now"}):e.jsx("button",{disabled:!0,className:"flex-1 bg-gray-300 text-gray-500 font-semibold py-3 px-6 rounded-lg cursor-not-allowed",children:i?"Position Filled":"Cannot Apply"}),e.jsx("button",{onClick:s,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]})]})})},vu=[{id:"interest",type:"long_answer",label:"Why are you interested in this position?",required:!0},{id:"experience",type:"long_answer",label:"What relevant experience do you have?",required:!0},{id:"availability",type:"yes_no",label:"Are you available to work during school hours?",required:!0},{id:"skills",type:"short_answer",label:"What skills make you a good fit?",required:!0},{id:"hours",type:"multiple_choice",label:"How many hours per week can you commit?",required:!0,options:["1-5 hours","6-10 hours","11-15 hours","16+ hours"]}],Jj=({isOpen:t,onClose:s,jobId:r,jobName:a,onSuccess:n})=>{const[l,i]=u.useState({}),[c,o]=u.useState({}),[d,p]=u.useState(!1),[f,b]=u.useState(!1),x=(h,v)=>{i(w=>({...w,[h]:v})),c[h]&&o(w=>{const S={...w};return delete S[h],S})},g=()=>{const h={};return vu.forEach(v=>{if(v.required){const w=l[v.id];!w||typeof w=="string"&&w.trim()===""?h[v.id]="This field is required":v.type==="short_answer"&&typeof w=="string"&&w.length>200?h[v.id]="Answer must be 200 characters or less":v.type==="long_answer"&&typeof w=="string"&&w.length>1e3&&(h[v.id]="Answer must be 1000 characters or less")}}),o(h),Object.keys(h).length===0},y=async h=>{var v,w;if(h.preventDefault(),!!g()){p(!0);try{await Xt.applyToJob(r,l),b(!0),setTimeout(()=>{n(),j()},2e3)}catch(S){console.error("Failed to submit application:",S),alert(((w=(v=S.response)==null?void 0:v.data)==null?void 0:w.error)||"Failed to submit application. Please try again.")}finally{p(!1)}}},j=()=>{i({}),o({}),b(!1),s()},m=h=>{var S;const v=l[h.id]||"",w=c[h.id];switch(h.type){case"short_answer":return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:typeof v=="string"?v:"",onChange:A=>x(h.id,A.target.value),maxLength:200,className:`input-field ${w?"border-red-500":""}`,placeholder:"Enter your answer..."}),e.jsxs("div",{className:"flex justify-between mt-1",children:[w&&e.jsx("span",{className:"text-sm text-red-600",children:w}),e.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/200 characters"]})]})]});case"long_answer":return e.jsxs("div",{children:[e.jsx("textarea",{value:typeof v=="string"?v:"",onChange:A=>x(h.id,A.target.value),maxLength:1e3,rows:5,className:`input-field ${w?"border-red-500":""}`,placeholder:"Enter your answer..."}),e.jsxs("div",{className:"flex justify-between mt-1",children:[w&&e.jsx("span",{className:"text-sm text-red-600",children:w}),e.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[typeof v=="string"?v.length:0,"/1000 characters"]})]})]});case"multiple_choice":return e.jsxs("div",{className:"space-y-2",children:[(S=h.options)==null?void 0:S.map(A=>e.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:h.id,value:A,checked:v===A,onChange:_=>x(h.id,_.target.value),className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-gray-700",children:A})]},A)),w&&e.jsx("span",{className:"text-sm text-red-600",children:w})]});case"yes_no":return e.jsxs("div",{className:"space-y-2",children:[["Yes","No"].map(A=>e.jsxs("label",{className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:h.id,value:A,checked:v===A,onChange:_=>x(h.id,_.target.value),className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"text-gray-700",children:A})]},A)),w&&e.jsx("span",{className:"text-sm text-red-600",children:w})]});default:return null}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-t-2xl sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Job Application"}),e.jsxs("p",{className:"text-primary-100 text-sm mt-1",children:["Applying for: ",a]})]}),e.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors p-1 hover:bg-white hover:bg-opacity-20 rounded-lg",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:f?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(je,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-600",children:"Your application has been submitted successfully. A teacher will review it soon."})]}):e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Please fill out all required fields. Your application will be reviewed by a teacher."]})}),vu.map(h=>e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[h.label,h.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),m(h)]},h.id)),e.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"h-5 w-5"}),e.jsx("span",{children:"Submit Application"})]})}),e.jsx("button",{type:"button",onClick:j,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})})]})}):null},Zj=()=>{const{plugins:t,loading:s}=lt(),{user:r}=Le(),a=t.find(A=>A.route_path==="/jobs"),[n,l]=u.useState([]),[i,c]=u.useState(!0),[o,d]=u.useState(null),[p,f]=u.useState(!1),[b,x]=u.useState(!1),g=(r==null?void 0:r.job_id)!==null&&(r==null?void 0:r.job_id)!==void 0;u.useEffect(()=>{a&&a.enabled&&y()},[a]);const y=async()=>{try{c(!0);const A=await Xt.getJobs();l(A.data)}catch(A){console.error("Failed to fetch jobs:",A)}finally{c(!1)}},j=A=>{d(A),f(!0)},m=()=>{f(!1),x(!0)},h=()=>{y()},v=()=>{f(!1),d(null)},w=()=>{x(!1)},S=A=>A*7.3%11-5;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Jobs"}),e.jsx("p",{className:"text-primary-100",children:"Employment Board"})]})]}),g&&e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsxs("span",{className:"text-sm font-medium",children:["You are employed as: ",r==null?void 0:r.job_name]})]})]})}),e.jsx("div",{className:"pin-board rounded-2xl p-8 min-h-[600px] relative overflow-hidden",children:i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):n.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(jt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Jobs Available"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for new job opportunities!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((A,_)=>e.jsx(Wj,{job:A,onClick:()=>j(A),rotation:S(_)},A.id))})}),e.jsx(qj,{isOpen:p,onClose:v,job:o,onApply:m,userHasJob:g,userJobName:r==null?void 0:r.job_name}),o&&e.jsx(Jj,{isOpen:b,onClose:w,jobId:o.id,jobName:o.name,onSuccess:h})]})},Qj=()=>{const{plugins:t,loading:s}=lt(),r=t.find(a=>a.route_path==="/news");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Town News"}),e.jsx("p",{className:"text-primary-100",children:"Local News & Updates"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(tj,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Town News"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Local news and updates will be available here soon."})]})]})},Gj=()=>{const{plugins:t,loading:s}=lt(),r=t.find(a=>a.route_path==="/government");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Government"}),e.jsx("p",{className:"text-primary-100",children:"Town Government Services"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(bh,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Government Services"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This system is part of the Game of Life Town Hub."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Government services and information will be available here soon."})]})]})},Kj=()=>{const{plugins:t,loading:s}=lt(),{user:r}=Le(),{currentTownClass:a}=hs(),n=t.find(B=>B.route_path==="/tenders"),l=(r==null?void 0:r.role)==="teacher",[i,c]=u.useState([]),[o,d]=u.useState(!0),[p,f]=u.useState(""),[b,x]=u.useState(""),[g,y]=u.useState(!1),[j,m]=u.useState(!1),[h,v]=u.useState({name:"",description:"",value:""}),[w,S]=u.useState(!1),[A,_]=u.useState(null),[I,C]=u.useState([]),[T,F]=u.useState(!1),[k,$]=u.useState(null),[M,q]=u.useState(null),[N,V]=u.useState(!1),[R,P]=u.useState(null),[H,U]=u.useState(!1),Y=async()=>{var B,ne;try{d(!0),f("");const oe=l&&a||void 0,be=await Zs.getTenders(oe);c(be.data)}catch(oe){f(((ne=(B=oe.response)==null?void 0:B.data)==null?void 0:ne.error)||"Failed to load tenders")}finally{d(!1)}};if(u.useEffect(()=>{s||!n||!n.enabled||l&&!a||Y()},[l,a,s,n]),s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!n||!n.enabled)return e.jsx(qe,{to:"/",replace:!0});const Z=B=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(B),K=B=>{switch(B){case"open":return"bg-emerald-100 text-emerald-800";case"awarded":return"bg-blue-100 text-blue-800";case"closed":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},X=B=>{switch(B){case"pending":return"bg-amber-100 text-amber-800";case"approved":return"bg-emerald-100 text-emerald-800";case"denied":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}},ae=async B=>{var ne,oe;_(B),S(!0),C([]);try{F(!0);const be=await Zs.getTenderApplications(B.id);C(be.data.applications)}catch(be){f(((oe=(ne=be.response)==null?void 0:ne.data)==null?void 0:oe.error)||"Failed to load applications")}finally{F(!1)}},ue=async(B,ne)=>{var oe,be;$(B),f(""),x("");try{await Zs.updateTenderApplicationStatus(B,ne),x(`Application ${ne}`),A&&await ae(A),await Y()}catch(L){f(((be=(oe=L.response)==null?void 0:oe.data)==null?void 0:be.error)||"Failed to update application")}finally{$(null)}},le=async B=>{var ne,oe;q(B.id),f(""),x("");try{await Zs.payTender(B.id),x("Tender paid from treasury"),await Y()}catch(be){f(((oe=(ne=be.response)==null?void 0:ne.data)==null?void 0:oe.error)||"Failed to pay tender")}finally{q(null)}},me=l&&!!a,D=async B=>{var ne,oe;if(B.preventDefault(),!!a){m(!0),f(""),x("");try{await Zs.createTender({town_class:a,name:h.name.trim(),description:h.description.trim()||void 0,value:Number(h.value||0)}),x("Tender created"),y(!1),v({name:"",description:"",value:""}),await Y()}catch(be){f(((oe=(ne=be.response)==null?void 0:ne.data)==null?void 0:oe.error)||"Failed to create tender")}finally{m(!1)}}},ee=B=>{P(B),V(!0),x(""),f("")},re=async()=>{var B,ne;if(R){U(!0),f(""),x("");try{await Zs.applyToTender(R.id),x("Application submitted"),V(!1),P(null),await Y()}catch(oe){f(((ne=(B=oe.response)==null?void 0:B.data)==null?void 0:ne.error)||"Failed to apply")}finally{U(!1)}}},Q=u.useMemo(()=>[...i].sort((B,ne)=>new Date(ne.created_at).getTime()-new Date(B.created_at).getTime()),[i]);return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tenders"}),e.jsx("p",{className:"text-primary-100",children:l?`Manage building tenders for ${a||"your selected town"}`:"Apply for building jobs that need to happen on the game board"})]})]})}),(p||b)&&e.jsxs("div",{className:"space-y-3",children:[p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(It,{className:"h-5 w-5"}),e.jsx("span",{children:p})]}),b&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:b})]})]}),l&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Create a new tender"}),e.jsx("p",{className:"text-sm text-gray-500",children:a?`This will be created for Class ${a}.`:"Select a town tab on the Teacher Dashboard first."})]}),e.jsxs("button",{onClick:()=>y(!0),disabled:!me,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Tender"})]})]}),Q.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(il,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No tenders yet"}),e.jsx("p",{className:"text-gray-600",children:l?"Create the first tender for this town.":"Check back later for new building jobs."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Q.map(B=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:B.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K(B.status)}`,children:B.status.toUpperCase()}),!l&&B.my_application_status&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X(B.my_application_status)}`,children:B.my_application_status.toUpperCase()})]}),B.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:B.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:Z(Number(B.value||0))}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Town: ",B.town_class]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[B.pending_count??0," pending"]}),e.jsxs("span",{children:["(",B.application_count??0," total)"]})]}),B.status==="awarded"&&B.awarded_to_username&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"text-blue-700",children:["Awarded to ",B.awarded_to_username]})]}),B.status==="awarded"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{className:B.paid?"text-emerald-700":"text-amber-700",children:B.paid?"Paid":"Unpaid"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[B.status==="awarded"&&!B.paid&&e.jsxs("button",{onClick:()=>le(B),disabled:M===B.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm flex items-center space-x-2 disabled:opacity-50",children:[M===B.id?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(ga,{className:"h-4 w-4"}),e.jsx("span",{children:"Pay"})]}),e.jsxs("button",{onClick:()=>ae(B),className:`relative px-3 py-2 rounded-lg transition-colors text-sm flex items-center space-x-2 ${(B.pending_count??0)>0?"bg-amber-100 hover:bg-amber-200 ring-2 ring-amber-400 animate-pulse":"bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(za,{className:"h-4 w-4"}),e.jsx("span",{children:"Applications"}),(B.pending_count??0)>0&&e.jsx("span",{className:"absolute -top-2 -right-2 min-w-[20px] h-5 px-1 rounded-full bg-red-600 text-white text-xs flex items-center justify-center",children:B.pending_count})]})]}):e.jsx("button",{onClick:()=>ee(B),className:"px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"View"})})]})},B.id))}),g&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Tender"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tender name"}),e.jsx("input",{required:!0,value:h.name,onChange:B=>v({...h,name:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Build a town hall"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:B=>v({...h,description:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"What needs to be built? Any rules/requirements?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value (ZAR)"}),e.jsx("input",{required:!0,type:"number",min:"0",step:"0.01",value:h.value,onChange:B=>v({...h,value:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:j||!a,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:j?"Creating...":"Create"}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),w&&l&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[A.name,"  Applications"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",e.jsx("span",{className:"font-medium",children:A.status.toUpperCase()}),"  Town: ",A.town_class]})]}),e.jsx("button",{onClick:()=>{S(!1),_(null),C([])},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),T?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 text-primary-600 animate-spin"})}):I.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(il,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No applications yet"})]}):e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-auto pr-1",children:I.map(B=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:B.applicant_first_name||B.applicant_last_name?`${B.applicant_first_name||""} ${B.applicant_last_name||""}`.trim():B.applicant_username}),B.applicant_username&&e.jsxs("span",{className:"text-sm text-gray-500",children:["@",B.applicant_username]}),B.applicant_class&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",B.applicant_class,")"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X(B.status)}`,children:B.status.toUpperCase()})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Applied: ",new Date(B.created_at).toLocaleString()]}),B.reviewer_username&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Reviewed by ",B.reviewer_username," ",B.reviewed_at?` ${new Date(B.reviewed_at).toLocaleString()}`:""]})]}),e.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:A.status==="open"&&B.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ue(B.id,"approved"),disabled:k===B.id,className:"px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:k===B.id?"...":"Approve"}),e.jsx("button",{onClick:()=>ue(B.id,"denied"),disabled:k===B.id,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:k===B.id?"...":"Deny"})]}):null})]})},B.id))})]})}),N&&!l&&R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xl mx-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:R.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K(R.status)}`,children:R.status.toUpperCase()}),R.my_application_status&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${X(R.my_application_status)}`,children:R.my_application_status.toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-500",children:[" ",Z(Number(R.value||0))]})]})]}),e.jsx("button",{onClick:()=>{V(!1),P(null)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),R.description&&e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:R.description}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:re,disabled:H||R.status!=="open"||!!R.my_application_status,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:H?"Applying...":R.my_application_status?"Already Applied":"Apply"}),e.jsx("button",{onClick:()=>{V(!1),P(null)},className:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},Yj=()=>{const{plugins:t,loading:s}=lt(),{currentTownClass:r}=hs(),{user:a}=Le(),[n,l]=u.useState(null),[i,c]=u.useState(!0),[o,d]=u.useState(!1),[p,f]=u.useState(!1),[b,x]=u.useState(""),[g,y]=u.useState(null),[j,m]=u.useState(!1),h=t.find(_=>_.route_path==="/town-rules");u.useEffect(()=>{r&&v()},[r]);const v=async()=>{var _,I;if(r)try{c(!0),y(null);const C=await z.get("/town-rules",{params:{town_class:r}});l(C.data),x(C.data.rules||"")}catch(C){console.error("Failed to fetch town rules:",C),y(((I=(_=C.response)==null?void 0:_.data)==null?void 0:I.error)||"Failed to load town rules")}finally{c(!1)}},w=async()=>{var _,I;if(r)try{d(!0),y(null),m(!1),await z.put("/town-rules",{town_class:r,rules:b||null}),m(!0),f(!1),await v(),setTimeout(()=>m(!1),3e3)}catch(C){console.error("Failed to save town rules:",C),y(((I=(_=C.response)==null?void 0:_.data)==null?void 0:I.error)||"Failed to save town rules")}finally{d(!1)}},S=()=>{x((n==null?void 0:n.rules)||""),f(!1),y(null),m(!1)};if(s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!h||!h.enabled)return e.jsx(qe,{to:"/",replace:!0});const A=(a==null?void 0:a.role)==="teacher";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Town Rules"}),e.jsxs("p",{className:"text-primary-100",children:["Rules and Regulations for ",r]})]})]})}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:"Town rules saved successfully!"}),i?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading town rules..."})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[A&&!p&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(kc,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Rules"})]})}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Town Rules"}),e.jsx("textarea",{value:b,onChange:_=>x(_.target.value),placeholder:"Enter town rules here. Rules will be set later...",className:"w-full h-96 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Rules can be formatted as plain text. Markdown support may be added in the future."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:S,disabled:o,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ol,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Rules"})]})})]})]}):e.jsx("div",{children:n!=null&&n.rules?e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:n.rules}),n.updated_at&&e.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",new Date(n.updated_at).toLocaleString()]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ij,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Rules Set"}),e.jsx("p",{className:"text-gray-600 mb-4",children:A?'Click "Edit Rules" to add rules for this town.':"No rules have been set for this town yet."})]})})]})]})},Xj=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),s=(r,a,n,l)=>{const i=t.createOscillator(),c=t.createGain();i.connect(c),c.connect(t.destination),i.frequency.value=r,i.type="sine",c.gain.setValueAtTime(l,t.currentTime+a),c.gain.exponentialRampToValueAtTime(.001,t.currentTime+a+n),i.start(t.currentTime+a),i.stop(t.currentTime+a+n)};s(880,0,.1,.3),s(1108,.08,.1,.3),s(1318,.16,.2,.4)}catch{console.log("Audio not supported")}},eb=()=>{try{const t=new(window.AudioContext||window.webkitAudioContext),s=(r,a,n,l)=>{const i=t.createOscillator(),c=t.createGain();i.connect(c),c.connect(t.destination),i.frequency.value=r,i.type="sine",c.gain.setValueAtTime(l,t.currentTime+a),c.gain.exponentialRampToValueAtTime(.001,t.currentTime+a+n),i.start(t.currentTime+a),i.stop(t.currentTime+a+n)};s(523,0,.08,.25),s(659,.06,.08,.25),s(784,.12,.08,.3),s(1047,.18,.15,.35)}catch{console.log("Audio not supported")}},tb=()=>{const{plugins:t,loading:s}=lt(),{user:r}=Le(),a=t.find(U=>U.route_path==="/winkel"),[n,l]=u.useState([]),[i,c]=u.useState([]),[o,d]=u.useState(!0),[p,f]=u.useState(!0),[b,x]=u.useState(null),[g,y]=u.useState(""),[j,m]=u.useState(""),[h,v]=u.useState("shop"),[w,S]=u.useState("consumables"),[A,_]=u.useState(null),[I,C]=u.useState([]),[T,F]=u.useState(1),[k,$]=u.useState(0),[M,q]=u.useState(1);u.useEffect(()=>{a&&a.enabled&&N()},[a]);const N=async()=>{try{d(!0);const[U,Y,Z,K,X]=await Promise.all([z.get("/winkel/items"),z.get("/winkel/purchases"),(r==null?void 0:r.role)==="student"?z.get("/winkel/can-purchase"):Promise.resolve({data:{canPurchase:!0,weeklyLimit:1,purchasesThisWeek:0,remainingPurchases:1}}),(r==null?void 0:r.role)==="student"?z.get("/transactions/history").then(()=>z.get("/transactions/history").then(()=>Promise.resolve({data:null}))):Promise.resolve({data:null}),(r==null?void 0:r.role)==="student"?z.get("/winkel/owned-emojis"):Promise.resolve({data:[]})]),ae=U.data.map(le=>({...le,price:parseFloat(le.price)||0})),ue=Y.data.map(le=>({...le,price_paid:parseFloat(le.price_paid)||0}));if(l(ae),c(ue),f(Z.data.canPurchase),F(Z.data.weeklyLimit||1),$(Z.data.purchasesThisWeek||0),q(Z.data.remainingPurchases||0),C(X.data||[]),(r==null?void 0:r.role)==="student")try{const le=await z.get("/transactions/history")}catch(le){console.error("Failed to fetch balance:",le)}}catch(U){console.error("Failed to fetch shop data:",U),y("Failed to load shop data")}finally{d(!1)}},V=async U=>{var Y,Z;try{x(U),y(""),m("");const K=await z.post("/winkel/purchase",{item_id:U});eb(),m(K.data.message||"Purchase successful!"),await N(),setTimeout(()=>m(""),3e3)}catch(K){y(((Z=(Y=K.response)==null?void 0:Y.data)==null?void 0:Z.error)||"Failed to make purchase"),setTimeout(()=>y(""),5e3)}finally{x(null)}},R=n.filter(U=>U.category==="consumable"),P=n.filter(U=>U.category==="privilege"),H=n.filter(U=>U.category==="profile");return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(r==null?void 0:r.role)==="teacher"?e.jsx(sb,{purchases:i,items:n,loading:o,onRefresh:N}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx($s,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),e.jsxs("p",{className:"text-orange-100",children:["You may make ",T," purchase",T!==1?"s":""," per week"]})]})]}),e.jsx("div",{className:"text-right",children:p?e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2",children:[e.jsxs("p",{className:"font-semibold",children:[M," purchase",M!==1?"s":""," remaining"]}),e.jsxs("p",{className:"text-xs text-orange-100",children:[k," of ",T," used this week"]})]}):e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx($e,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Come back next week!"})]})})]})}),g&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-red-500"}),e.jsx("p",{className:"text-red-700",children:g})]}),j&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:j})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>v("shop"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${h==="shop"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Fl,{className:"h-5 w-5"}),e.jsx("span",{children:"Shop"})]})}),e.jsx("button",{onClick:()=>v("history"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${h==="history"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),e.jsx("span",{children:"My Purchases"})]})})]}),e.jsxs("div",{className:"p-6",children:[h==="shop"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Claim your purchases"})," during I&D or Inquiry lessons."]})]}),!p&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-amber-800 font-semibold",children:[" ",T===1?"You've already made your weekly purchase!":`You've reached your limit of ${T} purchases this week!`," Come back next week for more shopping."]})}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>S("consumables"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="consumables"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(xu,{className:"h-5 w-5"}),e.jsx("span",{children:" Consumables"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Impulse Spending)"})]})}),e.jsx("button",{onClick:()=>S("privileges"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="privileges"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(bo,{className:"h-5 w-5"}),e.jsx("span",{children:" Time & Privileges"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Very Powerful)"})]})}),e.jsx("button",{onClick:()=>S("profile"),className:`flex-1 px-6 py-3 font-semibold transition-colors ${w==="profile"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{children:"Profile Emojis"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Permanent)"})]})})]}),w==="consumables"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:"These items drain money without long-term advantage. Perfect for impulse spending!"})}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 animate-spin text-primary-600"})}):R.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(xu,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No consumables available at this time."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(U=>e.jsx(Nu,{item:U,onPurchase:V,canPurchase:p,purchasing:b===U.id},U.id))})]}),w==="privileges"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:"Time is the most valuable currency in class. These privileges give you comfort and freedom!"})}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 animate-spin text-primary-600"})}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(bo,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No privileges available at this time."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(U=>e.jsx(Nu,{item:U,onPurchase:V,canPurchase:p,purchasing:b===U.id},U.id))})]}),w==="profile"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Customize your profile with a fun emoji! These are permanent and you can switch between owned emojis anytime."}),I.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Your Owned Emojis:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(U=>{var Z;const Y=(Z=U.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:Z[1];return e.jsx("button",{onClick:async()=>{var K,X;try{await z.post("/winkel/change-emoji",{item_id:U.id}),m("Profile emoji changed!"),setTimeout(()=>m(""),3e3),window.location.reload()}catch(ae){y(((X=(K=ae.response)==null?void 0:K.data)==null?void 0:X.error)||"Failed to change emoji")}},className:"text-3xl p-2 hover:scale-110 transition-transform bg-white rounded-lg border-2 border-blue-300 hover:border-blue-500",title:"Click to use this emoji",children:Y},U.id)})}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click any emoji to use it on your profile"})]})]}),o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 animate-spin text-primary-600"})}):H.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("span",{className:"text-6xl mb-4 block",children:""}),e.jsx("p",{children:"No profile emojis available at this time."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:H.map(U=>{var K;const Y=(K=U.name.match(/^([\u{1F300}-\u{1F9FF}])/u))==null?void 0:K[1],Z=I.some(X=>X.id===U.id);return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-2 p-4 text-center transition-all ${Z?"border-green-400 bg-green-50":"border-gray-200 hover:border-primary-300 hover:shadow-md"}`,children:[e.jsx("div",{className:"text-5xl mb-3",children:Y}),e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:U.name.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u,"")}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:U.description}),Z?e.jsx("div",{className:"bg-green-500 text-white px-3 py-2 rounded-lg font-semibold text-sm",children:" Owned"}):e.jsx("button",{onClick:()=>V(U.id),disabled:b===U.id,className:"w-full bg-primary-600 text-white px-3 py-2 rounded-lg font-semibold hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:b===U.id?e.jsx(de,{className:"h-4 w-4 animate-spin mx-auto"}):`Buy R${U.price.toFixed(0)}`})]},U.id)})})]})]}),h==="history"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Purchase History"}),i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($s,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No purchases yet. Start shopping!"})]}):e.jsx("div",{className:"space-y-3",children:i.map(U=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:U.item_name}),e.jsx("p",{className:"text-sm text-gray-600",children:U.item_category==="consumable"?" Consumable":" Privilege"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Purchased: ",new Date(U.purchase_date).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-primary-600",children:["R",(parseFloat(U.price_paid)||0).toFixed(2)]})})]},U.id))})]})]})]})]})},Nu=({item:t,onPurchase:s,canPurchase:r,purchasing:a})=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-primary-400 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-semibold",children:["R",(parseFloat(t.price)||0).toFixed(2)]})]}),t.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:t.description}),t.notes&&e.jsx("p",{className:"text-xs text-gray-500 italic mb-4",children:t.notes}),e.jsx("button",{onClick:()=>s(t.id),disabled:!r||a,className:`w-full py-3 rounded-lg font-semibold transition-all ${!r||a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:from-primary-700 hover:to-primary-800 shadow-md hover:shadow-lg"}`,children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(de,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Fl,{className:"h-4 w-4"}),e.jsx("span",{children:"Buy Now"})]})})]}),sb=({purchases:t,items:s,loading:r,onRefresh:a})=>{const[n,l]=u.useState(null),[i,c]=u.useState(!0),[o,d]=u.useState("pending"),[p,f]=u.useState(null);u.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const m=await z.get("/winkel/stats");l(m.data)}catch(m){console.error("Failed to fetch stats:",m)}finally{c(!1)}},x=async m=>{try{f(m),await gs.markPurchasePaid(m),Xj(),a&&a()}catch(h){console.error("Failed to mark purchase as paid:",h)}finally{f(null)}},g=t.filter(m=>!m.paid),y=t,j=o==="pending"?g:y;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx($s,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"The Winkel"}),e.jsx("p",{className:"text-orange-100",children:"Shop Management & Analytics"})]})]}),g.length>0&&e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2",children:[e.jsxs("p",{className:"font-semibold",children:[g.length," pending"]}),e.jsx("p",{className:"text-xs text-orange-100",children:"purchases to fulfill"})]})]})}),!i&&n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Shop Balance"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["R",(parseFloat(n.shop_balance)||0).toFixed(2)]})]}),e.jsx($s,{className:"h-8 w-8 text-emerald-600"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Total money in shop account"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchases"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.total_purchases})]}),e.jsx(st,{className:"h-8 w-8 text-primary-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["R",(parseFloat(n.total_revenue)||0).toFixed(2)]})]}),e.jsx(ge,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Items"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.filter(m=>m.available).length})]}),e.jsx(Sh,{className:"h-8 w-8 text-blue-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>d("pending"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${o==="pending"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx($e,{className:"h-5 w-5"}),e.jsx("span",{children:"Pending Purchases"}),g.length>0&&e.jsx("span",{className:"bg-amber-500 text-white px-2 py-0.5 rounded-full text-xs font-bold",children:g.length})]})}),e.jsx("button",{onClick:()=>d("all"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${o==="all"?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),e.jsx("span",{children:"All Purchases"}),e.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:y.length})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(de,{className:"h-8 w-8 animate-spin text-primary-600"})}):j.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx($s,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:o==="pending"?"No pending purchases!":"No purchases yet."}),o==="pending"&&g.length===0&&e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"All purchases have been fulfilled."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o==="pending"&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(m=>e.jsxs("tr",{className:m.paid?"":"bg-amber-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[m.first_name," ",m.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.username," (",m.class,")"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-900",children:m.item_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.item_category==="consumable"?"bg-purple-100 text-purple-800":m.item_category==="profile"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:m.item_category==="consumable"?" Consumable":m.item_category==="profile"?" Profile":" Privilege"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-primary-600",children:["R",(parseFloat(String(m.price_paid))||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.purchase_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.paid?e.jsxs("div",{children:[e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[e.jsx(je,{className:"h-3 w-3 inline mr-1"}),"Paid"]}),m.paid_by_first_name&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["by ",m.paid_by_first_name," ",m.paid_by_last_name]})]}):e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:[e.jsx($e,{className:"h-3 w-3 inline mr-1"}),"Pending"]})}),o==="pending"&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:!m.paid&&e.jsxs("button",{onClick:()=>x(m.id),disabled:p===m.id,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[p===m.id?e.jsx(de,{className:"h-4 w-4 animate-spin mr-1"}):e.jsx(je,{className:"h-4 w-4 mr-1"}),"Paid"]})})]},m.id))})]})})]})]})},rb=()=>{const{plugins:t,loading:s}=lt(),{user:r,account:a}=Le();hs();const n=t.find(k=>k.route_path==="/pizza-time"),[l,i]=u.useState(null),[c,o]=u.useState(null),[d,p]=u.useState(!0),[f,b]=u.useState(null),[x,g]=u.useState(""),[y,j]=u.useState(""),[m,h]=u.useState(null),[v,w]=u.useState(null);u.useEffect(()=>{if(n&&n.enabled){S();const k=setInterval(S,5e3);return()=>clearInterval(k)}},[n,r==null?void 0:r.role]);const S=async()=>{var k,$;try{if(g(""),(r==null?void 0:r.role)==="teacher"){const M=await z.get("/pizza-time/status/all");o(M.data.classes),i(M.data.classes["6A"])}else{const M=await z.get("/pizza-time/status");i(M.data),o(null)}}catch(M){console.error("Failed to fetch pizza time status:",M);const q=(($=(k=M.response)==null?void 0:k.data)==null?void 0:$.error)||M.message||"Failed to load pizza time status";g(q)}finally{p(!1)}},A=async k=>{var $,M;if(!a||a.balance<k){g("Insufficient funds"),setTimeout(()=>g(""),5e3);return}try{b(k),g(""),j("");const q=await z.post("/pizza-time/donate",{amount:k});j(`Donated R${k.toFixed(2)}! Thank you for your contribution! `),await S(),setTimeout(()=>j(""),3e3)}catch(q){g(((M=($=q.response)==null?void 0:$.data)==null?void 0:M.error)||"Failed to make donation"),setTimeout(()=>g(""),5e3)}finally{b(null)}},_=async k=>{var M,q;const $=(r==null?void 0:r.role)==="teacher"?c==null?void 0:c[k]:l;if($)try{h(k),g(""),j(""),await z.post("/pizza-time/toggle",{class:k,is_active:!$.is_active}),j(`Pizza time ${$.is_active?"deactivated":"activated"} for ${k}`),await S(),setTimeout(()=>j(""),3e3)}catch(N){g(((q=(M=N.response)==null?void 0:M.data)==null?void 0:q.error)||"Failed to toggle pizza time"),setTimeout(()=>g(""),5e3)}finally{h(null)}},I=async k=>{var $,M;if(window.confirm(`Are you sure you want to reset the pizza time fund for Class ${k}? This will set the fund to R0.00 but keep donation history.`))try{w(k),g(""),j("");const q=await z.post("/pizza-time/reset",{class:k});j(q.data.message),await S(),setTimeout(()=>j(""),3e3)}catch(q){g(((M=($=q.response)==null?void 0:$.data)==null?void 0:M.error)||"Failed to reset pizza time"),setTimeout(()=>g(""),5e3)}finally{w(null)}},C=u.useMemo(()=>l?Math.min(l.current_fund/l.goal_amount*100,100):0,[l]),T=u.useMemo(()=>{if(!l||!l.donation_history||l.donation_history.length===0)return[];let k=0;return l.donation_history.map($=>(k+=$.daily_total,{date:$.date,amount:k,daily_total:$.daily_total,donation_count:$.donation_count}))},[l]);if(s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!n||!n.enabled)return e.jsx(qe,{to:"/",replace:!0});if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})});if(!((r==null?void 0:r.role)==="teacher"?c:l)&&!d)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"Failed to load pizza time status"}),x&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"If you see this error, the server may need to be restarted to run database migrations."})]})]})})});if((r==null?void 0:r.role)==="teacher"&&c){const k=["6A","6B","6C"];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(Ln,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),e.jsx("p",{className:"text-orange-100",children:"Class donation tracker for pizza party  all classes"})]})]})}),x&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-red-500 mt-0.5"}),e.jsx("p",{className:"text-red-700 font-semibold",children:x})]})}),y&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:y})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:k.map($=>{var V;const M=c[$];if(!M)return null;const q=Math.min(M.current_fund/M.goal_amount*100,100),N=(V=M.donation_history)!=null&&V.length?(()=>{let R=0;return M.donation_history.map(P=>(R+=P.daily_total,{date:P.date,amount:R,daily_total:P.daily_total,donation_count:P.donation_count}))})():[];return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Class ",$]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${M.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:M.is_active?" Active":" Inactive"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-semibold text-primary-600",children:["R",M.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-gray-500",children:["of R",M.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-6 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${q}%`},children:q>15&&e.jsxs("span",{className:"text-white text-xs font-semibold",children:[q.toFixed(0),"%"]})})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.donation_count," donation",M.donation_count!==1?"s":""]})]}),N.length>0&&e.jsxs("div",{className:"mb-4 flex-1 min-h-[80px]",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-600 mb-2 flex items-center gap-1",children:[e.jsx(jo,{className:"h-4 w-4"}),"Fund growth"]}),e.jsx("div",{className:"h-16 flex items-end space-x-1",children:N.map(R=>{const P=Math.max(...N.map(U=>U.amount),M.goal_amount),H=R.amount/P*100;return e.jsx("div",{className:"flex-1 bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all hover:opacity-80",style:{height:`${H}%`,minHeight:"4px"},title:`${new Date(R.date).toLocaleDateString()}: R${R.amount.toLocaleString("en-ZA",{minimumFractionDigits:2})}`},R.date)})})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[e.jsx("button",{onClick:()=>_($),disabled:!!m,className:`flex-1 px-4 py-2 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 ${M.is_active?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"} disabled:opacity-50`,children:m===$?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(aj,{className:"h-4 w-4"}),M.is_active?"Deactivate":"Activate"]})}),e.jsx("button",{onClick:()=>I($),disabled:!!v||M.current_fund===0,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-gray-500 hover:bg-gray-600 text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v===$?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"h-4 w-4"}),"Reset"]})})]}),M.donations&&M.donations.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Recent donations"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:M.donations.slice(0,5).map(R=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"font-medium truncate max-w-[120px]",children:R.first_name&&R.last_name?`${R.first_name} ${R.last_name}`:R.username}),e.jsxs("span",{className:"font-bold text-primary-600 text-xs",children:["R",R.amount.toLocaleString("en-ZA",{minimumFractionDigits:2})]})]},R.id))})]})]},$)})})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(Ln,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pizza Time"}),e.jsx("p",{className:"text-orange-100",children:"Help your class reach the pizza party goal!"})]})]}),!l.is_active&&e.jsxs("div",{className:"bg-white/20 rounded-lg px-4 py-2 flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Pizza Time is not active"})]})]})}),x&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-red-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:x}),x.includes("class assigned")&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please contact your teacher to assign you to a class (6A, 6B, or 6C) before using Pizza Time."})]})]})}),y&&e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-center space-x-3",children:[e.jsx(je,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-green-700",children:y})]}),!l.is_active&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-amber-800 font-semibold",children:"Pizza Time is currently inactive. Your teacher needs to activate it before you can donate."})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fund Progress"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["R",l.current_fund.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of R",l.goal_amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})," goal"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-8 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${C}%`},children:C>10&&e.jsxs("span",{className:"text-white text-sm font-semibold",children:[C.toFixed(1),"%"]})})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.donation_count," donation",l.donation_count!==1?"s":""," received"]})]}),T.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(jo,{className:"h-5 w-5"}),e.jsx("span",{children:"Fund Growth Over Time"})]}),e.jsx("div",{className:"h-64 flex items-end space-x-1",children:T.map(k=>{const $=Math.max(...T.map(q=>q.amount),l.goal_amount),M=k.amount/$*100;return e.jsx("div",{className:"flex-1 group relative",style:{minWidth:"20px"},children:e.jsx("div",{className:"w-full bg-gradient-to-t from-orange-500 to-red-500 rounded-t transition-all duration-300 hover:opacity-80 cursor-pointer",style:{height:`${M}%`},title:`${new Date(k.date).toLocaleDateString()}: R${k.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})} (${k.donation_count} donation${k.donation_count!==1?"s":""})`,children:e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[e.jsx("div",{className:"font-semibold",children:new Date(k.date).toLocaleDateString()}),e.jsxs("div",{children:["R",k.amount.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-gray-300",children:[k.donation_count," donation",k.donation_count!==1?"s":""]})]})})},k.date)})}),e.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:"Hover over bars to see details"})]}),l.is_active&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(ge,{className:"h-5 w-5"}),e.jsx("span",{children:"Make a Donation"})]}),a&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Your balance: ",e.jsxs("span",{className:"font-semibold text-primary-600",children:["R",a.balance.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[500,1e3,2e3,5e3].map(k=>{const $=a?a.balance>=k:!1;return e.jsx("button",{onClick:()=>A(k),disabled:!$||f===k||!l.is_active,className:`px-6 py-4 rounded-lg font-bold text-lg transition-all ${$&&l.is_active?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:f===k?e.jsx(de,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Ln,{className:"h-5 w-5"}),e.jsxs("span",{children:["R",k.toLocaleString()]})]})},k)})})]})]})},ab=()=>{const{plugins:t,loading:s}=lt(),r=t.find(j=>j.route_path==="/leaderboard"),[a,n]=u.useState([]),[l,i]=u.useState({"6A":[],"6B":[],"6C":[]}),[c,o]=u.useState(!0),[d,p]=u.useState("overall"),f=j=>{switch(j){case 1:return"";case 2:return"";case 3:return"";case 4:return"";case 5:return"";default:return""}},b=j=>{switch(j){case 1:return"bg-yellow-400 text-yellow-900 border-yellow-500";case 2:return"bg-gray-300 text-gray-900 border-gray-400";case 3:return"bg-orange-400 text-orange-900 border-orange-500";case 4:return"bg-blue-100 text-blue-900 border-blue-300";case 5:return"bg-blue-50 text-blue-900 border-blue-200";default:return"bg-gray-100 text-gray-900 border-gray-300"}};u.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const[j,m]=await Promise.all([z.get("/leaderboard/overall"),z.get("/leaderboard/all-classes")]);n(j.data.leaderboard||[]),i(m.data||{"6A":[],"6B":[],"6C":[]})}catch(j){console.error("Failed to fetch leaderboards:",j)}finally{o(!1)}},g=j=>j.first_name&&j.last_name?`${j.first_name} ${j.last_name}`:j.username,y=j=>j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cl,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"No games played yet. Be the first to compete!"})]}):e.jsx("div",{className:"space-y-3",children:j.map(m=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all hover:scale-[1.02] ${b(m.rank)}`,children:[e.jsxs("div",{className:"flex-shrink-0 text-center w-16",children:[e.jsx("div",{className:"text-4xl mb-1",children:f(m.rank)}),e.jsxs("div",{className:"text-lg font-bold",children:["#",m.rank]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-lg truncate",children:g(m)}),e.jsxs("div",{className:"text-sm opacity-75",children:[m.class&&e.jsxs("span",{className:"mr-3",children:["Class ",m.class]}),e.jsxs("span",{children:[m.games_played," game",m.games_played!==1?"s":""]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 justify-end mb-1",children:[e.jsx(bo,{className:"h-5 w-5"}),e.jsx("span",{className:"text-2xl font-bold",children:m.total_points.toLocaleString()})]}),e.jsx("div",{className:"text-xs opacity-75",children:"Total Points"})]}),e.jsxs("div",{className:"hidden md:flex flex-col gap-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Easy:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_easy})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Medium:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_medium})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 opacity-75",children:"Hard:"}),e.jsx("span",{className:"font-semibold",children:m.high_score_hard})]})]})]},m.user_id))});return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!r||!r.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores Game Leaderboard"}),e.jsx("p",{className:"text-yellow-100",children:"Top performers across all classes"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>p("overall"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="overall"?"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{children:"Overall Top 5"})]})}),e.jsx("button",{onClick:()=>p("6A"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6A"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6A"})]})}),e.jsx("button",{onClick:()=>p("6B"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6B"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6B"})]})}),e.jsx("button",{onClick:()=>p("6C"),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold transition-all ${d==="6C"?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Class 6C"})]})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[d==="overall"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(cl,{className:"h-6 w-6 text-yellow-500"}),"Overall Top 5 Champions"]}),y(a)]}),d==="6A"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-blue-500"}),"Class 6A Top 5"]}),y(l["6A"])]}),d==="6B"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-green-500"}),"Class 6B Top 5"]}),y(l["6B"])]}),d==="6C"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-6 w-6 text-purple-500"}),"Class 6C Top 5"]}),y(l["6C"])]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Rankings Work"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" Rankings are based on ",e.jsx("strong",{children:"total points"})," earned across all math games"]}),e.jsx("li",{children:" Points are awarded based on difficulty level and answer streaks"}),e.jsx("li",{children:" The leaderboard updates in real-time as students play"}),e.jsx("li",{children:" Each class has its own Top 5, plus an Overall Top 5 across all classes"})]})]})]})})]})},Vt=t=>t?new Date(t).toLocaleString("en-ZA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",ur=({status:t})=>{const s=u.useMemo(()=>{switch(t){case"approved":case"verified":return{icon:je,className:"bg-green-100 text-green-700 border-green-200",label:t==="verified"?"approved":t};case"denied":return{icon:It,className:"bg-red-100 text-red-700 border-red-200",label:t};default:return{icon:Te,className:"bg-yellow-100 text-yellow-700 border-yellow-200",label:"pending"}}},[t]),r=s.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full border ${s.className}`,children:[e.jsx(r,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"capitalize",children:s.label})]})},nb=()=>{const{plugins:t,loading:s}=lt(),{user:r}=Le(),[a,n]=u.useState("my"),[l,i]=u.useState("pending"),[c,o]=u.useState(!1),[d,p]=u.useState(null),[f,b]=u.useState([]),[x,g]=u.useState([]),[y,j]=u.useState(!1),[m,h]=u.useState(null),[v,w]=u.useState([]),[S,A]=u.useState([]),[_,I]=u.useState([]),[C,T]=u.useState([]),[F,k]=u.useState("bug"),[$,M]=u.useState(!1),[q,N]=u.useState(null),[V,R]=u.useState(null),[P,H]=u.useState(""),[U,Y]=u.useState(""),[Z,K]=u.useState(""),X=(r==null?void 0:r.role)==="teacher",ae=t.find(L=>L.route_path==="/suggestions-bugs");u.useEffect(()=>{!s&&(ae!=null&&ae.enabled)&&(n(X?"review":"my"),X&&i("pending"))},[s,ae==null?void 0:ae.enabled,X]);const ue=async()=>{var L,Fe;try{o(!0),p(null);const he=await z.get("/suggestions-bugs/my");b(he.data.suggestions||[]),g(he.data.bugReports||[])}catch(he){p(((Fe=(L=he.response)==null?void 0:L.data)==null?void 0:Fe.error)||"Failed to load your submissions")}finally{o(!1)}},le=async()=>{var L,Fe;try{j(!0),h(null);const he=await z.get("/suggestions-bugs/admin/queue");w(he.data.suggestions||[]),A(he.data.bugReports||[])}catch(he){h(((Fe=(L=he.response)==null?void 0:L.data)==null?void 0:Fe.error)||"Failed to load review queue")}finally{j(!1)}},me=async()=>{var L,Fe;try{j(!0),h(null);const he=await z.get("/suggestions-bugs/admin/all");I(he.data.suggestions||[]),T(he.data.bugReports||[])}catch(he){h(((Fe=(L=he.response)==null?void 0:L.data)==null?void 0:Fe.error)||"Failed to load suggestions & bugs")}finally{j(!1)}};u.useEffect(()=>{ae!=null&&ae.enabled&&r&&(r.role==="student"?ue():(le(),me()))},[ae==null?void 0:ae.enabled,r==null?void 0:r.role]);const D=async()=>{var L,Fe,he,ht,Rt,Gt;try{M(!0),N(null),R(null),await z.post("/suggestions-bugs/suggestions",{content:P}),H(""),R("Suggestion submitted!"),await ue()}catch(ps){N(((Fe=(L=ps.response)==null?void 0:L.data)==null?void 0:Fe.error)||((Gt=(Rt=(ht=(he=ps.response)==null?void 0:he.data)==null?void 0:ht.errors)==null?void 0:Rt[0])==null?void 0:Gt.msg)||"Failed to submit suggestion")}finally{M(!1)}},ee=async()=>{var L,Fe,he,ht,Rt,Gt;try{M(!0),N(null),R(null),await z.post("/suggestions-bugs/bugs",{title:U,description:Z}),Y(""),K(""),R("Bug report submitted!"),await ue()}catch(ps){N(((Fe=(L=ps.response)==null?void 0:L.data)==null?void 0:Fe.error)||((Gt=(Rt=(ht=(he=ps.response)==null?void 0:he.data)==null?void 0:ht.errors)==null?void 0:Rt[0])==null?void 0:Gt.msg)||"Failed to submit bug report")}finally{M(!1)}},re=async(L,Fe)=>{var he,ht;try{await z.put(`/suggestions-bugs/admin/suggestions/${L}/review`,{status:Fe}),await le(),await me()}catch(Rt){h(((ht=(he=Rt.response)==null?void 0:he.data)==null?void 0:ht.error)||"Failed to update suggestion")}},Q=async(L,Fe)=>{var he,ht;try{await z.put(`/suggestions-bugs/admin/bugs/${L}/review`,{status:Fe}),await le(),await me()}catch(Rt){h(((ht=(he=Rt.response)==null?void 0:he.data)==null?void 0:ht.error)||"Failed to update bug report")}},B=u.useMemo(()=>_.filter(L=>L.status==="approved"),[_]),ne=u.useMemo(()=>_.filter(L=>L.status==="denied"),[_]),oe=u.useMemo(()=>C.filter(L=>L.status==="verified"),[C]),be=u.useMemo(()=>C.filter(L=>L.status==="denied"),[C]);return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!ae||!ae.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Suggestions & Bugs"}),e.jsxs("p",{className:"text-primary-100",children:["Submit ideas and report legit bugs. If approved, you earn ",e.jsx("span",{className:"font-semibold",children:"R1000"}),"."]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsxs("nav",{className:"flex gap-6",children:[!X&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n("my"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="my"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My submissions"}),e.jsx("button",{onClick:()=>n("submit"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="submit"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Submit"})]}),X&&e.jsx("button",{onClick:()=>n("review"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="review"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Review queue"})]})}),e.jsxs("div",{className:"p-6",children:[!X&&a==="my"&&e.jsxs("div",{className:"space-y-6",children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),c?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(de,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Loading your submissions..."})]}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:f.length})]}),f.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No suggestions yet."}):e.jsx("div",{className:"space-y-3",children:f.slice(0,10).map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(ur,{status:L.status}),e.jsx("span",{className:"text-xs text-gray-500",children:Vt(L.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:L.content}),(L.status==="approved"||L.status==="denied")&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:"",L.reward_paid?"  Reward paid ":L.status==="approved"?"  Reward pending":""]})]},L.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:x.length})]}),x.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No bug reports yet."}):e.jsx("div",{className:"space-y-3",children:x.slice(0,10).map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(ur,{status:L.status}),e.jsx("span",{className:"text-xs text-gray-500",children:Vt(L.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:L.description}),(L.status==="verified"||L.status==="denied")&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:"",L.reward_paid?"  Reward paid ":L.status==="verified"?"  Reward pending":""]})]},L.id))})]})]})]}),!X&&a==="submit"&&e.jsxs("div",{className:"space-y-4",children:[q&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:q}),V&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:V}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>k("bug"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${F==="bug"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Report a bug"}),e.jsx("button",{onClick:()=>k("suggestion"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${F==="suggestion"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Make a suggestion"})]}),F==="bug"?e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bug title"}),e.jsx("input",{value:U,onChange:L=>Y(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Short summary of the bug"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What happened?"}),e.jsx("textarea",{value:Z,onChange:L=>K(L.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"Steps to reproduce, what you expected, what you saw..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:ee,disabled:$||U.trim().length<3||Z.trim().length<10,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[$?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(Ds,{className:"h-4 w-4"}),"Submit bug"]})})]}):e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Suggestion"}),e.jsx("textarea",{value:P,onChange:L=>H(L.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"What would make the app better?"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"If approved, you earn R1000."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:D,disabled:$||P.trim().length<5,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[$?e.jsx(de,{className:"h-4 w-4 animate-spin"}):e.jsx(Ds,{className:"h-4 w-4"}),"Submit suggestion"]})})]})]}),X&&a==="review"&&e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),y?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(de,{className:"h-10 w-10 animate-spin text-primary-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Loading review queue..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>i("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="pending"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Pending (",v.length+S.length,")"]}),e.jsxs("button",{onClick:()=>i("approved"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="approved"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Approved (",B.length+oe.length,")"]}),e.jsxs("button",{onClick:()=>i("denied"),className:`px-4 py-2 rounded-lg text-sm font-medium border ${l==="denied"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Denied (",ne.length+be.length,")"]})]}),l==="pending"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:v.length})]}),v.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):e.jsx("div",{className:"space-y-3",children:v.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx("span",{className:"text-xs text-gray-500",children:Vt(L.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:L.content}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:()=>re(L.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),e.jsx("button",{onClick:()=>re(L.id,"approved"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},L.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:S.length})]}),S.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"Nothing to review."}):e.jsx("div",{className:"space-y-3",children:S.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx("span",{className:"text-xs text-gray-500",children:Vt(L.created_at)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:L.description}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:()=>Q(L.id,"denied"),className:"px-3 py-1.5 text-sm rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Deny "}),e.jsx("button",{onClick:()=>Q(L.id,"verified"),className:"px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Approve  (+R1000)"})]})]},L.id))})]})]}),l==="approved"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:B.length})]}),B.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved suggestions yet."}):e.jsx("div",{className:"space-y-3",children:B.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx(ur,{status:L.status})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:L.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:"",L.reward_paid?"  Reward paid ":"  Reward pending"]})]},L.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Approved bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:oe.length})]}),oe.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved bug reports yet."}):e.jsx("div",{className:"space-y-3",children:oe.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx(ur,{status:L.status})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:L.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:"",L.reward_paid?"  Reward paid ":"  Reward pending"]})]},L.id))})]})]}),l==="denied"&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied suggestions"}),e.jsx("span",{className:"text-xs text-gray-500",children:ne.length})]}),ne.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No denied suggestions."}):e.jsx("div",{className:"space-y-3",children:ne.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx(ur,{status:L.status})]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:L.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:""]})]},L.id))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Denied bug reports"}),e.jsx("span",{className:"text-xs text-gray-500",children:be.length})]}),be.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No denied bug reports."}):e.jsx("div",{className:"space-y-3",children:be.map(L=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:L.first_name&&L.last_name?`${L.first_name} ${L.last_name}`:L.username}),L.class?e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",L.class,")"]}):null]}),e.jsx(ur,{status:L.status})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 mt-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:L.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed ",L.reviewed_at?`on ${Vt(L.reviewed_at)}`:"",L.reviewed_by_username?` by ${L.reviewed_by_username}`:""]})]},L.id))})]})]})]})]})]})]})]})},lb=()=>{const{plugins:t,loading:s}=lt(),{user:r}=Le(),a=t.find(x=>x.route_path==="/disasters"),[n,l]=u.useState([]),[i,c]=u.useState([]),[o,d]=u.useState(!0);u.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const[x,g]=await Promise.all([z.get("/disasters"),z.get("/disasters/events/recent")]);l(x.data||[]),c(g.data||[])}catch(x){console.error("Failed to fetch disasters:",x),l([]),c([])}finally{d(!1)}},f=x=>{const g=x.effect_value;switch(x.effect_type){case"balance_percentage":return g<0?`Reduces balance by ${Math.abs(g)}%`:`Increases balance by ${g}%`;case"balance_fixed":return g<0?`Reduces balance by R${Math.abs(g).toFixed(2)}`:`Increases balance by R${g.toFixed(2)}`;case"salary_percentage":return g<0?`Reduces next salary by ${Math.abs(g)}%`:`Increases next salary by ${g}%`;default:return`Effect: ${g}`}},b=x=>new Date(x).toLocaleDateString("en-ZA",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Disasters"}),e.jsx("p",{className:"text-red-100",children:"Natural and economic events affecting all citizens"})]})]})}),o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[n.some(x=>x.is_active)&&e.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Zr,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900 text-lg",children:"Active Disasters!"}),e.jsx("p",{className:"text-red-700 mb-4",children:"The following disasters are currently affecting citizens:"}),e.jsx("div",{className:"space-y-2",children:n.filter(x=>x.is_active).map(x=>e.jsxs("div",{className:"bg-red-100 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:x.name}),e.jsx("div",{className:"text-sm text-red-700",children:f(x)})]})]},x.id))})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Qy,{className:"h-6 w-6 text-yellow-500"}),"Possible Disasters"]}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No disasters have been configured yet."}),e.jsx("p",{className:"text-gray-400 mt-2",children:"The skies are clear... for now."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(x=>e.jsx("div",{className:`rounded-xl border-2 p-4 transition-all ${x.is_active?"border-red-400 bg-red-50 shadow-lg":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:x.name}),x.is_active&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full animate-pulse",children:"ACTIVE"})]}),x.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description}),e.jsx("div",{className:"mt-2 text-sm",children:e.jsx("span",{className:`font-medium ${x.effect_value<0?"text-red-600":"text-green-600"}`,children:f(x)})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:x.affects_all_classes?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"h-3 w-3"})," Affects all classes"]}):e.jsxs("span",{children:["Targets: Class ",x.target_class]})})]})]})},x.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"h-6 w-6 text-gray-500"}),"Recent Disaster Events"]}),i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-gray-500",children:"No disasters have occurred yet."})]}):e.jsx("div",{className:"space-y-3",children:i.map(x=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-2xl",children:x.disaster_icon||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:x.disaster_name||"Unknown Disaster"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[x.target_class?`Class ${x.target_class}`:"All Classes"," ",x.affected_students," student",x.affected_students!==1?"s":""," affected"]}),x.notes&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1 italic",children:['"',x.notes,'"']})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:["R",Math.abs(x.total_impact).toLocaleString("en-ZA",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:b(x.triggered_at)})]})]},x.id))})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:"About Disasters"}),e.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[e.jsx("li",{children:" Disasters are events that can affect all students in a town"}),e.jsx("li",{children:" They may reduce bank balances, affect salaries, or have other economic impacts"}),e.jsx("li",{children:" Teachers can trigger disasters at any time"}),e.jsx("li",{children:" Some disasters may target specific classes while others affect everyone"}),e.jsx("li",{children:" Keep an eye on the weather forecast... and your savings!"})]})]})]})})]})]})},gn={easy:{label:"Dishwasher",unit:"items unpacked",formatScore:t=>`${t} item${t!==1?"s":""} unpacked`},medium:{label:"Dog poo",unit:"poos picked up",formatScore:t=>`${t} poo${t!==1?"s":""} picked up`},hard:{label:"Lawn mower",unit:"meters mowed",formatScore:t=>`${t}m mowed`}},ib=({isOpen:t,onClose:s,onGameComplete:r,gameStatus:a})=>{const[n,l]=u.useState("difficulty"),[i,c]=u.useState("easy"),[o,d]=u.useState(null),[p,f]=u.useState(60),[b,x]=u.useState(0),[g,y]=u.useState(null),[j,m]=u.useState(""),[h,v]=u.useState([]),[w,S]=u.useState(0),[A,_]=u.useState(0),[I,C]=u.useState(null),[T,F]=u.useState(!1),[k,$]=u.useState(null),[M,q]=u.useState(!1),[N,V]=u.useState(null),R=["Nice try, cheater!","Nope! One answer per question!","Did you really think that would work?","NO! Wait for the next question!","Spam detected!","Slow down there, speedster!","Patience, young grasshopper","BONK! No cheating!"],P=u.useCallback(le=>{const D={easy:{addition:{max:20,min:1},subtraction:{max:20,min:1},multiplication:{max:12,min:1},division:{max:12,min:2}},medium:{addition:{max:50,min:1},subtraction:{max:50,min:1},multiplication:{max:15,min:1},division:{max:15,min:2}},hard:{addition:{max:100,min:1},subtraction:{max:100,min:1},multiplication:{max:20,min:1},division:{max:20,min:2}}}[le],ee=["+","-","",""],re=ee[Math.floor(Math.random()*ee.length)];let Q,B,ne;switch(re){case"+":Q=Math.floor(Math.random()*(D.addition.max-D.addition.min+1))+D.addition.min,B=Math.floor(Math.random()*(D.addition.max-D.addition.min+1))+D.addition.min,ne=Q+B;break;case"-":Q=Math.floor(Math.random()*(D.subtraction.max-D.subtraction.min+1))+D.subtraction.min,B=Math.floor(Math.random()*(D.subtraction.max-D.subtraction.min+1))+D.subtraction.min,Q<B&&([Q,B]=[B,Q]),ne=Q-B;break;case"":Q=Math.floor(Math.random()*(D.multiplication.max-D.multiplication.min+1))+D.multiplication.min,B=Math.floor(Math.random()*(D.multiplication.max-D.multiplication.min+1))+D.multiplication.min,ne=Q*B;break;case"":ne=Math.floor(Math.random()*(D.division.max-D.division.min+1))+D.division.min,B=Math.floor(Math.random()*(D.division.max-D.division.min+1))+D.division.min,Q=B*ne;break}return{num1:Q,num2:B,operation:re,answer:ne,display:`${Q} ${re} ${B} =`}},[]),H=async le=>{try{c(le);const me=await yo.startGame({difficulty:le});d(me.data.session.id),l("playing"),f(60),x(0),v([]),S(0),_(0),m(""),y(P(le))}catch(me){console.error("Failed to start game:",me),alert("Failed to start game. Please try again.")}},U=()=>{if(T){const D=R[Math.floor(Math.random()*R.length)];V(D),setTimeout(()=>V(null),1500);return}if(!g||!j.trim())return;const me=parseInt(j)===g.answer;if(C(me),F(!0),v(D=>[...D,me]),me){const D=w+1;S(D),_(ee=>Math.max(ee,D)),x(ee=>ee+1)}else S(0);setTimeout(()=>{m(""),y(P(i)),C(null),F(!1)},1e3)},Y=le=>{le.key==="Enter"&&U()},Z=le=>{m(le==="backspace"?me=>me.slice(0,-1):le==="clear"?"":me=>me+le)},K=u.useCallback(async()=>{var le,me;if(o&&!M){q(!0),l("results");try{const D=await yo.submitGame({session_id:o,score:b,correct_answers:b,total_problems:h.length,answer_sequence:h});$({score:b,correctAnswers:b,totalProblems:h.length,earnings:D.data.earnings,isNewHighScore:D.data.isNewHighScore,accuracy:h.length>0?b/h.length*100:0}),r()}catch(D){const ee=((me=(le=D.response)==null?void 0:le.data)==null?void 0:me.error)||"Failed to submit game results";$({score:b,correctAnswers:b,totalProblems:h.length,earnings:0,isNewHighScore:!1,accuracy:h.length>0?b/h.length*100:0,error:ee})}finally{q(!1)}}},[o,b,h,M,r]);u.useEffect(()=>{if(n==="playing"&&p>0){const le=setTimeout(()=>f(me=>me-1),1e3);return()=>clearTimeout(le)}else n==="playing"&&p===0&&K()},[n,p,K]);const X=()=>{l("difficulty"),d(null),f(60),x(0),y(null),m(""),v([]),S(0),_(0),C(null),F(!1),$(null),q(!1),V(null)},ae=()=>{X(),s()};if(!t)return null;const ue=gn[i];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Chores Game"}),e.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[n==="difficulty"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Choose Difficulty"}),e.jsx("p",{className:"text-gray-400",children:"Each correct sum = 1 chore done! Earn money for your bank account."})]}),e.jsx("div",{className:"space-y-4",children:[{level:"easy",label:"Easy",chore:gn.easy.label,multiplier:"1.0x",range:"1-20,  up to 12",color:"bg-green-600"},{level:"medium",label:"Medium",chore:gn.medium.label,multiplier:"1.2x",range:"1-50,  up to 15",color:"bg-yellow-600"},{level:"hard",label:"Hard",chore:gn.hard.label,multiplier:"1.5x",range:"1-100,  up to 20",color:"bg-red-600"}].map(({level:le,label:me,chore:D,multiplier:ee,range:re,color:Q})=>e.jsx("button",{onClick:()=>H(le),className:`w-full p-4 rounded-xl ${Q} text-white hover:opacity-90 transition-opacity`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"font-semibold",children:[me,"  ",D]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Numbers ",re]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:ee}),e.jsx("div",{className:"text-sm opacity-90",children:"Multiplier"})]})]})},le))}),a&&e.jsxs("div",{className:"text-center text-sm text-gray-400",children:[a.remaining_plays," plays remaining today"]})]}),n==="playing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-pink-600 text-white px-4 py-2 rounded-lg font-bold text-lg",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]}),e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:ue.formatScore(b)}),e.jsx("div",{className:"text-sm text-gray-400",children:ue.label})]})]}),e.jsxs("div",{className:"text-right text-white",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(mj,{className:"h-4 w-4"}),e.jsx("span",{className:"font-bold",children:w})]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Streak"})]})]}),N&&e.jsx("div",{className:"bg-red-500 text-white px-4 py-3 rounded-lg text-center font-bold animate-pulse mb-4",children:N}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-6",children:g==null?void 0:g.display}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:j,onChange:le=>m(le.target.value),onKeyPress:Y,placeholder:"?",disabled:T,className:"w-32 text-3xl font-bold text-center bg-gray-700 text-white border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-pink-500 disabled:opacity-50",autoFocus:!0}),T&&e.jsx("div",{className:"absolute -right-12 top-1/2 transform -translate-y-1/2",children:I?e.jsx(je,{className:"h-8 w-8 text-green-500"}):e.jsx(It,{className:"h-8 w-8 text-red-500"})})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[["1","2","3"],["4","5","6"],["7","8","9"],["clear","0","backspace"]].map((le,me)=>e.jsx("div",{className:"contents",children:le.map(D=>e.jsx("button",{onClick:()=>Z(D),disabled:T,className:`py-4 px-6 rounded-lg font-semibold text-white transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed ${D==="clear"||D==="backspace"?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 hover:bg-gray-600"}`,children:D==="backspace"?"":D==="clear"?"C":D},D))},me))}),e.jsx("button",{onClick:U,disabled:!j.trim()||T,className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Answer"})]}),n==="results"&&k&&e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Chore Complete!"}),e.jsx("p",{className:"text-gray-400",children:"Here's how you did:"})]}),k.error&&e.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:"Error saving results"}),e.jsx("p",{className:"text-sm mt-1",children:k.error}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Your earnings may not have been recorded. Please contact your teacher."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:ue.formatScore(k.score)}),e.jsx("div",{className:"text-sm text-gray-400",children:ue.label})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:`text-3xl font-bold ${k.error?"text-gray-500":"text-green-500"}`,children:["R",Number(k.earnings||0).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Earned"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-500",children:[k.accuracy.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Accuracy"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-500",children:A}),e.jsx("div",{className:"text-sm text-gray-400",children:"Best Streak"})]})]}),k.isNewHighScore&&!k.error&&e.jsxs("div",{className:"bg-yellow-600 text-white p-4 rounded-lg flex items-center justify-center space-x-2",children:[e.jsx(cl,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"New High Score!"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{a&&a.remaining_plays>0?(X(),l("difficulty")):ae()},className:"w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition-colors",children:a&&a.remaining_plays>0?"Play Again":"Close"}),e.jsx("button",{onClick:ae,className:"w-full bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Close"})]})]}),M&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Submitting results..."})]})]})]})})},ob=()=>{var f,b,x;const{user:t}=Le(),{plugins:s,loading:r}=lt(),a=s.find(g=>g.route_path==="/chores"),[n,l]=u.useState(null),[i,c]=u.useState(!0),[o,d]=u.useState(!1);u.useEffect(()=>{a&&a.enabled&&(t==null?void 0:t.role)==="student"?p():c(!1)},[a,t==null?void 0:t.role]);const p=async()=>{try{const g=await yo.getStatus().catch(()=>({data:null}));l(g.data)}catch(g){console.error("Failed to fetch chores game status:",g)}finally{c(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):!a||!a.enabled?e.jsx(qe,{to:"/",replace:!0}):(t==null?void 0:t.role)==="teacher"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores"}),e.jsx("p",{className:"text-primary-100",children:"Chore challenges  students earn money by solving math sums"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsx("p",{className:"text-gray-600",children:"Students complete chore-themed math challenges to earn money. Each correct sum = 1 chore done (dishwasher items unpacked, dog poos picked up, or lawn meters mowed depending on difficulty). Daily limit is configured in Town Settings."})})]}):i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(de,{className:"h-12 w-12 animate-spin text-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Chores"}),e.jsx("p",{className:"text-primary-100",children:"Solve math sums to complete chores and earn money!"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-2xl p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Chore Challenges"}),e.jsx("p",{className:"text-green-100",children:"Each correct sum = 1 chore done. Easy = dishwasher (items unpacked), Medium = dog poo (poos picked up), Hard = lawn mower (meters mowed). Earn R1 per correct answer!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plays Remaining"}),e.jsx($e,{className:"h-5 w-5 text-blue-600"})]}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[(n==null?void 0:n.remaining_plays)??0,"/",(n==null?void 0:n.daily_limit)??3]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Resets daily at 6 AM"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"High Scores"}),e.jsx(cl,{className:"h-5 w-5 text-yellow-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Easy (Dishwasher):"}),e.jsx("span",{className:"font-semibold",children:((f=n==null?void 0:n.high_scores)==null?void 0:f.easy)??0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Medium (Dog poo):"}),e.jsx("span",{className:"font-semibold",children:((b=n==null?void 0:n.high_scores)==null?void 0:b.medium)??0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hard (Lawn mower):"}),e.jsx("span",{className:"font-semibold",children:((x=n==null?void 0:n.high_scores)==null?void 0:x.hard)??0})]})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:()=>d(!0),disabled:!n||(n.remaining_plays??0)<=0,className:`px-8 py-4 rounded-xl font-bold text-lg transition-all ${n&&(n.remaining_plays??0)>0?"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-700 hover:to-purple-700 transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:n&&(n.remaining_plays??0)>0?e.jsxs(e.Fragment,{children:[e.jsx(rj,{className:"inline-block h-6 w-6 mr-2"}),"Start Chores Game"]}):"No Plays Remaining Today"}),n&&(n.remaining_plays??0)>0&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"60 seconds  Earn R1 per correct answer  Difficulty multipliers apply"})]}),(n==null?void 0:n.recent_sessions)&&n.recent_sessions.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Games"}),e.jsx("div",{className:"space-y-3",children:n.recent_sessions.slice(0,5).map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.difficulty==="easy"?"bg-green-500":g.difficulty==="medium"?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[g.difficulty,"  ",g.score," correct"]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(g.played_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["+R",Number(g.earnings||0).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g.correct_answers,"/",g.total_problems," correct"]})]})]},g.id))})]}),e.jsx(ib,{isOpen:o,onClose:()=>d(!1),onGameComplete:p,gameStatus:n})]})},cb=({schools:t,onSchoolClick:s,onRefresh:r})=>{const[a,n]=u.useState(""),[l,i]=u.useState("name"),[c,o]=u.useState("asc"),[d,p]=u.useState(!1),f=async()=>{p(!0),await r(),p(!1)},x=[...t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())||y.code.toLowerCase().includes(a.toLowerCase()))].sort((y,j)=>{let m,h;switch(l){case"name":m=y.name.toLowerCase(),h=j.name.toLowerCase();break;case"students":m=y.student_count,h=j.student_count;break;case"created_at":m=new Date(y.created_at).getTime(),h=new Date(j.created_at).getTime();break;default:return 0}return m<h?c==="asc"?-1:1:m>h?c==="asc"?1:-1:0}),g=y=>{l===y?o(c==="asc"?"desc":"asc"):(i(y),o("asc"))};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Schools"}),e.jsxs("button",{onClick:f,disabled:d,className:"btn-secondary flex items-center text-sm",children:[e.jsx(zr,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:a,onChange:y=>n(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("name"),children:["School Name",l==="name"&&e.jsx("span",{className:"ml-1",children:c==="asc"?"":""})]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("students"),children:["Students",l==="students"&&e.jsx("span",{className:"ml-1",children:c==="asc"?"":""})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teachers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Treasury"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:a?"No schools found matching your search":"No schools found"})}):x.map(y=>{var j;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500",children:y.code})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.student_count.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y.teacher_count}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",((j=y.treasury_total)==null?void 0:j.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.archived?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:y.archived?"Archived":"Active"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("button",{onClick:()=>s(y),className:"text-primary-600 hover:text-primary-900 flex items-center",children:[e.jsx(za,{className:"h-4 w-4 mr-1"}),"View"]})})]},y.id)})})]})})]})},db=({school:t,onClose:s,onUpdate:r})=>{var w,S,A,_,I;const[a,n]=u.useState("financial"),[l,i]=u.useState(null),[c,o]=u.useState(!0),[d,p]=u.useState(""),[f,b]=u.useState(!1),[x,g]=u.useState({username:"",password:"",first_name:"",last_name:"",email:""}),[y,j]=u.useState(!1);u.useEffect(()=>{m()},[t.id]);const m=async()=>{var C,T;try{o(!0);const F=await z.get(`/admin/schools/${t.id}`);i(F.data)}catch(F){p(((T=(C=F.response)==null?void 0:C.data)==null?void 0:T.error)||"Failed to load school details")}finally{o(!1)}},h=async()=>{var C,T;if(confirm(`Are you sure you want to ${t.archived?"reactivate":"archive"} this school?`))try{await z.put(`/admin/schools/${t.id}`,{archived:!t.archived}),r()}catch(F){p(((T=(C=F.response)==null?void 0:C.data)==null?void 0:T.error)||"Failed to update school")}},v=async C=>{var T,F;C.preventDefault(),j(!0),p("");try{await z.post(`/admin/schools/${t.id}/teachers`,x),b(!1),g({username:"",password:"",first_name:"",last_name:"",email:""}),m()}catch(k){p(((F=(T=k.response)==null?void 0:T.data)==null?void 0:F.error)||"Failed to create teacher")}finally{j(!1)}};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading school details..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.code})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"financial",label:"Financial",icon:ge},{id:"users",label:"Users",icon:Pe},{id:"activity",label:"Activity",icon:Iy},{id:"settings",label:"Settings",icon:Cc}].map(C=>{const T=C.icon;return e.jsxs("button",{onClick:()=>n(C.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${a===C.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),C.label]},C.id)})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[d&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),a==="financial"&&(l==null?void 0:l.financial)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Treasury"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((w=l.financial.treasury_total)==null?void 0:w.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student Balances"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",((S=l.financial.student_balances_total)==null?void 0:S.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Transactions (30 days)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((A=l.financial.transaction_count_30d)==null?void 0:A.toLocaleString())||0})]}),l.financial.loan_stats&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Loan Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Loans"}),e.jsx("p",{className:"text-lg font-semibold",children:l.financial.loan_stats.total_loans||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Active Loans"}),e.jsx("p",{className:"text-lg font-semibold",children:l.financial.loan_stats.active_loans||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Outstanding"}),e.jsxs("p",{className:"text-lg font-semibold",children:["$",((_=l.financial.loan_stats.total_outstanding)==null?void 0:_.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]})]})]}),a==="users"&&(l==null?void 0:l.users)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((I=l.users.student_count)==null?void 0:I.toLocaleString())||0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Teachers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.users.teacher_count||0})]})]}),l.users.pending_approvals>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[l.users.pending_approvals," pending student approval",l.users.pending_approvals!==1?"s":""]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Teachers"}),!t.archived&&e.jsxs("button",{onClick:()=>b(!f),className:"btn-secondary text-sm flex items-center",children:[e.jsx(ds,{className:"h-4 w-4 mr-1"}),"Add Teacher"]})]}),f&&e.jsxs("form",{onSubmit:v,className:"bg-blue-50 p-4 rounded-lg mb-4 space-y-3 border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Create New Teacher"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Username *",required:!0,value:x.username,onChange:C=>g({...x,username:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"password",placeholder:"Password *",required:!0,value:x.password,onChange:C=>g({...x,password:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",placeholder:"First Name",value:x.first_name,onChange:C=>g({...x,first_name:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"text",placeholder:"Last Name",value:x.last_name,onChange:C=>g({...x,last_name:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("input",{type:"email",placeholder:"Email",value:x.email,onChange:C=>g({...x,email:C.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm col-span-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:y,className:"btn-primary text-sm disabled:opacity-50",children:y?"Creating...":"Create"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),g({username:"",password:"",first_name:"",last_name:"",email:""})},className:"btn-secondary text-sm",children:"Cancel"})]})]}),l.users.teachers&&l.users.teachers.length>0?e.jsx("div",{className:"space-y-2",children:l.users.teachers.map(C=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:C.username}),(C.first_name||C.last_name)&&e.jsxs("p",{className:"text-sm text-gray-600",children:[C.first_name," ",C.last_name]}),C.email&&e.jsx("p",{className:"text-xs text-gray-500",children:C.email})]},C.id))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No teachers yet. Create the first teacher above."})]})]}),a==="activity"&&(l==null?void 0:l.activity)&&e.jsxs("div",{className:"space-y-6",children:[l.activity.active_users_7d&&l.activity.active_users_7d.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Users (Last 7 Days)"}),e.jsx("div",{className:"space-y-2",children:l.activity.active_users_7d.map((C,T)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:C.date}),e.jsxs("span",{className:"font-medium",children:[C.active_users," users"]})]},T))})]}),l.activity.most_active_classes&&l.activity.most_active_classes.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Most Active Classes"}),e.jsx("div",{className:"space-y-2",children:l.activity.most_active_classes.map((C,T)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Class ",C.class]}),e.jsxs("span",{className:"font-medium",children:[C.transaction_count," transactions"]})]},T))})]})]}),a==="settings"&&(l==null?void 0:l.school)&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"School Settings"}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg text-xs overflow-auto",children:JSON.stringify(l.school.settings||{},null,2)})]})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-4",children:[e.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",children:[e.jsx(By,{className:"h-4 w-4 mr-2"}),t.archived?"Reactivate":"Archive"]}),e.jsx("button",{onClick:s,className:"btn-primary",children:"Close"})]})]})})},ub=({onClose:t,onSuccess:s})=>{const[r,a]=u.useState({name:"",code:"",settings:{classes:["6A","6B","6C"],allowed_email_domains:[],enabled_plugins:[]}}),[n,l]=u.useState(""),[i,c]=u.useState(!1),[o,d]=u.useState({username:"",password:"",first_name:"",last_name:"",email:""}),[p,f]=u.useState(!1),[b,x]=u.useState(""),g=async m=>{var h,v,w,S;m.preventDefault(),x(""),f(!0);try{const _=(await z.post("/admin/schools",r)).data.school.id;if(i&&o.username&&o.password)try{await z.post(`/admin/schools/${_}/teachers`,o)}catch(I){x(`School created, but failed to create teacher: ${((v=(h=I.response)==null?void 0:h.data)==null?void 0:v.error)||"Unknown error"}`),f(!1);return}s()}catch(A){x(((S=(w=A.response)==null?void 0:w.data)==null?void 0:S.error)||"Failed to create school")}finally{f(!1)}},y=()=>{if(n&&!n.startsWith("@")){x("Email domain must start with @");return}n&&!r.settings.allowed_email_domains.includes(n)&&(a({...r,settings:{...r.settings,allowed_email_domains:[...r.settings.allowed_email_domains,n]}}),l(""),x(""))},j=m=>{a({...r,settings:{...r.settings,allowed_email_domains:r.settings.allowed_email_domains.filter(h=>h!==m)}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New School"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(bt,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:b}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name *"}),e.jsx("input",{id:"name",type:"text",required:!0,value:r.name,onChange:m=>a({...r,name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., St Peter's Boys Prep"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"School Code *"}),e.jsx("input",{id:"code",type:"text",required:!0,value:r.code,onChange:m=>a({...r,code:m.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., stpeters"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"createFirstTeacher",checked:i,onChange:m=>c(m.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"createFirstTeacher",className:"ml-2 block text-sm font-medium text-gray-700",children:"Create first teacher for this school"})]}),i&&e.jsxs("div",{className:"ml-6 space-y-4 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher Username *"}),e.jsx("input",{id:"teacher_username",type:"text",required:i,value:o.username,onChange:m=>d({...o,username:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"teacher1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher Password *"}),e.jsx("input",{id:"teacher_password",type:"password",required:i,value:o.password,onChange:m=>d({...o,password:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Minimum 6 characters"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{id:"teacher_first_name",type:"text",value:o.first_name,onChange:m=>d({...o,first_name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{id:"teacher_last_name",type:"text",value:o.last_name,onChange:m=>d({...o,last_name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teacher_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"teacher_email",type:"email",value:o.email,onChange:m=>d({...o,email:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"teacher@school.co.za"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Email Domains"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),onKeyPress:m=>m.key==="Enter"&&(m.preventDefault(),y()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"@school.co.za"}),e.jsx("button",{type:"button",onClick:y,className:"btn-secondary",children:"Add"})]}),r.settings.allowed_email_domains.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.settings.allowed_email_domains.map(m=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800",children:[m,e.jsx("button",{type:"button",onClick:()=>j(m),className:"ml-2 text-primary-600 hover:text-primary-800",children:""})]},m))})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"btn-primary disabled:opacity-50",children:p?"Creating...":"Create School"})]})]})]})})},mb=({analytics:t})=>e.jsxs("div",{className:"space-y-6",children:[t.growth_trends&&t.growth_trends.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Growth Trends (Last 90 Days)"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("div",{className:"space-y-2",children:t.growth_trends.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.date}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${s.new_schools/Math.max(...t.growth_trends.map(a=>a.new_schools))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:s.new_schools})]})]},r))})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_schools}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Schools"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_students.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Students"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_teachers}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Teachers"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.transaction_volume_30d.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Transactions (30d)"})]})]})]}),xb=({analytics:t})=>{const s=[{title:"Total Schools",value:t.total_schools,icon:Fs,color:"bg-blue-500",bgColor:"bg-blue-50"},{title:"Total Students",value:t.total_students.toLocaleString(),icon:Gy,color:"bg-green-500",bgColor:"bg-green-50"},{title:"Total Teachers",value:t.total_teachers,icon:Pe,color:"bg-purple-500",bgColor:"bg-purple-50"},{title:"Transactions (30d)",value:t.transaction_volume_30d.toLocaleString(),icon:st,color:"bg-orange-500",bgColor:"bg-orange-50"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((r,a)=>{const n=r.icon;return e.jsx("div",{className:`${r.bgColor} rounded-xl shadow-sm border border-gray-200 p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.value})]}),e.jsx("div",{className:`${r.color} p-3 rounded-lg`,children:e.jsx(n,{className:"h-6 w-6 text-white"})})]})},a)})})},wu=()=>{const{user:t}=Le(),[s,r]=u.useState([]),[a,n]=u.useState(null),[l,i]=u.useState(null),[c,o]=u.useState(!1),[d,p]=u.useState(!0),[f,b]=u.useState("");u.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&x()},[t]);const x=async()=>{var j,m;try{p(!0);const[h,v]=await Promise.all([z.get("/admin/schools"),z.get("/admin/analytics")]);r(h.data),n(v.data)}catch(h){console.error("Failed to fetch data:",h),b(((m=(j=h.response)==null?void 0:j.data)==null?void 0:m.error)||"Failed to load dashboard data")}finally{p(!1)}},g=()=>{o(!1),x()},y=()=>{i(null),x()};return!t||t.role!=="super_admin"?e.jsx(qe,{to:"/",replace:!0}):d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Fs,{className:"h-8 w-8 mr-3 text-primary-600"}),"Super Admin Dashboard"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage all schools and view system-wide analytics"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[e.jsx(ds,{className:"h-5 w-5 mr-2"}),"Create School"]})]})}),f&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),a&&e.jsx(xb,{analytics:a}),e.jsx("div",{className:"mt-8",children:e.jsx(cb,{schools:s,onSchoolClick:j=>i(j),onRefresh:x})}),a&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(jo,{className:"h-6 w-6 mr-2 text-primary-600"}),"System Analytics"]}),e.jsx(mb,{analytics:a})]})}),c&&e.jsx(ub,{onClose:()=>o(!1),onSuccess:g}),l&&e.jsx(db,{school:l,onClose:()=>i(null),onUpdate:y})]})})},Ke=({children:t})=>{const{user:s,loading:r}=Le();return r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?e.jsx(pj,{children:t}):e.jsx(qe,{to:"/login",replace:!0})},hb=({children:t})=>{const{user:s,loading:r}=Le();return r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!s||s.role!=="super_admin"?e.jsx(qe,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})},pb=()=>{const{user:t}=Le();return console.log("AppContent - Current user:",t),e.jsxs(Kf,{children:[e.jsx(Me,{path:"/login",element:e.jsx(gj,{})}),e.jsx(Me,{path:"/admin",element:e.jsx(hb,{children:e.jsx(wu,{})})}),e.jsx(Me,{path:"/",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:(t==null?void 0:t.role)==="super_admin"?e.jsx(wu,{}):(t==null?void 0:t.role)==="teacher"?e.jsx(Aj,{}):e.jsx(wj,{})})})})}),e.jsx(Me,{path:"/student/:username",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(ju,{})})})})}),e.jsx(Me,{path:"/account/:accountNumber",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(ju,{})})})})}),e.jsx(Me,{path:"/bank",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx($j,{})})})})}),e.jsx(Me,{path:"/land",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Vj,{})})})})}),e.jsx(Me,{path:"/jobs",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Zj,{})})})})}),e.jsx(Me,{path:"/news",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Qj,{})})})})}),e.jsx(Me,{path:"/government",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Gj,{})})})})}),e.jsx(Me,{path:"/tenders",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Kj,{})})})})}),e.jsx(Me,{path:"/town-rules",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(Yj,{})})})})}),e.jsx(Me,{path:"/winkel",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(tb,{})})})})}),e.jsx(Me,{path:"/pizza-time",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(rb,{})})})})}),e.jsx(Me,{path:"/leaderboard",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(ab,{})})})})}),e.jsx(Me,{path:"/suggestions-bugs",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(nb,{})})})})}),e.jsx(Me,{path:"/disasters",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(lb,{})})})})}),e.jsx(Me,{path:"/chores",element:e.jsx(Ke,{children:e.jsx(Qe,{children:e.jsx(Ge,{children:e.jsx(ob,{})})})})}),e.jsx(Me,{path:"*",element:e.jsx(qe,{to:"/",replace:!0})})]})},fb=()=>e.jsx(ag,{children:e.jsx($y,{children:e.jsx(pb,{})})});fi.createRoot(document.getElementById("root")).render(e.jsx(Fu.StrictMode,{children:e.jsx(fb,{})}));
